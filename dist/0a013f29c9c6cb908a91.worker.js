!function(t){function i(n){if(e[n])return e[n].exports;var s=e[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var e={};return i.m=t,i.c=e,i.p="/",i(0)}([function(t,i,e){"use strict";function n(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i["default"]=t,i}function s(t){return t&&t.__esModule?t:{"default":t}}function o(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function r(t){var i=t.type,e=t.meta,n=t.payload;switch(i){case f.SETUP:return a(n,e);case f.LOOP:return g(n,e)}}function a(t,i){var e=[],n=[],s={};for(var o in t){var r=l({},t[o],{name:o});o===i?h(r)&&(s[o]=l({},t[o],{visible:!0})):-1!==f.BODIES.indexOf(r.type)?n.push(r):-1!==f.JOINTS.indexOf(r.type)&&e.push(r)}var a=!0,u=!1,c=void 0;try{for(var p,d=n[Symbol.iterator]();!(a=(p=d.next()).done);a=!0){var m=p.value;b(m)&&(s[m.name]=l({},t[m.name],{visible:!0}))}}catch(y){u=!0,c=y}finally{try{!a&&d["return"]&&d["return"]()}finally{if(u)throw c}}var v=!0,x=!1,g=void 0;try{for(var _,C=e[Symbol.iterator]();!(v=(_=C.next()).done);v=!0){var P=_.value;N(P)&&(s[P.name]=l({},t[P.name],{visible:!0}))}}catch(y){x=!0,g=y}finally{try{!v&&C["return"]&&C["return"]()}finally{if(x)throw g}}return s}function h(t){var i=t.G,e=t.iterations,n=t.timestep,s=t.broadphase;switch(y.gravity=new c["default"].Vec3(0,i,0),y.numIterations=e,y.timeStep=n/2,s){case f.BRUTE:y.broadPhase=new c["default"].BruteForceBroadPhase;break;case f.SWEEP:default:y.broadPhase=new c["default"].SAPBroadPhase;break;case f.TREE:y.broadPhase=new c["default"].DBVTBroadPhase}return!0}var l=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},u=e(98),c=s(u),p=e(99),d=e(97),m=e(96),f=n(m),y=new c["default"].World,v=[],x=[];self.onmessage=function(t){var i=t.data;return self.postMessage({type:i.type,meta:i.meta,payload:r(i)})};var g=function(t,i){y.step(),y.step();var e={},n=!0,s=!1,r=void 0;try{for(var a,h=v[Symbol.iterator]();!(n=(a=h.next()).done);n=!0){var u=a.value;if(!u.sleeping){var d=p.Vec3.scale(u.position,c["default"].WORLD_SCALE),m=p.Quat.scale(u.getQuaternion(),1);e=l({},e,o({},u.name,{pos:d,qua:m}))}}}catch(f){s=!0,r=f}finally{try{!n&&h["return"]&&h["return"]()}finally{if(s)throw r}}var g=!0,b=!1,N=void 0;try{for(var _,C=x[Symbol.iterator]();!(g=(_=C.next()).done);g=!0){var P=_.value,w=p.Vec3.scale(P.anchorPoint1,c["default"].WORLD_SCALE),k=p.Vec3.scale(P.anchorPoint2,c["default"].WORLD_SCALE);e=l({},e,o({},P.name,{anchors:[w,k]}))}}catch(f){b=!0,N=f}finally{try{!g&&C["return"]&&C["return"]()}finally{if(b)throw N}}return e},b=function(t){var i=t.name,e=t.type,n=t.pos,s=t.qua,o=t.dim,r=t.density,a=t.friction,h=t.restitution,l=t.dynamic,u=[n.x,n.y,n.z],d=p.Vec3.scale(p.Quat.toEuler(s),1),m=[d.x,d.y,d.z],x=o.width,g=o.height,b=o.depth,N=o.radius,_=[];switch(e){case f.BOX:_=[x,g,b];break;case f.SPHERE:_=[N];break;case f.CYLINDER:_=[g,N]}var C=y.add({name:i,type:e,pos:u,rot:m,size:_,density:r,friction:a,restitution:h,move:l});return v.push(C),C.type!==c["default"].BODY_NULL},N=function(t){var i=t.name,e=t.type,n=t.bodies,s=t.anchors,o=t.limits,r=t.axis,a=t.damping,h=t.stiffness,l=(t.maxForce,t.maxTorque,(0,d.uniqueUnion)(n[0],(0,d.getParent)(i))),u=(0,d.uniqueUnion)(n[1],(0,d.getParent)(i)),p=[r[0].x,r[0].y,r[0].z],m=[r[1].x,r[1].y,r[1].z],v=[s[0].x,s[0].y,s[0].z],g=[s[1].x,s[1].y,s[1].z],b=o[0],N=o[1],_=[1/h,a],C=y.add({name:i,type:e,body1:l,body2:u,axe1:p,axe2:m,pos1:v,pos2:g,spring:_,min:b,max:N,allowCollision:!0});return e===f.JOINT_DISTANCE&&x.push(C),C.type!==c["default"].JOINT_NULL}},function(t,i,e){"use strict";var n=function(t,i,e,n,s,o,r,a){if(!t){var h;if(void 0===i)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[e,n,s,o,r,a],u=0;h=new Error("Invariant Violation: "+i.replace(/%s/g,function(){return l[u++]}))}throw h.framesToPop=1,h}};t.exports=n},function(t,i){"use strict";function e(t,i){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var e=Object(t),n=Object.prototype.hasOwnProperty,s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o){var r=Object(o);for(var a in r)n.call(r,a)&&(e[a]=r[a])}}return e}t.exports=e},function(t,i,e){"use strict";var n=e(9),s=n;t.exports=s},function(t,i){"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=n},function(t,i,e){"use strict";function n(t,i){for(var e=Math.min(t.length,i.length),n=0;e>n;n++)if(t.charAt(n)!==i.charAt(n))return n;return t.length===i.length?-1:e}function s(t){return t?t.nodeType===F?t.documentElement:t.firstChild:null}function o(t){var i=s(t);return i&&K.getID(i)}function r(t){var i=a(t);if(i)if(U.hasOwnProperty(i)){var e=U[i];e!==t&&(c(e,i)?O(!1):void 0,U[i]=t)}else U[i]=t;return i}function a(t){return t&&t.getAttribute&&t.getAttribute(B)||""}function h(t,i){var e=a(t);e!==i&&delete U[e],t.setAttribute(B,i),U[i]=t}function l(t){return U.hasOwnProperty(t)&&c(U[t],t)||(U[t]=K.findReactNodeByID(t)),U[t]}function u(t){var i=k.get(t)._rootNodeID;return P.isNullComponentID(i)?null:(U.hasOwnProperty(i)&&c(U[i],i)||(U[i]=K.findReactNodeByID(i)),U[i])}function c(t,i){if(t){a(t)!==i?O(!1):void 0;var e=K.findReactContainerForID(i);if(e&&T(e,t))return!0}return!1}function p(t){delete U[t]}function d(t){var i=U[t];return i&&c(i,t)?void(H=i):!1}function m(t){H=null,w.traverseAncestors(t,d);var i=H;return H=null,i}function f(t,i,e,n,s,o){_.useCreateElement&&(o=z({},o),e.nodeType===F?o[X]=e:o[X]=e.ownerDocument);var r=E.mountComponent(t,i,n,o);t._renderedComponent._topLevelWrapper=t,K._mountImageIntoNode(r,e,s,n)}function y(t,i,e,n,s){var o=M.ReactReconcileTransaction.getPooled(n);o.perform(f,null,t,i,e,o,n,s),M.ReactReconcileTransaction.release(o)}function v(t,i){for(E.unmountComponent(t),i.nodeType===F&&(i=i.documentElement);i.lastChild;)i.removeChild(i.lastChild)}function x(t){var i=o(t);return i?i!==w.getReactRootIDFromNodeID(i):!1}function g(t){for(;t&&t.parentNode!==t;t=t.parentNode)if(1===t.nodeType){var i=a(t);if(i){var e,n=w.getReactRootIDFromNodeID(i),s=t;do if(e=a(s),s=s.parentNode,null==s)return null;while(e!==n);if(s===Z[n])return t}}return null}var b=e(17),N=e(28),_=(e(11),e(68)),C=e(6),P=e(75),w=e(18),k=e(23),A=e(78),S=e(7),E=e(14),I=e(46),M=e(8),z=e(2),D=e(25),T=e(90),L=e(53),O=e(1),R=e(35),V=e(56),B=(e(58),e(3),b.ID_ATTRIBUTE_NAME),U={},j=1,F=9,Y=11,X="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),W={},Z={},q=[],H=null,J=function(){};J.prototype.isReactComponent={},J.prototype.render=function(){return this.props};var K={TopLevelWrapper:J,_instancesByReactRootID:W,scrollMonitor:function(t,i){i()},_updateRootComponent:function(t,i,e,n){return K.scrollMonitor(e,function(){I.enqueueElementInternal(t,i),n&&I.enqueueCallbackInternal(t,n)}),t},_registerComponent:function(t,i){!i||i.nodeType!==j&&i.nodeType!==F&&i.nodeType!==Y?O(!1):void 0,N.ensureScrollValueMonitoring();var e=K.registerContainer(i);return W[e]=t,e},_renderNewRootComponent:function(t,i,e,n){var s=L(t,null),o=K._registerComponent(s,i);return M.batchedUpdates(y,s,o,i,e,n),s},renderSubtreeIntoContainer:function(t,i,e,n){return null==t||null==t._reactInternalInstance?O(!1):void 0,K._renderSubtreeIntoContainer(t,i,e,n)},_renderSubtreeIntoContainer:function(t,i,e,n){C.isValidElement(i)?void 0:O(!1);var r=new C(J,null,null,null,null,null,i),h=W[o(e)];if(h){var l=h._currentElement,u=l.props;if(V(u,i)){var c=h._renderedComponent.getPublicInstance(),p=n&&function(){n.call(c)};return K._updateRootComponent(h,r,e,p),c}K.unmountComponentAtNode(e)}var d=s(e),m=d&&!!a(d),f=x(e),y=m&&!h&&!f,v=K._renderNewRootComponent(r,e,y,null!=t?t._reactInternalInstance._processChildContext(t._reactInternalInstance._context):D)._renderedComponent.getPublicInstance();return n&&n.call(v),v},render:function(t,i,e){return K._renderSubtreeIntoContainer(null,t,i,e)},registerContainer:function(t){var i=o(t);return i&&(i=w.getReactRootIDFromNodeID(i)),i||(i=w.createReactRootID()),Z[i]=t,i},unmountComponentAtNode:function(t){!t||t.nodeType!==j&&t.nodeType!==F&&t.nodeType!==Y?O(!1):void 0;var i=o(t),e=W[i];if(!e){var n=(x(t),a(t));n&&n===w.getReactRootIDFromNodeID(n);return!1}return M.batchedUpdates(v,e,t),delete W[i],delete Z[i],!0},findReactContainerForID:function(t){var i=w.getReactRootIDFromNodeID(t),e=Z[i];return e},findReactNodeByID:function(t){var i=K.findReactContainerForID(t);return K.findComponentRoot(i,t)},getFirstReactDOM:function(t){return g(t)},findComponentRoot:function(t,i){var e=q,n=0,s=m(i)||t;for(e[0]=s.firstChild,e.length=1;n<e.length;){for(var o,r=e[n++];r;){var a=K.getID(r);a?i===a?o=r:w.isAncestorIDOf(a,i)&&(e.length=n=0,e.push(r.firstChild)):e.push(r.firstChild),r=r.nextSibling}if(o)return e.length=0,o}e.length=0,O(!1)},_mountImageIntoNode:function(t,i,e,o){if(!i||i.nodeType!==j&&i.nodeType!==F&&i.nodeType!==Y?O(!1):void 0,e){var r=s(i);if(A.canReuseMarkup(t,r))return;var a=r.getAttribute(A.CHECKSUM_ATTR_NAME);r.removeAttribute(A.CHECKSUM_ATTR_NAME);var h=r.outerHTML;r.setAttribute(A.CHECKSUM_ATTR_NAME,a);var l=t,u=n(l,h);" (client) "+l.substring(u-20,u+20)+"\n (server) "+h.substring(u-20,u+20);i.nodeType===F?O(!1):void 0}if(i.nodeType===F?O(!1):void 0,o.useCreateElement){for(;i.lastChild;)i.removeChild(i.lastChild);i.appendChild(t)}else R(i,t)},ownerDocumentContextKey:X,getReactRootID:o,getID:r,setID:h,getNode:l,getNodeFromInstance:u,isValid:c,purgeID:p};S.measureMethods(K,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=K},function(t,i,e){"use strict";var n=e(11),s=e(2),o=(e(33),"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103),r={key:!0,ref:!0,__self:!0,__source:!0},a=function(t,i,e,n,s,r,a){var h={$$typeof:o,type:t,key:i,ref:e,props:a,_owner:r};return h};a.createElement=function(t,i,e){var s,o={},h=null,l=null,u=null,c=null;if(null!=i){l=void 0===i.ref?null:i.ref,h=void 0===i.key?null:""+i.key,u=void 0===i.__self?null:i.__self,c=void 0===i.__source?null:i.__source;for(s in i)i.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(o[s]=i[s])}var p=arguments.length-2;if(1===p)o.children=e;else if(p>1){for(var d=Array(p),m=0;p>m;m++)d[m]=arguments[m+2];o.children=d}if(t&&t.defaultProps){var f=t.defaultProps;for(s in f)"undefined"==typeof o[s]&&(o[s]=f[s])}return a(t,h,l,u,c,n.current,o)},a.createFactory=function(t){var i=a.createElement.bind(null,t);return i.type=t,i},a.cloneAndReplaceKey=function(t,i){var e=a(t.type,i,t.ref,t._self,t._source,t._owner,t.props);return e},a.cloneAndReplaceProps=function(t,i){var e=a(t.type,t.key,t.ref,t._self,t._source,t._owner,i);return e},a.cloneElement=function(t,i,e){var o,h=s({},t.props),l=t.key,u=t.ref,c=t._self,p=t._source,d=t._owner;if(null!=i){void 0!==i.ref&&(u=i.ref,d=n.current),void 0!==i.key&&(l=""+i.key);for(o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(h[o]=i[o])}var m=arguments.length-2;if(1===m)h.children=e;else if(m>1){for(var f=Array(m),y=0;m>y;y++)f[y]=arguments[y+2];h.children=f}return a(t.type,l,u,c,p,d,h)},a.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o},t.exports=a},function(t,i,e){"use strict";function n(t,i,e){return e}var s={enableMeasure:!1,storedMeasure:n,measureMethods:function(t,i,e){},measure:function(t,i,e){return e},injection:{injectMeasure:function(t){s.storedMeasure=t}}};t.exports=s},function(t,i,e){"use strict";function n(){k.ReactReconcileTransaction&&b?void 0:y(!1)}function s(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=u.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled(!1)}function o(t,i,e,s,o,r){n(),b.batchedUpdates(t,i,e,s,o,r)}function r(t,i){return t._mountOrder-i._mountOrder}function a(t){var i=t.dirtyComponentsLength;i!==v.length?y(!1):void 0,v.sort(r);for(var e=0;i>e;e++){var n=v[e],s=n._pendingCallbacks;if(n._pendingCallbacks=null,d.performUpdateIfNecessary(n,t.reconcileTransaction),s)for(var o=0;o<s.length;o++)t.callbackQueue.enqueue(s[o],n.getPublicInstance())}}function h(t){return n(),b.isBatchingUpdates?void v.push(t):void b.batchedUpdates(h,t)}function l(t,i){b.isBatchingUpdates?void 0:y(!1),x.enqueue(t,i),g=!0}var u=e(40),c=e(12),p=e(7),d=e(14),m=e(32),f=e(2),y=e(1),v=[],x=u.getPooled(),g=!1,b=null,N={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),P()):v.length=0}},_={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[N,_];f(s.prototype,m.Mixin,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,u.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,i,e){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,i,e)}}),c.addPoolingTo(s);var P=function(){for(;v.length||g;){if(v.length){var t=s.getPooled();t.perform(a,null,t),s.release(t)}if(g){g=!1;var i=x;x=u.getPooled(),i.notifyAll(),u.release(i)}}};P=p.measure("ReactUpdates","flushBatchedUpdates",P);var w={injectReconcileTransaction:function(t){t?void 0:y(!1),k.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:y(!1),"function"!=typeof t.batchedUpdates?y(!1):void 0,"boolean"!=typeof t.isBatchingUpdates?y(!1):void 0,b=t}},k={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:h,flushBatchedUpdates:P,injection:w,asap:l};t.exports=k},function(t,i){"use strict";function e(t){return function(){return t}}function n(){}n.thatReturns=e,n.thatReturnsFalse=e(!1),n.thatReturnsTrue=e(!0),n.thatReturnsNull=e(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},t.exports=n},function(t,i,e){"use strict";var n=e(36),s=n({bubbled:null,captured:null}),o=n({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),r={topLevelTypes:o,PropagationPhases:s};t.exports=r},function(t,i){"use strict";var e={current:null};t.exports=e},function(t,i,e){"use strict";var n=e(1),s=function(t){var i=this;if(i.instancePool.length){var e=i.instancePool.pop();return i.call(e,t),e}return new i(t)},o=function(t,i){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t,i),n}return new e(t,i)},r=function(t,i,e){var n=this;if(n.instancePool.length){var s=n.instancePool.pop();return n.call(s,t,i,e),s}return new n(t,i,e)},a=function(t,i,e,n){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,t,i,e,n),o}return new s(t,i,e,n)},h=function(t,i,e,n,s){var o=this;if(o.instancePool.length){var r=o.instancePool.pop();return o.call(r,t,i,e,n,s),r}return new o(t,i,e,n,s)},l=function(t){var i=this;t instanceof i?void 0:n(!1),t.destructor(),i.instancePool.length<i.poolSize&&i.instancePool.push(t)},u=10,c=s,p=function(t,i){var e=t;return e.instancePool=[],e.getPooled=i||c,e.poolSize||(e.poolSize=u),e.release=l,e},d={addPoolingTo:p,oneArgumentPooler:s,twoArgumentPooler:o,threeArgumentPooler:r,fourArgumentPooler:a,fiveArgumentPooler:h};t.exports=d},function(t,i){"use strict";var e=function(t){var i;for(i in t)if(t.hasOwnProperty(i))return i;return null};t.exports=e},function(t,i,e){"use strict";function n(){s.attachRefs(this,this._currentElement)}var s=e(170),o={mountComponent:function(t,i,e,s){var o=t.mountComponent(i,e,s);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(n,t),o},unmountComponent:function(t){s.detachRefs(t,t._currentElement),t.unmountComponent()},receiveComponent:function(t,i,e,o){var r=t._currentElement;if(i!==r||o!==t._context){var a=s.shouldUpdateRefs(r,i);a&&s.detachRefs(t,r),t.receiveComponent(i,e,o),a&&t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(n,t)}},performUpdateIfNecessary:function(t,i){t.performUpdateIfNecessary(i)}};t.exports=o},function(t,i,e){"use strict";function n(t,i,e,n){this.dispatchConfig=t,this.dispatchMarker=i,this.nativeEvent=e,this.target=n,this.currentTarget=n;var s=this.constructor.Interface;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];a?this[o]=a(e):this[o]=e[o]}var h=null!=e.defaultPrevented?e.defaultPrevented:e.returnValue===!1;h?this.isDefaultPrevented=r.thatReturnsTrue:this.isDefaultPrevented=r.thatReturnsFalse,this.isPropagationStopped=r.thatReturnsFalse}var s=e(12),o=e(2),r=e(9),a=(e(3),{type:null,currentTarget:r.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null});o(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=r.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=r.thatReturnsTrue)},persist:function(){this.isPersistent=r.thatReturnsTrue},isPersistent:r.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var i in t)this[i]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=a,n.augmentClass=function(t,i){var e=this,n=Object.create(e.prototype);o(n,t.prototype),t.prototype=n,t.prototype.constructor=t,t.Interface=o({},e.Interface,i),t.augmentClass=e.augmentClass,s.addPoolingTo(t,s.fourArgumentPooler)},s.addPoolingTo(n,s.fourArgumentPooler),t.exports=n},function(t,i){function e(t){var i=typeof t;return!!t&&("object"==i||"function"==i)}t.exports=e},function(t,i,e){"use strict";function n(t,i){return(t&i)===i}var s=e(1),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var i=o,e=t.Properties||{},r=t.DOMAttributeNamespaces||{},h=t.DOMAttributeNames||{},l=t.DOMPropertyNames||{},u=t.DOMMutationMethods||{};t.isCustomAttribute&&a._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var c in e){a.properties.hasOwnProperty(c)?s(!1):void 0;var p=c.toLowerCase(),d=e[c],m={attributeName:p,attributeNamespace:null,propertyName:c,mutationMethod:null,mustUseAttribute:n(d,i.MUST_USE_ATTRIBUTE),mustUseProperty:n(d,i.MUST_USE_PROPERTY),hasSideEffects:n(d,i.HAS_SIDE_EFFECTS),hasBooleanValue:n(d,i.HAS_BOOLEAN_VALUE),hasNumericValue:n(d,i.HAS_NUMERIC_VALUE),hasPositiveNumericValue:n(d,i.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:n(d,i.HAS_OVERLOADED_BOOLEAN_VALUE)};if(m.mustUseAttribute&&m.mustUseProperty?s(!1):void 0,!m.mustUseProperty&&m.hasSideEffects?s(!1):void 0,m.hasBooleanValue+m.hasNumericValue+m.hasOverloadedBooleanValue<=1?void 0:s(!1),h.hasOwnProperty(c)){var f=h[c];m.attributeName=f}r.hasOwnProperty(c)&&(m.attributeNamespace=r[c]),l.hasOwnProperty(c)&&(m.propertyName=l[c]),u.hasOwnProperty(c)&&(m.mutationMethod=u[c]),a.properties[c]=m}}},r={},a={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var i=0;i<a._isCustomAttributeFunctions.length;i++){var e=a._isCustomAttributeFunctions[i];if(e(t))return!0}return!1},getDefaultValueForProperty:function(t,i){var e,n=r[t];return n||(r[t]=n={}),i in n||(e=document.createElement(t),n[i]=e[i]),n[i]},injection:o};t.exports=a},function(t,i,e){"use strict";function n(t){return d+t.toString(36)}function s(t,i){return t.charAt(i)===d||i===t.length}function o(t){return""===t||t.charAt(0)===d&&t.charAt(t.length-1)!==d}function r(t,i){return 0===i.indexOf(t)&&s(i,t.length)}function a(t){return t?t.substr(0,t.lastIndexOf(d)):""}function h(t,i){if(o(t)&&o(i)?void 0:p(!1),r(t,i)?void 0:p(!1),t===i)return t;var e,n=t.length+m;for(e=n;e<i.length&&!s(i,e);e++);return i.substr(0,e)}function l(t,i){var e=Math.min(t.length,i.length);if(0===e)return"";for(var n=0,r=0;e>=r;r++)if(s(t,r)&&s(i,r))n=r;else if(t.charAt(r)!==i.charAt(r))break;var a=t.substr(0,n);return o(a)?void 0:p(!1),a}function u(t,i,e,n,s,o){t=t||"",i=i||"",t===i?p(!1):void 0;var l=r(i,t);l||r(t,i)?void 0:p(!1);for(var u=0,c=l?a:h,d=t;;d=c(d,i)){var m;if(s&&d===t||o&&d===i||(m=e(d,l,n)),m===!1||d===i)break;u++<f?void 0:p(!1)}}var c=e(83),p=e(1),d=".",m=d.length,f=1e4,y={createReactRootID:function(){return n(c.createReactRootIndex())},createReactID:function(t,i){return t+i},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===d&&t.length>1){var i=t.indexOf(d,1);return i>-1?t.substr(0,i):t}return null},traverseEnterLeave:function(t,i,e,n,s){var o=l(t,i);o!==t&&u(t,o,e,n,!1,!0),o!==i&&u(o,i,e,s,!0,!1)},traverseTwoPhase:function(t,i,e){t&&(u("",t,i,e,!0,!1),u(t,"",i,e,!1,!0))},traverseTwoPhaseSkipTarget:function(t,i,e){t&&(u("",t,i,e,!0,!0),u(t,"",i,e,!0,!0))},traverseAncestors:function(t,i,e){u("",t,i,e,!0,!1)},getFirstCommonAncestorID:l,_getNextDescendantID:h,isAncestorIDOf:r,SEPARATOR:d};t.exports=y},function(t,i,e){function n(t){return null!=t&&o(s(t))}var s=e(123),o=e(27);t.exports=n},function(t,i){function e(t){return!!t&&"object"==typeof t}t.exports=e},function(t,i,e){"use strict";var n=e(64),s=e(147),o=e(76),r=e(85),a=e(86),h=e(1),l=(e(3),{}),u=null,c=function(t,i){t&&(s.executeDispatchesInOrder(t,i),t.isPersistent()||t.constructor.release(t))},p=function(t){return c(t,!0)},d=function(t){return c(t,!1)},m=null,f={injection:{injectMount:s.injection.injectMount,injectInstanceHandle:function(t){m=t},getInstanceHandle:function(){return m},injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},eventNameDispatchConfigs:n.eventNameDispatchConfigs,registrationNameModules:n.registrationNameModules,putListener:function(t,i,e){"function"!=typeof e?h(!1):void 0;var s=l[i]||(l[i]={});s[t]=e;var o=n.registrationNameModules[i];o&&o.didPutListener&&o.didPutListener(t,i,e)},getListener:function(t,i){var e=l[i];return e&&e[t]},deleteListener:function(t,i){var e=n.registrationNameModules[i];e&&e.willDeleteListener&&e.willDeleteListener(t,i);var s=l[i];s&&delete s[t]},deleteAllListeners:function(t){for(var i in l)if(l[i][t]){var e=n.registrationNameModules[i];e&&e.willDeleteListener&&e.willDeleteListener(t,i),delete l[i][t]}},extractEvents:function(t,i,e,s,o){for(var a,h=n.plugins,l=0;l<h.length;l++){var u=h[l];if(u){var c=u.extractEvents(t,i,e,s,o);c&&(a=r(a,c))}}return a},enqueueEvents:function(t){t&&(u=r(u,t))},processEventQueue:function(t){var i=u;u=null,t?a(i,p):a(i,d),u?h(!1):void 0,o.rethrowCaughtError()},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=f},function(t,i,e){"use strict";function n(t,i,e){var n=i.dispatchConfig.phasedRegistrationNames[e];return x(t,n)}function s(t,i,e){var s=i?v.bubbled:v.captured,o=n(t,e,s);o&&(e._dispatchListeners=f(e._dispatchListeners,o),e._dispatchIDs=f(e._dispatchIDs,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&m.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,s,t)}function r(t){t&&t.dispatchConfig.phasedRegistrationNames&&m.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(t.dispatchMarker,s,t)}function a(t,i,e){if(e&&e.dispatchConfig.registrationName){var n=e.dispatchConfig.registrationName,s=x(t,n);s&&(e._dispatchListeners=f(e._dispatchListeners,s),e._dispatchIDs=f(e._dispatchIDs,t))}}function h(t){t&&t.dispatchConfig.registrationName&&a(t.dispatchMarker,null,t)}function l(t){y(t,o)}function u(t){y(t,r)}function c(t,i,e,n){m.injection.getInstanceHandle().traverseEnterLeave(e,n,a,t,i)}function p(t){y(t,h)}var d=e(10),m=e(21),f=(e(3),e(85)),y=e(86),v=d.PropagationPhases,x=m.getListener,g={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:u,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:c};t.exports=g},function(t,i){"use strict";var e={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,i){t._reactInternalInstance=i}};t.exports=e},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(15),o=e(51),r={view:function(t){if(t.view)return t.view;var i=o(t);if(null!=i&&i.window===i)return i;var e=i.ownerDocument;return e?e.defaultView||e.parentWindow:window},detail:function(t){return t.detail||0}};s.augmentClass(n,r),t.exports=n},function(t,i,e){"use strict";var n={};t.exports=n},function(t,i,e){function n(t,i){var e=null==t?void 0:t[i];return s(e)?e:void 0}var s=e(128);t.exports=n},function(t,i){function e(t){return"number"==typeof t&&t>-1&&t%1==0&&n>=t}var n=9007199254740991;t.exports=e},function(t,i,e){"use strict";function n(t){return Object.prototype.hasOwnProperty.call(t,y)||(t[y]=m++,p[t[y]]={}),p[t[y]]}var s=e(10),o=e(21),r=e(64),a=e(163),h=e(7),l=e(84),u=e(2),c=e(54),p={},d=!1,m=0,f={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},y="_reactListenersID"+String(Math.random()).slice(2),v=u({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=t}},setEnabled:function(t){v.ReactEventListener&&v.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(t,i){for(var e=i,o=n(e),a=r.registrationNameDependencies[t],h=s.topLevelTypes,l=0;l<a.length;l++){var u=a[l];o.hasOwnProperty(u)&&o[u]||(u===h.topWheel?c("wheel")?v.ReactEventListener.trapBubbledEvent(h.topWheel,"wheel",e):c("mousewheel")?v.ReactEventListener.trapBubbledEvent(h.topWheel,"mousewheel",e):v.ReactEventListener.trapBubbledEvent(h.topWheel,"DOMMouseScroll",e):u===h.topScroll?c("scroll",!0)?v.ReactEventListener.trapCapturedEvent(h.topScroll,"scroll",e):v.ReactEventListener.trapBubbledEvent(h.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):u===h.topFocus||u===h.topBlur?(c("focus",!0)?(v.ReactEventListener.trapCapturedEvent(h.topFocus,"focus",e),v.ReactEventListener.trapCapturedEvent(h.topBlur,"blur",e)):c("focusin")&&(v.ReactEventListener.trapBubbledEvent(h.topFocus,"focusin",e),v.ReactEventListener.trapBubbledEvent(h.topBlur,"focusout",e)),o[h.topBlur]=!0,o[h.topFocus]=!0):f.hasOwnProperty(u)&&v.ReactEventListener.trapBubbledEvent(u,f[u],e),o[u]=!0)}},trapBubbledEvent:function(t,i,e){return v.ReactEventListener.trapBubbledEvent(t,i,e)},trapCapturedEvent:function(t,i,e){return v.ReactEventListener.trapCapturedEvent(t,i,e)},ensureScrollValueMonitoring:function(){if(!d){var t=l.refreshScrollValues;v.ReactEventListener.monitorScrollValue(t),d=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});h.measureMethods(v,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),t.exports=v},function(t,i,e){"use strict";var n={};t.exports=n},function(t,i,e){"use strict";var n=e(36),s=n({prop:null,context:null,childContext:null});t.exports=s},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(24),o=e(84),r=e(50),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:r,button:function(t){var i=t.button;return"which"in t?i:2===i?2:4===i?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};s.augmentClass(n,a),t.exports=n},function(t,i,e){"use strict";var n=e(1),s={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,i,e,s,o,r,a,h){this.isInTransaction()?n(!1):void 0;var l,u;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),u=t.call(i,e,s,o,r,a,h),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return u},initializeAll:function(t){for(var i=this.transactionWrappers,e=t;e<i.length;e++){var n=i[e];try{this.wrapperInitData[e]=o.OBSERVED_ERROR,this.wrapperInitData[e]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[e]===o.OBSERVED_ERROR)try{this.initializeAll(e+1)}catch(s){}}}},closeAll:function(t){this.isInTransaction()?void 0:n(!1);for(var i=this.transactionWrappers,e=t;e<i.length;e++){var s,r=i[e],a=this.wrapperInitData[e];try{s=!0,a!==o.OBSERVED_ERROR&&r.close&&r.close.call(this,a),s=!1}finally{if(s)try{this.closeAll(e+1)}catch(h){}}}this.wrapperInitData.length=0}},o={Mixin:s,OBSERVED_ERROR:{}};t.exports=o},function(t,i,e){"use strict";var n=!1;t.exports=n},function(t,i){"use strict";function e(t){return s[t]}function n(t){return(""+t).replace(o,e)}var s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=n},function(t,i,e){"use strict";var n=e(4),s=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,r=function(t,i){
t.innerHTML=i};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(r=function(t,i){MSApp.execUnsafeLocalFunction(function(){t.innerHTML=i})}),n.canUseDOM){var a=document.createElement("div");a.innerHTML=" ",""===a.innerHTML&&(r=function(t,i){if(t.parentNode&&t.parentNode.replaceChild(t,t),s.test(i)||"<"===i[0]&&o.test(i)){t.innerHTML=String.fromCharCode(65279)+i;var e=t.firstChild;1===e.data.length?t.removeChild(e):e.deleteData(0,1)}else t.innerHTML=i})}t.exports=r},function(t,i,e){"use strict";var n=e(1),s=function(t){var i,e={};t instanceof Object&&!Array.isArray(t)?void 0:n(!1);for(i in t)t.hasOwnProperty(i)&&(e[i]=i);return e};t.exports=s},function(t,i){function e(t,i){return t="number"==typeof t||n.test(t)?+t:-1,i=null==i?s:i,t>-1&&t%1==0&&i>t}var n=/^\d+$/,s=9007199254740991;t.exports=e},function(t,i,e){function n(t){return o(t)&&s(t)&&a.call(t,"callee")&&!h.call(t,"callee")}var s=e(19),o=e(20),r=Object.prototype,a=r.hasOwnProperty,h=r.propertyIsEnumerable;t.exports=n},function(t,i,e){var n=e(26),s=e(27),o=e(20),r="[object Array]",a=Object.prototype,h=a.toString,l=n(Array,"isArray"),u=l||function(t){return o(t)&&s(t.length)&&h.call(t)==r};t.exports=u},function(t,i,e){"use strict";function n(){this._callbacks=null,this._contexts=null}var s=e(12),o=e(2),r=e(1);o(n.prototype,{enqueue:function(t,i){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(i)},notifyAll:function(){var t=this._callbacks,i=this._contexts;if(t){t.length!==i.length?r(!1):void 0,this._callbacks=null,this._contexts=null;for(var e=0;e<t.length;e++)t[e].call(i[e]);t.length=0,i.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),s.addPoolingTo(n),t.exports=n},function(t,i,e){"use strict";function n(t){return u.hasOwnProperty(t)?!0:l.hasOwnProperty(t)?!1:h.test(t)?(u[t]=!0,!0):(l[t]=!0,!1)}function s(t,i){return null==i||t.hasBooleanValue&&!i||t.hasNumericValue&&isNaN(i)||t.hasPositiveNumericValue&&1>i||t.hasOverloadedBooleanValue&&i===!1}var o=e(17),r=e(7),a=e(193),h=(e(3),/^[a-zA-Z_][\w\.\-]*$/),l={},u={},c={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,i){t.setAttribute(o.ID_ATTRIBUTE_NAME,i)},createMarkupForProperty:function(t,i){var e=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(e){if(s(e,i))return"";var n=e.attributeName;return e.hasBooleanValue||e.hasOverloadedBooleanValue&&i===!0?n+'=""':n+"="+a(i)}return o.isCustomAttribute(t)?null==i?"":t+"="+a(i):null},createMarkupForCustomAttribute:function(t,i){return n(t)&&null!=i?t+"="+a(i):""},setValueForProperty:function(t,i,e){var n=o.properties.hasOwnProperty(i)?o.properties[i]:null;if(n){var r=n.mutationMethod;if(r)r(t,e);else if(s(n,e))this.deleteValueForProperty(t,i);else if(n.mustUseAttribute){var a=n.attributeName,h=n.attributeNamespace;h?t.setAttributeNS(h,a,""+e):n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?t.setAttribute(a,""):t.setAttribute(a,""+e)}else{var l=n.propertyName;n.hasSideEffects&&""+t[l]==""+e||(t[l]=e)}}else o.isCustomAttribute(i)&&c.setValueForAttribute(t,i,e)},setValueForAttribute:function(t,i,e){n(i)&&(null==e?t.removeAttribute(i):t.setAttribute(i,""+e))},deleteValueForProperty:function(t,i){var e=o.properties.hasOwnProperty(i)?o.properties[i]:null;if(e){var n=e.mutationMethod;if(n)n(t,void 0);else if(e.mustUseAttribute)t.removeAttribute(e.attributeName);else{var s=e.propertyName,r=o.getDefaultValueForProperty(t.nodeName,s);e.hasSideEffects&&""+t[s]===r||(t[s]=r)}}else o.isCustomAttribute(i)&&t.removeAttribute(i)}};r.measureMethods(c,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),t.exports=c},function(t,i,e){"use strict";function n(t){null!=t.checkedLink&&null!=t.valueLink?l(!1):void 0}function s(t){n(t),null!=t.value||null!=t.onChange?l(!1):void 0}function o(t){n(t),null!=t.checked||null!=t.onChange?l(!1):void 0}function r(t){if(t){var i=t.getName();if(i)return" Check the render method of `"+i+"`."}return""}var a=e(82),h=e(30),l=e(1),u=(e(3),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),c={value:function(t,i,e){return!t[i]||u[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,i,e){return!t[i]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:a.func},p={},d={checkPropTypes:function(t,i,e){for(var n in c){if(c.hasOwnProperty(n))var s=c[n](i,n,t,h.prop);if(s instanceof Error&&!(s.message in p)){p[s.message]=!0;r(e)}}},getValue:function(t){return t.valueLink?(s(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,i){return t.valueLink?(s(t),t.valueLink.requestChange(i.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(i.target.checked)):t.onChange?t.onChange.call(void 0,i):void 0}};t.exports=d},function(t,i,e){"use strict";var n=e(45),s=e(5),o={processChildrenUpdates:n.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:n.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(t){s.purgeID(t)}};t.exports=o},function(t,i,e){"use strict";var n=e(1),s=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){s?n(!1):void 0,o.unmountIDFromEnvironment=t.unmountIDFromEnvironment,o.replaceNodeWithMarkupByID=t.replaceNodeWithMarkupByID,o.processChildrenUpdates=t.processChildrenUpdates,s=!0}}};t.exports=o},function(t,i,e){"use strict";var n=e(63),s=e(41),o=e(5),r=e(7),a=e(1),h={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:function(t,i,e){var n=o.getNode(t);h.hasOwnProperty(i)?a(!1):void 0,null!=e?s.setValueForProperty(n,i,e):s.deleteValueForProperty(n,i)},dangerouslyReplaceNodeWithMarkupByID:function(t,i){var e=o.getNode(t);n.dangerouslyReplaceNodeWithMarkup(e,i)},dangerouslyProcessChildrenUpdates:function(t,i){for(var e=0;e<t.length;e++)t[e].parentNode=o.getNode(t[e].parentID);n.processUpdates(t,i)}};r.measureMethods(l,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=l},function(t,i,e){"use strict";function n(t){a.enqueueUpdate(t)}function s(t,i){var e=r.get(t);return e?e:null}var o=(e(11),e(6)),r=e(23),a=e(8),h=e(2),l=e(1),u=(e(3),{isMounted:function(t){var i=r.get(t);return i?!!i._renderedComponent:!1},enqueueCallback:function(t,i){"function"!=typeof i?l(!1):void 0;var e=s(t);return e?(e._pendingCallbacks?e._pendingCallbacks.push(i):e._pendingCallbacks=[i],void n(e)):null},enqueueCallbackInternal:function(t,i){"function"!=typeof i?l(!1):void 0,t._pendingCallbacks?t._pendingCallbacks.push(i):t._pendingCallbacks=[i],n(t)},enqueueForceUpdate:function(t){var i=s(t,"forceUpdate");i&&(i._pendingForceUpdate=!0,n(i))},enqueueReplaceState:function(t,i){var e=s(t,"replaceState");e&&(e._pendingStateQueue=[i],e._pendingReplaceState=!0,n(e))},enqueueSetState:function(t,i){var e=s(t,"setState");if(e){var o=e._pendingStateQueue||(e._pendingStateQueue=[]);o.push(i),n(e)}},enqueueSetProps:function(t,i){var e=s(t,"setProps");e&&u.enqueueSetPropsInternal(e,i)},enqueueSetPropsInternal:function(t,i){var e=t._topLevelWrapper;e?void 0:l(!1);var s=e._pendingElement||e._currentElement,r=s.props,a=h({},r.props,i);e._pendingElement=o.cloneAndReplaceProps(s,o.cloneAndReplaceProps(r,a)),n(e)},enqueueReplaceProps:function(t,i){var e=s(t,"replaceProps");e&&u.enqueueReplacePropsInternal(e,i)},enqueueReplacePropsInternal:function(t,i){var e=t._topLevelWrapper;e?void 0:l(!1);var s=e._pendingElement||e._currentElement,r=s.props;e._pendingElement=o.cloneAndReplaceProps(s,o.cloneAndReplaceProps(r,i)),n(e)},enqueueElementInternal:function(t,i){t._pendingElement=i,n(t)}});t.exports=u},function(t,i){"use strict";t.exports="0.14.3"},function(t,i,e){"use strict";function n(t){return null==t?null:1===t.nodeType?t:s.has(t)?o.getNodeFromInstance(t):(null!=t.render&&"function"==typeof t.render?r(!1):void 0,void r(!1))}var s=(e(11),e(23)),o=e(5),r=e(1);e(3);t.exports=n},function(t,i){"use strict";function e(t){var i,e=t.keyCode;return"charCode"in t?(i=t.charCode,0===i&&13===e&&(i=13)):i=e,i>=32||13===i?i:0}t.exports=e},function(t,i){"use strict";function e(t){var i=this,e=i.nativeEvent;if(e.getModifierState)return e.getModifierState(t);var n=s[t];return n?!!e[n]:!1}function n(t){return e}var s={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=n},function(t,i){"use strict";function e(t){var i=t.target||t.srcElement||window;return 3===i.nodeType?i.parentNode:i}t.exports=e},function(t,i){"use strict";function e(t){var i=t&&(n&&t[n]||t[s]);return"function"==typeof i?i:void 0}var n="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";t.exports=e},function(t,i,e){"use strict";function n(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function s(t){var i;if(null===t||t===!1)i=new r(s);else if("object"==typeof t){var e=t;!e||"function"!=typeof e.type&&"string"!=typeof e.type?l(!1):void 0,i="string"==typeof e.type?a.createInternalComponent(e):n(e.type)?new e.type(e):new u}else"string"==typeof t||"number"==typeof t?i=a.createInstanceForText(t):l(!1);return i.construct(t),i._mountIndex=0,i._mountImage=null,i}var o=e(153),r=e(74),a=e(80),h=e(2),l=e(1),u=(e(3),function(){});h(u.prototype,o.Mixin,{_instantiateReactComponent:s}),t.exports=s},function(t,i,e){"use strict";function n(t,i){if(!o.canUseDOM||i&&!("addEventListener"in document))return!1;var e="on"+t,n=e in document;if(!n){var r=document.createElement("div");r.setAttribute(e,"return;"),n="function"==typeof r[e]}return!n&&s&&"wheel"===t&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var s,o=e(4);o.canUseDOM&&(s=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=n},function(t,i,e){"use strict";var n=e(4),s=e(34),o=e(35),r=function(t,i){t.textContent=i};n.canUseDOM&&("textContent"in document.documentElement||(r=function(t,i){o(t,s(i))})),t.exports=r},function(t,i){"use strict";function e(t,i){var e=null===t||t===!1,n=null===i||i===!1;if(e||n)return e===n;var s=typeof t,o=typeof i;return"string"===s||"number"===s?"string"===o||"number"===o:"object"===o&&t.type===i.type&&t.key===i.key}t.exports=e},function(t,i,e){"use strict";function n(t){return f[t]}function s(t,i){return t&&null!=t.key?r(t.key):i.toString(36)}function o(t){return(""+t).replace(y,n)}function r(t){return"$"+o(t)}function a(t,i,e,n){var o=typeof t;if(("undefined"===o||"boolean"===o)&&(t=null),null===t||"string"===o||"number"===o||l.isValidElement(t))return e(n,t,""===i?d+s(t,0):i),1;var h,u,f=0,y=""===i?d:i+m;if(Array.isArray(t))for(var v=0;v<t.length;v++)h=t[v],u=y+s(h,v),f+=a(h,u,e,n);else{var x=c(t);if(x){var g,b=x.call(t);if(x!==t.entries)for(var N=0;!(g=b.next()).done;)h=g.value,u=y+s(h,N++),f+=a(h,u,e,n);else for(;!(g=b.next()).done;){var _=g.value;_&&(h=_[1],u=y+r(_[0])+m+s(h,0),f+=a(h,u,e,n))}}else if("object"===o){String(t);p(!1)}}return f}function h(t,i,e){return null==t?0:a(t,"",i,e)}var l=(e(11),e(6)),u=e(18),c=e(52),p=e(1),d=(e(3),u.SEPARATOR),m=":",f={"=":"=0",".":"=1",":":"=2"},y=/[=.:]/g;t.exports=h},function(t,i,e){"use strict";var n=(e(2),e(9)),s=(e(3),n);t.exports=s},function(t,i){"use strict";function e(){return n.supports||!1}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=e;var n={},s={supports:!0};try{n.__proto__=s}catch(o){}},function(t,i){function e(t,i){if("function"!=typeof t)throw new TypeError(n);return i=s(void 0===i?t.length-1:+i||0,0),function(){for(var e=arguments,n=-1,o=s(e.length-i,0),r=Array(o);++n<o;)r[n]=e[i+n];switch(i){case 0:return t.call(this,r);case 1:return t.call(this,e[0],r);case 2:return t.call(this,e[0],e[1],r)}var a=Array(i+1);for(n=-1;++n<i;)a[n]=e[n];return a[i]=r,t.apply(this,a)}}var n="Expected a function",s=Math.max;t.exports=e},function(t,i,e){var n=e(26),s=e(19),o=e(16),r=e(126),a=n(Object,"keys"),h=a?function(t){var i=null==t?void 0:t.constructor;return"function"==typeof i&&i.prototype===t||"function"!=typeof t&&s(t)?r(t):o(t)?a(t):[]}:r;t.exports=h},function(t,i){"use strict";function e(t,i){return t+i.charAt(0).toUpperCase()+i.substring(1)}var n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},s=["Webkit","ms","Moz","O"];Object.keys(n).forEach(function(t){s.forEach(function(i){n[e(i,t)]=n[t]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},r={isUnitlessNumber:n,shorthandPropertyExpansions:o};t.exports=r},function(t,i,e){"use strict";function n(t,i,e){var n=e>=t.childNodes.length?null:t.childNodes.item(e);t.insertBefore(i,n)}var s=e(144),o=e(79),r=e(7),a=e(35),h=e(55),l=e(1),u={dangerouslyReplaceNodeWithMarkup:s.dangerouslyReplaceNodeWithMarkup,updateTextContent:h,processUpdates:function(t,i){for(var e,r=null,u=null,c=0;c<t.length;c++)if(e=t[c],e.type===o.MOVE_EXISTING||e.type===o.REMOVE_NODE){var p=e.fromIndex,d=e.parentNode.childNodes[p],m=e.parentID;d?void 0:l(!1),r=r||{},r[m]=r[m]||[],r[m][p]=d,u=u||[],u.push(d)}var f;if(f=i.length&&"string"==typeof i[0]?s.dangerouslyRenderMarkup(i):i,u)for(var y=0;y<u.length;y++)u[y].parentNode.removeChild(u[y]);for(var v=0;v<t.length;v++)switch(e=t[v],e.type){case o.INSERT_MARKUP:n(e.parentNode,f[e.markupIndex],e.toIndex);break;case o.MOVE_EXISTING:n(e.parentNode,r[e.parentID][e.fromIndex],e.toIndex);break;case o.SET_MARKUP:a(e.parentNode,e.content);break;case o.TEXT_CONTENT:h(e.parentNode,e.content);break;case o.REMOVE_NODE:}}};r.measureMethods(u,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),t.exports=u},function(t,i,e){"use strict";function n(){if(a)for(var t in h){var i=h[t],e=a.indexOf(t);if(e>-1?void 0:r(!1),!l.plugins[e]){i.extractEvents?void 0:r(!1),l.plugins[e]=i;var n=i.eventTypes;for(var o in n)s(n[o],i,o)?void 0:r(!1)}}}function s(t,i,e){l.eventNameDispatchConfigs.hasOwnProperty(e)?r(!1):void 0,l.eventNameDispatchConfigs[e]=t;var n=t.phasedRegistrationNames;if(n){for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];o(a,i,e)}return!0}return t.registrationName?(o(t.registrationName,i,e),!0):!1}function o(t,i,e){l.registrationNameModules[t]?r(!1):void 0,l.registrationNameModules[t]=i,l.registrationNameDependencies[t]=i.eventTypes[e].dependencies}var r=e(1),a=null,h={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){a?r(!1):void 0,a=Array.prototype.slice.call(t),n()},injectEventPluginsByName:function(t){var i=!1;for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];h.hasOwnProperty(e)&&h[e]===s||(h[e]?r(!1):void 0,h[e]=s,i=!0)}i&&n()},getPluginModuleForEvent:function(t){var i=t.dispatchConfig;if(i.registrationName)return l.registrationNameModules[i.registrationName]||null;for(var e in i.phasedRegistrationNames)if(i.phasedRegistrationNames.hasOwnProperty(e)){var n=l.registrationNameModules[i.phasedRegistrationNames[e]];if(n)return n}return null},_resetEventPlugins:function(){a=null;for(var t in h)h.hasOwnProperty(t)&&delete h[t];l.plugins.length=0;var i=l.eventNameDispatchConfigs;for(var e in i)i.hasOwnProperty(e)&&delete i[e];var n=l.registrationNameModules;for(var s in n)n.hasOwnProperty(s)&&delete n[s]}};t.exports=l},function(t,i,e){"use strict";function n(t){return(""+t).replace(b,"//")}function s(t,i){this.func=t,this.context=i,this.count=0}function o(t,i,e){var n=t.func,s=t.context;n.call(s,i,t.count++)}function r(t,i,e){if(null==t)return t;var n=s.getPooled(i,e);v(t,o,n),s.release(n)}function a(t,i,e,n){this.result=t,this.keyPrefix=i,this.func=e,this.context=n,this.count=0}function h(t,i,e){var s=t.result,o=t.keyPrefix,r=t.func,a=t.context,h=r.call(a,i,t.count++);Array.isArray(h)?l(h,s,e,y.thatReturnsArgument):null!=h&&(f.isValidElement(h)&&(h=f.cloneAndReplaceKey(h,o+(h!==i?n(h.key||"")+"/":"")+e)),s.push(h))}function l(t,i,e,s,o){var r="";null!=e&&(r=n(e)+"/");var l=a.getPooled(i,r,s,o);v(t,h,l),a.release(l)}function u(t,i,e){if(null==t)return t;var n=[];return l(t,n,null,i,e),n}function c(t,i,e){return null}function p(t,i){return v(t,c,null)}function d(t){var i=[];return l(t,i,null,y.thatReturnsArgument),i}var m=e(12),f=e(6),y=e(9),v=e(57),x=m.twoArgumentPooler,g=m.fourArgumentPooler,b=/\/(?!\/)/g;s.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},m.addPoolingTo(s,x),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},m.addPoolingTo(a,g);var N={forEach:r,map:u,mapIntoWithKeyPrefixInternal:l,count:p,toArray:d};t.exports=N},function(t,i,e){"use strict";function n(t,i){var e=_.hasOwnProperty(i)?_[i]:null;P.hasOwnProperty(i)&&(e!==b.OVERRIDE_BASE?y(!1):void 0),t.hasOwnProperty(i)&&(e!==b.DEFINE_MANY&&e!==b.DEFINE_MANY_MERGED?y(!1):void 0)}function s(t,i){if(i){"function"==typeof i?y(!1):void 0,p.isValidElement(i)?y(!1):void 0;var e=t.prototype;i.hasOwnProperty(g)&&C.mixins(t,i.mixins);for(var s in i)if(i.hasOwnProperty(s)&&s!==g){var o=i[s];if(n(e,s),C.hasOwnProperty(s))C[s](t,o);else{var r=_.hasOwnProperty(s),l=e.hasOwnProperty(s),u="function"==typeof o,c=u&&!r&&!l&&i.autobind!==!1;if(c)e.__reactAutoBindMap||(e.__reactAutoBindMap={}),e.__reactAutoBindMap[s]=o,e[s]=o;else if(l){var d=_[s];!r||d!==b.DEFINE_MANY_MERGED&&d!==b.DEFINE_MANY?y(!1):void 0,d===b.DEFINE_MANY_MERGED?e[s]=a(e[s],o):d===b.DEFINE_MANY&&(e[s]=h(e[s],o))}else e[s]=o}}}}function o(t,i){if(i)for(var e in i){var n=i[e];if(i.hasOwnProperty(e)){var s=e in C;s?y(!1):void 0;var o=e in t;o?y(!1):void 0,t[e]=n}}}function r(t,i){t&&i&&"object"==typeof t&&"object"==typeof i?void 0:y(!1);for(var e in i)i.hasOwnProperty(e)&&(void 0!==t[e]?y(!1):void 0,t[e]=i[e]);return t}function a(t,i){return function(){var e=t.apply(this,arguments),n=i.apply(this,arguments);if(null==e)return n;if(null==n)return e;var s={};return r(s,e),r(s,n),s}}function h(t,i){return function(){t.apply(this,arguments),i.apply(this,arguments)}}function l(t,i){var e=i.bind(t);return e}function u(t){for(var i in t.__reactAutoBindMap)if(t.__reactAutoBindMap.hasOwnProperty(i)){var e=t.__reactAutoBindMap[i];t[i]=l(t,e)}}var c=e(67),p=e(6),d=(e(30),e(29),e(81)),m=e(2),f=e(25),y=e(1),v=e(36),x=e(13),g=(e(3),x({mixins:null})),b=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),N=[],_={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},C={displayName:function(t,i){t.displayName=i},mixins:function(t,i){if(i)for(var e=0;e<i.length;e++)s(t,i[e])},childContextTypes:function(t,i){t.childContextTypes=m({},t.childContextTypes,i)},contextTypes:function(t,i){t.contextTypes=m({},t.contextTypes,i)},getDefaultProps:function(t,i){t.getDefaultProps?t.getDefaultProps=a(t.getDefaultProps,i):t.getDefaultProps=i},propTypes:function(t,i){t.propTypes=m({},t.propTypes,i)},statics:function(t,i){o(t,i)},autobind:function(){}},P={replaceState:function(t,i){this.updater.enqueueReplaceState(this,t),i&&this.updater.enqueueCallback(this,i)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(t,i){this.updater.enqueueSetProps(this,t),i&&this.updater.enqueueCallback(this,i)},replaceProps:function(t,i){this.updater.enqueueReplaceProps(this,t),i&&this.updater.enqueueCallback(this,i)}},w=function(){};m(w.prototype,c.prototype,P);var k={createClass:function(t){var i=function(t,i,e){this.__reactAutoBindMap&&u(this),this.props=t,this.context=i,this.refs=f,this.updater=e||d,this.state=null;var n=this.getInitialState?this.getInitialState():null;"object"!=typeof n||Array.isArray(n)?y(!1):void 0,this.state=n};i.prototype=new w,i.prototype.constructor=i,N.forEach(s.bind(null,i)),s(i,t),i.getDefaultProps&&(i.defaultProps=i.getDefaultProps()),i.prototype.render?void 0:y(!1);for(var e in _)i.prototype[e]||(i.prototype[e]=null);return i},injection:{injectMixin:function(t){N.push(t)}}};t.exports=k},function(t,i,e){"use strict";function n(t,i,e){this.props=t,this.context=i,this.refs=o,this.updater=e||s}var s=e(81),o=(e(33),e(25)),r=e(1);e(3);n.prototype.isReactComponent={},n.prototype.setState=function(t,i){"object"!=typeof t&&"function"!=typeof t&&null!=t?r(!1):void 0,this.updater.enqueueSetState(this,t),i&&this.updater.enqueueCallback(this,i)},n.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t)};t.exports=n},function(t,i){"use strict";var e={useCreateElement:!1};t.exports=e},function(t,i,e){"use strict";function n(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,i=r.getValue(t);null!=i&&s(this,t,i)}}function s(t,i,e){var n,s,o=a.getNode(t._rootNodeID).options;if(i){for(n={},s=0;s<e.length;s++)n[""+e[s]]=!0;for(s=0;s<o.length;s++){var r=n.hasOwnProperty(o[s].value);o[s].selected!==r&&(o[s].selected=r)}}else{for(n=""+e,s=0;s<o.length;s++)if(o[s].value===n)return void(o[s].selected=!0);o.length&&(o[0].selected=!0)}}function o(t){var i=this._currentElement.props,e=r.executeOnChange(i,t);return this._wrapperState.pendingUpdate=!0,h.asap(n,this),e}var r=e(42),a=e(5),h=e(8),l=e(2),u=(e(3),"__ReactDOMSelect_value$"+Math.random().toString(36).slice(2)),c={valueContextKey:u,getNativeProps:function(t,i,e){return l({},i,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,i){var e=r.getValue(i);t._wrapperState={pendingUpdate:!1,initialValue:null!=e?e:i.defaultValue,onChange:o.bind(t),wasMultiple:Boolean(i.multiple)}},processChildContext:function(t,i,e){var n=l({},e);return n[u]=t._wrapperState.initialValue,n},postUpdateWrapper:function(t){var i=t._currentElement.props;t._wrapperState.initialValue=void 0;var e=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(i.multiple);var n=r.getValue(i);null!=n?(t._wrapperState.pendingUpdate=!1,s(t,Boolean(i.multiple),n)):e!==Boolean(i.multiple)&&(null!=i.defaultValue?s(t,Boolean(i.multiple),i.defaultValue):s(t,Boolean(i.multiple),i.multiple?[]:""))}};t.exports=c},function(t,i,e){"use strict";var n=e(63),s=e(41),o=e(43),r=e(5),a=e(2),h=e(34),l=e(55),u=(e(58),function(t){});a(u.prototype,{construct:function(t){this._currentElement=t,this._stringText=""+t,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(t,i,e){if(this._rootNodeID=t,i.useCreateElement){var n=e[r.ownerDocumentContextKey],o=n.createElement("span");return s.setAttributeForID(o,t),r.getID(o),l(o,this._stringText),o}var a=h(this._stringText);return i.renderToStaticMarkup?a:"<span "+s.createMarkupForID(t)+">"+a+"</span>"},receiveComponent:function(t,i){if(t!==this._currentElement){this._currentElement=t;var e=""+t;if(e!==this._stringText){this._stringText=e;var s=r.getNode(this._rootNodeID);n.updateTextContent(s,e)}}},unmountComponent:function(){o.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=u},function(t,i,e){"use strict";function n(){this.reinitializeTransaction()}var s=e(8),o=e(32),r=e(2),a=e(9),h={initialize:a,close:function(){p.isBatchingUpdates=!1}},l={initialize:a,close:s.flushBatchedUpdates.bind(s)},u=[l,h];r(n.prototype,o.Mixin,{getTransactionWrappers:function(){return u}});var c=new n,p={isBatchingUpdates:!1,batchedUpdates:function(t,i,e,n,s,o){var r=p.isBatchingUpdates;p.isBatchingUpdates=!0,r?t(i,e,n,s,o):c.perform(t,null,i,e,n,s,o)}};t.exports=p},function(t,i,e){"use strict";function n(){if(!w){w=!0,v.EventEmitter.injectReactEventListener(y),v.EventPluginHub.injectEventPluginOrder(a),v.EventPluginHub.injectInstanceHandle(x),v.EventPluginHub.injectMount(g),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:C,EnterLeaveEventPlugin:h,ChangeEventPlugin:o,SelectEventPlugin:N,BeforeInputEventPlugin:s}),v.NativeComponent.injectGenericComponentClass(m),v.NativeComponent.injectTextComponentClass(f),v.Class.injectMixin(c),v.DOMProperty.injectDOMPropertyConfig(u),v.DOMProperty.injectDOMPropertyConfig(P),v.EmptyComponent.injectEmptyComponent("noscript"),v.Updates.injectReconcileTransaction(b),v.Updates.injectBatchingStrategy(d),v.RootIndex.injectCreateReactRootIndex(l.canUseDOM?r.createReactRootIndex:_.createReactRootIndex),v.Component.injectEnvironment(p)}}var s=e(140),o=e(142),r=e(143),a=e(145),h=e(146),l=e(4),u=e(149),c=e(151),p=e(43),d=e(71),m=e(156),f=e(70),y=e(164),v=e(165),x=e(18),g=e(5),b=e(169),N=e(175),_=e(176),C=e(177),P=e(174),w=!1;t.exports={inject:n}},function(t,i,e){"use strict";function n(){if(c.current){var t=c.current.getName();if(t)return" Check the render method of `"+t+"`."}return""}function s(t,i){if(t._store&&!t._store.validated&&null==t.key){t._store.validated=!0;o("uniqueKey",t,i)}}function o(t,i,e){var s=n();if(!s){var o="string"==typeof e?e:e.displayName||e.name;o&&(s=" Check the top-level render call using <"+o+">.")}var r=m[t]||(m[t]={});if(r[s])return null;r[s]=!0;var a={parentOrOwner:s,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return i&&i._owner&&i._owner!==c.current&&(a.childOwner=" It was passed a child from "+i._owner.getName()+"."),a}function r(t,i){if("object"==typeof t)if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];l.isValidElement(n)&&s(n,i)}else if(l.isValidElement(t))t._store&&(t._store.validated=!0);else if(t){var o=p(t);if(o&&o!==t.entries)for(var r,a=o.call(t);!(r=a.next()).done;)l.isValidElement(r.value)&&s(r.value,i)}}function a(t,i,e,s){for(var o in i)if(i.hasOwnProperty(o)){var r;try{"function"!=typeof i[o]?d(!1):void 0,r=i[o](e,o,t,s)}catch(a){r=a}if(r instanceof Error&&!(r.message in f)){f[r.message]=!0;n()}}}function h(t){var i=t.type;if("function"==typeof i){var e=i.displayName||i.name;i.propTypes&&a(e,i.propTypes,t.props,u.prop),"function"==typeof i.getDefaultProps}}var l=e(6),u=e(30),c=(e(29),e(11)),p=(e(33),e(52)),d=e(1),m=(e(3),{}),f={},y={createElement:function(t,i,e){var n="string"==typeof t||"function"==typeof t,s=l.createElement.apply(this,arguments);if(null==s)return s;if(n)for(var o=2;o<arguments.length;o++)r(arguments[o],t);return h(s),s},createFactory:function(t){var i=y.createElement.bind(null,t);return i.type=t,i},cloneElement:function(t,i,e){for(var n=l.cloneElement.apply(this,arguments),s=2;s<arguments.length;s++)r(arguments[s],n.type);return h(n),n}};t.exports=y},function(t,i,e){"use strict";var n,s=e(6),o=e(75),r=e(14),a=e(2),h={injectEmptyComponent:function(t){n=s.createElement(t)}},l=function(t){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=t(n)};a(l.prototype,{construct:function(t){},mountComponent:function(t,i,e){return o.registerNullComponentID(t),this._rootNodeID=t,r.mountComponent(this._renderedComponent,t,i,e)},receiveComponent:function(){},unmountComponent:function(t,i,e){r.unmountComponent(this._renderedComponent),o.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),l.injection=h,t.exports=l},function(t,i){"use strict";function e(t){return!!o[t]}function n(t){o[t]=!0}function s(t){delete o[t]}var o={},r={isNullComponentID:e,registerNullComponentID:n,deregisterNullComponentID:s};t.exports=r},function(t,i,e){"use strict";function n(t,i,e,n){try{return i(e,n)}catch(o){return void(null===s&&(s=o))}}var s=null,o={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(s){var t=s;throw s=null,t}}};t.exports=o},function(t,i,e){"use strict";function n(t){return o(document.documentElement,t)}var s=e(160),o=e(90),r=e(91),a=e(92),h={hasSelectionCapabilities:function(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&("input"===i&&"text"===t.type||"textarea"===i||"true"===t.contentEditable)},getSelectionInformation:function(){var t=a();return{focusedElem:t,selectionRange:h.hasSelectionCapabilities(t)?h.getSelection(t):null}},restoreSelection:function(t){var i=a(),e=t.focusedElem,s=t.selectionRange;i!==e&&n(e)&&(h.hasSelectionCapabilities(e)&&h.setSelection(e,s),r(e))},getSelection:function(t){var i;if("selectionStart"in t)i={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var e=document.selection.createRange();e.parentElement()===t&&(i={start:-e.moveStart("character",-t.value.length),end:-e.moveEnd("character",-t.value.length)})}else i=s.getOffsets(t);return i||{start:0,end:0}},setSelection:function(t,i){var e=i.start,n=i.end;if("undefined"==typeof n&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",e),o.moveEnd("character",n-e),o.select()}else s.setOffsets(t,i)}};t.exports=h},function(t,i,e){"use strict";var n=e(186),s=/\/?>/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var i=n(t);return t.replace(s," "+o.CHECKSUM_ATTR_NAME+'="'+i+'"$&')},canReuseMarkup:function(t,i){var e=i.getAttribute(o.CHECKSUM_ATTR_NAME);e=e&&parseInt(e,10);var s=n(t);return s===e}};t.exports=o},function(t,i,e){"use strict";var n=e(36),s=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=s},function(t,i,e){"use strict";function n(t){if("function"==typeof t.type)return t.type;var i=t.type,e=c[i];return null==e&&(c[i]=e=l(i)),e}function s(t){return u?void 0:h(!1),new u(t.type,t.props)}function o(t){return new p(t)}function r(t){return t instanceof p}var a=e(2),h=e(1),l=null,u=null,c={},p=null,d={injectGenericComponentClass:function(t){u=t},injectTextComponentClass:function(t){p=t},injectComponentClasses:function(t){a(c,t)}},m={getComponentClassForElement:n,createInternalComponent:s,createInstanceForText:o,isTextComponent:r,injection:d};t.exports=m},function(t,i,e){"use strict";function n(t,i){}var s=(e(3),{isMounted:function(t){return!1},enqueueCallback:function(t,i){},enqueueForceUpdate:function(t){n(t,"forceUpdate")},enqueueReplaceState:function(t,i){
n(t,"replaceState")},enqueueSetState:function(t,i){n(t,"setState")},enqueueSetProps:function(t,i){n(t,"setProps")},enqueueReplaceProps:function(t,i){n(t,"replaceProps")}});t.exports=s},function(t,i,e){"use strict";function n(t){function i(i,e,n,s,o,r){if(s=s||_,r=r||n,null==e[n]){var a=g[o];return i?new Error("Required "+a+" `"+r+"` was not specified in "+("`"+s+"`.")):null}return t(e,n,s,o,r)}var e=i.bind(null,!1);return e.isRequired=i.bind(null,!0),e}function s(t){function i(i,e,n,s,o){var r=i[e],a=f(r);if(a!==t){var h=g[s],l=y(r);return new Error("Invalid "+h+" `"+o+"` of type "+("`"+l+"` supplied to `"+n+"`, expected ")+("`"+t+"`."))}return null}return n(i)}function o(){return n(b.thatReturns(null))}function r(t){function i(i,e,n,s,o){var r=i[e];if(!Array.isArray(r)){var a=g[s],h=f(r);return new Error("Invalid "+a+" `"+o+"` of type "+("`"+h+"` supplied to `"+n+"`, expected an array."))}for(var l=0;l<r.length;l++){var u=t(r,l,n,s,o+"["+l+"]");if(u instanceof Error)return u}return null}return n(i)}function a(){function t(t,i,e,n,s){if(!x.isValidElement(t[i])){var o=g[n];return new Error("Invalid "+o+" `"+s+"` supplied to "+("`"+e+"`, expected a single ReactElement."))}return null}return n(t)}function h(t){function i(i,e,n,s,o){if(!(i[e]instanceof t)){var r=g[s],a=t.name||_,h=v(i[e]);return new Error("Invalid "+r+" `"+o+"` of type "+("`"+h+"` supplied to `"+n+"`, expected ")+("instance of `"+a+"`."))}return null}return n(i)}function l(t){function i(i,e,n,s,o){for(var r=i[e],a=0;a<t.length;a++)if(r===t[a])return null;var h=g[s],l=JSON.stringify(t);return new Error("Invalid "+h+" `"+o+"` of value `"+r+"` "+("supplied to `"+n+"`, expected one of "+l+"."))}return n(Array.isArray(t)?i:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function u(t){function i(i,e,n,s,o){var r=i[e],a=f(r);if("object"!==a){var h=g[s];return new Error("Invalid "+h+" `"+o+"` of type "+("`"+a+"` supplied to `"+n+"`, expected an object."))}for(var l in r)if(r.hasOwnProperty(l)){var u=t(r,l,n,s,o+"."+l);if(u instanceof Error)return u}return null}return n(i)}function c(t){function i(i,e,n,s,o){for(var r=0;r<t.length;r++){var a=t[r];if(null==a(i,e,n,s,o))return null}var h=g[s];return new Error("Invalid "+h+" `"+o+"` supplied to "+("`"+n+"`."))}return n(Array.isArray(t)?i:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function p(){function t(t,i,e,n,s){if(!m(t[i])){var o=g[n];return new Error("Invalid "+o+" `"+s+"` supplied to "+("`"+e+"`, expected a ReactNode."))}return null}return n(t)}function d(t){function i(i,e,n,s,o){var r=i[e],a=f(r);if("object"!==a){var h=g[s];return new Error("Invalid "+h+" `"+o+"` of type `"+a+"` "+("supplied to `"+n+"`, expected `object`."))}for(var l in t){var u=t[l];if(u){var c=u(r,l,n,s,o+"."+l);if(c)return c}}return null}return n(i)}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||x.isValidElement(t))return!0;var i=N(t);if(!i)return!1;var e,n=i.call(t);if(i!==t.entries){for(;!(e=n.next()).done;)if(!m(e.value))return!1}else for(;!(e=n.next()).done;){var s=e.value;if(s&&!m(s[1]))return!1}return!0;default:return!1}}function f(t){var i=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":i}function y(t){var i=f(t);if("object"===i){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return i}function v(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var x=e(6),g=e(29),b=e(9),N=e(52),_="<<anonymous>>",C={array:s("array"),bool:s("boolean"),func:s("function"),number:s("number"),object:s("object"),string:s("string"),any:o(),arrayOf:r,element:a(),instanceOf:h,node:p(),objectOf:u,oneOf:l,oneOfType:c,shape:d};t.exports=C},function(t,i){"use strict";var e={injectCreateReactRootIndex:function(t){n.createReactRootIndex=t}},n={createReactRootIndex:null,injection:e};t.exports=n},function(t,i){"use strict";var e={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){e.currentScrollLeft=t.x,e.currentScrollTop=t.y}};t.exports=e},function(t,i,e){"use strict";function n(t,i){if(null==i?s(!1):void 0,null==t)return i;var e=Array.isArray(t),n=Array.isArray(i);return e&&n?(t.push.apply(t,i),t):e?(t.push(i),t):n?[t].concat(i):[t,i]}var s=e(1);t.exports=n},function(t,i){"use strict";var e=function(t,i,e){Array.isArray(t)?t.forEach(i,e):t&&i.call(e,t)};t.exports=e},function(t,i,e){"use strict";function n(){return!o&&s.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var s=e(4),o=null;t.exports=n},function(t,i){"use strict";function e(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&("input"===i&&n[t.type]||"textarea"===i)}var n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=e},function(t,i,e){"use strict";var n=e(9),s={listen:function(t,i,e){return t.addEventListener?(t.addEventListener(i,e,!1),{remove:function(){t.removeEventListener(i,e,!1)}}):t.attachEvent?(t.attachEvent("on"+i,e),{remove:function(){t.detachEvent("on"+i,e)}}):void 0},capture:function(t,i,e){return t.addEventListener?(t.addEventListener(i,e,!0),{remove:function(){t.removeEventListener(i,e,!0)}}):{remove:n}},registerDefault:function(){}};t.exports=s},function(t,i,e){"use strict";function n(t,i){var e=!0;t:for(;e;){var n=t,o=i;if(e=!1,n&&o){if(n===o)return!0;if(s(n))return!1;if(s(o)){t=n,i=o.parentNode,e=!0;continue t}return n.contains?n.contains(o):n.compareDocumentPosition?!!(16&n.compareDocumentPosition(o)):!1}return!1}}var s=e(203);t.exports=n},function(t,i){"use strict";function e(t){try{t.focus()}catch(i){}}t.exports=e},function(t,i){"use strict";function e(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=e},function(t,i,e){"use strict";function n(t){return r?void 0:o(!1),p.hasOwnProperty(t)||(t="*"),a.hasOwnProperty(t)||("*"===t?r.innerHTML="<link />":r.innerHTML="<"+t+"></"+t+">",a[t]=!r.firstChild),a[t]?p[t]:null}var s=e(4),o=e(1),r=s.canUseDOM?document.createElement("div"):null,a={},h=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:h,option:h,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:u,th:u},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(t){p[t]=c,a[t]=!0}),t.exports=n},function(t,i){"use strict";function e(t,i){if(t===i)return!0;if("object"!=typeof t||null===t||"object"!=typeof i||null===i)return!1;var e=Object.keys(t),s=Object.keys(i);if(e.length!==s.length)return!1;for(var o=n.bind(i),r=0;r<e.length;r++)if(!o(e[r])||t[e[r]]!==i[e[r]])return!1;return!0}var n=Object.prototype.hasOwnProperty;t.exports=e},function(t,i,e){"use strict";t.exports=e(150)},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=i.BOX="box",n=i.SPHERE="sphere",s=i.CYLINDER="cylinder",o=i.JOINT_DISTANCE="jointDistance",r=i.JOINT_BALL_AND_SOCKET="jointBall",a=i.JOINT_HINGE="jointHinge",h=i.JOINT_WHEEL="jointWheel",l=i.JOINT_SLIDER="jointSlider",u=i.JOINT_PRISMATIC="jointPrismatic",c=i.BRUTE=1,p=i.SWEEP=2,d=i.TREE=3,m=(i.BROADPHASES=[c,p,d],i.SPAWN="SPAWN"),f=i.SETUP="SETUP",y=i.LOOP="LOOP",v=i.TERMINATE="TERMINATE",x=i.BODIES=[e,n,s],g=i.JOINTS=[o,r,a,h,l,u];i.OBJECTS=[].concat(x,g),i.ACTIONS=[m,f,y,v]},function(t,i,e){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function o(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function r(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function a(t){return function(i){return b(N(i,t),t)}}function h(t,i){if(-1!==t.indexOf(","))throw new Error("name can't have any commas!");return i?[i,t].join(","):t}function l(t){return t.substring(0,t.lastIndexOf(","))}var u=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();Object.defineProperty(i,"__esModule",{value:!0}),i.uniqueUnion=h,i.getParent=l;var c=e(133),p=n(c),d=e(100),m=n(d),f=e(95),y=n(f),v=e(101),x=n(v),g={Wrapper:{displayName:"Wrapper",isInFunction:!0}},b=(0,x["default"])({filename:"C:/Users/PedroIago/Documents/GitHub/rack-physics/src/hocs/Namespace.js",components:g,locals:[t],imports:[y["default"]]}),N=(0,m["default"])({filename:"C:/Users/PedroIago/Documents/GitHub/rack-physics/src/hocs/Namespace.js",components:g,locals:[],imports:[y["default"],p["default"]]}),_=0,C=function(t){var i,e,n=a("Wrapper")((e=i=function(i){function e(){return s(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,i),u(e,[{key:"getChildContext",value:function(){return{id:h(this.props.name,this.context.id)}}},{key:"render",value:function(){return y["default"].createElement(t,this.props)}}]),e}(f.Component),i.propTypes={name:f.PropTypes.string},i.defaultProps={name:_++},i.contextTypes={id:f.PropTypes.string.isRequired},i.childContextTypes={id:f.PropTypes.string},e));return n};i["default"]=C}).call(i,e(207)(t))},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e,n={REVISION:"1.2",nextID:0,proxyID:0,BR_NULL:0,BR_BRUTE_FORCE:1,BR_SWEEP_AND_PRUNE:2,BR_BOUNDING_VOLUME_TREE:3,BODY_NULL:0,BODY_DYNAMIC:1,BODY_STATIC:2,SHAPE_NULL:0,SHAPE_SPHERE:1,SHAPE_BOX:2,SHAPE_CYLINDER:3,JOINT_NULL:0,JOINT_DISTANCE:1,JOINT_BALL_AND_SOCKET:2,JOINT_HINGE:3,JOINT_WHEEL:4,JOINT_SLIDER:5,JOINT_PRISMATIC:6,WORLD_SCALE:100,INV_SCALE:.01,AABB_PROX:.005,sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,lerp:function(t,i,e){return t+(i-t)*e},rand:function(t,i){return n.lerp(t,i,n.random())},randInt:function(t,i,e){return 1*n.lerp(t,i,n.random()).toFixed(e||0)},"int":function(t){return~~t},fix:function(t,i){return t.toFixed(i||3,10)},clamp:function(t,i,e){return n.max(i,n.min(e,t))},degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,CustomError:null,Error:function(t,i){null==n.CustomError?console.error(t,i):n.CustomError.innerHTML+=t+" - "+i+"<br>"}};e||(e="undefined"!=typeof Float32Array?Float32Array:Array),function(t){var i,e=["now","webkitNow","msNow","mozNow"];if(t.performance)for(var s=0;s<e.length;++s){var o=e[s];if(t.performance[o]){i=function(){return t.performance[o]()};break}}i||(i=Date.now),n.now=i}(self),n.World=function(t,i,e,s){switch(this.timeStep=t||.01666,this.numIterations=e||8,i||2){case 1:this.broadPhase=new n.BruteForceBroadPhase;break;case 2:default:this.broadPhase=new n.SAPBroadPhase;break;case 3:this.broadPhase=new n.DBVTBroadPhase}this.performance=null,this.isNoStat=s||!1,this.isNoStat||(this.performance=new n.Performance(this)),this.enableRandomizer=!0,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new n.Vec3(0,-9.80665,0);var o=4;this.detectors=[],this.detectors.length=o;for(var r=o;r--;)this.detectors[r]=[],this.detectors[r].length=o;this.detectors[n.SHAPE_SPHERE][n.SHAPE_SPHERE]=new n.SphereSphereCollisionDetector,this.detectors[n.SHAPE_SPHERE][n.SHAPE_BOX]=new n.SphereBoxCollisionDetector(!1),this.detectors[n.SHAPE_BOX][n.SHAPE_SPHERE]=new n.SphereBoxCollisionDetector(!0),this.detectors[n.SHAPE_BOX][n.SHAPE_BOX]=new n.BoxBoxCollisionDetector,this.detectors[n.SHAPE_CYLINDER][n.SHAPE_CYLINDER]=new n.CylinderCylinderCollisionDetector,this.detectors[n.SHAPE_CYLINDER][n.SHAPE_BOX]=new n.BoxCylinderCollisionDetector(!0),this.detectors[n.SHAPE_BOX][n.SHAPE_CYLINDER]=new n.BoxCylinderCollisionDetector(!1),this.detectors[n.SHAPE_CYLINDER][n.SHAPE_SPHERE]=new n.SphereCylinderCollisionDetector(!0),this.detectors[n.SHAPE_SPHERE][n.SHAPE_CYLINDER]=new n.SphereCylinderCollisionDetector(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.maxIslandRigidBodies=64,this.islandRigidBodies=[],this.islandRigidBodies.length=this.maxIslandRigidBodies,this.islandStack=[],this.islandStack.length=this.maxIslandRigidBodies,this.maxIslandConstraints=128,this.islandConstraints=[],this.islandConstraints.length=this.maxIslandConstraints},n.World.prototype={constructor:n.World,clear:function(){for(this.randX=65535;null!==this.joints;)this.removeJoint(this.joints);for(;null!==this.contacts;)this.removeContact(this.contacts);for(;null!==this.rigidBodies;)this.removeRigidBody(this.rigidBodies);n.nextID=0,n.proxyID=0},addRigidBody:function(t){t.parent&&n.Error("World","It is not possible to be added to more than one world one of the rigid body"),t.parent=this,t.awake();for(var i=t.shapes;null!==i;i=i.next)this.addShape(i);null!==this.rigidBodies&&((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var i=t;if(i.parent===this){i.awake();for(var e=i.jointLink;null!=e;){var n=e.joint;e=e.next,this.removeJoint(n)}for(var s=t.shapes;null!==s;s=s.next)this.removeShape(s);var o=i.prev,r=i.next;null!==o&&(o.next=r),null!==r&&(r.prev=o),this.rigidBodies==i&&(this.rigidBodies=r),i.prev=null,i.next=null,i.parent=null,this.numRigidBodies--}},getByName:function(t){for(var i=null,e=this.rigidBodies;null!==e;)" "!==e.name&&e.name===t&&(i=e),e=e.next;for(var n=this.joints;null!==n;)""!==n.name&&n.name===t&&(i=n),n=n.next;return i},addShape:function(t){t.parent&&t.parent.parent||n.Error("World","It is not possible to be added alone to shape world"),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&&n.Error("World","It is not possible to be added to more than one world one of the joint"),null!=this.joints&&((this.joints.prev=t).next=this.joints),this.joints=t,t.parent=this,this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var i=t,e=i.prev,n=i.next;null!==e&&(e.next=n),null!==n&&(n.prev=e),this.joints==i&&(this.joints=n),i.prev=null,i.next=null,this.numJoints--,i.awake(),i.detach(),i.parent=null},worldscale:function(t){n.WORLD_SCALE=t||100,n.INV_SCALE=1/n.WORLD_SCALE},step:function(){var t,i,e,s,o=this.isNoStat?!1:!0;o&&(t=n.now());for(var r=this.rigidBodies;null!==r;)r.addedToIsland=!1,r.sleeping&&(r.linearVelocity.testZero()||r.angularVelocity.testZero()||r.position.testDiff(r.sleepPosition)||r.orientation.testDiff(r.sleepOrientation))&&r.awake(),r=r.next;o&&(i=n.now()),this.broadPhase.detectPairs();for(var a=this.broadPhase.pairs,h=this.broadPhase.numPairs,l=h;l--;){var u,c,p=a[l];p.shape1.id<p.shape2.id?(u=p.shape1,c=p.shape2):(u=p.shape2,c=p.shape1);var d;d=u.numContacts<c.numContacts?u.contactLink:c.contactLink;for(var m=!1;d;){var f=d.contact;if(f.shape1==u&&f.shape2==c){f.persisting=!0,m=!0;break}d=d.next}m||this.addContact(u,c)}for(o&&(e=n.now(),this.performance.broadPhaseTime=e-i),this.numContactPoints=0,f=this.contacts;null!==f;)if(f.persisting||!f.shape1.aabb.intersectTest(f.shape2.aabb)){var y=f.body1,v=f.body2;(y.isDynamic&&!y.sleeping||v.isDynamic&&!v.sleeping)&&f.updateManifold(),this.numContactPoints+=f.manifold.numPoints,f.persisting=!1,f.constraint.addedToIsland=!1,f=f.next}else{var x=f.next;this.removeContact(f),f=x}o&&(s=n.now(),this.performance.narrowPhaseTime=s-e);var g,b,N=1/this.timeStep;for(g=this.joints;null!==g;g=g.next)g.addedToIsland=!1;this.maxIslandRigidBodies<this.numRigidBodies&&(this.maxIslandRigidBodies=this.numRigidBodies<<1,this.islandRigidBodies=[],this.islandStack=[],this.islandRigidBodies.length=this.maxIslandRigidBodies,this.islandStack.length=this.maxIslandRigidBodies);var _=this.numJoints+this.numContacts;this.maxIslandConstraints<_&&(this.maxIslandConstraints=_<<1,this.islandConstraints=[],this.islandConstraints.length=this.maxIslandConstraints),i=n.now(),this.numIslands=0;for(var C=this.rigidBodies;null!==C;C=C.next)if(!(C.addedToIsland||C.isStatic||C.sleeping))if(C.isLonely())C.isDynamic&&C.linearVelocity.addTime(this.gravity,this.timeStep),this.calSleep(C)?(C.sleepTime+=this.timeStep,C.sleepTime>.5?C.sleep():C.updatePosition(this.timeStep)):(C.sleepTime=0,C.updatePosition(this.timeStep)),this.numIslands++;else{var P=0,w=0,k=1;this.islandStack[0]=C,C.addedToIsland=!0;do if(r=this.islandStack[--k],this.islandStack[k]=null,r.sleeping=!1,this.islandRigidBodies[P++]=r,!r.isStatic){for(var A=r.contactLink;null!==A;A=A.next){var f=A.contact;if(b=f.constraint,!b.addedToIsland&&f.touching){this.islandConstraints[w++]=b,b.addedToIsland=!0;var x=A.body;x.addedToIsland||(this.islandStack[k++]=x,x.addedToIsland=!0)}}for(var S=r.jointLink;null!==S;S=S.next)b=S.joint,b.addedToIsland||(this.islandConstraints[w++]=b,b.addedToIsland=!0,x=S.body,!x.addedToIsland&&x.isDynamic&&(this.islandStack[k++]=x,x.addedToIsland=!0))}while(0!=k);for(var E=(new n.Vec3).addTime(this.gravity,this.timeStep),I=P;I--;)r=this.islandRigidBodies[I],r.isDynamic&&r.linearVelocity.addEqual(E);if(this.enableRandomizer)for(I=w;I--;)if(0!==I){var M=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*I|0;b=this.islandConstraints[I],this.islandConstraints[I]=this.islandConstraints[M],this.islandConstraints[M]=b}for(I=w;I--;)this.islandConstraints[I].preSolve(this.timeStep,N);for(var z=this.numIterations;z--;)for(I=w;I--;)this.islandConstraints[I].solve();for(I=w;I--;)this.islandConstraints[I].postSolve(),this.islandConstraints[I]=null;var D=10;for(I=P;I--;)r=this.islandRigidBodies[I],this.calSleep(r)?(r.sleepTime+=this.timeStep,r.sleepTime<D&&(D=r.sleepTime)):(r.sleepTime=0,D=0);if(D>.5)for(I=P;I--;)this.islandRigidBodies[I].sleep(),this.islandRigidBodies[I]=null;else for(I=P;I--;)this.islandRigidBodies[I].updatePosition(this.timeStep),this.islandRigidBodies[I]=null;this.numIslands++}o&&(e=n.now(),this.performance.solvingTime=e-i,e=n.now(),this.performance.upfps(),this.performance.totalTime=e-t)},addContact:function(t,i){var e;null!==this.unusedContacts?(e=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):e=new n.Contact,e.attach(t,i),e.detector=this.detectors[t.type][i.type],this.contacts&&((this.contacts.prev=e).next=this.contacts),this.contacts=e,this.numContacts++},removeContact:function(t){var i=t.prev,e=t.next;e&&(e.prev=i),i&&(i.next=e),this.contacts==t&&(this.contacts=e),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},checkContact:function(t,i){for(var e,n,s=this.contacts;null!==s;){if(e=s.body1.name||" ",n=s.body2.name||" ",e==t&&n==i||n==t&&e==i)return s.touching?!0:!1;s=s.next}return!1},calSleep:function(t){return t.allowSleep?t.linearVelocity.lengthSq()>.04?!1:t.angularVelocity.lengthSq()>.25?!1:!0:!1}},n.RigidBody=function(t,i,e,s,o,r,a){this.name=" ",this.MAX_SHAPES=64,this.prev=null,this.next=null,this.type=n.BODY_NULL,this.massInfo=new n.MassInfo,this.position=new n.Vec3(t,i,e),this.orientation=this.rotationAxisToQuad(s||0,o||0,r||0,a||0),this.newPosition=new n.Vec3,this.controlPos=!1,this.newOrientation=new n.Quat,this.newRotation=new n.Vec3,this.currentRotation=new n.Vec3,this.controlRot=!1,this.controlRotInTime=!1,this.linearVelocity=new n.Vec3,this.angularVelocity=new n.Vec3,this.matrix=new n.Mat44,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new n.Vec3,this.sleepOrientation=new n.Quat,this.isStatic=!1,this.isDynamic=!1,this.rotation=new n.Mat33,this.mass=NaN,this.inverseMass=NaN,this.inverseInertia=new n.Mat33,this.localInertia=new n.Mat33,this.inverseLocalInertia=new n.Mat33,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1},n.RigidBody.prototype={constructor:n.RigidBody,addShape:function(t){t.parent&&n.Error("RigidBody","It is not possible that you add to the multi-rigid body the shape of one"),null!=this.shapes&&((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&&this.parent.addShape(t),this.numShapes++},removeShape:function(t){var i=t;if(i.parent==this){var e=i.prev,n=i.next;null!=e&&(e.next=n),null!=n&&(n.prev=e),this.shapes==i&&(this.shapes=n),i.prev=null,i.next=null,i.parent=null,this.parent&&this.parent.removeShape(i),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,i){var e=void 0!==i?i:!0;this.type=t||n.BODY_DYNAMIC,this.isDynamic=this.type==n.BODY_DYNAMIC,this.isStatic=this.type==n.BODY_STATIC,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var s=this.localInertia.elements,o=new n.Mat33,r=new n.Vec3,a=this.shapes;null!=a;a=a.next){a.calculateMassInfo(this.massInfo);var h=this.massInfo.mass,l=a.relativePosition.x,u=a.relativePosition.y,c=a.relativePosition.z;r.addScale(a.relativePosition,h),this.mass+=h,this.rotateInertia(a.relativeRotation,this.massInfo.inertia,o),this.localInertia.addEqual(o),s[0]+=h*(u*u+c*c),s[4]+=h*(l*l+c*c),s[8]+=h*(l*l+u*u);var p=h*l*u,d=h*u*c,m=h*c*l;s[1]-=p,s[3]-=p,s[2]-=d,s[6]-=d,s[5]-=m,s[7]-=m}if(this.inverseMass=1/this.mass,r.scaleEqual(this.inverseMass),e){for(this.position.addEqual(r),a=this.shapes;null!=a;a=a.next)a.relativePosition.subEqual(r);l=r.x,u=r.y,c=r.z,s[0]-=this.mass*(u*u+c*c),s[4]-=this.mass*(l*l+c*c),s[8]-=this.mass*(l*l+u*u),p=this.mass*l*u,d=this.mass*u*c,m=this.mass*c*l,s[1]+=p,s[3]+=p,s[2]+=d,s[6]+=d,s[5]+=m,s[7]+=m}this.inverseLocalInertia.invert(this.localInertia),this.type==n.BODY_STATIC&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&&this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;null!=t;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var i=this.jointLink;null!=i;)i.body.sleepTime=0,i.body.sleeping=!1,i=i.next;for(var e=this.shapes;null!=e;e=e.next)e.updateProxy()}},sleep:function(){if(this.allowSleep&&!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;null!=t;t=t.next)t.updateProxy()}},isLonely:function(){return 0==this.numJoints&&0==this.numContacts},updatePosition:function(t){switch(this.type){case n.BODY_STATIC:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case n.BODY_DYNAMIC:this.controlPos&&(this.angularVelocity.set(0,0,0),this.linearVelocity.set(0,0,0),this.linearVelocity.x=(this.newPosition.x-this.position.x)/t,this.linearVelocity.y=(this.newPosition.y-this.position.y)/t,this.linearVelocity.z=(this.newPosition.z-this.position.z)/t,this.controlPos=!1),this.controlRot&&(this.angularVelocity.set(0,0,0),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addTime(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t);break;default:n.Error("RigidBody","Invalid type.")}this.syncShapes()},rotateInertia:function(t,i,e){var n=t.elements,s=i.elements,o=n[0],r=n[3],a=n[6],h=n[1],l=n[4],u=n[7],c=n[2],p=n[5],d=n[8],m=s[0],f=s[3],y=s[6],v=s[1],x=s[4],g=s[7],b=s[2],N=s[5],_=s[8],C=o*m+h*f+c*y,P=o*v+h*x+c*g,w=o*b+h*N+c*_,k=r*m+l*f+p*y,A=r*v+l*x+p*g,S=r*b+l*N+p*_,E=a*m+u*f+d*y,I=a*v+u*x+d*g,M=a*b+u*N+d*_,z=e.elements;z[0]=C*o+P*h+w*c,z[1]=C*r+P*l+w*p,z[2]=C*a+P*u+w*d,z[3]=k*o+A*h+S*c,z[4]=k*r+A*l+S*p,z[5]=k*a+A*u+S*d,z[6]=E*o+I*h+M*c,z[7]=E*r+I*l+M*p,z[8]=E*a+I*u+M*d},syncShapes:function(){var t=this.orientation.s,i=this.orientation.x,e=this.orientation.y,n=this.orientation.z,s=2*i,o=2*e,r=2*n,a=i*s,h=e*o,l=n*r,u=i*o,c=e*r,p=i*r,d=t*s,m=t*o,f=t*r,y=this.rotation.elements;y[0]=1-h-l,y[1]=u-f,y[2]=p+m,y[3]=u+f,y[4]=1-a-l,y[5]=c-d,y[6]=p-m,y[7]=c+d,y[8]=1-a-h,this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var v=this.shapes;null!=v;v=v.next)v.position.mul(this.position,v.relativePosition,this.rotation),v.rotation.mul(this.rotation,v.relativeRotation),v.updateProxy()},applyImpulse:function(t,i){this.linearVelocity.addScale(i,this.inverseMass);var e=new n.Vec3;e.sub(t,this.position).cross(e,i).mulMat(this.inverseInertia,e),this.angularVelocity.addEqual(e)},rotationVectToQuad:function(t){var i=n.EulerToAxis(t.x*n.degtorad,t.y*n.degtorad,t.z*n.degtorad);return this.rotationAxisToQuad(i[0],i[1],i[2],i[3])},rotationAxisToQuad:function(t,i,e,s){var o=i*i+e*e+s*s;o>0&&(o=1/n.sqrt(o),i*=o,e*=o,s*=o);var r=n.sin(.5*t),a=n.cos(.5*t);return new n.Quat(a,r*i,r*e,r*s)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(n.INV_SCALE),this.controlPos=!0},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0},setRotation:function(t){this.newOrientation=this.rotationVectToQuad(t),this.controlRot=!0},resetPosition:function(t,i,e){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,i,e).multiplyScalar(n.INV_SCALE),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new n.Quat(t.w,t.x,t.y,t.z),this.awake()},resetRotation:function(t,i,e){this.angularVelocity.set(0,0,0),this.orientation=this.rotationVectToQuad(new n.Vec3(t,i,e)),this.awake()},getPosition:function(){return(new n.Vec3).scale(this.position,n.WORLD_SCALE)},getRotation:function(){return(new n.Euler).setFromRotationMatrix(this.rotation)},getQuaternion:function(){return(new n.Quaternion).setFromRotationMatrix(this.rotation)},getMatrix:function(){var t,i,e=this.matrix.elements;return this.sleeping?e[15]=1:(t=this.rotation.elements,e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=0,e[4]=t[1],e[5]=t[4],e[6]=t[7],e[7]=0,e[8]=t[2],e[9]=t[5],e[10]=t[8],e[11]=0,i=this.position,e[12]=i.x*n.WORLD_SCALE,e[13]=i.y*n.WORLD_SCALE,e[14]=i.z*n.WORLD_SCALE,e[15]=0),e}},n.Body=function(t){var i=t||{};i.world&&(void 0===i.type&&(i.type="box"),this.name=i.name||"",this.body=i.world.add(i))},n.Body.prototype={constructor:n.Body,setPosition:function(t){this.body.setPosition(t)},setQuaternion:function(t){this.body.setQuaternion(t)},setRotation:function(t){this.body.setRotation(t)},getPosition:function(){return this.body.getPosition()},getRotation:function(){return this.body.getRotation()},getQuaternion:function(){return this.body.getQuaternion()},getMatrix:function(){return this.body.getMatrix()},getSleep:function(){return this.body.sleeping},resetPosition:function(t,i,e){this.body.resetPosition(t,i,e)},resetRotation:function(t,i,e){this.body.resetRotation(t,i,e)},awake:function(){this.body.awake()},remove:function(){this.body.dispose()},checkContact:function(t){this.body.checkContact(t)}},n.Link=function(t){var i=t||{};i.world&&(void 0===i.type&&(i.type="jointHinge"),this.name=i.name||"",this.joint=i.world.add(i))},n.Link.prototype={constructor:n.Link,getPosition:function(){return this.joint.getPosition()},getMatrix:function(){return this.joint.getMatrix()},remove:function(){this.joint.dispose()},awake:function(){this.joint.awake()}},n.Dictionary=function(){this.data={},this.keys=[]},n.Dictionary.prototype={constructor:n.Dictionary,set:function(t){var i=t.id;this.get[i]||this.keys.push(i),this.data[i]=t},get:function(t){return this.data[t]},del:function(t){var i=this.keys,e=i.indexOf(t.id);e>-1&&(delete this.data[i[e]],i.splice(e,1))},reset:function(){for(var t,i=this.data,e=this.keys;e.length>0;)t=e.pop(),delete i[t]}},n.Performance=function(t){this.parent=t,this.infos=new e(13),this.f=[0,0,0],this.types=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhase=this.types[this.parent.broadPhase.types],this.version=n.REVISION,this.fps=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0},n.Performance.prototype={upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},updatingTime:function(){return n.fix(this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime))},show:function(){var t=["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconde<br><br>","broad-phase &nbsp;"+n.fix(this.broadPhaseTime)+"<br>","narrow-phase "+n.fix(this.narrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+n.fix(this.solvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+n.fix(this.totalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;&nbsp;"+this.updatingTime()+"<br>"].join("\n");return t},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updatingTime(),this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}},n.Mat44=function(t,i,n,s,o,r,a,h,l,u,c,p,d,m,f,y){this.elements=new e(16);var v=this.elements;v[0]=void 0!==t?t:1,v[4]=i||0,v[8]=n||0,v[12]=s||0,v[1]=o||0,v[5]=void 0!==r?r:1,v[9]=a||0,v[13]=h||0,v[2]=l||0,v[6]=u||0,v[10]=void 0!==c?c:1,v[14]=p||0,v[3]=d||0,v[7]=m||0,v[11]=f||0,v[15]=void 0!==y?y:1},n.Mat44.prototype={constructor:n.Mat44,set:function(t,i,e,n,s,o,r,a,h,l,u,c,p,d,m,f){var y=this.elements;return y[0]=t,y[4]=i,y[8]=e,y[12]=n,y[1]=s,y[5]=o,y[9]=r,y[13]=a,y[2]=h,y[6]=l,y[10]=u,y[14]=c,y[3]=p,y[7]=d,y[11]=m,y[15]=f,this}},n.Mat33=function(t,i,n,s,o,r,a,h,l){this.elements=new e(9);this.elements;this.init(void 0!==t?t:1,i||0,n||0,s||0,void 0!==o?o:1,r||0,a||0,h||0,void 0!==l?l:1)},n.Mat33.prototype={constructor:n.Mat33,set:function(t,i,e,n,s,o,r,a,h){var l=this.elements;return l[0]=t,l[1]=i,l[2]=e,l[3]=n,l[4]=s,l[5]=o,l[6]=r,l[7]=a,l[8]=h,this},init:function(t,i,e,n,s,o,r,a,h){var l=this.elements;return l[0]=t,l[1]=i,l[2]=e,l[3]=n,l[4]=s,l[5]=o,l[6]=r,l[7]=a,l[8]=h,this},multiply:function(t){var i=this.elements;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,i[8]*=t,this},add:function(t,i){var e=this.elements,n=t.elements,s=i.elements;return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e[3]=n[3]+s[3],e[4]=n[4]+s[4],e[5]=n[5]+s[5],e[6]=n[6]+s[6],e[7]=n[7]+s[7],e[8]=n[8]+s[8],this},addEqual:function(t){var i=this.elements,e=t.elements;return i[0]+=e[0],i[1]+=e[1],i[2]+=e[2],i[3]+=e[3],
i[4]+=e[4],i[5]+=e[5],i[6]+=e[6],i[7]+=e[7],i[8]+=e[8],this},sub:function(t,i){var e=this.elements,n=t.elements,s=i.elements;return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e[2]=n[2]-s[2],e[3]=n[3]-s[3],e[4]=n[4]-s[4],e[5]=n[5]-s[5],e[6]=n[6]-s[6],e[7]=n[7]-s[7],e[8]=n[8]-s[8],this},subEqual:function(t){var i=this.elements,e=t.elements;return i[0]-=e[0],i[1]-=e[1],i[2]-=e[2],i[3]-=e[3],i[4]-=e[4],i[5]-=e[5],i[6]-=e[6],i[7]-=e[7],i[8]-=e[8],this},scale:function(t,i){var e=this.elements,n=t.elements;return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=n[3]*i,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=n[7]*i,e[8]=n[8]*i,this},scaleEqual:function(t){var i=this.elements;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,i[8]*=t,this},mul:function(t,i){var e=this.elements,n=t.elements,s=i.elements,o=n[0],r=n[3],a=n[6],h=n[1],l=n[4],u=n[7],c=n[2],p=n[5],d=n[8],m=s[0],f=s[3],y=s[6],v=s[1],x=s[4],g=s[7],b=s[2],N=s[5],_=s[8];return e[0]=o*m+h*f+c*y,e[1]=o*v+h*x+c*g,e[2]=o*b+h*N+c*_,e[3]=r*m+l*f+p*y,e[4]=r*v+l*x+p*g,e[5]=r*b+l*N+p*_,e[6]=a*m+u*f+d*y,e[7]=a*v+u*x+d*g,e[8]=a*b+u*N+d*_,this},mulScale:function(t,i,e,n,s){var o=s||!1,r=this.elements,a=t.elements;return o?(r[0]=i*a[0],r[1]=i*a[1],r[2]=i*a[2],r[3]=e*a[3],r[4]=e*a[4],r[5]=e*a[5],r[6]=n*a[6],r[7]=n*a[7],r[8]=n*a[8]):(r[0]=a[0]*i,r[1]=a[1]*e,r[2]=a[2]*n,r[3]=a[3]*i,r[4]=a[4]*e,r[5]=a[5]*n,r[6]=a[6]*i,r[7]=a[7]*e,r[8]=a[8]*n),this},mulRotate:function(t,i,e,s,o,r){var a=r||!1,h=n.sin(i),l=n.cos(i),u=1-l,c=e*e*u+l,p=e*s*u-o*h,d=e*o*u+s*h,m=s*e*u+o*h,f=s*s*u+l,y=s*o*u-e*h,v=o*e*u-s*h,x=o*s*u+e*h,g=o*o*u+l,b=t.elements,N=b[0],_=b[3],C=b[6],P=b[1],w=b[4],k=b[7],A=b[2],S=b[5],E=b[8],I=this.elements;return a?(I[0]=c*N+p*_+d*C,I[1]=c*P+p*w+d*k,I[2]=c*A+p*S+d*E,I[3]=m*N+f*_+y*C,I[4]=m*P+f*w+y*k,I[5]=m*A+f*S+y*E,I[6]=v*N+x*_+g*C,I[7]=v*P+x*w+g*k,I[8]=v*A+x*S+g*E):(I[0]=N*c+P*m+A*v,I[1]=N*p+P*f+A*x,I[2]=N*d+P*y+A*g,I[3]=_*c+w*m+S*v,I[4]=_*p+w*f+S*x,I[5]=_*d+w*y+S*g,I[6]=C*c+k*m+E*v,I[7]=C*p+k*f+E*x,I[8]=C*d+k*y+E*g),this},transpose:function(t){var i=this.elements,e=t.elements;return i[0]=e[0],i[1]=e[3],i[2]=e[6],i[3]=e[1],i[4]=e[4],i[5]=e[7],i[6]=e[2],i[7]=e[5],i[8]=e[8],this},setQuat:function(t){var i=this.elements,e=2*t.x,n=2*t.y,s=2*t.z,o=t.x*e,r=t.y*n,a=t.z*s,h=t.x*n,l=t.y*s,u=t.x*s,c=t.s*e,p=t.s*n,d=t.s*s;return i[0]=1-r-a,i[1]=h-d,i[2]=u+p,i[3]=h+d,i[4]=1-o-a,i[5]=l-c,i[6]=u-p,i[7]=l+c,i[8]=1-o-r,this},invert:function(t){var i=this.elements,e=t.elements,n=e[0],s=e[3],o=e[6],r=e[1],a=e[4],h=e[7],l=e[2],u=e[5],c=e[8],p=a*c-h*u,d=h*l-r*c,m=r*u-a*l,f=n*p+s*d+o*m;return 0!=f&&(f=1/f),i[0]=f*p,i[1]=f*d,i[2]=f*m,i[3]=f*(u*o-s*c),i[4]=f*(n*c-l*o),i[5]=f*(l*s-n*u),i[6]=f*(s*h-a*o),i[7]=f*(r*o-n*h),i[8]=f*(n*a-r*s),this},toEuler:function(){function t(t){return n.min(n.max(t,-1),1)}var i=this.elements,e=i[0],s=i[3],o=i[6],r=(i[1],i[4]),a=i[7],h=(i[2],i[5]),l=i[8],u=new n.Vec3;new n.Quat;return u.y=n.asin(t(o)),n.abs(o)<.99999?(u.x=n.atan2(-a,l),u.z=n.atan2(-s,e)):(u.x=n.atan2(h,r),u.z=0),u},toString:function(){var t=this.elements,i="Mat33|"+t[0].toFixed(4)+", "+t[1].toFixed(4)+", "+t[2].toFixed(4)+"|\n     |"+t[3].toFixed(4)+", "+t[4].toFixed(4)+", "+t[5].toFixed(4)+"|\n     |"+t[6].toFixed(4)+", "+t[7].toFixed(4)+", "+t[8].toFixed(4)+"|";return i},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var i=t.elements;return this.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]),this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}},n.Quat=function(t,i,e,n){this.s=void 0!==t?t:1,this.x=i||0,this.y=e||0,this.z=n||0},n.Quat.prototype={constructor:n.Quat,set:function(t,i,e,n){return this.x=t,this.y=i,this.z=e,this.s=n,this},init:function(t,i,e,n){return this.s=void 0!==t?t:1,this.x=i||0,this.y=e||0,this.z=n||0,this},add:function(t,i){return this.s=t.s+i.s,this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addTime:function(t,i){var e=t.x,s=t.y,o=t.z,r=this.s,a=this.x,h=this.y,l=this.z;i*=.5;var u=(-e*a-s*h-o*l)*i,c=(e*r+s*l-o*h)*i,p=(-e*l+s*r+o*a)*i,d=(e*h-s*a+o*r)*i;r+=u,a+=c,h+=p,l+=d;var m=1/n.sqrt(r*r+a*a+h*h+l*l);return this.s=r*m,this.x=a*m,this.y=h*m,this.z=l*m,this},sub:function(t,i){return this.s=t.s-i.s,this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},scale:function(t,i){return this.s=t.s*i,this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this},mul:function(t,i){var e=t.x,n=t.y,s=t.z,o=t.s,r=i.x,a=i.y,h=i.z,l=i.s;return this.x=e*l+o*r+n*h-s*a,this.y=n*l+o*a+s*r-e*h,this.z=s*l+o*h+e*a-n*r,this.s=o*l-e*r-n*a-s*h,this},arc:function(t,i){var e=t.x,s=t.y,o=t.z,r=i.x,a=i.y,h=i.z,l=e*r+s*a+o*h;if(-1==l)return r=s*e-o*o,a=-o*s-e*e,h=e*o+s*s,l=1/n.sqrt(r*r+a*a+h*h),this.s=0,this.x=r*l,this.y=a*l,this.z=h*l,this;var u=s*h-o*a,c=o*r-e*h,p=e*a-s*r;return this.s=n.sqrt(.5*(1+l)),l=.5/this.s,this.x=u*l,this.y=c*l,this.z=p*l,this},normalize:function(t){var i=n.sqrt(t.s*t.s+t.x*t.x+t.y*t.y+t.z*t.z);return i>0&&(i=1/i),this.s=t.s*i,this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this},invert:function(t){return this.s=t.s,this.x=-t.x,this.y=-t.y,this.z=-t.z,this},length:function(){return n.sqrt(this.s*this.s+this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.s=t.s,this.x=t.x,this.y=t.y,this.z=t.z,this},testDiff:function(t){return this.s!==t.s||this.x!==t.x||this.y!==t.y||this.z!==t.z?!0:!1},clone:function(t){return new n.Quat(this.s,this.x,this.y,this.z)},toString:function(){return"Quat["+this.s.toFixed(4)+", ("+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+")]"}},n.Quaternion=function(t,i,e,n){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==n?n:1},n.Quaternion.prototype={constructor:n.Quaternion,setFromRotationMatrix:function(t){var i,e=t.elements,s=e[0],o=e[1],r=e[2],a=e[3],h=e[4],l=e[5],u=e[6],c=e[7],p=e[8],d=s+h+p;return d>0?(i=.5/n.sqrt(d+1),this.w=.25/i,this.x=(c-l)*i,this.y=(r-u)*i,this.z=(a-o)*i):s>h&&s>p?(i=2*n.sqrt(1+s-h-p),this.w=(c-l)/i,this.x=.25*i,this.y=(o+a)/i,this.z=(r+u)/i):h>p?(i=2*n.sqrt(1+h-s-p),this.w=(r-u)/i,this.x=(o+a)/i,this.y=.25*i,this.z=(l+c)/i):(i=2*n.sqrt(1+p-s-h),this.w=(a-o)/i,this.x=(r+u)/i,this.y=(l+c)/i,this.z=.25*i),this}},n.Vec3=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0},n.Vec3.prototype={constructor:n.Vec3,init:function(t,i,e){return this.x=t||0,this.y=i||0,this.z=e||0,this},set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},add:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addTime:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},sub:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},addScale:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},scale:function(t,i){return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},cross:function(t,i){var e=t.x,n=t.y,s=t.z,o=i.x,r=i.y,a=i.z;return this.x=n*a-s*r,this.y=s*o-e*a,this.z=e*r-n*o,this},mul:function(t,i,e){var n=e.elements;return this.x=t.x+i.x*n[0]+i.y*n[1]+i.z*n[2],this.y=t.y+i.x*n[3]+i.y*n[4]+i.z*n[5],this.z=t.z+i.x*n[6]+i.y*n[7]+i.z*n[8],this},mulMat:function(t,i){var e=t.elements;return this.x=e[0]*i.x+e[1]*i.y+e[2]*i.z,this.y=e[3]*i.x+e[4]*i.y+e[5]*i.z,this.z=e[6]*i.x+e[7]*i.y+e[8]*i.z,this},normalize:function(t){var i=t.x,e=t.y,s=t.z,o=i*i+e*e+s*s;return o>0&&(o=1/n.sqrt(o),this.x=i*o,this.y=e*o,this.z=s*o),this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return n.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyQuaternion:function(t){var i=this.x,e=this.y,n=this.z,s=t.x,o=t.y,r=t.z,a=t.s,h=a*i+o*n-r*e,l=a*e+r*i-s*n,u=a*n+s*e-o*i,c=-s*i-o*e-r*n;return this.x=h*a+c*-s+l*-r-u*-o,this.y=l*a+c*-o+u*-s-h*-r,this.z=u*a+c*-r+h*-o-l*-s,this},testZero:function(){return 0!==this.x||0!==this.y||0!==this.z?!0:!1},testDiff:function(t){return t.x!==this.x||t.y!==this.y||t.z!==this.z},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},norm:function(){return this.divideScalar(this.length())}},n.Euler=function(t,i,e,s){this._x=t||0,this._y=i||0,this._z=e||0,this._order=s||n.Euler.DefaultOrder},n.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n.Euler.DefaultOrder="XYZ",n.clamp=function(t,i,e){return i>t?i:t>e?e:t},n.Euler.prototype={constructor:n.Euler,_x:0,_y:0,_z:0,_order:n.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,i,e,n){return this._x=t,this._y=i,this._z=e,this._order=n||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,i){var e=n.clamp,s=t.elements,o=s[0],r=s[1],a=s[2],h=s[3],l=s[4],u=s[5],c=s[6],p=s[7],d=s[8];return i=i||this._order,"XYZ"===i?(this._y=n.asin(e(a,-1,1)),n.abs(a)<.99999?(this._x=n.atan2(-u,d),this._z=n.atan2(-r,o)):(this._x=n.atan2(p,l),this._z=0)):"YXZ"===i?(this._x=n.asin(-e(u,-1,1)),n.abs(u)<.99999?(this._y=n.atan2(a,d),this._z=n.atan2(h,l)):(this._y=n.atan2(-c,o),this._z=0)):"ZXY"===i?(this._x=n.asin(e(p,-1,1)),n.abs(p)<.99999?(this._y=n.atan2(-c,d),this._z=n.atan2(-r,l)):(this._y=0,this._z=n.atan2(h,o))):"ZYX"===i?(this._y=n.asin(-e(c,-1,1)),n.abs(c)<.99999?(this._x=n.atan2(p,d),this._z=n.atan2(h,o)):(this._x=0,this._z=n.atan2(-r,l))):"YZX"===i?(this._z=n.asin(e(h,-1,1)),n.abs(h)<.99999?(this._x=n.atan2(-u,l),this._y=n.atan2(-c,o)):(this._x=0,this._y=n.atan2(a,d))):"XZY"===i?(this._z=n.asin(-e(r,-1,1)),n.abs(r)<.99999?(this._x=n.atan2(p,l),this._y=n.atan2(a,o)):(this._x=n.atan2(-u,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+i),this._order=i,this.onChangeCallback(),this},setFromQuaternion:function(t,i,e){var s=n.clamp,o=t.x*t.x,r=t.y*t.y,a=t.z*t.z,h=t.s*t.s;return i=i||this._order,"XYZ"===i?(this._x=n.atan2(2*(t.x*t.s-t.y*t.z),h-o-r+a),this._y=n.asin(s(2*(t.x*t.z+t.y*t.s),-1,1)),this._z=n.atan2(2*(t.z*t.s-t.x*t.y),h+o-r-a)):"YXZ"===i?(this._x=n.asin(s(2*(t.x*t.s-t.y*t.z),-1,1)),this._y=n.atan2(2*(t.x*t.z+t.y*t.s),h-o-r+a),this._z=n.atan2(2*(t.x*t.y+t.z*t.s),h-o+r-a)):"ZXY"===i?(this._x=n.asin(s(2*(t.x*t.s+t.y*t.z),-1,1)),this._y=n.atan2(2*(t.y*t.s-t.z*t.x),h-o-r+a),this._z=n.atan2(2*(t.z*t.s-t.x*t.y),h-o+r-a)):"ZYX"===i?(this._x=n.atan2(2*(t.x*t.s+t.z*t.y),h-o-r+a),this._y=n.asin(s(2*(t.y*t.s-t.x*t.z),-1,1)),this._z=n.atan2(2*(t.x*t.y+t.z*t.s),h+o-r-a)):"YZX"===i?(this._x=n.atan2(2*(t.x*t.s-t.z*t.y),h-o+r-a),this._y=n.atan2(2*(t.y*t.s-t.x*t.z),h+o-r-a),this._z=n.asin(s(2*(t.x*t.y+t.z*t.s),-1,1))):"XZY"===i?(this._x=n.atan2(2*(t.x*t.s+t.y*t.z),h-o+r-a),this._y=n.atan2(2*(t.x*t.z+t.y*t.s),h+o-r-a),this._z=n.asin(s(2*(t.z*t.s-t.x*t.y),-1,1))):console.warn("OIMO.Euler: .setFromQuaternion() given unsupported order: "+i),this._order=i,e!==!1&&this.onChangeCallback(),this},reorder:function(){var t=new n.Quat;return function(i){t.setFromEuler(this),this.setFromQuaternion(t,i)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new n.Euler(this._x,this._y,this._z,this._order)}},n.EulerToAxis=function(t,i,e){var s=n.cos(.5*i),o=n.sin(.5*i),r=n.cos(.5*e),a=n.sin(.5*e),h=n.cos(.5*t),l=n.sin(.5*t),u=s*r,c=o*a,p=u*h-c*l,d=u*l+c*h,m=o*r*h+s*a*l,f=s*a*h-o*r*l,y=2*n.acos(p),v=d*d+m*m+f*f;return.001>v?(d=1,m=f=0):(v=n.sqrt(v),d/=v,m/=v,f/=v),[y,d,m,f]},n.EulerToMatrix=function(t,i,e){var s=n.cos(i),o=n.sin(i),r=n.cos(e),a=n.sin(e),h=n.cos(t),l=n.sin(t),u=new n.Mat33,c=u.elements;return c[0]=s*r,c[1]=o*l-s*a*h,c[2]=s*a*l+o*h,c[3]=a,c[4]=r*h,c[5]=-r*l,c[6]=-o*r,c[7]=o*a*h+s*l,c[8]=-o*a*l+s*h,u},n.MatrixToEuler=function(t){var i,e,s,o=t.elements;return o[3]>.998?(e=n.atan2(o[2],o[8]),s=n.PI/2,i=0):o[3]<-.998?(e=n.atan2(o[2],o[8]),s=-n.PI/2,i=0):(e=n.atan2(-o[6],o[0]),i=n.atan2(-o[5],o[4]),s=n.asin(o[3])),[i,e,s]},n.unwrapDegrees=function(t){return t%=360,t>180&&(t-=360),-180>t&&(t+=360),t},n.unwrapRadian=function(t){return t%=n.TwoPI,t>n.PI&&(t-=n.TwoPI),t<-n.PI&&(t+=n.TwoPI),t},n.Distance3d=function(t,i){var e=i[0]-t[0],s=i[1]-t[1],o=i[2]-t[2];return n.sqrt(e*e+s*s+o*o)},n.Constraint=function(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1},n.Constraint.prototype={constructor:n.Constraint,preSolve:function(t,i){n.Error("Constraint","Inheritance error.")},solve:function(){n.Error("Constraint","Inheritance error.")},postSolve:function(){n.Error("Constraint","Inheritance error.")}},n.Joint=function(t){n.Constraint.call(this),this.name="",this.type=n.JOINT_NULL,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=(new n.Vec3).copy(t.localAnchorPoint1),this.localAnchorPoint2=(new n.Vec3).copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new n.Vec3,this.relativeAnchorPoint2=new n.Vec3,this.anchorPoint1=new n.Vec3,this.anchorPoint2=new n.Vec3,this.allowCollision=t.allowCollision,this.b1Link=new n.JointLink(this),this.b2Link=new n.JointLink(this),this.matrix=new n.Mat44},n.Joint.prototype=Object.create(n.Constraint.prototype),n.Joint.prototype.constructor=n.Joint,n.Joint.prototype.updateAnchorPoints=function(){this.relativeAnchorPoint1.mulMat(this.body1.rotation,this.localAnchorPoint1),this.relativeAnchorPoint2.mulMat(this.body2.rotation,this.localAnchorPoint2),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},n.Joint.prototype.attach=function(){this.b1Link.body=this.body2,this.b2Link.body=this.body1,null!=this.body1.jointLink?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,null!=this.body2.jointLink?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++},n.Joint.prototype.detach=function(){var t=this.b1Link.prev,i=this.b1Link.next;null!=t&&(t.next=i),null!=i&&(i.prev=t),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=i),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,t=this.b2Link.prev,i=this.b2Link.next,null!=t&&(t.next=i),null!=i&&(i.prev=t),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=i),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--,this.b1Link.body=null,this.b2Link.body=null},n.Joint.prototype.awake=function(){this.body1.awake(),this.body2.awake()},n.Joint.prototype.preSolve=function(t,i){},n.Joint.prototype.solve=function(){},n.Joint.prototype.postSolve=function(){},n.Joint.prototype.remove=function(){this.dispose()},n.Joint.prototype.dispose=function(){this.parent.removeJoint(this)},n.Joint.prototype.getPosition=function(){var t=(new n.Vec3).scale(this.anchorPoint1,n.WORLD_SCALE),i=(new n.Vec3).scale(this.anchorPoint2,n.WORLD_SCALE);return[t,i]},n.Joint.prototype.getMatrix=function(){var t=this.matrix.elements,i=this.anchorPoint1,e=this.anchorPoint2;return t[0]=i.x*n.WORLD_SCALE,t[1]=i.y*n.WORLD_SCALE,t[2]=i.z*n.WORLD_SCALE,t[3]=0,t[4]=e.x*n.WORLD_SCALE,t[5]=e.y*n.WORLD_SCALE,t[6]=e.z*n.WORLD_SCALE,t[7]=0,t},n.JointConfig=function(){this.body1=null,this.body2=null,this.localAnchorPoint1=new n.Vec3,this.localAnchorPoint2=new n.Vec3,this.localAxis1=new n.Vec3,this.localAxis2=new n.Vec3,this.allowCollision=!1},n.JointLink=function(t){this.prev=null,this.next=null,this.body=null,this.joint=t},n.LimitMotor=function(t,i){i=i||!1,this.axis=t,this.angle=0,this.lowerLimit=i?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0},n.LimitMotor.prototype={constructor:n.LimitMotor,setLimit:function(t,i){this.lowerLimit=t,this.upperLimit=i},setMotor:function(t,i){this.motorSpeed=t,this.maxMotorForce=i},setSpring:function(t,i){this.frequency=t,this.dampingRatio=i}},n.BallAndSocketJoint=function(t){n.Joint.call(this,t),this.type=n.JOINT_BALL_AND_SOCKET,this.lc=new n.LinearConstraint(this)},n.BallAndSocketJoint.prototype=Object.create(n.Joint.prototype),n.BallAndSocketJoint.prototype.constructor=n.BallAndSocketJoint,n.BallAndSocketJoint.prototype.preSolve=function(t,i){this.updateAnchorPoints(),this.lc.preSolve(t,i)},n.BallAndSocketJoint.prototype.solve=function(){this.lc.solve()},n.BallAndSocketJoint.prototype.postSolve=function(){},n.DistanceJoint=function(t,i,e){n.Joint.call(this,t),this.type=n.JOINT_DISTANCE,this.normal=new n.Vec3,this.nr=new n.Vec3,this.limitMotor=new n.LimitMotor(this.normal,!0),this.limitMotor.lowerLimit=i,this.limitMotor.upperLimit=e,this.t=new n.TranslationalConstraint(this,this.limitMotor)},n.DistanceJoint.prototype=Object.create(n.Joint.prototype),n.DistanceJoint.prototype.constructor=n.DistanceJoint,n.DistanceJoint.prototype.preSolve=function(t,i){this.updateAnchorPoints(),this.nr.sub(this.anchorPoint2,this.anchorPoint1),this.normal.normalize(this.nr),this.t.preSolve(t,i)},n.DistanceJoint.prototype.solve=function(){this.t.solve()},n.DistanceJoint.prototype.postSolve=function(){},n.HingeJoint=function(t,i,e){n.Joint.call(this,t),this.type=n.JOINT_HINGE,this.localAxis1=t.localAxis1.clone().norm(),this.localAxis2=t.localAxis2.clone().norm(),this.localAngle1=new n.Vec3(this.localAxis1.y*this.localAxis1.x-this.localAxis1.z*this.localAxis1.z,-this.localAxis1.z*this.localAxis1.y-this.localAxis1.x*this.localAxis1.x,this.localAxis1.x*this.localAxis1.z+this.localAxis1.y*this.localAxis1.y).norm();var s=(new n.Mat33).setQuat((new n.Quat).arc(this.localAxis1,this.localAxis2));this.localAngle2=(new n.Vec3).mulMat(s,this.localAngle1),this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.ax1=new n.Vec3,this.ax2=new n.Vec3,this.an1=new n.Vec3,this.an2=new n.Vec3,this.limitMotor=new n.LimitMotor(this.nor,!1),this.limitMotor.lowerLimit=i,this.limitMotor.upperLimit=e,this.lc=new n.LinearConstraint(this),this.r3=new n.Rotational3Constraint(this,this.limitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0))},n.HingeJoint.prototype=Object.create(n.Joint.prototype),n.HingeJoint.prototype.constructor=n.HingeJoint,n.HingeJoint.prototype.preSolve=function(t,i){var e,n,s,o;this.updateAnchorPoints(),this.ax1.mulMat(this.body1.rotation,this.localAxis1),this.ax2.mulMat(this.body2.rotation,this.localAxis2),this.an1.mulMat(this.body1.rotation,this.localAngle1),this.an2.mulMat(this.body2.rotation,this.localAngle2),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).norm(),this.tan.set(this.nor.y*this.nor.x-this.nor.z*this.nor.z,-this.nor.z*this.nor.y-this.nor.x*this.nor.x,this.nor.x*this.nor.z+this.nor.y*this.nor.y).norm(),this.bin.set(this.nor.y*this.tan.z-this.nor.z*this.tan.y,this.nor.z*this.tan.x-this.nor.x*this.tan.z,this.nor.x*this.tan.y-this.nor.y*this.tan.x),o=this.acosClamp(this.an1.x*this.an2.x+this.an1.y*this.an2.y+this.an1.z*this.an2.z),this.nor.x*(this.an1.y*this.an2.z-this.an1.z*this.an2.y)+this.nor.y*(this.an1.z*this.an2.x-this.an1.x*this.an2.z)+this.nor.z*(this.an1.x*this.an2.y-this.an1.y*this.an2.x)<0?this.limitMotor.angle=-o:this.limitMotor.angle=o,e=this.ax1.y*this.ax2.z-this.ax1.z*this.ax2.y,n=this.ax1.z*this.ax2.x-this.ax1.x*this.ax2.z,s=this.ax1.x*this.ax2.y-this.ax1.y*this.ax2.x,this.r3.limitMotor2.angle=this.tan.x*e+this.tan.y*n+this.tan.z*s,this.r3.limitMotor3.angle=this.bin.x*e+this.bin.y*n+this.bin.z*s,this.r3.preSolve(t,i),this.lc.preSolve(t,i)},n.HingeJoint.prototype.solve=function(){this.r3.solve(),this.lc.solve()},n.HingeJoint.prototype.postSolve=function(){},n.HingeJoint.prototype.acosClamp=function(t){return t>1?0:-1>t?n.PI:n.acos(t)},n.PrismaticJoint=function(t,i,e){n.Joint.call(this,t),this.type=n.JOINT_PRISMATIC,this.localAxis1=(new n.Vec3).normalize(t.localAxis1),this.localAxis2=(new n.Vec3).normalize(t.localAxis2),this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z,this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.ac=new n.AngularConstraint(this,(new n.Quat).arc(this.localAxis1,this.localAxis2)),this.limitMotor=new n.LimitMotor(this.nor,!0),this.limitMotor.lowerLimit=i,this.limitMotor.upperLimit=e,this.t3=new n.Translational3Constraint(this,this.limitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0))},n.PrismaticJoint.prototype=Object.create(n.Joint.prototype),n.PrismaticJoint.prototype.constructor=n.PrismaticJoint,n.PrismaticJoint.prototype.preSolve=function(t,i){var e,s;this.updateAnchorPoints(),e=this.body1.rotation.elements;var o=this.localAxis1X*e[0]+this.localAxis1Y*e[1]+this.localAxis1Z*e[2],r=this.localAxis1X*e[3]+this.localAxis1Y*e[4]+this.localAxis1Z*e[5],a=this.localAxis1X*e[6]+this.localAxis1Y*e[7]+this.localAxis1Z*e[8];e=this.body2.rotation.elements;var h=this.localAxis2X*e[0]+this.localAxis2Y*e[1]+this.localAxis2Z*e[2],l=this.localAxis2X*e[3]+this.localAxis2Y*e[4]+this.localAxis2Z*e[5],u=this.localAxis2X*e[6]+this.localAxis2Y*e[7]+this.localAxis2Z*e[8],c=o*this.body2.inverseMass+h*this.body1.inverseMass,p=r*this.body2.inverseMass+l*this.body1.inverseMass,d=a*this.body2.inverseMass+u*this.body1.inverseMass;s=n.sqrt(c*c+p*p+d*d),s>0&&(s=1/s),c*=s,p*=s,d*=s;var m=p*c-d*d,f=-d*p-c*c,y=c*d+p*p;s=1/n.sqrt(m*m+f*f+y*y),m*=s,f*=s,y*=s;var v=p*y-d*f,x=d*m-c*y,g=c*f-p*m;this.nor.init(c,p,d),this.tan.init(m,f,y),this.bin.init(v,x,g),this.ac.preSolve(t,i),this.t3.preSolve(t,i)},n.PrismaticJoint.prototype.solve=function(){this.ac.solve(),this.t3.solve()},n.PrismaticJoint.prototype.postSolve=function(){},n.SliderJoint=function(t,i,e){n.Joint.call(this,t),this.type=n.JOINT_SLIDER,this.localAxis1=(new n.Vec3).normalize(t.localAxis1),this.localAxis2=(new n.Vec3).normalize(t.localAxis2);var s;this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAngAxis1X=this.localAxis1Y*this.localAxis1X-this.localAxis1Z*this.localAxis1Z,this.localAngAxis1Y=-this.localAxis1Z*this.localAxis1Y-this.localAxis1X*this.localAxis1X,this.localAngAxis1Z=this.localAxis1X*this.localAxis1Z+this.localAxis1Y*this.localAxis1Y,s=1/n.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=s,this.localAngAxis1Y*=s,this.localAngAxis1Z*=s,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z;var o=(new n.Mat33).setQuat((new n.Quat).arc(this.localAxis1,this.localAxis2)),r=o.elements;this.localAngAxis2X=this.localAngAxis1X*r[0]+this.localAngAxis1Y*r[1]+this.localAngAxis1Z*r[2],this.localAngAxis2Y=this.localAngAxis1X*r[3]+this.localAngAxis1Y*r[4]+this.localAngAxis1Z*r[5],this.localAngAxis2Z=this.localAngAxis1X*r[6]+this.localAngAxis1Y*r[7]+this.localAngAxis1Z*r[8],this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.rotationalLimitMotor=new n.LimitMotor(this.nor,!1),this.r3=new n.Rotational3Constraint(this,this.rotationalLimitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0)),this.translationalLimitMotor=new n.LimitMotor(this.nor,!0),this.translationalLimitMotor.lowerLimit=i,this.translationalLimitMotor.upperLimit=e,this.t3=new n.Translational3Constraint(this,this.translationalLimitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0))},n.SliderJoint.prototype=Object.create(n.Joint.prototype),n.SliderJoint.prototype.constructor=n.SliderJoint,n.SliderJoint.prototype.preSolve=function(t,i){var e,s,o,r;this.updateAnchorPoints(),e=this.body1.rotation.elements;var a=this.localAxis1X*e[0]+this.localAxis1Y*e[1]+this.localAxis1Z*e[2],h=this.localAxis1X*e[3]+this.localAxis1Y*e[4]+this.localAxis1Z*e[5],l=this.localAxis1X*e[6]+this.localAxis1Y*e[7]+this.localAxis1Z*e[8],u=this.localAngAxis1X*e[0]+this.localAngAxis1Y*e[1]+this.localAngAxis1Z*e[2],c=this.localAngAxis1X*e[3]+this.localAngAxis1Y*e[4]+this.localAngAxis1Z*e[5],p=this.localAngAxis1X*e[6]+this.localAngAxis1Y*e[7]+this.localAngAxis1Z*e[8];e=this.body2.rotation.elements;var d=this.localAxis2X*e[0]+this.localAxis2Y*e[1]+this.localAxis2Z*e[2],m=this.localAxis2X*e[3]+this.localAxis2Y*e[4]+this.localAxis2Z*e[5],f=this.localAxis2X*e[6]+this.localAxis2Y*e[7]+this.localAxis2Z*e[8],y=this.localAngAxis2X*e[0]+this.localAngAxis2Y*e[1]+this.localAngAxis2Z*e[2],v=this.localAngAxis2X*e[3]+this.localAngAxis2Y*e[4]+this.localAngAxis2Z*e[5],x=this.localAngAxis2X*e[6]+this.localAngAxis2Y*e[7]+this.localAngAxis2Z*e[8],g=a*this.body2.inverseMass+d*this.body1.inverseMass,b=h*this.body2.inverseMass+m*this.body1.inverseMass,N=l*this.body2.inverseMass+f*this.body1.inverseMass;s=n.sqrt(g*g+b*b+N*N),s>0&&(s=1/s),g*=s,b*=s,N*=s;var _=b*g-N*N,C=-N*b-g*g,P=g*N+b*b;s=1/n.sqrt(_*_+C*C+P*P),_*=s,C*=s,P*=s;var w=b*P-N*C,k=N*_-g*P,A=g*C-b*_;this.nor.init(g,b,N),this.tan.init(_,C,P),this.bin.init(w,k,A),0>g*(c*x-p*v)+b*(p*y-u*x)+N*(u*v-c*y)?this.rotationalLimitMotor.angle=-this.acosClamp(u*y+c*v+p*x):this.rotationalLimitMotor.angle=this.acosClamp(u*y+c*v+p*x),s=h*f-l*m,o=l*d-a*f,r=a*m-h*d,this.r3.limitMotor2.angle=_*s+C*o+P*r,this.r3.limitMotor3.angle=w*s+k*o+A*r,this.r3.preSolve(t,i),this.t3.preSolve(t,i)},n.SliderJoint.prototype.solve=function(){this.r3.solve(),this.t3.solve()},n.SliderJoint.prototype.postSolve=function(){},n.SliderJoint.prototype.acosClamp=function(t){return t>1?0:-1>t?n.PI:n.acos(t)},n.WheelJoint=function(t){n.Joint.call(this,t),this.type=n.JOINT_WHEEL,this.localAxis1=(new n.Vec3).normalize(t.localAxis1),this.localAxis2=(new n.Vec3).normalize(t.localAxis2);var i;this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z;var e=this.localAxis1X*this.localAxis2X+this.localAxis1Y*this.localAxis2Y+this.localAxis1Z*this.localAxis2Z;if(e>-1&&1>e)this.localAngAxis1X=this.localAxis2X-e*this.localAxis1X,this.localAngAxis1Y=this.localAxis2Y-e*this.localAxis1Y,this.localAngAxis1Z=this.localAxis2Z-e*this.localAxis1Z,this.localAngAxis2X=this.localAxis1X-e*this.localAxis2X,this.localAngAxis2Y=this.localAxis1Y-e*this.localAxis2Y,this.localAngAxis2Z=this.localAxis1Z-e*this.localAxis2Z,i=1/n.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=i,this.localAngAxis1Y*=i,this.localAngAxis1Z*=i,i=1/n.sqrt(this.localAngAxis2X*this.localAngAxis2X+this.localAngAxis2Y*this.localAngAxis2Y+this.localAngAxis2Z*this.localAngAxis2Z),this.localAngAxis2X*=i,this.localAngAxis2Y*=i,this.localAngAxis2Z*=i;else{this.localAngAxis1X=this.localAxis1Y*this.localAxis1X-this.localAxis1Z*this.localAxis1Z,this.localAngAxis1Y=-this.localAxis1Z*this.localAxis1Y-this.localAxis1X*this.localAxis1X,this.localAngAxis1Z=this.localAxis1X*this.localAxis1Z+this.localAxis1Y*this.localAxis1Y,i=1/n.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=i,this.localAngAxis1Y*=i,this.localAngAxis1Z*=i;var s=(new n.Mat33).setQuat((new n.Quat).arc(this.localAxis1,this.localAxis2)),o=s.elements;this.localAngAxis2X=this.localAngAxis1X*o[0]+this.localAngAxis1Y*o[1]+this.localAngAxis1Z*o[2],this.localAngAxis2Y=this.localAngAxis1X*o[3]+this.localAngAxis1Y*o[4]+this.localAngAxis1Z*o[5],this.localAngAxis2Z=this.localAngAxis1X*o[6]+this.localAngAxis1Y*o[7]+this.localAngAxis1Z*o[8]}this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.translationalLimitMotor=new n.LimitMotor(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new n.LimitMotor(this.tan,!1),this.rotationalLimitMotor2=new n.LimitMotor(this.bin,!1),this.t3=new n.Translational3Constraint(this,new n.LimitMotor(this.nor,!0),this.translationalLimitMotor,new n.LimitMotor(this.bin,!0)),this.t3.weight=1,this.r3=new n.Rotational3Constraint(this,new n.LimitMotor(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)},n.WheelJoint.prototype=Object.create(n.Joint.prototype),n.WheelJoint.prototype.constructor=n.WheelJoint,n.WheelJoint.prototype.preSolve=function(t,i){var e,s;this.updateAnchorPoints(),e=this.body1.rotation.elements;var o=this.localAxis1X*e[0]+this.localAxis1Y*e[1]+this.localAxis1Z*e[2],r=this.localAxis1X*e[3]+this.localAxis1Y*e[4]+this.localAxis1Z*e[5],a=this.localAxis1X*e[6]+this.localAxis1Y*e[7]+this.localAxis1Z*e[8],h=this.localAngAxis1X*e[0]+this.localAngAxis1Y*e[1]+this.localAngAxis1Z*e[2],l=this.localAngAxis1X*e[3]+this.localAngAxis1Y*e[4]+this.localAngAxis1Z*e[5],u=this.localAngAxis1X*e[6]+this.localAngAxis1Y*e[7]+this.localAngAxis1Z*e[8];e=this.body2.rotation.elements;var c=this.localAxis2X*e[0]+this.localAxis2Y*e[1]+this.localAxis2Z*e[2],p=this.localAxis2X*e[3]+this.localAxis2Y*e[4]+this.localAxis2Z*e[5],d=this.localAxis2X*e[6]+this.localAxis2Y*e[7]+this.localAxis2Z*e[8],m=this.localAngAxis2X*e[0]+this.localAngAxis2Y*e[1]+this.localAngAxis2Z*e[2],f=this.localAngAxis2X*e[3]+this.localAngAxis2Y*e[4]+this.localAngAxis2Z*e[5],y=this.localAngAxis2X*e[6]+this.localAngAxis2Y*e[7]+this.localAngAxis2Z*e[8];this.r3.limitMotor1.angle=o*c+r*p+a*d,0>o*(l*d-u*p)+r*(u*c-h*d)+a*(h*p-l*c)?this.rotationalLimitMotor1.angle=-this.acosClamp(h*c+l*p+u*d):this.rotationalLimitMotor1.angle=this.acosClamp(h*c+l*p+u*d),0>c*(f*a-y*r)+p*(y*o-m*a)+d*(m*r-f*o)?this.rotationalLimitMotor2.angle=this.acosClamp(m*o+f*r+y*a):this.rotationalLimitMotor2.angle=-this.acosClamp(m*o+f*r+y*a);var v=p*a-d*r,x=d*o-c*a,g=c*r-p*o;s=n.sqrt(v*v+x*x+g*g),s>0&&(s=1/s),v*=s,x*=s,g*=s;var b=x*d-g*p,N=g*c-v*d,_=v*p-x*c;s=n.sqrt(b*b+N*N+_*_),s>0&&(s=1/s),b*=s,N*=s,_*=s;var C=r*g-a*x,P=a*v-o*g,w=o*x-r*v;s=n.sqrt(C*C+P*P+w*w),s>0&&(s=1/s),C*=s,P*=s,w*=s,this.nor.init(v,x,g),this.tan.init(b,N,_),this.bin.init(C,P,w),this.r3.preSolve(t,i),this.t3.preSolve(t,i)},n.WheelJoint.prototype.solve=function(){this.r3.solve(),this.t3.solve()},n.WheelJoint.prototype.postSolve=function(){},n.WheelJoint.prototype.acosClamp=function(t){return t>1?0:-1>t?n.PI:n.acos(t)},n.AngularConstraint=function(t,i){this.joint=t,this.targetOrientation=(new n.Quat).invert(i),this.relativeOrientation=new n.Quat,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new n.Vec3,this.imp=new n.Vec3,this.rn0=new n.Vec3,this.rn1=new n.Vec3,this.rn2=new n.Vec3,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,
this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia},n.AngularConstraint.prototype={constructor:n.AngularConstraint,preSolve:function(t,i){var e,s,o;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),o=(new n.Mat33).add(this.ii1,this.ii2).elements,e=1/(o[0]*(o[4]*o[8]-o[7]*o[5])+o[3]*(o[7]*o[2]-o[1]*o[8])+o[6]*(o[1]*o[5]-o[4]*o[2])),this.dd=new n.Mat33(o[4]*o[8]-o[5]*o[7],o[2]*o[7]-o[1]*o[8],o[1]*o[5]-o[2]*o[4],o[5]*o[6]-o[3]*o[8],o[0]*o[8]-o[2]*o[6],o[2]*o[3]-o[0]*o[5],o[3]*o[7]-o[4]*o[6],o[1]*o[6]-o[0]*o[7],o[0]*o[4]-o[1]*o[3]).multiply(e),this.relativeOrientation.invert(this.b1.orientation),this.relativeOrientation.mul(this.targetOrientation,this.relativeOrientation),this.relativeOrientation.mul(this.b2.orientation,this.relativeOrientation),e=2*this.relativeOrientation.s,this.vel.scale(this.relativeOrientation,e),s=this.vel.length(),s>.02?(s=(.02-s)/s*i*.05,this.vel.scaleEqual(s)):this.vel.init(),this.rn1.mulMat(this.ii1,this.imp),this.rn2.mulMat(this.ii2,this.imp),this.a1.addEqual(this.rn1),this.a2.subEqual(this.rn2)},solve:function(){var t=this.a2.clone().subEqual(this.a1).subEqual(this.vel);this.rn0.mulMat(this.dd,t),this.rn1.mulMat(this.ii1,this.rn0),this.rn2.mulMat(this.ii2,this.rn0),this.imp.addEqual(this.rn0),this.a1.addEqual(this.rn1),this.a2.subEqual(this.rn2)}},n.LinearConstraint=function(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0},n.LinearConstraint.prototype={constructor:n.LinearConstraint,preSolve:function(t,i){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var e=this.ii1.elements,s=this.ii2.elements;this.ax1x=this.r1z*e[1]+-this.r1y*e[2],this.ax1y=this.r1z*e[4]+-this.r1y*e[5],this.ax1z=this.r1z*e[7]+-this.r1y*e[8],this.ay1x=-this.r1z*e[0]+this.r1x*e[2],this.ay1y=-this.r1z*e[3]+this.r1x*e[5],this.ay1z=-this.r1z*e[6]+this.r1x*e[8],this.az1x=this.r1y*e[0]+-this.r1x*e[1],this.az1y=this.r1y*e[3]+-this.r1x*e[4],this.az1z=this.r1y*e[6]+-this.r1x*e[7],this.ax2x=this.r2z*s[1]+-this.r2y*s[2],this.ax2y=this.r2z*s[4]+-this.r2y*s[5],this.ax2z=this.r2z*s[7]+-this.r2y*s[8],this.ay2x=-this.r2z*s[0]+this.r2x*s[2],this.ay2y=-this.r2z*s[3]+this.r2x*s[5],this.ay2z=-this.r2z*s[6]+this.r2x*s[8],this.az2x=this.r2y*s[0]+-this.r2x*s[1],this.az2y=this.r2y*s[3]+-this.r2x*s[4],this.az2z=this.r2y*s[6]+-this.r2x*s[7];var o=this.m1+this.m2,r=new n.Mat33(o,0,0,0,o,0,0,0,o),a=r.elements;a[0]+=e[4]*this.r1z*this.r1z-(e[7]+e[5])*this.r1y*this.r1z+e[8]*this.r1y*this.r1y,a[1]+=(e[6]*this.r1y+e[5]*this.r1x)*this.r1z-e[3]*this.r1z*this.r1z-e[8]*this.r1x*this.r1y,a[2]+=(e[3]*this.r1y-e[4]*this.r1x)*this.r1z-e[6]*this.r1y*this.r1y+e[7]*this.r1x*this.r1y,a[3]+=(e[2]*this.r1y+e[7]*this.r1x)*this.r1z-e[1]*this.r1z*this.r1z-e[8]*this.r1x*this.r1y,a[4]+=e[0]*this.r1z*this.r1z-(e[6]+e[2])*this.r1x*this.r1z+e[8]*this.r1x*this.r1x,a[5]+=(e[1]*this.r1x-e[0]*this.r1y)*this.r1z-e[7]*this.r1x*this.r1x+e[6]*this.r1x*this.r1y,a[6]+=(e[1]*this.r1y-e[4]*this.r1x)*this.r1z-e[2]*this.r1y*this.r1y+e[5]*this.r1x*this.r1y,a[7]+=(e[3]*this.r1x-e[0]*this.r1y)*this.r1z-e[5]*this.r1x*this.r1x+e[2]*this.r1x*this.r1y,a[8]+=e[0]*this.r1y*this.r1y-(e[3]+e[1])*this.r1x*this.r1y+e[4]*this.r1x*this.r1x,a[0]+=s[4]*this.r2z*this.r2z-(s[7]+s[5])*this.r2y*this.r2z+s[8]*this.r2y*this.r2y,a[1]+=(s[6]*this.r2y+s[5]*this.r2x)*this.r2z-s[3]*this.r2z*this.r2z-s[8]*this.r2x*this.r2y,a[2]+=(s[3]*this.r2y-s[4]*this.r2x)*this.r2z-s[6]*this.r2y*this.r2y+s[7]*this.r2x*this.r2y,a[3]+=(s[2]*this.r2y+s[7]*this.r2x)*this.r2z-s[1]*this.r2z*this.r2z-s[8]*this.r2x*this.r2y,a[4]+=s[0]*this.r2z*this.r2z-(s[6]+s[2])*this.r2x*this.r2z+s[8]*this.r2x*this.r2x,a[5]+=(s[1]*this.r2x-s[0]*this.r2y)*this.r2z-s[7]*this.r2x*this.r2x+s[6]*this.r2x*this.r2y,a[6]+=(s[1]*this.r2y-s[4]*this.r2x)*this.r2z-s[2]*this.r2y*this.r2y+s[5]*this.r2x*this.r2y,a[7]+=(s[3]*this.r2x-s[0]*this.r2y)*this.r2z-s[5]*this.r2x*this.r2x+s[2]*this.r2x*this.r2y,a[8]+=s[0]*this.r2y*this.r2y-(s[3]+s[1])*this.r2x*this.r2y+s[4]*this.r2x*this.r2x;var h=1/(a[0]*(a[4]*a[8]-a[7]*a[5])+a[3]*(a[7]*a[2]-a[1]*a[8])+a[6]*(a[1]*a[5]-a[4]*a[2]));this.dd=new n.Mat33(a[4]*a[8]-a[5]*a[7],a[2]*a[7]-a[1]*a[8],a[1]*a[5]-a[2]*a[4],a[5]*a[6]-a[3]*a[8],a[0]*a[8]-a[2]*a[6],a[2]*a[3]-a[0]*a[5],a[3]*a[7]-a[4]*a[6],a[1]*a[6]-a[0]*a[7],a[0]*a[4]-a[1]*a[3]).multiply(h),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var l=n.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);l>.005?(l=(.005-l)/l*i*.05,this.velx*=l,this.vely*=l,this.velz*=l):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,i=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,e=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,n=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,s=i*t[0]+e*t[1]+n*t[2],o=i*t[3]+e*t[4]+n*t[5],r=i*t[6]+e*t[7]+n*t[8];this.impx+=s,this.impy+=o,this.impz+=r,this.l1.x+=s*this.m1,this.l1.y+=o*this.m1,this.l1.z+=r*this.m1,this.a1.x+=s*this.ax1x+o*this.ay1x+r*this.az1x,this.a1.y+=s*this.ax1y+o*this.ay1y+r*this.az1y,this.a1.z+=s*this.ax1z+o*this.ay1z+r*this.az1z,this.l2.x-=s*this.m2,this.l2.y-=o*this.m2,this.l2.z-=r*this.m2,this.a2.x-=s*this.ax2x+o*this.ay2x+r*this.az2x,this.a2.y-=s*this.ax2y+o*this.ay2y+r*this.az2y,this.a2.z-=s*this.ax2z+o*this.ay2z+r*this.az2z}},n.Rotational3Constraint=function(t,i,e,n){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=i,this.limitMotor2=e,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0},n.Rotational3Constraint.prototype={constructor:n.Rotational3Constraint,preSolve:function(t,i){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var e=this.i1.elements,n=this.i2.elements;this.i1e00=e[0],this.i1e01=e[1],this.i1e02=e[2],this.i1e10=e[3],this.i1e11=e[4],this.i1e12=e[5],this.i1e20=e[6],this.i1e21=e[7],this.i1e22=e[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var s=this.limitMotor1.frequency,o=this.limitMotor2.frequency,r=this.limitMotor3.frequency,a=s>0,h=o>0,l=r>0,u=this.lowerLimit1<=this.upperLimit1,c=this.lowerLimit2<=this.upperLimit2,p=this.lowerLimit3<=this.upperLimit3,d=this.limitMotor1.angle;u?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-d):d<this.lowerLimit1?(-1!=this.limitState1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-d):d>this.upperLimit1?(1!=this.limitState1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-d):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),a||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var m=this.limitMotor2.angle;c?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-m):m<this.lowerLimit2?(-1!=this.limitState2&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-m):m>this.upperLimit2?(1!=this.limitState2&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-m):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),h||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var f=this.limitMotor3.angle;if(p?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-f):f<this.lowerLimit3?(-1!=this.limitState3&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-f):f>this.upperLimit3?(1!=this.limitState3&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-f):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),l||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(0!=this.limitState1||a)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(0!=this.limitState2||h)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(0!=this.limitState3||l)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,a&&2!=this.limitState1){var y=6.2831853*s,v=y*y*t,x=i/(v+2*this.limitMotor1.dampingRatio*y);this.cfm1=this.kv00*x,this.limitVelocity1*=v*x}else this.cfm1=0,this.limitVelocity1*=.05*i;h&&2!=this.limitState2?(y=6.2831853*o,v=y*y*t,x=i/(v+2*this.limitMotor2.dampingRatio*y),this.cfm2=this.kv11*x,this.limitVelocity2*=v*x):(this.cfm2=0,this.limitVelocity2*=.05*i),l&&2!=this.limitState3?(y=6.2831853*r,v=y*y*t,x=i/(v+2*this.limitMotor3.dampingRatio*y),this.cfm3=this.kv22*x,this.limitVelocity3*=v*x):(this.cfm3=0,this.limitVelocity3*=.05*i),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var g=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*g,this.d01=(this.k02*this.k21-this.k01*this.k22)*g,this.d02=(this.k01*this.k12-this.k02*this.k11)*g,this.d10=(this.k12*this.k20-this.k10*this.k22)*g,this.d11=(this.k00*this.k22-this.k02*this.k20)*g,this.d12=(this.k02*this.k10-this.k00*this.k12)*g,this.d20=(this.k10*this.k21-this.k11*this.k20)*g,this.d21=(this.k01*this.k20-this.k00*this.k21)*g,this.d22=(this.k00*this.k11-this.k01*this.k10)*g,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var b=this.limitImpulse1+this.motorImpulse1,N=this.limitImpulse2+this.motorImpulse2,_=this.limitImpulse3+this.motorImpulse3;this.a1.x+=b*this.a1x1+N*this.a1x2+_*this.a1x3,this.a1.y+=b*this.a1y1+N*this.a1y2+_*this.a1y3,this.a1.z+=b*this.a1z1+N*this.a1z2+_*this.a1z3,this.a2.x-=b*this.a2x1+N*this.a2x2+_*this.a2x3,this.a2.y-=b*this.a2y1+N*this.a2y2+_*this.a2y3,this.a2.z-=b*this.a2z1+N*this.a2z2+_*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,i=this.a2.y-this.a1.y,e=this.a2.z-this.a1.z;this.limitVelocity3=30;var n=t*this.ax1+i*this.ay1+e*this.az1-this.limitVelocity1,s=t*this.ax2+i*this.ay2+e*this.az2-this.limitVelocity2,o=t*this.ax3+i*this.ay3+e*this.az3-this.limitVelocity3,r=n*this.d00+s*this.d01+o*this.d02,a=n*this.d10+s*this.d11+o*this.d12,h=n*this.d20+s*this.d21+o*this.d22;this.limitImpulse1+=r,this.limitImpulse2+=a,this.limitImpulse3+=h,this.a1.x+=r*this.a1x1+a*this.a1x2+h*this.a1x3,this.a1.y+=r*this.a1y1+a*this.a1y2+h*this.a1y3,this.a1.z+=r*this.a1z1+a*this.a1z2+h*this.a1z3,this.a2.x-=r*this.a2x1+a*this.a2x2+h*this.a2x3,this.a2.y-=r*this.a2y1+a*this.a2y2+h*this.a2y3,this.a2.z-=r*this.a2z1+a*this.a2z2+h*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,i=this.a2.y-this.a1.y,e=this.a2.z-this.a1.z,n=t*this.ax1+i*this.ay1+e*this.az1,s=t*this.ax2+i*this.ay2+e*this.az2,o=t*this.ax3+i*this.ay3+e*this.az3,r=this.motorImpulse1,a=this.motorImpulse2,h=this.motorImpulse3,l=0,u=0,c=0;this.enableMotor1&&(l=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=l,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),l=this.motorImpulse1-r),this.enableMotor2&&(u=(s-this.motorSpeed2)*this.dv11,this.motorImpulse2+=u,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),u=this.motorImpulse2-a),this.enableMotor3&&(c=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=c,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),c=this.motorImpulse3-h),n+=l*this.kv00+u*this.k01+c*this.k02,s+=l*this.k10+u*this.kv11+c*this.k12,o+=l*this.k20+u*this.k21+c*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,s-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,d=this.limitImpulse2,m=this.limitImpulse3,f=n*this.d00+s*this.d01+o*this.d02,y=n*this.d10+s*this.d11+o*this.d12,v=n*this.d20+s*this.d21+o*this.d22;this.limitImpulse1+=f,this.limitImpulse2+=y,this.limitImpulse3+=v;var x=0;(2==this.limitState1||this.limitImpulse1*this.limitState1<0)&&(f=-p,s+=f*this.k10,o+=f*this.k20,x|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2<0)&&(y=-d,n+=y*this.k01,o+=y*this.k21,x|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3<0)&&(v=-m,n+=v*this.k02,s+=v*this.k12,x|=4);var g;switch(x){case 1:g=1/(this.k11*this.k22-this.k12*this.k21),y=(this.k22*s+-this.k12*o)*g,v=(-this.k21*s+this.k11*o)*g;break;case 2:g=1/(this.k00*this.k22-this.k02*this.k20),f=(this.k22*n+-this.k02*o)*g,v=(-this.k20*n+this.k00*o)*g;break;case 3:v=o/this.k22;break;case 4:g=1/(this.k00*this.k11-this.k01*this.k10),f=(this.k11*n+-this.k01*s)*g,y=(-this.k10*n+this.k00*s)*g;break;case 5:y=s/this.k11;break;case 6:f=n/this.k00}this.limitImpulse1=f+p,this.limitImpulse2=y+d,this.limitImpulse3=v+m;var b=l+f,N=u+y,_=c+v;this.a1.x+=b*this.a1x1+N*this.a1x2+_*this.a1x3,this.a1.y+=b*this.a1y1+N*this.a1y2+_*this.a1y3,this.a1.z+=b*this.a1z1+N*this.a1z2+_*this.a1z3,this.a2.x-=b*this.a2x1+N*this.a2x2+_*this.a2x3,this.a2.y-=b*this.a2y1+N*this.a2y2+_*this.a2y3,this.a2.z-=b*this.a2z1+N*this.a2z2+_*this.a2z3,t=this.a2.x-this.a1.x,i=this.a2.y-this.a1.y,e=this.a2.z-this.a1.z,s=t*this.ax2+i*this.ay2+e*this.az2}},n.RotationalConstraint=function(t,i){this.cfm=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.enableLimit=!1,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=i,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0},n.RotationalConstraint.prototype={constructor:n.RotationalConstraint,preSolve:function(t,i){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0;var e=this.i1.elements,n=this.i2.elements;this.i1e00=e[0],this.i1e01=e[1],this.i1e02=e[2],this.i1e10=e[3],this.i1e11=e[4],this.i1e12=e[5],this.i1e20=e[6],this.i1e21=e[7],this.i1e22=e[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var s=this.limitMotor.frequency,o=s>0,r=this.lowerLimit<=this.upperLimit,a=this.limitMotor.angle;if(r?(this.lowerLimit==this.upperLimit?(0!=this.limitState&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a):a<this.lowerLimit?(-1!=this.limitState&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a):a>this.upperLimit?(1!=this.limitState&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-a):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),o||(this.limitVelocity>.02?this.limitVelocity-=.02:this.limitVelocity<-.02?this.limitVelocity+=.02:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(0!=this.limitState||o)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0),this.a1x=this.ax*this.i1e00+this.ay*this.i1e01+this.az*this.i1e02,this.a1y=this.ax*this.i1e10+this.ay*this.i1e11+this.az*this.i1e12,this.a1z=this.ax*this.i1e20+this.ay*this.i1e21+this.az*this.i1e22,this.a2x=this.ax*this.i2e00+this.ay*this.i2e01+this.az*this.i2e02,this.a2y=this.ax*this.i2e10+this.ay*this.i2e11+this.az*this.i2e12,this.a2z=this.ax*this.i2e20+this.ay*this.i2e21+this.az*this.i2e22,this.motorDenom=this.ax*(this.a1x+this.a2x)+this.ay*(this.a1y+this.a2y)+this.az*(this.a1z+this.a2z),this.invMotorDenom=1/this.motorDenom,o&&2!=this.limitState){var h=6.2831853*s,l=h*h*t,u=i/(l+2*this.limitMotor.dampingRatio*h);this.cfm=this.motorDenom*u,this.limitVelocity*=l*u}else this.cfm=0,this.limitVelocity*=.05*i;this.invDenom=1/(this.motorDenom+this.cfm),this.limitImpulse*=.95,this.motorImpulse*=.95;var c=this.limitImpulse+this.motorImpulse;this.a1.x+=c*this.a1x,this.a1.y+=c*this.a1y,this.a1.z+=c*this.a1z,this.a2.x-=c*this.a2x,this.a2.y-=c*this.a2y,this.a2.z-=c*this.a2z},solve:function(){var t,i=this.ax*(this.a2.x-this.a1.x)+this.ay*(this.a2.y-this.a1.y)+this.az*(this.a2.z-this.a1.z);if(this.enableMotor){t=(i-this.motorSpeed)*this.invMotorDenom;var e=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),t=this.motorImpulse-e,i-=t*this.motorDenom}else t=0;var n;if(2!=this.limitState){n=(i-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var s=this.limitImpulse;this.limitImpulse+=n,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),n=this.limitImpulse-s}else n=0;var o=n+t;this.a1.x+=o*this.a1x,this.a1.y+=o*this.a1y,this.a1.z+=o*this.a1z,this.a2.x-=o*this.a2x,this.a2.y-=o*this.a2y,this.a2.z-=o*this.a2z}},n.Translational3Constraint=function(t,i,e,n){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=i,this.limitMotor2=e,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1},n.Translational3Constraint.prototype={constructor:n.Translational3Constraint,preSolve:function(t,i){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var e=this.i1.elements,n=this.i2.elements;this.i1e00=e[0],this.i1e01=e[1],this.i1e02=e[2],this.i1e10=e[3],this.i1e11=e[4],this.i1e12=e[5],this.i1e20=e[6],this.i1e21=e[7],this.i1e22=e[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var s=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,r=this.p2.z-this.p1.z,a=s*this.ax1+o*this.ay1+r*this.az1,h=s*this.ax2+o*this.ay2+r*this.az2,l=s*this.ax3+o*this.ay3+r*this.az3,u=this.limitMotor1.frequency,c=this.limitMotor2.frequency,p=this.limitMotor3.frequency,d=u>0,m=c>0,f=p>0,y=this.lowerLimit1<=this.upperLimit1,v=this.lowerLimit2<=this.upperLimit2,x=this.lowerLimit3<=this.upperLimit3;(d&&a>20||-20>a)&&(d=!1),(m&&h>20||-20>h)&&(m=!1),(f&&l>20||-20>l)&&(f=!1),y?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-a,d||(a=this.lowerLimit1)):a<this.lowerLimit1?(-1!=this.limitState1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-a,d||(a=this.lowerLimit1)):a>this.upperLimit1?(1!=this.limitState1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-a,d||(a=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),d||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),v?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-h,m||(h=this.lowerLimit2)):h<this.lowerLimit2?(-1!=this.limitState2&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-h,m||(h=this.lowerLimit2)):h>this.upperLimit2?(1!=this.limitState2&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-h,m||(h=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),m||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),x?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-l,f||(l=this.lowerLimit3)):l<this.lowerLimit3?(-1!=this.limitState3&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-l,f||(l=this.lowerLimit3)):l>this.upperLimit3?(1!=this.limitState3&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-l,f||(l=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),f||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(0!=this.limitState1||d)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(0!=this.limitState2||m)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(0!=this.limitState3||f)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var g=a*this.ax1+h*this.ax2+l*this.ax2,b=a*this.ay1+h*this.ay2+l*this.ay2,N=a*this.az1+h*this.az2+l*this.az2,_=this.m2/(this.m1+this.m2);this.weight>=0&&(_=this.weight);var C=1-_;this.r1x=this.r1.x+g*_,
this.r1y=this.r1.y+b*_,this.r1z=this.r1.z+N*_,this.r2x=this.r2.x-g*C,this.r2y=this.r2.y-b*C,this.r2z=this.r2.z-N*C,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var P=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*P,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*P,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*P,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*P,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*P,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*P,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*P,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*P,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*P,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,d&&2!=this.limitState1){var w=6.2831853*u,k=w*w*t,A=i/(k+2*this.limitMotor1.dampingRatio*w);this.cfm1=this.kv00*A,this.limitVelocity1*=k*A}else this.cfm1=0,this.limitVelocity1*=.05*i;m&&2!=this.limitState2?(w=6.2831853*c,k=w*w*t,A=i/(k+2*this.limitMotor2.dampingRatio*w),this.cfm2=this.kv11*A,this.limitVelocity2*=k*A):(this.cfm2=0,this.limitVelocity2*=.05*i),f&&2!=this.limitState3?(w=6.2831853*p,k=w*w*t,A=i/(k+2*this.limitMotor3.dampingRatio*w),this.cfm3=this.kv22*A,this.limitVelocity3*=k*A):(this.cfm3=0,this.limitVelocity3*=.05*i),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var S=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*S,this.d01=(this.k02*this.k21-this.k01*this.k22)*S,this.d02=(this.k01*this.k12-this.k02*this.k11)*S,this.d10=(this.k12*this.k20-this.k10*this.k22)*S,this.d11=(this.k00*this.k22-this.k02*this.k20)*S,this.d12=(this.k02*this.k10-this.k00*this.k12)*S,this.d20=(this.k10*this.k21-this.k11*this.k20)*S,this.d21=(this.k01*this.k20-this.k00*this.k21)*S,this.d22=(this.k00*this.k11-this.k01*this.k10)*S;var E=this.limitImpulse1+this.motorImpulse1,I=this.limitImpulse2+this.motorImpulse2,M=this.limitImpulse3+this.motorImpulse3;this.l1.x+=E*this.l1x1+I*this.l1x2+M*this.l1x3,this.l1.y+=E*this.l1y1+I*this.l1y2+M*this.l1y3,this.l1.z+=E*this.l1z1+I*this.l1z2+M*this.l1z3,this.a1.x+=E*this.a1x1+I*this.a1x2+M*this.a1x3,this.a1.y+=E*this.a1y1+I*this.a1y2+M*this.a1y3,this.a1.z+=E*this.a1z1+I*this.a1z2+M*this.a1z3,this.l2.x-=E*this.l2x1+I*this.l2x2+M*this.l2x3,this.l2.y-=E*this.l2y1+I*this.l2y2+M*this.l2y3,this.l2.z-=E*this.l2z1+I*this.l2z2+M*this.l2z3,this.a2.x-=E*this.a2x1+I*this.a2x2+M*this.a2x3,this.a2.y-=E*this.a2y1+I*this.a2y2+M*this.a2y3,this.a2.z-=E*this.a2z1+I*this.a2z2+M*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,i=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,e=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,n=t*this.ax1+i*this.ay1+e*this.az1,s=t*this.ax2+i*this.ay2+e*this.az2,o=t*this.ax3+i*this.ay3+e*this.az3,r=this.motorImpulse1,a=this.motorImpulse2,h=this.motorImpulse3,l=0,u=0,c=0;this.enableMotor1&&(l=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=l,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),l=this.motorImpulse1-r),this.enableMotor2&&(u=(s-this.motorSpeed2)*this.dv11,this.motorImpulse2+=u,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),u=this.motorImpulse2-a),this.enableMotor3&&(c=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=c,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),c=this.motorImpulse3-h),n+=l*this.kv00+u*this.k01+c*this.k02,s+=l*this.k10+u*this.kv11+c*this.k12,o+=l*this.k20+u*this.k21+c*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,s-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,d=this.limitImpulse2,m=this.limitImpulse3,f=n*this.d00+s*this.d01+o*this.d02,y=n*this.d10+s*this.d11+o*this.d12,v=n*this.d20+s*this.d21+o*this.d22;this.limitImpulse1+=f,this.limitImpulse2+=y,this.limitImpulse3+=v;var x=0;(2==this.limitState1||this.limitImpulse1*this.limitState1<0)&&(f=-p,s+=f*this.k10,o+=f*this.k20,x|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2<0)&&(y=-d,n+=y*this.k01,o+=y*this.k21,x|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3<0)&&(v=-m,n+=v*this.k02,s+=v*this.k12,x|=4);var g;switch(x){case 1:g=1/(this.k11*this.k22-this.k12*this.k21),y=(this.k22*s+-this.k12*o)*g,v=(-this.k21*s+this.k11*o)*g;break;case 2:g=1/(this.k00*this.k22-this.k02*this.k20),f=(this.k22*n+-this.k02*o)*g,v=(-this.k20*n+this.k00*o)*g;break;case 3:v=o/this.k22;break;case 4:g=1/(this.k00*this.k11-this.k01*this.k10),f=(this.k11*n+-this.k01*s)*g,y=(-this.k10*n+this.k00*s)*g;break;case 5:y=s/this.k11;break;case 6:f=n/this.k00}this.limitImpulse1=p+f,this.limitImpulse2=d+y,this.limitImpulse3=m+v;var b=l+f,N=u+y,_=c+v;this.l1.x+=b*this.l1x1+N*this.l1x2+_*this.l1x3,this.l1.y+=b*this.l1y1+N*this.l1y2+_*this.l1y3,this.l1.z+=b*this.l1z1+N*this.l1z2+_*this.l1z3,this.a1.x+=b*this.a1x1+N*this.a1x2+_*this.a1x3,this.a1.y+=b*this.a1y1+N*this.a1y2+_*this.a1y3,this.a1.z+=b*this.a1z1+N*this.a1z2+_*this.a1z3,this.l2.x-=b*this.l2x1+N*this.l2x2+_*this.l2x3,this.l2.y-=b*this.l2y1+N*this.l2y2+_*this.l2y3,this.l2.z-=b*this.l2z1+N*this.l2z2+_*this.l2z3,this.a2.x-=b*this.a2x1+N*this.a2x2+_*this.a2x3,this.a2.y-=b*this.a2y1+N*this.a2y2+_*this.a2y3,this.a2.z-=b*this.a2z1+N*this.a2z2+_*this.a2z3}},n.TranslationalConstraint=function(t,i){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=i,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0},n.TranslationalConstraint.prototype={constructor:n.TranslationalConstraint,preSolve:function(t,i){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var e=this.i1.elements,n=this.i2.elements;this.i1e00=e[0],this.i1e01=e[1],this.i1e02=e[2],this.i1e10=e[3],this.i1e11=e[4],this.i1e12=e[5],this.i1e20=e[6],this.i1e21=e[7],this.i1e22=e[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var s=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,r=this.p2.z-this.p1.z,a=s*this.ax+o*this.ay+r*this.az,h=this.limitMotor.frequency,l=h>0,u=this.lowerLimit<=this.upperLimit;(l&&a>20||-20>a)&&(l=!1),u?(this.lowerLimit==this.upperLimit?(0!=this.limitState&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a,l||(a=this.lowerLimit)):a<this.lowerLimit?(-1!=this.limitState&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a,l||(a=this.lowerLimit)):a>this.upperLimit?(1!=this.limitState&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-a,l||(a=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),l||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(0!=this.limitState||l)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var c=a*this.ax,p=a*this.ay,d=a*this.az,m=this.m1/(this.m1+this.m2),f=1-m;if(this.r1x=this.r1.x+c*m,this.r1y=this.r1.y+p*m,this.r1z=this.r1.z+d*m,this.r2x=this.r2.x-c*f,this.r2y=this.r2.y-p*f,this.r2z=this.r2.z-d*f,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,l&&2!=this.limitState){var y=6.2831853*h,v=y*y*t,x=i/(v+2*this.limitMotor.dampingRatio*y);this.cfm=this.motorDenom*x,this.limitVelocity*=v*x}else this.cfm=0,this.limitVelocity*=.05*i;this.invDenom=1/(this.motorDenom+this.cfm);var g=this.limitImpulse+this.motorImpulse;this.l1.x+=g*this.l1x,this.l1.y+=g*this.l1y,this.l1.z+=g*this.l1z,this.a1.x+=g*this.a1x,this.a1.y+=g*this.a1y,this.a1.z+=g*this.a1z,this.l2.x-=g*this.l2x,this.l2.y-=g*this.l2y,this.l2.z-=g*this.l2z,this.a2.x-=g*this.a2x,this.a2.y-=g*this.a2y,this.a2.z-=g*this.a2z},solve:function(){var t,i=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){t=(i-this.motorSpeed)*this.invMotorDenom;var e=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),t=this.motorImpulse-e,i-=t*this.motorDenom}else t=0;var n;if(2!=this.limitState){n=(i-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var s=this.limitImpulse;this.limitImpulse+=n,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),n=this.limitImpulse-s}else n=0;var o=n+t;this.l1.x+=o*this.l1x,this.l1.y+=o*this.l1y,this.l1.z+=o*this.l1z,this.a1.x+=o*this.a1x,this.a1.y+=o*this.a1y,this.a1.z+=o*this.a1z,this.l2.x-=o*this.l2x,this.l2.y-=o*this.l2y,this.l2.z-=o*this.l2z,this.a2.x-=o*this.a2x,this.a2.y-=o*this.a2y,this.a2.z-=o*this.a2z}},n.Contact=function(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.b1Link=new n.ContactLink(this),this.b2Link=new n.ContactLink(this),this.s1Link=new n.ContactLink(this),this.s2Link=new n.ContactLink(this),this.manifold=new n.ContactManifold,this.buffer=[],this.buffer.length=4,this.buffer[0]=new n.ImpulseDataBuffer,this.buffer[1]=new n.ImpulseDataBuffer,this.buffer[2]=new n.ImpulseDataBuffer,this.buffer[3]=new n.ImpulseDataBuffer,this.points=this.manifold.points,this.constraint=new n.ContactConstraint(this.manifold)},n.Contact.prototype={constructor:n.Contact,mixRestitution:function(t,i){return n.sqrt(t*i)},mixFriction:function(t,i){return n.sqrt(t*i)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,i=t;i--;){var e=this.buffer[i],n=this.points[i];e.lp1X=n.localPoint1.x,e.lp1Y=n.localPoint1.y,e.lp1Z=n.localPoint1.z,e.lp2X=n.localPoint2.x,e.lp2Y=n.localPoint2.y,e.lp2Z=n.localPoint2.z,e.impulse=n.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var s=this.manifold.numPoints;if(0==s)return void(this.touching=!1);for(this.touching=!0,i=s;i--;){n=this.points[i];for(var o=n.localPoint1.x,r=n.localPoint1.y,a=n.localPoint1.z,h=n.localPoint2.x,l=n.localPoint2.y,u=n.localPoint2.z,c=-1,p=4e-4,d=t;d--;){e=this.buffer[d];var m=e.lp1X-o,f=e.lp1Y-r,y=e.lp1Z-a,v=m*m+f*f+y*y;m=e.lp2X-h,f=e.lp2Y-l,y=e.lp2Z-u;var x=m*m+f*f+y*y;x>v?p>v&&(p=v,c=d):p>x&&(p=x,c=d)}if(-1!=c){var g=this.buffer[c];this.buffer[c]=this.buffer[--t],this.buffer[t]=g,n.normalImpulse=g.impulse,n.warmStarted=!0}else n.normalImpulse=0,n.warmStarted=!1}},attach:function(t,i){this.shape1=t,this.shape2=i,this.body1=t.parent,this.body2=i.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=i,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,null!=t.contactLink?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,null!=i.contactLink?(this.s2Link.next=i.contactLink).prev=this.s2Link:this.s2Link.next=null,i.contactLink=this.s2Link,i.numContacts++,this.b1Link.shape=i,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,null!=this.body1.contactLink?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,null!=this.body2.contactLink?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,i=this.s1Link.next;null!==t&&(t.next=i),null!==i&&(i.prev=t),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=i),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,i=this.s2Link.next,null!==t&&(t.next=i),null!==i&&(i.prev=t),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=i),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,i=this.b1Link.next,null!==t&&(t.next=i),null!==i&&(i.prev=t),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=i),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,i=this.b2Link.next,null!==t&&(t.next=i),null!==i&&(i.prev=t),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=i),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}},n.ContactConstraint=function(t){n.Constraint.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.ii1=null,this.ii2=null,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new n.ContactPointDataBuffer,this.cs.next=new n.ContactPointDataBuffer,this.cs.next.next=new n.ContactPointDataBuffer,this.cs.next.next.next=new n.ContactPointDataBuffer},n.ContactConstraint.prototype=Object.create(n.Constraint.prototype),n.ContactConstraint.prototype.attach=function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},n.ContactConstraint.prototype.detach=function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},n.ContactConstraint.prototype.preSolve=function(t,i){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var e=this.ii1.elements,s=this.ii2.elements,o=this.p1.x,r=this.p1.y,a=this.p1.z,h=this.p2.x,l=this.p2.y,u=this.p2.z,c=this.m1+this.m2;this.num=this.manifold.numPoints;for(var p=this.cs,d=0;d<this.num;d++){var m,f,y,v,x,g,b=this.ps[d];m=b.position.x,f=b.position.y,y=b.position.z;var N=m-o,_=f-r,C=y-a,P=m-h,w=f-l,k=y-u;p.rp1X=N,p.rp1Y=_,p.rp1Z=C,p.rp2X=P,p.rp2Y=w,p.rp2Z=k,p.norImp=b.normalImpulse,p.tanImp=b.tangentImpulse,p.binImp=b.binormalImpulse;var A=b.normal.x,S=b.normal.y,E=b.normal.z,I=this.lv2.x+this.av2.y*k-this.av2.z*w-(this.lv1.x+this.av1.y*C-this.av1.z*_),M=this.lv2.y+this.av2.z*P-this.av2.x*k-(this.lv1.y+this.av1.z*N-this.av1.x*C),z=this.lv2.z+this.av2.x*w-this.av2.y*P-(this.lv1.z+this.av1.x*_-this.av1.y*N),D=A*I+S*M+E*z,T=I-D*A,L=M-D*S,O=z-D*E,R=T*T+L*L+O*O;R>.04?R=1/n.sqrt(R):(T=S*A-E*E,L=-E*S-A*A,O=A*E+S*S,R=1/n.sqrt(T*T+L*L+O*O)),T*=R,L*=R,O*=R;var V=S*O-E*L,B=E*T-A*O,U=A*L-S*T;p.norX=A,p.norY=S,p.norZ=E,p.tanX=T,p.tanY=L,p.tanZ=O,p.binX=V,p.binY=B,p.binZ=U,p.norU1X=A*this.m1,p.norU1Y=S*this.m1,p.norU1Z=E*this.m1,p.norU2X=A*this.m2,p.norU2Y=S*this.m2,p.norU2Z=E*this.m2,p.tanU1X=T*this.m1,p.tanU1Y=L*this.m1,p.tanU1Z=O*this.m1,p.tanU2X=T*this.m2,p.tanU2Y=L*this.m2,p.tanU2Z=O*this.m2,p.binU1X=V*this.m1,p.binU1Y=B*this.m1,p.binU1Z=U*this.m1,p.binU2X=V*this.m2,p.binU2Y=B*this.m2,p.binU2Z=U*this.m2;var j=_*E-C*S,F=C*A-N*E,Y=N*S-_*A,X=w*E-k*S,W=k*A-P*E,Z=P*S-w*A,q=_*O-C*L,H=C*T-N*O,J=N*L-_*T,K=w*O-k*L,Q=k*T-P*O,G=P*L-w*T,$=_*U-C*B,tt=C*V-N*U,it=N*B-_*V,et=w*U-k*B,nt=k*V-P*U,st=P*B-w*V,ot=j*e[0]+F*e[1]+Y*e[2],rt=j*e[3]+F*e[4]+Y*e[5],at=j*e[6]+F*e[7]+Y*e[8],ht=X*s[0]+W*s[1]+Z*s[2],lt=X*s[3]+W*s[4]+Z*s[5],ut=X*s[6]+W*s[7]+Z*s[8],ct=q*e[0]+H*e[1]+J*e[2],pt=q*e[3]+H*e[4]+J*e[5],dt=q*e[6]+H*e[7]+J*e[8],mt=K*s[0]+Q*s[1]+G*s[2],ft=K*s[3]+Q*s[4]+G*s[5],yt=K*s[6]+Q*s[7]+G*s[8],vt=$*e[0]+tt*e[1]+it*e[2],xt=$*e[3]+tt*e[4]+it*e[5],gt=$*e[6]+tt*e[7]+it*e[8],bt=et*s[0]+nt*s[1]+st*s[2],Nt=et*s[3]+nt*s[4]+st*s[5],_t=et*s[6]+nt*s[7]+st*s[8];p.norT1X=j,p.norT1Y=F,p.norT1Z=Y,p.tanT1X=q,p.tanT1Y=H,p.tanT1Z=J,p.binT1X=$,p.binT1Y=tt,p.binT1Z=it,p.norT2X=X,p.norT2Y=W,p.norT2Z=Z,p.tanT2X=K,p.tanT2Y=Q,p.tanT2Z=G,p.binT2X=et,p.binT2Y=nt,p.binT2Z=st,p.norTU1X=ot,p.norTU1Y=rt,p.norTU1Z=at,p.tanTU1X=ct,p.tanTU1Y=pt,p.tanTU1Z=dt,p.binTU1X=vt,p.binTU1Y=xt,p.binTU1Z=gt,p.norTU2X=ht,p.norTU2Y=lt,p.norTU2Z=ut,p.tanTU2X=mt,p.tanTU2Y=ft,p.tanTU2Z=yt,p.binTU2X=bt,p.binTU2Y=Nt,p.binTU2Z=_t,m=j*e[0]+F*e[1]+Y*e[2],f=j*e[3]+F*e[4]+Y*e[5],y=j*e[6]+F*e[7]+Y*e[8],v=f*C-y*_,x=y*N-m*C,g=m*_-f*N,m=X*s[0]+W*s[1]+Z*s[2],f=X*s[3]+W*s[4]+Z*s[5],y=X*s[6]+W*s[7]+Z*s[8],v+=f*k-y*w,x+=y*P-m*k,g+=m*w-f*P;var Ct=1/(c+A*v+S*x+E*g);m=q*e[0]+H*e[1]+J*e[2],f=q*e[3]+H*e[4]+J*e[5],y=q*e[6]+H*e[7]+J*e[8],v=f*C-y*_,x=y*N-m*C,g=m*_-f*N,m=K*s[0]+Q*s[1]+G*s[2],f=K*s[3]+Q*s[4]+G*s[5],y=K*s[6]+Q*s[7]+G*s[8],v+=f*k-y*w,x+=y*P-m*k,g+=m*w-f*P;var Pt=1/(c+T*v+L*x+O*g);m=$*e[0]+tt*e[1]+it*e[2],f=$*e[3]+tt*e[4]+it*e[5],y=$*e[6]+tt*e[7]+it*e[8],v=f*C-y*_,x=y*N-m*C,g=m*_-f*N,m=et*s[0]+nt*s[1]+st*s[2],f=et*s[3]+nt*s[4]+st*s[5],y=et*s[6]+nt*s[7]+st*s[8],v+=f*k-y*w,x+=y*P-m*k,g+=m*w-f*P;var wt=1/(c+V*v+B*x+U*g);if(p.norDen=Ct,p.tanDen=Pt,p.binDen=wt,b.warmStarted){var kt=b.normalImpulse;this.lv1.x+=p.norU1X*kt,this.lv1.y+=p.norU1Y*kt,this.lv1.z+=p.norU1Z*kt,this.av1.x+=ot*kt,this.av1.y+=rt*kt,this.av1.z+=at*kt,this.lv2.x-=p.norU2X*kt,this.lv2.y-=p.norU2Y*kt,this.lv2.z-=p.norU2Z*kt,this.av2.x-=ht*kt,this.av2.y-=lt*kt,this.av2.z-=ut*kt,p.norImp=kt,p.tanImp=0,p.binImp=0,D=0}else p.norImp=0,p.tanImp=0,p.binImp=0;D>-1&&(D=0);var At=this.restitution*-D,St=-(b.penetration+.005)*i*.05;St>At&&(At=St),p.norTar=At,p.last=d==this.num-1,p=p.next}},n.ContactConstraint.prototype.solve=function(){for(var t=this.lv1.x,i=this.lv1.y,e=this.lv1.z,s=this.lv2.x,o=this.lv2.y,r=this.lv2.z,a=this.av1.x,h=this.av1.y,l=this.av1.z,u=this.av2.x,c=this.av2.y,p=this.av2.z,d=this.cs;;){var m,f,y,v,x,g=d.norImp,b=d.tanImp,N=d.binImp,_=-g*this.friction,C=s-t,P=o-i,w=r-e;x=C*d.tanX+P*d.tanY+w*d.tanZ+u*d.tanT2X+c*d.tanT2Y+p*d.tanT2Z-a*d.tanT1X-h*d.tanT1Y-l*d.tanT1Z,m=b,f=x*d.tanDen,b+=f,x=C*d.binX+P*d.binY+w*d.binZ+u*d.binT2X+c*d.binT2Y+p*d.binT2Z-a*d.binT1X-h*d.binT1Y-l*d.binT1Z,y=N,v=x*d.binDen,N+=v;var k=b*b+N*N;if(k>_*_&&(k=_/n.sqrt(k),b*=k,N*=k),f=b-m,v=N-y,t+=d.tanU1X*f+d.binU1X*v,i+=d.tanU1Y*f+d.binU1Y*v,e+=d.tanU1Z*f+d.binU1Z*v,a+=d.tanTU1X*f+d.binTU1X*v,h+=d.tanTU1Y*f+d.binTU1Y*v,l+=d.tanTU1Z*f+d.binTU1Z*v,s-=d.tanU2X*f+d.binU2X*v,o-=d.tanU2Y*f+d.binU2Y*v,r-=d.tanU2Z*f+d.binU2Z*v,u-=d.tanTU2X*f+d.binTU2X*v,c-=d.tanTU2Y*f+d.binTU2Y*v,p-=d.tanTU2Z*f+d.binTU2Z*v,x=(s-t)*d.norX+(o-i)*d.norY+(r-e)*d.norZ+u*d.norT2X+c*d.norT2Y+p*d.norT2Z-a*d.norT1X-h*d.norT1Y-l*d.norT1Z,m=g,f=(x-d.norTar)*d.norDen,g+=f,g>0&&(g=0),f=g-m,t+=d.norU1X*f,i+=d.norU1Y*f,e+=d.norU1Z*f,a+=d.norTU1X*f,h+=d.norTU1Y*f,l+=d.norTU1Z*f,s-=d.norU2X*f,o-=d.norU2Y*f,r-=d.norU2Z*f,u-=d.norTU2X*f,c-=d.norTU2Y*f,p-=d.norTU2Z*f,d.norImp=g,d.tanImp=b,d.binImp=N,d.last)break;d=d.next}this.lv1.x=t,this.lv1.y=i,this.lv1.z=e,this.lv2.x=s,this.lv2.y=o,this.lv2.z=r,this.av1.x=a,this.av1.y=h,this.av1.z=l,this.av2.x=u,this.av2.y=c,this.av2.z=p},n.ContactConstraint.prototype.postSolve=function(){for(var t=this.cs,i=this.num;i--;){var e=this.ps[i];e.normal.x=t.norX,e.normal.y=t.norY,e.normal.z=t.norZ,e.tangent.x=t.tanX,e.tangent.y=t.tanY,e.tangent.z=t.tanZ,e.binormal.x=t.binX,e.binormal.y=t.binY,e.binormal.z=t.binZ,e.normalImpulse=t.norImp,e.tangentImpulse=t.tanImp,e.binormalImpulse=t.binImp,e.normalDenominator=t.norDen,e.tangentDenominator=t.tanDen,e.binormalDenominator=t.binDen,t=t.next}},n.ContactLink=function(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t},n.ContactManifold=function(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[],this.points.length=4,this.points[0]=new n.ManifoldPoint,this.points[1]=new n.ManifoldPoint,this.points[2]=new n.ManifoldPoint,this.points[3]=new n.ManifoldPoint},n.ContactManifold.prototype={constructor:n.ContactManifold,reset:function(t,i){this.body1=t.parent,this.body2=i.parent,this.numPoints=0},addPoint:function(t,i,e,n,s,o,r,a){var h=this.points[this.numPoints++];h.position.x=t,h.position.y=i,h.position.z=e;var l=this.body1.rotation,u=t-this.body1.position.x,c=i-this.body1.position.y,p=e-this.body1.position.z,d=l.elements;h.localPoint1.x=u*d[0]+c*d[3]+p*d[6],h.localPoint1.y=u*d[1]+c*d[4]+p*d[7],h.localPoint1.z=u*d[2]+c*d[5]+p*d[8],l=this.body2.rotation,u=t-this.body2.position.x,c=i-this.body2.position.y,p=e-this.body2.position.z,h.localPoint2.x=u*d[0]+c*d[3]+p*d[6],h.localPoint2.y=u*d[1]+c*d[4]+p*d[7],h.localPoint2.z=u*d[2]+c*d[5]+p*d[8],h.normalImpulse=0,a?(h.normal.x=-n,h.normal.y=-s,h.normal.z=-o):(h.normal.x=n,h.normal.y=s,h.normal.z=o),h.penetration=r,h.warmStarted=!1}},n.ContactPointDataBuffer=function(){this.norX=NaN,this.norY=NaN,this.norZ=NaN,this.tanX=NaN,this.tanY=NaN,this.tanZ=NaN,this.binX=NaN,this.binY=NaN,this.binZ=NaN,this.rp1X=NaN,this.rp1Y=NaN,this.rp1Z=NaN,this.rp2X=NaN,this.rp2Y=NaN,this.rp2Z=NaN,this.norU1X=NaN,this.norU1Y=NaN,this.norU1Z=NaN,this.norU2X=NaN,this.norU2Y=NaN,this.norU2Z=NaN,this.tanU1X=NaN,this.tanU1Y=NaN,this.tanU1Z=NaN,this.tanU2X=NaN,this.tanU2Y=NaN,this.tanU2Z=NaN,this.binU1X=NaN,this.binU1Y=NaN,this.binU1Z=NaN,this.binU2X=NaN,this.binU2Y=NaN,this.binU2Z=NaN,this.norT1X=NaN,this.norT1Y=NaN,this.norT1Z=NaN,this.norT2X=NaN,this.norT2Y=NaN,this.norT2Z=NaN,this.tanT1X=NaN,this.tanT1Y=NaN,this.tanT1Z=NaN,this.tanT2X=NaN,this.tanT2Y=NaN,this.tanT2Z=NaN,this.binT1X=NaN,this.binT1Y=NaN,this.binT1Z=NaN,this.binT2X=NaN,this.binT2Y=NaN,this.binT2Z=NaN,this.norTU1X=NaN,this.norTU1Y=NaN,this.norTU1Z=NaN,this.norTU2X=NaN,this.norTU2Y=NaN,this.norTU2Z=NaN,this.tanTU1X=NaN,this.tanTU1Y=NaN,this.tanTU1Z=NaN,this.tanTU2X=NaN,this.tanTU2Y=NaN,this.tanTU2Z=NaN,this.binTU1X=NaN,this.binTU1Y=NaN,this.binTU1Z=NaN,this.binTU2X=NaN,this.binTU2Y=NaN,this.binTU2Z=NaN,this.norImp=NaN,this.tanImp=NaN,this.binImp=NaN,this.norDen=NaN,this.tanDen=NaN,this.binDen=NaN,this.norTar=NaN,this.next=null,this.last=!1},n.ImpulseDataBuffer=function(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN},n.ManifoldPoint=function(){this.warmStarted=!1,this.position=new n.Vec3,this.localPoint1=new n.Vec3,this.localPoint2=new n.Vec3,this.normal=new n.Vec3,this.tangent=new n.Vec3,this.binormal=new n.Vec3,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0},n.MassInfo=function(){this.mass=0,this.inertia=new n.Mat33},n.Shape=function(t){this.type=n.SHAPE_NULL,this.id=n.nextID++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new n.Vec3,this.rotation=new n.Mat33,this.relativePosition=(new n.Vec3).copy(t.relativePosition),this.relativeRotation=(new n.Mat33).copy(t.relativeRotation),this.aabb=new n.AABB,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith},n.Shape.prototype={constructor:n.Shape,calculateMassInfo:function(t){n.Error("Shape","Inheritance error.")},updateProxy:function(){n.Error("Shape","Inheritance error.")}},n.ShapeConfig=function(){this.relativePosition=new n.Vec3,this.relativeRotation=new n.Mat33,this.friction=.4,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295},n.BoxShape=function(t,i,s,o){n.Shape.call(this,t),this.type=n.SHAPE_BOX,this.width=i,this.height=s,this.depth=o,this.halfWidth=.5*i,this.halfHeight=.5*s,this.halfDepth=.5*o,this.dimentions=new e(18),this.elements=new e(24)},n.BoxShape.prototype=Object.create(n.Shape.prototype),n.BoxShape.prototype.constructor=n.BoxShape,n.BoxShape.prototype.calculateMassInfo=function(t){var i=this.width*this.height*this.depth*this.density,e=1/12;t.mass=i,t.inertia.set(i*(this.height*this.height+this.depth*this.depth)*e,0,0,0,i*(this.width*this.width+this.depth*this.depth)*e,0,0,0,i*(this.width*this.width+this.height*this.height)*e)},n.BoxShape.prototype.updateProxy=function(){var t=this.rotation.elements,i=this.dimentions;i[0]=t[0],i[1]=t[3],i[2]=t[6],i[3]=t[1],i[4]=t[4],i[5]=t[7],i[6]=t[2],i[7]=t[5],i[8]=t[8],i[9]=t[0]*this.halfWidth,i[10]=t[3]*this.halfWidth,i[11]=t[6]*this.halfWidth,i[12]=t[1]*this.halfHeight,i[13]=t[4]*this.halfHeight,i[14]=t[7]*this.halfHeight,i[15]=t[2]*this.halfDepth,i[16]=t[5]*this.halfDepth,i[17]=t[8]*this.halfDepth;var e=i[9],s=i[10],o=i[11],r=i[12],a=i[13],h=i[14],l=i[15],u=i[16],c=i[17],p=this.position.x,d=this.position.y,m=this.position.z,f=this.elements;
f[0]=p+e+r+l,f[1]=d+s+a+u,f[2]=m+o+h+c,f[3]=p+e+r-l,f[4]=d+s+a-u,f[5]=m+o+h-c,f[6]=p+e-r+l,f[7]=d+s-a+u,f[8]=m+o-h+c,f[9]=p+e-r-l,f[10]=d+s-a-u,f[11]=m+o-h-c,f[12]=p-e+r+l,f[13]=d-s+a+u,f[14]=m-o+h+c,f[15]=p-e+r-l,f[16]=d-s+a-u,f[17]=m-o+h-c,f[18]=p-e-r+l,f[19]=d-s-a+u,f[20]=m-o-h+c,f[21]=p-e-r-l,f[22]=d-s-a-u,f[23]=m-o-h-c;var y=i[9]<0?-i[9]:i[9],v=i[10]<0?-i[10]:i[10],x=i[11]<0?-i[11]:i[11];y=i[12]<0?y-i[12]:y+i[12],v=i[13]<0?v-i[13]:v+i[13],x=i[14]<0?x-i[14]:x+i[14],y=i[15]<0?y-i[15]:y+i[15],v=i[16]<0?v-i[16]:v+i[16],x=i[17]<0?x-i[17]:x+i[17];var g=n.AABB_PROX;this.aabb.set(this.position.x-y-g,this.position.x+y+g,this.position.y-v-g,this.position.y+v+g,this.position.z-x-g,this.position.z+x+g),null!=this.proxy&&this.proxy.update()},n.SphereShape=function(t,i){n.Shape.call(this,t),this.type=n.SHAPE_SPHERE,this.radius=i},n.SphereShape.prototype=Object.create(n.Shape.prototype),n.SphereShape.prototype.constructor=n.SphereShape,n.SphereShape.prototype.calculateMassInfo=function(t){var i=1.333*n.PI*this.radius*this.radius*this.radius*this.density;t.mass=i;var e=i*this.radius*this.radius*.4;t.inertia.set(e,0,0,0,e,0,0,0,e)},n.SphereShape.prototype.updateProxy=function(){var t=n.AABB_PROX;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),null!=this.proxy&&this.proxy.update()},n.CylinderShape=function(t,i,e){n.Shape.call(this,t),this.type=n.SHAPE_CYLINDER,this.radius=i,this.height=e,this.halfHeight=.5*e,this.normalDirection=new n.Vec3,this.halfDirection=new n.Vec3},n.CylinderShape.prototype=Object.create(n.Shape.prototype),n.CylinderShape.prototype.constructor=n.CylinderShape,n.CylinderShape.prototype.calculateMassInfo=function(t){var i=this.radius*this.radius,e=n.PI*i*this.height*this.density,s=(.25*i+.0833*this.height*this.height)*e,o=.5*i;t.mass=e,t.inertia.set(s,0,0,0,o,0,0,0,s)},n.CylinderShape.prototype.updateProxy=function(){var t,i,e,s,o,r,a,h,l,u,c,p=this.rotation.elements;o=p[1]*p[1],r=p[4]*p[4],a=p[7]*p[7],this.normalDirection.set(p[1],p[4],p[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),i=1-o,t=n.sqrt(i*i+o*r+o*a),t>0&&(t=this.radius/t),i*=t,e=1-r,t=n.sqrt(r*o+e*e+r*a),t>0&&(t=this.radius/t),e*=t,s=1-a,t=n.sqrt(a*o+a*r+s*s),t>0&&(t=this.radius/t),s*=t,h=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,l=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,u=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,h=0>i?h-i:h+i,l=0>e?l-e:l+e,u=0>s?u-s:u+s,c=n.AABB_PROX,this.aabb.set(this.position.x-h-c,this.position.x+h+c,this.position.y-l-c,this.position.y+l+c,this.position.z-u-c,this.position.z+u+c),null!=this.proxy&&this.proxy.update()},n.CollisionDetector=function(){this.flip=!1},n.CollisionDetector.prototype={constructor:n.CollisionDetector,detectCollision:function(t,i,e){n.Error("CollisionDetector","Inheritance error.")}},n.BoxBoxCollisionDetector=function(){n.CollisionDetector.call(this),this.clipVertices1=new e(24),this.clipVertices2=new e(24),this.used=new e(8),this.INF=1/0},n.BoxBoxCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.BoxBoxCollisionDetector.prototype.constructor=n.BoxBoxCollisionDetector,n.BoxBoxCollisionDetector.prototype.detectCollision=function(t,i,e){var s,o;t.id<i.id?(s=t,o=i):(s=i,o=t);var r,a,h,l,u,c,p,d,m,f,y,v,x,g,b,N,_,C,P,w,k,A,S,E,I,M,z,D,T,L,O,R,V,B,U,j,F=s.elements,Y=o.elements,X=s.dimentions,W=o.dimentions,Z=s.position,q=o.position,H=Z.x,J=Z.y,K=Z.z,Q=q.x,G=q.y,$=q.z,tt=Q-H,it=G-J,et=$-K,nt=s.halfWidth,st=s.halfHeight,ot=s.halfDepth,rt=o.halfWidth,at=o.halfHeight,ht=o.halfDepth,lt=X[0],ut=X[1],ct=X[2],pt=X[3],dt=X[4],mt=X[5],ft=X[6],yt=X[7],vt=X[8],xt=X[9],gt=X[10],bt=X[11],Nt=X[12],_t=X[13],Ct=X[14],Pt=X[15],wt=X[16],kt=X[17],At=W[0],St=W[1],Et=W[2],It=W[3],Mt=W[4],zt=W[5],Dt=W[6],Tt=W[7],Lt=W[8],Ot=W[9],Rt=W[10],Vt=W[11],Bt=W[12],Ut=W[13],jt=W[14],Ft=W[15],Yt=W[16],Xt=W[17],Wt=ut*Et-ct*St,Zt=ct*At-lt*Et,qt=lt*St-ut*At,Ht=ut*zt-ct*Mt,Jt=ct*It-lt*zt,Kt=lt*Mt-ut*It,Qt=ut*Lt-ct*Tt,Gt=ct*Dt-lt*Lt,$t=lt*Tt-ut*Dt,ti=dt*Et-mt*St,ii=mt*At-pt*Et,ei=pt*St-dt*At,ni=dt*zt-mt*Mt,si=mt*It-pt*zt,oi=pt*Mt-dt*It,ri=dt*Lt-mt*Tt,ai=mt*Dt-pt*Lt,hi=pt*Tt-dt*Dt,li=yt*Et-vt*St,ui=vt*At-ft*Et,ci=ft*St-yt*At,pi=yt*zt-vt*Mt,di=vt*It-ft*zt,mi=ft*Mt-yt*It,fi=yt*Lt-vt*Tt,yi=vt*Dt-ft*Lt,vi=ft*Tt-yt*Dt,xi=!1,gi=!1,bi=!1,Ni=!1,_i=!1,Ci=!1,Pi=!1,wi=!1,ki=!1;if(O=lt*tt+ut*it+ct*et,r=O>0,r||(O=-O),R=nt,B=lt*At+ut*St+ct*Et,U=lt*It+ut*Mt+ct*zt,j=lt*Dt+ut*Tt+ct*Lt,0>B&&(B=-B),0>U&&(U=-U),0>j&&(j=-j),V=B*rt+U*at+j*ht,N=O-R-V,!(N>0||(O=pt*tt+dt*it+mt*et,a=O>0,a||(O=-O),R=st,B=pt*At+dt*St+mt*Et,U=pt*It+dt*Mt+mt*zt,j=pt*Dt+dt*Tt+mt*Lt,0>B&&(B=-B),0>U&&(U=-U),0>j&&(j=-j),V=B*rt+U*at+j*ht,_=O-R-V,_>0||(O=ft*tt+yt*it+vt*et,h=O>0,h||(O=-O),R=ot,B=ft*At+yt*St+vt*Et,U=ft*It+yt*Mt+vt*zt,j=ft*Dt+yt*Tt+vt*Lt,0>B&&(B=-B),0>U&&(U=-U),0>j&&(j=-j),V=B*rt+U*at+j*ht,C=O-R-V,C>0||(O=At*tt+St*it+Et*et,l=O>0,l||(O=-O),B=At*lt+St*ut+Et*ct,U=At*pt+St*dt+Et*mt,j=At*ft+St*yt+Et*vt,0>B&&(B=-B),0>U&&(U=-U),0>j&&(j=-j),R=B*nt+U*st+j*ot,V=rt,P=1*(O-R-V),P>0||(O=It*tt+Mt*it+zt*et,u=O>0,u||(O=-O),B=It*lt+Mt*ut+zt*ct,U=It*pt+Mt*dt+zt*mt,j=It*ft+Mt*yt+zt*vt,0>B&&(B=-B),0>U&&(U=-U),0>j&&(j=-j),R=B*nt+U*st+j*ot,V=at,w=1*(O-R-V),w>0||(O=Dt*tt+Tt*it+Lt*et,c=O>0,c||(O=-O),B=Dt*lt+Tt*ut+Lt*ct,U=Dt*pt+Tt*dt+Lt*mt,j=Dt*ft+Tt*yt+Lt*vt,0>B&&(B=-B),0>U&&(U=-U),0>j&&(j=-j),R=B*nt+U*st+j*ot,V=ht,k=1*(O-R-V),k>0))))))){if(O=Wt*Wt+Zt*Zt+qt*qt,O>1e-5){if(O=1/n.sqrt(O),Wt*=O,Zt*=O,qt*=O,O=Wt*tt+Zt*it+qt*et,p=O>0,p||(O=-O),B=Wt*pt+Zt*dt+qt*mt,U=Wt*ft+Zt*yt+qt*vt,0>B&&(B=-B),0>U&&(U=-U),R=B*st+U*ot,B=Wt*It+Zt*Mt+qt*zt,U=Wt*Dt+Zt*Tt+qt*Lt,0>B&&(B=-B),0>U&&(U=-U),V=B*at+U*ht,A=O-R-V,A>0)return}else p=!1,A=0,xi=!0;if(O=Ht*Ht+Jt*Jt+Kt*Kt,O>1e-5){if(O=1/n.sqrt(O),Ht*=O,Jt*=O,Kt*=O,O=Ht*tt+Jt*it+Kt*et,d=O>0,d||(O=-O),B=Ht*pt+Jt*dt+Kt*mt,U=Ht*ft+Jt*yt+Kt*vt,0>B&&(B=-B),0>U&&(U=-U),R=B*st+U*ot,B=Ht*At+Jt*St+Kt*Et,U=Ht*Dt+Jt*Tt+Kt*Lt,0>B&&(B=-B),0>U&&(U=-U),V=B*rt+U*ht,S=O-R-V,S>0)return}else d=!1,S=0,gi=!0;if(O=Qt*Qt+Gt*Gt+$t*$t,O>1e-5){if(O=1/n.sqrt(O),Qt*=O,Gt*=O,$t*=O,O=Qt*tt+Gt*it+$t*et,m=O>0,m||(O=-O),B=Qt*pt+Gt*dt+$t*mt,U=Qt*ft+Gt*yt+$t*vt,0>B&&(B=-B),0>U&&(U=-U),R=B*st+U*ot,B=Qt*At+Gt*St+$t*Et,U=Qt*It+Gt*Mt+$t*zt,0>B&&(B=-B),0>U&&(U=-U),V=B*rt+U*at,E=O-R-V,E>0)return}else m=!1,E=0,bi=!0;if(O=ti*ti+ii*ii+ei*ei,O>1e-5){if(O=1/n.sqrt(O),ti*=O,ii*=O,ei*=O,O=ti*tt+ii*it+ei*et,f=O>0,f||(O=-O),B=ti*lt+ii*ut+ei*ct,U=ti*ft+ii*yt+ei*vt,0>B&&(B=-B),0>U&&(U=-U),R=B*nt+U*ot,B=ti*It+ii*Mt+ei*zt,U=ti*Dt+ii*Tt+ei*Lt,0>B&&(B=-B),0>U&&(U=-U),V=B*at+U*ht,I=O-R-V,I>0)return}else f=!1,I=0,Ni=!0;if(O=ni*ni+si*si+oi*oi,O>1e-5){if(O=1/n.sqrt(O),ni*=O,si*=O,oi*=O,O=ni*tt+si*it+oi*et,y=O>0,y||(O=-O),B=ni*lt+si*ut+oi*ct,U=ni*ft+si*yt+oi*vt,0>B&&(B=-B),0>U&&(U=-U),R=B*nt+U*ot,B=ni*At+si*St+oi*Et,U=ni*Dt+si*Tt+oi*Lt,0>B&&(B=-B),0>U&&(U=-U),V=B*rt+U*ht,M=O-R-V,M>0)return}else y=!1,M=0,_i=!0;if(O=ri*ri+ai*ai+hi*hi,O>1e-5){if(O=1/n.sqrt(O),ri*=O,ai*=O,hi*=O,O=ri*tt+ai*it+hi*et,v=O>0,v||(O=-O),B=ri*lt+ai*ut+hi*ct,U=ri*ft+ai*yt+hi*vt,0>B&&(B=-B),0>U&&(U=-U),R=B*nt+U*ot,B=ri*At+ai*St+hi*Et,U=ri*It+ai*Mt+hi*zt,0>B&&(B=-B),0>U&&(U=-U),V=B*rt+U*at,z=O-R-V,z>0)return}else v=!1,z=0,Ci=!0;if(O=li*li+ui*ui+ci*ci,O>1e-5){if(O=1/n.sqrt(O),li*=O,ui*=O,ci*=O,O=li*tt+ui*it+ci*et,x=O>0,x||(O=-O),B=li*lt+ui*ut+ci*ct,U=li*pt+ui*dt+ci*mt,0>B&&(B=-B),0>U&&(U=-U),R=B*nt+U*st,B=li*It+ui*Mt+ci*zt,U=li*Dt+ui*Tt+ci*Lt,0>B&&(B=-B),0>U&&(U=-U),V=B*at+U*ht,D=O-R-V,D>0)return}else x=!1,D=0,Pi=!0;if(O=pi*pi+di*di+mi*mi,O>1e-5){if(O=1/n.sqrt(O),pi*=O,di*=O,mi*=O,O=pi*tt+di*it+mi*et,g=O>0,g||(O=-O),B=pi*lt+di*ut+mi*ct,U=pi*pt+di*dt+mi*mt,0>B&&(B=-B),0>U&&(U=-U),R=B*nt+U*st,B=pi*At+di*St+mi*Et,U=pi*Dt+di*Tt+mi*Lt,0>B&&(B=-B),0>U&&(U=-U),V=B*rt+U*ht,T=O-R-V,T>0)return}else g=!1,T=0,wi=!0;if(O=fi*fi+yi*yi+vi*vi,O>1e-5){if(O=1/n.sqrt(O),fi*=O,yi*=O,vi*=O,O=fi*tt+yi*it+vi*et,b=O>0,b||(O=-O),B=fi*lt+yi*ut+vi*ct,U=fi*pt+yi*dt+vi*mt,0>B&&(B=-B),0>U&&(U=-U),R=B*nt+U*st,B=fi*At+yi*St+vi*Et,U=fi*It+yi*Mt+vi*zt,0>B&&(B=-B),0>U&&(U=-U),V=B*rt+U*at,L=O-R-V,L>0)return}else b=!1,L=0,ki=!0;var Ai=N,Si=N,Ei=0,Ii=r;_>Si&&(Ai=_,Si=_,Ei=1,Ii=a),C>Si&&(Ai=C,Si=C,Ei=2,Ii=h),P>Si&&(Ai=P,Si=P,Ei=3,Ii=l),w>Si&&(Ai=w,Si=w,Ei=4,Ii=u),k>Si&&(Ai=k,Si=k,Ei=5,Ii=c),A-.01>Si&&!xi&&(Ai=A,Si=A-.01,Ei=6,Ii=p),S-.01>Si&&!gi&&(Ai=S,Si=S-.01,Ei=7,Ii=d),E-.01>Si&&!bi&&(Ai=E,Si=E-.01,Ei=8,Ii=m),I-.01>Si&&!Ni&&(Ai=I,Si=I-.01,Ei=9,Ii=f),M-.01>Si&&!_i&&(Ai=M,Si=M-.01,Ei=10,Ii=y),z-.01>Si&&!Ci&&(Ai=z,Si=z-.01,Ei=11,Ii=v),D-.01>Si&&!Pi&&(Ai=D,Si=D-.01,Ei=12,Ii=x),T-.01>Si&&!wi&&(Ai=T,Si=T-.01,Ei=13,Ii=g),L-.01>Si&&!ki&&(Ai=L,Ei=14,Ii=b);var Mi=0,zi=0,Di=0,Ti=0,Li=0,Oi=0,Ri=0,Vi=0,Bi=0,Ui=0,ji=0,Fi=0,Yi=0,Xi=0,Wi=0,Zi=0,qi=0,Hi=0,Ji=!1;0==Ei?(Ii?(Ui=H+xt,ji=J+gt,Fi=K+bt,Mi=lt,zi=ut,Di=ct):(Ui=H-xt,ji=J-gt,Fi=K-bt,Mi=-lt,zi=-ut,Di=-ct),Yi=Nt,Xi=_t,Wi=Ct,Ti=-pt,Li=-dt,Oi=-mt,Zi=Pt,qi=wt,Hi=kt,Ri=-ft,Vi=-yt,Bi=-vt):1==Ei?(Ii?(Ui=H+Nt,ji=J+_t,Fi=K+Ct,Mi=pt,zi=dt,Di=mt):(Ui=H-Nt,ji=J-_t,Fi=K-Ct,Mi=-pt,zi=-dt,Di=-mt),Yi=xt,Xi=gt,Wi=bt,Ti=-lt,Li=-ut,Oi=-ct,Zi=Pt,qi=wt,Hi=kt,Ri=-ft,Vi=-yt,Bi=-vt):2==Ei?(Ii?(Ui=H+Pt,ji=J+wt,Fi=K+kt,Mi=ft,zi=yt,Di=vt):(Ui=H-Pt,ji=J-wt,Fi=K-kt,Mi=-ft,zi=-yt,Di=-vt),Yi=xt,Xi=gt,Wi=bt,Ti=-lt,Li=-ut,Oi=-ct,Zi=Nt,qi=_t,Hi=Ct,Ri=-pt,Vi=-dt,Bi=-mt):3==Ei?(Ji=!0,Ii?(Ui=Q-Ot,ji=G-Rt,Fi=$-Vt,Mi=-At,zi=-St,Di=-Et):(Ui=Q+Ot,ji=G+Rt,Fi=$+Vt,Mi=At,zi=St,Di=Et),Yi=Bt,Xi=Ut,Wi=jt,Ti=-It,Li=-Mt,Oi=-zt,Zi=Ft,qi=Yt,Hi=Xt,Ri=-Dt,Vi=-Tt,Bi=-Lt):4==Ei?(Ji=!0,Ii?(Ui=Q-Bt,ji=G-Ut,Fi=$-jt,Mi=-It,zi=-Mt,Di=-zt):(Ui=Q+Bt,ji=G+Ut,Fi=$+jt,Mi=It,zi=Mt,Di=zt),Yi=Ot,Xi=Rt,Wi=Vt,Ti=-At,Li=-St,Oi=-Et,Zi=Ft,qi=Yt,Hi=Xt,Ri=-Dt,Vi=-Tt,Bi=-Lt):5==Ei?(Ji=!0,Ii?(Ui=Q-Ft,ji=G-Yt,Fi=$-Xt,Mi=-Dt,zi=-Tt,Di=-Lt):(Ui=Q+Ft,ji=G+Yt,Fi=$+Xt,Mi=Dt,zi=Tt,Di=Lt),Yi=Ot,Xi=Rt,Wi=Vt,Ti=-At,Li=-St,Oi=-Et,Zi=Bt,qi=Ut,Hi=jt,Ri=-It,Vi=-Mt,Bi=-zt):6==Ei?(Mi=Wt,zi=Zt,Di=qt,Ti=lt,Li=ut,Oi=ct,Ri=At,Vi=St,Bi=Et):7==Ei?(Mi=Ht,zi=Jt,Di=Kt,Ti=lt,Li=ut,Oi=ct,Ri=It,Vi=Mt,Bi=zt):8==Ei?(Mi=Qt,zi=Gt,Di=$t,Ti=lt,Li=ut,Oi=ct,Ri=Dt,Vi=Tt,Bi=Lt):9==Ei?(Mi=ti,zi=ii,Di=ei,Ti=pt,Li=dt,Oi=mt,Ri=At,Vi=St,Bi=Et):10==Ei?(Mi=ni,zi=si,Di=oi,Ti=pt,Li=dt,Oi=mt,Ri=It,Vi=Mt,Bi=zt):11==Ei?(Mi=ri,zi=ai,Di=hi,Ti=pt,Li=dt,Oi=mt,Ri=Dt,Vi=Tt,Bi=Lt):12==Ei?(Mi=li,zi=ui,Di=ci,Ti=ft,Li=yt,Oi=vt,Ri=At,Vi=St,Bi=Et):13==Ei?(Mi=pi,zi=di,Di=mi,Ti=ft,Li=yt,Oi=vt,Ri=It,Vi=Mt,Bi=zt):14==Ei&&(Mi=fi,zi=yi,Di=vi,Ti=ft,Li=yt,Oi=vt,Ri=Dt,Vi=Tt,Bi=Lt);if(Ei>5){Ii||(Mi=-Mi,zi=-zi,Di=-Di);var Ki,Qi,Gi,$i,te,ie,ee,ne,se,oe,re;ie=F[0],ee=F[1],ne=F[2],Qi=Mi*ie+zi*ee+Di*ne,Gi=F[3],$i=F[4],te=F[5],Ki=Mi*Gi+zi*$i+Di*te,Ki>Qi&&(Qi=Ki,ie=Gi,ee=$i,ne=te),Gi=F[6],$i=F[7],te=F[8],Ki=Mi*Gi+zi*$i+Di*te,Ki>Qi&&(Qi=Ki,ie=Gi,ee=$i,ne=te),Gi=F[9],$i=F[10],te=F[11],Ki=Mi*Gi+zi*$i+Di*te,Ki>Qi&&(Qi=Ki,ie=Gi,ee=$i,ne=te),Gi=F[12],$i=F[13],te=F[14],Ki=Mi*Gi+zi*$i+Di*te,Ki>Qi&&(Qi=Ki,ie=Gi,ee=$i,ne=te),Gi=F[15],$i=F[16],te=F[17],Ki=Mi*Gi+zi*$i+Di*te,Ki>Qi&&(Qi=Ki,ie=Gi,ee=$i,ne=te),Gi=F[18],$i=F[19],te=F[20],Ki=Mi*Gi+zi*$i+Di*te,Ki>Qi&&(Qi=Ki,ie=Gi,ee=$i,ne=te),Gi=F[21],$i=F[22],te=F[23],Ki=Mi*Gi+zi*$i+Di*te,Ki>Qi&&(Qi=Ki,ie=Gi,ee=$i,ne=te),se=Y[0],oe=Y[1],re=Y[2],Qi=Mi*se+zi*oe+Di*re,Gi=Y[3],$i=Y[4],te=Y[5],Ki=Mi*Gi+zi*$i+Di*te,Qi>Ki&&(Qi=Ki,se=Gi,oe=$i,re=te),Gi=Y[6],$i=Y[7],te=Y[8],Ki=Mi*Gi+zi*$i+Di*te,Qi>Ki&&(Qi=Ki,se=Gi,oe=$i,re=te),Gi=Y[9],$i=Y[10],te=Y[11],Ki=Mi*Gi+zi*$i+Di*te,Qi>Ki&&(Qi=Ki,se=Gi,oe=$i,re=te),Gi=Y[12],$i=Y[13],te=Y[14],Ki=Mi*Gi+zi*$i+Di*te,Qi>Ki&&(Qi=Ki,se=Gi,oe=$i,re=te),Gi=Y[15],$i=Y[16],te=Y[17],Ki=Mi*Gi+zi*$i+Di*te,Qi>Ki&&(Qi=Ki,se=Gi,oe=$i,re=te),Gi=Y[18],$i=Y[19],te=Y[20],Ki=Mi*Gi+zi*$i+Di*te,Qi>Ki&&(Qi=Ki,se=Gi,oe=$i,re=te),Gi=Y[21],$i=Y[22],te=Y[23],Ki=Mi*Gi+zi*$i+Di*te,Qi>Ki&&(Qi=Ki,se=Gi,oe=$i,re=te),Gi=se-ie,$i=oe-ee,te=re-ne,B=Ti*Ri+Li*Vi+Oi*Bi;var ae=(Gi*(Ti-Ri*B)+$i*(Li-Vi*B)+te*(Oi-Bi*B))/(1-B*B);return void e.addPoint(ie+Ti*ae+Mi*Ai*.5,ee+Li*ae+zi*Ai*.5,ne+Oi*ae+Di*Ai*.5,Mi,zi,Di,Ai,!1)}var he,le,ue,ce,pe,de,me,fe,ye,ve,xe,ge,be=1,Ne=0,_e=0;Ji?(Ne=lt*Mi+ut*zi+ct*Di,be>Ne&&(be=Ne,_e=0),be>-Ne&&(be=-Ne,_e=1),Ne=pt*Mi+dt*zi+mt*Di,be>Ne&&(be=Ne,_e=2),be>-Ne&&(be=-Ne,_e=3),Ne=ft*Mi+yt*zi+vt*Di,be>Ne&&(be=Ne,_e=4),be>-Ne&&(be=-Ne,_e=5),0==_e?(he=F[0],le=F[1],ue=F[2],ce=F[6],pe=F[7],de=F[8],me=F[9],fe=F[10],ye=F[11],ve=F[3],xe=F[4],ge=F[5]):1==_e?(he=F[15],le=F[16],ue=F[17],ce=F[21],pe=F[22],de=F[23],me=F[18],fe=F[19],ye=F[20],ve=F[12],xe=F[13],ge=F[14]):2==_e?(he=F[12],le=F[13],ue=F[14],ce=F[0],pe=F[1],de=F[2],me=F[3],fe=F[4],ye=F[5],ve=F[15],xe=F[16],ge=F[17]):3==_e?(he=F[21],le=F[22],ue=F[23],ce=F[9],pe=F[10],de=F[11],me=F[6],fe=F[7],ye=F[8],ve=F[18],xe=F[19],ge=F[20]):4==_e?(he=F[12],le=F[13],ue=F[14],ce=F[18],pe=F[19],de=F[20],me=F[6],fe=F[7],ye=F[8],ve=F[0],xe=F[1],ge=F[2]):5==_e&&(he=F[3],le=F[4],ue=F[5],ce=F[6],pe=F[7],de=F[8],me=F[21],fe=F[22],ye=F[23],ve=F[15],xe=F[16],ge=F[17])):(Ne=At*Mi+St*zi+Et*Di,be>Ne&&(be=Ne,_e=0),be>-Ne&&(be=-Ne,_e=1),Ne=It*Mi+Mt*zi+zt*Di,be>Ne&&(be=Ne,_e=2),be>-Ne&&(be=-Ne,_e=3),Ne=Dt*Mi+Tt*zi+Lt*Di,be>Ne&&(be=Ne,_e=4),be>-Ne&&(be=-Ne,_e=5),0==_e?(he=Y[0],le=Y[1],ue=Y[2],ce=Y[6],pe=Y[7],de=Y[8],me=Y[9],fe=Y[10],ye=Y[11],ve=Y[3],xe=Y[4],ge=Y[5]):1==_e?(he=Y[15],le=Y[16],ue=Y[17],ce=Y[21],pe=Y[22],de=Y[23],me=Y[18],fe=Y[19],ye=Y[20],ve=Y[12],xe=Y[13],ge=Y[14]):2==_e?(he=Y[12],le=Y[13],ue=Y[14],ce=Y[0],pe=Y[1],de=Y[2],me=Y[3],fe=Y[4],ye=Y[5],ve=Y[15],xe=Y[16],ge=Y[17]):3==_e?(he=Y[21],le=Y[22],ue=Y[23],ce=Y[9],pe=Y[10],de=Y[11],me=Y[6],fe=Y[7],ye=Y[8],ve=Y[18],xe=Y[19],ge=Y[20]):4==_e?(he=Y[12],le=Y[13],ue=Y[14],ce=Y[18],pe=Y[19],de=Y[20],me=Y[6],fe=Y[7],ye=Y[8],ve=Y[0],xe=Y[1],ge=Y[2]):5==_e&&(he=Y[3],le=Y[4],ue=Y[5],ce=Y[9],pe=Y[10],de=Y[11],me=Y[21],fe=Y[22],ye=Y[23],ve=Y[15],xe=Y[16],ge=Y[17]));var Ce,Pe,we,ke,Ae,Se,Ee,Ie,Me;this.clipVertices1[0]=he,this.clipVertices1[1]=le,this.clipVertices1[2]=ue,this.clipVertices1[3]=ce,this.clipVertices1[4]=pe,this.clipVertices1[5]=de,this.clipVertices1[6]=me,this.clipVertices1[7]=fe,this.clipVertices1[8]=ye,this.clipVertices1[9]=ve,this.clipVertices1[10]=xe,this.clipVertices1[11]=ge,Pe=0,ke=this.clipVertices1[9],Ae=this.clipVertices1[10],Se=this.clipVertices1[11],B=(ke-Ui-Yi)*Ti+(Ae-ji-Xi)*Li+(Se-Fi-Wi)*Oi;for(var ze=0;4>ze;ze++)we=3*ze,Ee=this.clipVertices1[we],Ie=this.clipVertices1[we+1],Me=this.clipVertices1[we+2],U=(Ee-Ui-Yi)*Ti+(Ie-ji-Xi)*Li+(Me-Fi-Wi)*Oi,B>0?U>0?(we=3*Pe,Pe++,this.clipVertices2[we]=Ee,this.clipVertices2[we+1]=Ie,this.clipVertices2[we+2]=Me):(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices2[we]=ke+(Ee-ke)*ae,this.clipVertices2[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices2[we+2]=Se+(Me-Se)*ae):U>0&&(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices2[we]=ke+(Ee-ke)*ae,this.clipVertices2[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices2[we+2]=Se+(Me-Se)*ae,we=3*Pe,Pe++,this.clipVertices2[we]=Ee,this.clipVertices2[we+1]=Ie,this.clipVertices2[we+2]=Me),ke=Ee,Ae=Ie,Se=Me,B=U;if(Ce=Pe,0!=Ce){for(Pe=0,we=3*(Ce-1),ke=this.clipVertices2[we],Ae=this.clipVertices2[we+1],Se=this.clipVertices2[we+2],B=(ke-Ui-Zi)*Ri+(Ae-ji-qi)*Vi+(Se-Fi-Hi)*Bi,ze=0;Ce>ze;ze++)we=3*ze,Ee=this.clipVertices2[we],Ie=this.clipVertices2[we+1],Me=this.clipVertices2[we+2],U=(Ee-Ui-Zi)*Ri+(Ie-ji-qi)*Vi+(Me-Fi-Hi)*Bi,B>0?U>0?(we=3*Pe,Pe++,this.clipVertices1[we]=Ee,this.clipVertices1[we+1]=Ie,this.clipVertices1[we+2]=Me):(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices1[we]=ke+(Ee-ke)*ae,this.clipVertices1[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices1[we+2]=Se+(Me-Se)*ae):U>0&&(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices1[we]=ke+(Ee-ke)*ae,this.clipVertices1[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices1[we+2]=Se+(Me-Se)*ae,we=3*Pe,Pe++,this.clipVertices1[we]=Ee,this.clipVertices1[we+1]=Ie,this.clipVertices1[we+2]=Me),ke=Ee,Ae=Ie,Se=Me,B=U;if(Ce=Pe,0!=Ce){for(Pe=0,we=3*(Ce-1),ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],B=(ke-Ui+Yi)*-Ti+(Ae-ji+Xi)*-Li+(Se-Fi+Wi)*-Oi,ze=0;Ce>ze;ze++)we=3*ze,Ee=this.clipVertices1[we],Ie=this.clipVertices1[we+1],Me=this.clipVertices1[we+2],U=(Ee-Ui+Yi)*-Ti+(Ie-ji+Xi)*-Li+(Me-Fi+Wi)*-Oi,B>0?U>0?(we=3*Pe,Pe++,this.clipVertices2[we]=Ee,this.clipVertices2[we+1]=Ie,this.clipVertices2[we+2]=Me):(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices2[we]=ke+(Ee-ke)*ae,this.clipVertices2[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices2[we+2]=Se+(Me-Se)*ae):U>0&&(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices2[we]=ke+(Ee-ke)*ae,this.clipVertices2[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices2[we+2]=Se+(Me-Se)*ae,we=3*Pe,Pe++,this.clipVertices2[we]=Ee,this.clipVertices2[we+1]=Ie,this.clipVertices2[we+2]=Me),ke=Ee,Ae=Ie,Se=Me,B=U;if(Ce=Pe,0!=Ce){for(Pe=0,we=3*(Ce-1),ke=this.clipVertices2[we],Ae=this.clipVertices2[we+1],Se=this.clipVertices2[we+2],B=(ke-Ui+Zi)*-Ri+(Ae-ji+qi)*-Vi+(Se-Fi+Hi)*-Bi,ze=0;Ce>ze;ze++)we=3*ze,Ee=this.clipVertices2[we],Ie=this.clipVertices2[we+1],Me=this.clipVertices2[we+2],U=(Ee-Ui+Zi)*-Ri+(Ie-ji+qi)*-Vi+(Me-Fi+Hi)*-Bi,B>0?U>0?(we=3*Pe,Pe++,this.clipVertices1[we]=Ee,this.clipVertices1[we+1]=Ie,this.clipVertices1[we+2]=Me):(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices1[we]=ke+(Ee-ke)*ae,this.clipVertices1[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices1[we+2]=Se+(Me-Se)*ae):U>0&&(we=3*Pe,Pe++,ae=B/(B-U),this.clipVertices1[we]=ke+(Ee-ke)*ae,this.clipVertices1[we+1]=Ae+(Ie-Ae)*ae,this.clipVertices1[we+2]=Se+(Me-Se)*ae,we=3*Pe,Pe++,this.clipVertices1[we]=Ee,this.clipVertices1[we+1]=Ie,this.clipVertices1[we+2]=Me),ke=Ee,Ae=Ie,Se=Me,B=U;if(Ce=Pe,Ji){var De=s;s=o,o=De}if(0!=Ce){var Te=s!=t;if(Ce>4){ke=.25*(he+ce+me+ve),Ae=.25*(le+pe+fe+xe),Se=.25*(ue+de+ye+ge),Ti=he-ke,Li=le-Ae,Oi=ue-Se,Ri=ce-ke,Vi=pe-Ae,Bi=de-Se;var Le=0,Oe=0,Re=0,Ve=0,Be=-this.INF;for(be=this.INF,ze=0;Ce>ze;ze++)this.used[ze]=!1,we=3*ze,ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],Ne=ke*Ti+Ae*Li+Se*Oi,be>Ne&&(be=Ne,Le=ze),Ne>Be&&(Be=Ne,Re=ze);for(this.used[Le]=!0,this.used[Re]=!0,Be=-this.INF,be=this.INF,ze=0;Ce>ze;ze++)this.used[ze]||(we=3*ze,ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],Ne=ke*Ri+Ae*Vi+Se*Bi,be>Ne&&(be=Ne,Oe=ze),Ne>Be&&(Be=Ne,Ve=ze));we=3*Le,ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],Ne=(ke-Ui)*Mi+(Ae-ji)*zi+(Se-Fi)*Di,0>Ne&&e.addPoint(ke,Ae,Se,Mi,zi,Di,Ne,Te),we=3*Oe,ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],Ne=(ke-Ui)*Mi+(Ae-ji)*zi+(Se-Fi)*Di,0>Ne&&e.addPoint(ke,Ae,Se,Mi,zi,Di,Ne,Te),we=3*Re,ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],Ne=(ke-Ui)*Mi+(Ae-ji)*zi+(Se-Fi)*Di,0>Ne&&e.addPoint(ke,Ae,Se,Mi,zi,Di,Ne,Te),we=3*Ve,ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],Ne=(ke-Ui)*Mi+(Ae-ji)*zi+(Se-Fi)*Di,0>Ne&&e.addPoint(ke,Ae,Se,Mi,zi,Di,Ne,Te)}else for(ze=0;Ce>ze;ze++)we=3*ze,ke=this.clipVertices1[we],Ae=this.clipVertices1[we+1],Se=this.clipVertices1[we+2],Ne=(ke-Ui)*Mi+(Ae-ji)*zi+(Se-Fi)*Di,0>Ne&&e.addPoint(ke,Ae,Se,Mi,zi,Di,Ne,Te)}}}}}},n.SphereBoxCollisionDetector=function(t){n.CollisionDetector.call(this),this.flip=t},n.SphereBoxCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.SphereBoxCollisionDetector.prototype.constructor=n.SphereBoxCollisionDetector,n.SphereBoxCollisionDetector.prototype.detectCollision=function(t,i,e){var s,o;this.flip?(s=i,o=t):(s=t,o=i);var r,a,h,l,u,c=o.dimentions,p=s.position,d=p.x,m=p.y,f=p.z,y=o.position,v=y.x,x=y.y,g=y.z,b=s.radius,N=o.halfWidth,_=o.halfHeight,C=o.halfDepth,P=d-v,w=m-x,k=f-g,A=c[0]*P+c[1]*w+c[2]*k,S=c[3]*P+c[4]*w+c[5]*k,E=c[6]*P+c[7]*w+c[8]*k,I=0;A>N?A=N:-N>A?A=-N:I=1,S>_?S=_:-_>S?S=-_:I|=2,E>C?E=C:-C>E?E=-C:I|=4,7==I?(P=0>A?N+A:N-A,w=0>S?_+S:_-S,k=0>E?C+E:C-E,w>P?k>P?(l=P-N,0>A?(A=-N,P=c[0],w=c[1],k=c[2]):(A=N,P=-c[0],w=-c[1],k=-c[2])):(l=k-C,0>E?(E=-C,P=c[6],w=c[7],k=c[8]):(E=C,P=-c[6],w=-c[7],k=-c[8])):k>w?(l=w-_,0>S?(S=-_,P=c[3],w=c[4],k=c[5]):(S=_,P=-c[3],w=-c[4],k=-c[5])):(l=k-C,0>E?(E=-C,P=c[6],w=c[7],k=c[8]):(E=C,P=-c[6],w=-c[7],k=-c[8])),r=v+A*c[0]+S*c[3]+E*c[6],a=x+A*c[1]+S*c[4]+E*c[7],h=g+A*c[2]+S*c[5]+E*c[8],e.addPoint(d+b*P,m+b*w,f+b*k,P,w,k,l-b,this.flip)):(r=v+A*c[0]+S*c[3]+E*c[6],a=x+A*c[1]+S*c[4]+E*c[7],h=g+A*c[2]+S*c[5]+E*c[8],P=r-p.x,w=a-p.y,k=h-p.z,l=P*P+w*w+k*k,l>0&&b*b>l&&(l=n.sqrt(l),u=1/l,P*=u,w*=u,k*=u,e.addPoint(d+b*P,m+b*w,f+b*k,P,w,k,l-b,this.flip)))},n.SphereSphereCollisionDetector=function(){n.CollisionDetector.call(this)},n.SphereSphereCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.SphereSphereCollisionDetector.prototype.constructor=n.SphereSphereCollisionDetector,n.SphereSphereCollisionDetector.prototype.detectCollision=function(t,i,e){var s=t,o=i,r=s.position,a=o.position,h=a.x-r.x,l=a.y-r.y,u=a.z-r.z,c=h*h+l*l+u*u,p=s.radius,d=o.radius,m=p+d;if(c>0&&m*m>c){c=n.sqrt(c);var f=1/c;h*=f,l*=f,u*=f,e.addPoint(r.x+h*p,r.y+l*p,r.z+u*p,h,l,u,c-m,!1)}},n.BoxCylinderCollisionDetector=function(t){n.CollisionDetector.call(this),this.flip=t},n.BoxCylinderCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.BoxCylinderCollisionDetector.prototype.constructor=n.BoxCylinderCollisionDetector,n.BoxCylinderCollisionDetector.prototype.getSep=function(t,i,e,s,o){var r,a,h,l,u,c,p,d,m,f,y,v,x,g=new n.Vec3,b=t.position.x,N=t.position.y,_=t.position.z,C=i.position.x,P=i.position.y,w=i.position.z,k=C-b,A=P-N,S=w-_;k*k+A*A+S*S==0&&(A=.001);var E=-k,I=-A,M=-S;this.supportPointB(t,-E,-I,-M,g);var z=g.x,D=g.y,T=g.z;this.supportPointC(i,E,I,M,g);var L=g.x,O=g.y,R=g.z,V=L-z,B=O-D,U=R-T;if(0>=V*E+B*I+U*M)return!1;if(E=B*S-U*A,I=U*k-V*S,M=V*A-B*k,E*E+I*I+M*M==0)return e.init(V-k,B-A,U-S),e.normalize(e),s.init(.5*(z+L),.5*(D+O),.5*(T+R)),!0;this.supportPointB(t,-E,-I,-M,g);var j=g.x,F=g.y,Y=g.z;this.supportPointC(i,E,I,M,g);var X=g.x,W=g.y,Z=g.z,q=X-j,H=W-F,J=Z-Y;if(0>=q*E+H*I+J*M)return!1;r=V-k,a=B-A,h=U-S,l=q-k,u=H-A,c=J-S,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l,E*k+I*A+M*S>0&&(r=V,a=B,h=U,V=q,B=H,U=J,q=r,H=a,J=h,r=z,a=D,h=T,z=j,D=F,T=Y,j=r,F=a,Y=h,r=L,a=O,h=R,L=X,O=W,R=Z,X=r,W=a,Z=h,E=-E,I=-I,M=-M);for(var K=0;;){if(++K>100)return!1;this.supportPointB(t,-E,-I,-M,g);var Q=g.x,G=g.y,$=g.z;this.supportPointC(i,E,I,M,g);var tt=g.x,it=g.y,et=g.z,nt=tt-Q,st=it-G,ot=et-$;if(0>=nt*E+st*I+ot*M)return!1;if(0>(B*ot-U*st)*k+(U*nt-V*ot)*A+(V*st-B*nt)*S)q=nt,H=st,J=ot,j=Q,F=G,Y=$,X=tt,W=it,Z=et,r=V-k,a=B-A,h=U-S,l=nt-k,u=st-A,c=ot-S,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l;else if(0>(st*J-ot*H)*k+(ot*q-nt*J)*A+(nt*H-st*q)*S)V=nt,B=st,U=ot,z=Q,D=G,T=$,L=tt,O=it,R=et,r=nt-k,a=st-A,h=ot-S,l=q-k,u=H-A,c=J-S,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l;else for(var rt=!1;;){if(r=q-V,a=H-B,h=J-U,l=nt-V,u=st-B,c=ot-U,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l,p=1/n.sqrt(E*E+I*I+M*M),E*=p,I*=p,M*=p,E*V+I*B+M*U>=0&&!rt){var at=(B*J-U*H)*nt+(U*q-V*J)*st+(V*H-B*q)*ot,ht=(st*J-ot*H)*k+(ot*q-nt*J)*A+(nt*H-st*q)*S,lt=(A*U-S*B)*nt+(S*V-k*U)*st+(k*B-A*V)*ot,ut=(H*U-J*B)*k+(J*V-q*U)*A+(q*B-H*V)*S,ct=at+ht+lt+ut;0>=ct&&(at=0,ht=(H*ot-J*st)*E+(J*nt-q*ot)*I+(q*st-H*nt)*M,lt=(st*J-ot*H)*E+(ot*q-nt*J)*I+(nt*H-st*q)*M,ut=(B*J-U*H)*E+(U*q-V*J)*I+(V*H-B*q)*M,ct=ht+lt+ut);var pt=1/ct;d=(b*at+z*ht+j*lt+Q*ut)*pt,m=(N*at+D*ht+F*lt+G*ut)*pt,f=(_*at+T*ht+Y*lt+$*ut)*pt,y=(C*at+L*ht+X*lt+tt*ut)*pt,v=(P*at+O*ht+W*lt+it*ut)*pt,x=(w*at+R*ht+Z*lt+et*ut)*pt,rt=!0}this.supportPointB(t,-E,-I,-M,g);var dt=g.x,mt=g.y,ft=g.z;this.supportPointC(i,E,I,M,g);var yt=g.x,vt=g.y,xt=g.z,gt=yt-dt,bt=vt-mt,Nt=xt-ft,_t=-(gt*E+bt*I+Nt*M);if(.01>=(gt-nt)*E+(bt-st)*I+(Nt-ot)*M||_t>=0)return rt?(e.init(-E,-I,-M),s.init(.5*(d+y),.5*(m+v),.5*(f+x)),o.x=_t,!0):!1;0>(bt*U-Nt*B)*k+(Nt*V-gt*U)*A+(gt*B-bt*V)*S?0>(bt*J-Nt*H)*k+(Nt*q-gt*J)*A+(gt*H-bt*q)*S?(V=gt,B=bt,U=Nt,z=dt,D=mt,T=ft,L=yt,O=vt,R=xt):(nt=gt,st=bt,ot=Nt,Q=dt,G=mt,$=ft,tt=yt,it=vt,et=xt):0>(bt*ot-Nt*st)*k+(Nt*nt-gt*ot)*A+(gt*st-bt*nt)*S?(q=gt,H=bt,J=Nt,j=dt,F=mt,Y=ft,X=yt,W=vt,Z=xt):(V=gt,B=bt,U=Nt,z=dt,D=mt,T=ft,L=yt,O=vt,R=xt)}}},n.BoxCylinderCollisionDetector.prototype.supportPointB=function(t,i,e,n,s){var o,r,a,h=t.rotation.elements,l=h[0]*i+h[3]*e+h[6]*n,u=h[1]*i+h[4]*e+h[7]*n,c=h[2]*i+h[5]*e+h[8]*n,p=t.halfWidth,d=t.halfHeight,m=t.halfDepth;o=0>l?-p:p,r=0>u?-d:d,a=0>c?-m:m,l=h[0]*o+h[1]*r+h[2]*a+t.position.x,u=h[3]*o+h[4]*r+h[5]*a+t.position.y,c=h[6]*o+h[7]*r+h[8]*a+t.position.z,s.init(l,u,c)},n.BoxCylinderCollisionDetector.prototype.supportPointC=function(t,i,e,s,o){var r,a,h,l=t.rotation.elements,u=l[0]*i+l[3]*e+l[6]*s,c=l[1]*i+l[4]*e+l[7]*s,p=l[2]*i+l[5]*e+l[8]*s,d=u,m=p,f=d*d+m*m,y=t.radius,v=t.halfHeight;0==f?0>c?(r=y,a=-v,h=0):(r=y,a=v,h=0):(f=t.radius/n.sqrt(f),0>c?(r=d*f,a=-v,h=m*f):(r=d*f,a=v,h=m*f)),u=l[0]*r+l[1]*a+l[2]*h+t.position.x,c=l[3]*r+l[4]*a+l[5]*h+t.position.y,p=l[6]*r+l[7]*a+l[8]*h+t.position.z,o.init(u,c,p)},n.BoxCylinderCollisionDetector.prototype.detectCollision=function(t,i,e){var s,o;this.flip?(s=i,o=t):(s=t,o=i);var r=new n.Vec3,a=new n.Vec3,h=new n.Vec3;if(this.getSep(s,o,r,a,h)){var l=s.position.x,u=s.position.y,c=s.position.z,p=o.position.x,d=o.position.y,m=o.position.z,f=s.halfWidth,y=s.halfHeight,v=s.halfDepth,x=o.halfHeight,g=o.radius,b=s.dimentions,N=b[0],_=b[1],C=b[2],P=b[3],w=b[4],k=b[5],A=b[6],S=b[7],E=b[8],I=b[9],M=b[10],z=b[11],D=b[12],T=b[13],L=b[14],O=b[15],R=b[16],V=b[17],B=o.normalDirection.x,U=o.normalDirection.y,j=o.normalDirection.z,F=o.halfDirection.x,Y=o.halfDirection.y,X=o.halfDirection.z,W=r.x,Z=r.y,q=r.z,H=W*N+Z*_+q*C,J=W*P+Z*w+q*k,K=W*A+Z*S+q*E,Q=W*B+Z*U+q*j,G=H>0,$=J>0,tt=K>0,it=Q>0;G||(H=-H),$||(J=-J),tt||(K=-K),it||(Q=-Q);var et=0;Q>.999?et=H>.999?H>Q?1:4:J>.999?J>Q?2:4:K>.999&&K>Q?3:4:H>.999?et=1:J>.999?et=2:K>.999&&(et=3);var nt,st,ot,rt,at,ht,lt,ut,ct,pt,dt,mt,ft,yt,vt,xt,gt,bt,Nt,_t,Ct,Pt,wt,kt,At,St,Et,It,Mt,zt,Dt,Tt,Lt,Ot,Rt,Vt,Bt,Ut,jt,Ft,Yt,Xt,Wt,Zt,qt,Ht,Jt,Kt,Qt,Gt,$t,ti,ii;if(0==et)e.addPoint(a.x,a.y,a.z,W,Z,q,h.x,this.flip);else if(4==et){it?(rt=p-F,at=d-Y,ht=m-X,W=-B,Z=-U,q=-j):(rt=p+F,at=d+Y,ht=m+X,W=B,Z=U,q=j);var ei,ni,si,oi,ri,ai,hi,li,ui,ci,pi,di;_t=1,et=0,Wt=N*W+_*Z+C*q,_t>Wt&&(_t=Wt,et=0),_t>-Wt&&(_t=-Wt,et=1),Wt=P*W+w*Z+k*q,_t>Wt&&(_t=Wt,et=2),_t>-Wt&&(_t=-Wt,et=3),Wt=A*W+S*Z+E*q,_t>Wt&&(_t=Wt,et=4),_t>-Wt&&(_t=-Wt,et=5);var mi=s.elements;switch(et){case 0:ei=mi[0],ni=mi[1],si=mi[2],oi=mi[6],ri=mi[7],ai=mi[8],hi=mi[9],li=mi[10],ui=mi[11],ci=mi[3],pi=mi[4],di=mi[5];break;case 1:ei=mi[15],ni=mi[16],si=mi[17],oi=mi[21],ri=mi[22],ai=mi[23],hi=mi[18],li=mi[19],ui=mi[20],ci=mi[12],pi=mi[13],di=mi[14];break;case 2:ei=mi[12],ni=mi[13],si=mi[14],oi=mi[0],ri=mi[1],ai=mi[2],hi=mi[3],li=mi[4],ui=mi[5],ci=mi[15],pi=mi[16],di=mi[17];break;case 3:ei=mi[21],ni=mi[22],si=mi[23],oi=mi[9],ri=mi[10],ai=mi[11],hi=mi[6],li=mi[7],ui=mi[8],ci=mi[18],pi=mi[19],di=mi[20];break;case 4:ei=mi[12],ni=mi[13],si=mi[14],oi=mi[18],ri=mi[19],ai=mi[20],hi=mi[6],li=mi[7],ui=mi[8],ci=mi[0],pi=mi[1],di=mi[2];break;case 5:ei=mi[3],ni=mi[4],si=mi[5],oi=mi[9],ri=mi[10],ai=mi[11],hi=mi[21],li=mi[22],ui=mi[23],ci=mi[15],pi=mi[16],di=mi[17]}Nt=W*(ei-rt)+Z*(ni-at)+q*(si-ht),0>=Nt&&e.addPoint(ei,ni,si,-W,-Z,-q,Nt,this.flip),Nt=W*(oi-rt)+Z*(ri-at)+q*(ai-ht),0>=Nt&&e.addPoint(oi,ri,ai,-W,-Z,-q,Nt,this.flip),Nt=W*(hi-rt)+Z*(li-at)+q*(ui-ht),0>=Nt&&e.addPoint(hi,li,ui,-W,-Z,-q,Nt,this.flip),Nt=W*(ci-rt)+Z*(pi-at)+q*(di-ht),0>=Nt&&e.addPoint(ci,pi,di,-W,-Z,-q,Nt,this.flip)}else{switch(et){case 1:G?(nt=l+I,st=u+M,ot=c+z,W=N,Z=_,q=C):(nt=l-I,st=u-M,ot=c-z,W=-N,Z=-_,q=-C),Ht=P,Jt=w,Kt=k,ti=y,Qt=A,Gt=S,$t=E,ii=v;break;case 2:$?(nt=l+D,st=u+T,ot=c+L,W=P,Z=w,q=k):(nt=l-D,st=u-T,ot=c-L,W=-P,Z=-w,q=-k),Ht=N,Jt=_,Kt=C,ti=f,Qt=A,Gt=S,$t=E,ii=v;break;case 3:tt?(nt=l+O,st=u+R,ot=c+V,W=A,Z=S,q=E):(nt=l-O,st=u-R,ot=c-V,W=-A,Z=-S,q=-E),Ht=N,Jt=_,Kt=C,ti=f,Qt=P,Gt=w,$t=k,ii=y}if(_t=W*B+Z*U+q*j,Ct=0>_t?x:-x,rt=p+Ct*B,at=d+Ct*U,ht=m+Ct*j,Q>=.999999?(Pt=-Z,wt=q,kt=W):(Pt=W,wt=Z,kt=q),Ct=Pt*B+wt*U+kt*j,St=Ct*B-Pt,Et=Ct*U-wt,It=Ct*j-kt,Ct=n.sqrt(St*St+Et*Et+It*It),0==Ct)return;if(Ct=g/Ct,St*=Ct,Et*=Ct,It*=Ct,Pt=rt+St,wt=at+Et,kt=ht+It,-.96>_t||_t>.96)lt=B*B*1.5-.5,ut=B*U*1.5-.866025403*j,ct=B*j*1.5+.866025403*U,pt=U*B*1.5+.866025403*j,dt=U*U*1.5-.5,mt=U*j*1.5-.866025403*B,ft=j*B*1.5-.866025403*U,yt=j*U*1.5+.866025403*B,vt=j*j*1.5-.5,xt=Pt,gt=wt,bt=kt,Nt=W*(xt-nt)+Z*(gt-st)+q*(bt-ot),Pt=xt-Nt*W-nt,wt=gt-Nt*Z-st,kt=bt-Nt*q-ot,Ut=Ht*Pt+Jt*wt+Kt*kt,Xt=Qt*Pt+Gt*wt+$t*kt,-ti>Ut?Ut=-ti:Ut>ti&&(Ut=ti),-ii>Xt?Xt=-ii:Xt>ii&&(Xt=ii),Pt=Ut*Ht+Xt*Qt,wt=Ut*Jt+Xt*Gt,kt=Ut*Kt+Xt*$t,xt=nt+Pt,gt=st+wt,bt=ot+kt,e.addPoint(xt,gt,bt,W,Z,q,Nt,this.flip),xt=St*lt+Et*ut+It*ct,gt=St*pt+Et*dt+It*mt,bt=St*ft+Et*yt+It*vt,xt=(St=xt)+rt,gt=(Et=gt)+at,bt=(It=bt)+ht,Nt=W*(xt-nt)+Z*(gt-st)+q*(bt-ot),0>=Nt&&(Pt=xt-Nt*W-nt,wt=gt-Nt*Z-st,kt=bt-Nt*q-ot,Ut=Ht*Pt+Jt*wt+Kt*kt,Xt=Qt*Pt+Gt*wt+$t*kt,-ti>Ut?Ut=-ti:Ut>ti&&(Ut=ti),-ii>Xt?Xt=-ii:Xt>ii&&(Xt=ii),Pt=Ut*Ht+Xt*Qt,wt=Ut*Jt+Xt*Gt,kt=Ut*Kt+Xt*$t,xt=nt+Pt,gt=st+wt,bt=ot+kt,e.addPoint(xt,gt,bt,W,Z,q,Nt,this.flip)),xt=St*lt+Et*ut+It*ct,gt=St*pt+Et*dt+It*mt,bt=St*ft+Et*yt+It*vt,xt=(St=xt)+rt,gt=(Et=gt)+at,bt=(It=bt)+ht,Nt=W*(xt-nt)+Z*(gt-st)+q*(bt-ot),0>=Nt&&(Pt=xt-Nt*W-nt,wt=gt-Nt*Z-st,kt=bt-Nt*q-ot,Ut=Ht*Pt+Jt*wt+Kt*kt,Xt=Qt*Pt+Gt*wt+$t*kt,-ti>Ut?Ut=-ti:Ut>ti&&(Ut=ti),-ii>Xt?Xt=-ii:Xt>ii&&(Xt=ii),Pt=Ut*Ht+Xt*Qt,wt=Ut*Jt+Xt*Gt,kt=Ut*Kt+Xt*$t,xt=nt+Pt,gt=st+wt,bt=ot+kt,e.addPoint(xt,gt,bt,W,Z,q,Nt,this.flip));else{if(Rt=Pt,Vt=wt,Bt=kt,Ut=W*(Rt-nt)+Z*(Vt-st)+q*(Bt-ot),Rt-=Ut*W,Vt-=Ut*Z,Bt-=Ut*q,_t>0?(jt=Pt+2*F,Ft=wt+2*Y,Yt=kt+2*X):(jt=Pt-2*F,Ft=wt-2*Y,Yt=kt-2*X),Xt=W*(jt-nt)+Z*(Ft-st)+q*(Yt-ot),jt-=Xt*W,Ft-=Xt*Z,Yt-=Xt*q,Mt=Rt-nt,zt=Vt-st,Dt=Bt-ot,Tt=jt-nt,Lt=Ft-st,Ot=Yt-ot,Pt=jt-Rt,wt=Ft-Vt,kt=Yt-Bt,At=Xt-Ut,H=Mt*Ht+zt*Jt+Dt*Kt,J=Tt*Ht+Lt*Jt+Ot*Kt,Wt=H-ti,Zt=J-ti,Wt>0){if(Zt>0)return;qt=Wt/(Wt-Zt),Rt+=Pt*qt,Vt+=wt*qt,Bt+=kt*qt,Ut+=At*qt,Mt=Rt-nt,zt=Vt-st,Dt=Bt-ot,H=Mt*Ht+zt*Jt+Dt*Kt,Pt=jt-Rt,wt=Ft-Vt,kt=Yt-Bt,At=Xt-Ut}else Zt>0&&(qt=Wt/(Wt-Zt),jt=Rt+Pt*qt,Ft=Vt+wt*qt,Yt=Bt+kt*qt,Xt=Ut+At*qt,Tt=jt-nt,Lt=Ft-st,Ot=Yt-ot,J=Tt*Ht+Lt*Jt+Ot*Kt,Pt=jt-Rt,wt=Ft-Vt,kt=Yt-Bt,At=Xt-Ut);if(Wt=H+ti,Zt=J+ti,0>Wt){if(0>Zt)return;qt=Wt/(Wt-Zt),Rt+=Pt*qt,Vt+=wt*qt,Bt+=kt*qt,Ut+=At*qt,Mt=Rt-nt,zt=Vt-st,Dt=Bt-ot,Pt=jt-Rt,wt=Ft-Vt,kt=Yt-Bt,At=Xt-Ut}else 0>Zt&&(qt=Wt/(Wt-Zt),jt=Rt+Pt*qt,Ft=Vt+wt*qt,Yt=Bt+kt*qt,Xt=Ut+At*qt,Tt=jt-nt,Lt=Ft-st,Ot=Yt-ot,Pt=jt-Rt,wt=Ft-Vt,kt=Yt-Bt,At=Xt-Ut);if(H=Mt*Qt+zt*Gt+Dt*$t,J=Tt*Qt+Lt*Gt+Ot*$t,Wt=H-ii,Zt=J-ii,Wt>0){if(Zt>0)return;qt=Wt/(Wt-Zt),Rt+=Pt*qt,Vt+=wt*qt,Bt+=kt*qt,Ut+=At*qt,Mt=Rt-nt,zt=Vt-st,Dt=Bt-ot,H=Mt*Qt+zt*Gt+Dt*$t,Pt=jt-Rt,wt=Ft-Vt,kt=Yt-Bt,At=Xt-Ut}else Zt>0&&(qt=Wt/(Wt-Zt),jt=Rt+Pt*qt,Ft=Vt+wt*qt,Yt=Bt+kt*qt,Xt=Ut+At*qt,Tt=jt-nt,Lt=Ft-st,Ot=Yt-ot,J=Tt*Qt+Lt*Gt+Ot*$t,Pt=jt-Rt,wt=Ft-Vt,kt=Yt-Bt,At=Xt-Ut);if(Wt=H+ii,Zt=J+ii,0>Wt){if(0>Zt)return;qt=Wt/(Wt-Zt),Rt+=Pt*qt,Vt+=wt*qt,Bt+=kt*qt,Ut+=At*qt}else 0>Zt&&(qt=Wt/(Wt-Zt),jt=Rt+Pt*qt,Ft=Vt+wt*qt,Yt=Bt+kt*qt,Xt=Ut+At*qt);0>Ut&&e.addPoint(Rt,Vt,Bt,W,Z,q,Ut,this.flip),0>Xt&&e.addPoint(jt,Ft,Yt,W,Z,q,Xt,this.flip)}}}},n.CylinderCylinderCollisionDetector=function(){n.CollisionDetector.call(this)},n.CylinderCylinderCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.CylinderCylinderCollisionDetector.prototype.constructor=n.CylinderCylinderCollisionDetector,n.CylinderCylinderCollisionDetector.prototype.getSep=function(t,i,e,s,o){var r,a,h,l,u,c,p,d,m,f,y,v,x,g=new n.Vec3,b=t.position.x,N=t.position.y,_=t.position.z,C=i.position.x,P=i.position.y,w=i.position.z,k=C-b,A=P-N,S=w-_;k*k+A*A+S*S==0&&(A=.001);var E=-k,I=-A,M=-S;this.supportPoint(t,-E,-I,-M,g);var z=g.x,D=g.y,T=g.z;this.supportPoint(i,E,I,M,g);var L=g.x,O=g.y,R=g.z,V=L-z,B=O-D,U=R-T;if(0>=V*E+B*I+U*M)return!1;if(E=B*S-U*A,I=U*k-V*S,M=V*A-B*k,E*E+I*I+M*M==0)return e.init(V-k,B-A,U-S),e.normalize(e),s.init(.5*(z+L),.5*(D+O),.5*(T+R)),!0;this.supportPoint(t,-E,-I,-M,g);var j=g.x,F=g.y,Y=g.z;this.supportPoint(i,E,I,M,g);var X=g.x,W=g.y,Z=g.z,q=X-j,H=W-F,J=Z-Y;if(0>=q*E+H*I+J*M)return!1;r=V-k,a=B-A,h=U-S,l=q-k,u=H-A,c=J-S,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l,E*k+I*A+M*S>0&&(r=V,a=B,h=U,V=q,B=H,U=J,q=r,H=a,J=h,r=z,a=D,h=T,z=j,D=F,T=Y,j=r,F=a,Y=h,r=L,a=O,h=R,L=X,O=W,R=Z,X=r,W=a,Z=h,E=-E,I=-I,M=-M);for(var K=0;;){if(++K>100)return!1;this.supportPoint(t,-E,-I,-M,g);var Q=g.x,G=g.y,$=g.z;this.supportPoint(i,E,I,M,g);var tt=g.x,it=g.y,et=g.z,nt=tt-Q,st=it-G,ot=et-$;if(0>=nt*E+st*I+ot*M)return!1;if(0>(B*ot-U*st)*k+(U*nt-V*ot)*A+(V*st-B*nt)*S)q=nt,
H=st,J=ot,j=Q,F=G,Y=$,X=tt,W=it,Z=et,r=V-k,a=B-A,h=U-S,l=nt-k,u=st-A,c=ot-S,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l;else if(0>(st*J-ot*H)*k+(ot*q-nt*J)*A+(nt*H-st*q)*S)V=nt,B=st,U=ot,z=Q,D=G,T=$,L=tt,O=it,R=et,r=nt-k,a=st-A,h=ot-S,l=q-k,u=H-A,c=J-S,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l;else for(var rt=!1;;){if(r=q-V,a=H-B,h=J-U,l=nt-V,u=st-B,c=ot-U,E=a*c-h*u,I=h*l-r*c,M=r*u-a*l,p=1/n.sqrt(E*E+I*I+M*M),E*=p,I*=p,M*=p,E*V+I*B+M*U>=0&&!rt){var at=(B*J-U*H)*nt+(U*q-V*J)*st+(V*H-B*q)*ot,ht=(st*J-ot*H)*k+(ot*q-nt*J)*A+(nt*H-st*q)*S,lt=(A*U-S*B)*nt+(S*V-k*U)*st+(k*B-A*V)*ot,ut=(H*U-J*B)*k+(J*V-q*U)*A+(q*B-H*V)*S,ct=at+ht+lt+ut;0>=ct&&(at=0,ht=(H*ot-J*st)*E+(J*nt-q*ot)*I+(q*st-H*nt)*M,lt=(st*J-ot*H)*E+(ot*q-nt*J)*I+(nt*H-st*q)*M,ut=(B*J-U*H)*E+(U*q-V*J)*I+(V*H-B*q)*M,ct=ht+lt+ut);var pt=1/ct;d=(b*at+z*ht+j*lt+Q*ut)*pt,m=(N*at+D*ht+F*lt+G*ut)*pt,f=(_*at+T*ht+Y*lt+$*ut)*pt,y=(C*at+L*ht+X*lt+tt*ut)*pt,v=(P*at+O*ht+W*lt+it*ut)*pt,x=(w*at+R*ht+Z*lt+et*ut)*pt,rt=!0}this.supportPoint(t,-E,-I,-M,g);var dt=g.x,mt=g.y,ft=g.z;this.supportPoint(i,E,I,M,g);var yt=g.x,vt=g.y,xt=g.z,gt=yt-dt,bt=vt-mt,Nt=xt-ft,_t=-(gt*E+bt*I+Nt*M);if(.01>=(gt-nt)*E+(bt-st)*I+(Nt-ot)*M||_t>=0)return rt?(e.init(-E,-I,-M),s.init(.5*(d+y),.5*(m+v),.5*(f+x)),o.x=_t,!0):!1;0>(bt*U-Nt*B)*k+(Nt*V-gt*U)*A+(gt*B-bt*V)*S?0>(bt*J-Nt*H)*k+(Nt*q-gt*J)*A+(gt*H-bt*q)*S?(V=gt,B=bt,U=Nt,z=dt,D=mt,T=ft,L=yt,O=vt,R=xt):(nt=gt,st=bt,ot=Nt,Q=dt,G=mt,$=ft,tt=yt,it=vt,et=xt):0>(bt*ot-Nt*st)*k+(Nt*nt-gt*ot)*A+(gt*st-bt*nt)*S?(q=gt,H=bt,J=Nt,j=dt,F=mt,Y=ft,X=yt,W=vt,Z=xt):(V=gt,B=bt,U=Nt,z=dt,D=mt,T=ft,L=yt,O=vt,R=xt)}}},n.CylinderCylinderCollisionDetector.prototype.supportPoint=function(t,i,e,s,o){var r,a,h,l=t.rotation.elements,u=l[0]*i+l[3]*e+l[6]*s,c=l[1]*i+l[4]*e+l[7]*s,p=l[2]*i+l[5]*e+l[8]*s,d=u,m=p,f=d*d+m*m,y=t.radius,v=t.halfHeight;0==f?0>c?(r=y,a=-v,h=0):(r=y,a=v,h=0):(f=t.radius/n.sqrt(f),0>c?(r=d*f,a=-v,h=m*f):(r=d*f,a=v,h=m*f)),u=l[0]*r+l[1]*a+l[2]*h+t.position.x,c=l[3]*r+l[4]*a+l[5]*h+t.position.y,p=l[6]*r+l[7]*a+l[8]*h+t.position.z,o.init(u,c,p)},n.CylinderCylinderCollisionDetector.prototype.detectCollision=function(t,i,e){var s,o;t.id<i.id?(s=t,o=i):(s=i,o=t);var r,a,h,l,u,c,p,d,m,f,y,v,x,g,b,N,_,C,P,w,k,A=s.position,S=o.position,E=A.x,I=A.y,M=A.z,z=S.x,D=S.y,T=S.z,L=s.halfHeight,O=o.halfHeight,R=s.normalDirection,V=o.normalDirection,B=s.halfDirection,U=o.halfDirection,j=s.radius,F=o.radius,Y=R.x,X=R.y,W=R.z,Z=V.x,q=V.y,H=V.z,J=B.x,K=B.y,Q=B.z,G=U.x,$=U.y,tt=U.z,it=E-z,et=I-D,nt=M-T,st=new n.Vec3,ot=new n.Vec3,rt=new n.Vec3;if(this.getSep(s,o,st,ot,rt)){var at=st.x*Y+st.y*X+st.z*W,ht=st.x*Z+st.y*q+st.z*H,lt=at>0,ut=ht>0;lt||(at=-at),ut||(ht=-ht);var ct=0;(at>.999||ht>.999)&&(ct=at>ht?1:2);var pt,dt,mt,ft,yt,vt,xt,gt,bt,Nt,_t,Ct,Pt,wt,kt,At,St,Et,It,Mt,zt=rt.x;switch(pt=st.x,dt=st.y,mt=st.z,ct){case 0:e.addPoint(ot.x,ot.y,ot.z,pt,dt,mt,zt,!1);break;case 1:if(lt?(a=E+J,h=I+K,l=M+Q,pt=Y,dt=X,mt=W):(a=E-J,h=I-K,l=M-Q,pt=-Y,dt=-X,mt=-W),P=pt*Z+dt*q+mt*H,r=0>P?O:-O,u=z+r*Z,c=D+r*q,p=T+r*H,ht>=.999999?(d=-dt,m=mt,f=pt):(d=pt,m=dt,f=mt),r=d*Z+m*q+f*H,it=r*Z-d,et=r*q-m,nt=r*H-f,r=n.sqrt(it*it+et*et+nt*nt),0==r)break;if(r=F/r,it*=r,et*=r,nt*=r,d=u+it,m=c+et,f=p+nt,-.96>P||P>.96)ft=Z*Z*1.5-.5,yt=Z*q*1.5-.866025403*H,vt=Z*H*1.5+.866025403*q,xt=q*Z*1.5+.866025403*H,gt=q*q*1.5-.5,bt=q*H*1.5-.866025403*Z,Nt=H*Z*1.5-.866025403*q,_t=H*q*1.5+.866025403*Z,Ct=H*H*1.5-.5,Pt=d,wt=m,kt=f,At=pt*(Pt-a)+dt*(wt-h)+mt*(kt-l),d=Pt-At*pt-a,m=wt-At*dt-h,f=kt-At*mt-l,r=d*d+m*m+f*f,r>j*j&&(r=j/n.sqrt(r),d*=r,m*=r,f*=r),Pt=a+d,wt=h+m,kt=l+f,e.addPoint(Pt,wt,kt,pt,dt,mt,At,!1),Pt=it*ft+et*yt+nt*vt,wt=it*xt+et*gt+nt*bt,kt=it*Nt+et*_t+nt*Ct,Pt=(it=Pt)+u,wt=(et=wt)+c,kt=(nt=kt)+p,At=pt*(Pt-a)+dt*(wt-h)+mt*(kt-l),0>=At&&(d=Pt-At*pt-a,m=wt-At*dt-h,f=kt-At*mt-l,r=d*d+m*m+f*f,r>j*j&&(r=j/n.sqrt(r),d*=r,m*=r,f*=r),Pt=a+d,wt=h+m,kt=l+f,e.addPoint(Pt,wt,kt,pt,dt,mt,At,!1)),Pt=it*ft+et*yt+nt*vt,wt=it*xt+et*gt+nt*bt,kt=it*Nt+et*_t+nt*Ct,Pt=(it=Pt)+u,wt=(et=wt)+c,kt=(nt=kt)+p,At=pt*(Pt-a)+dt*(wt-h)+mt*(kt-l),0>=At&&(d=Pt-At*pt-a,m=wt-At*dt-h,f=kt-At*mt-l,r=d*d+m*m+f*f,r>j*j&&(r=j/n.sqrt(r),d*=r,m*=r,f*=r),Pt=a+d,wt=h+m,kt=l+f,e.addPoint(Pt,wt,kt,pt,dt,mt,At,!1));else{if(y=d,v=m,x=f,_=pt*(y-a)+dt*(v-h)+mt*(x-l),y-=_*pt,v-=_*dt,x-=_*mt,P>0?(g=d+Z*O*2,b=m+q*O*2,N=f+H*O*2):(g=d-Z*O*2,b=m-q*O*2,N=f-H*O*2),C=pt*(g-a)+dt*(b-h)+mt*(N-l),g-=C*pt,b-=C*dt,N-=C*mt,it=a-y,et=h-v,nt=l-x,d=g-y,m=b-v,f=N-x,St=it*it+et*et+nt*nt,Et=it*d+et*m+nt*f,It=d*d+m*m+f*f,Mt=Et*Et-It*(St-j*j),0>Mt)break;Mt=n.sqrt(Mt),w=(Et+Mt)/It,k=(Et-Mt)/It,w>k&&(r=w,w=k,k=r),k>1&&(k=1),0>w&&(w=0),d=y+(g-y)*w,m=v+(b-v)*w,f=x+(N-x)*w,g=y+(g-y)*k,b=v+(b-v)*k,N=x+(N-x)*k,y=d,v=m,x=f,r=_+(C-_)*w,C=_+(C-_)*k,_=r,0>_&&e.addPoint(y,v,x,pt,dt,mt,At,!1),0>C&&e.addPoint(g,b,N,pt,dt,mt,At,!1)}break;case 2:if(ut?(u=z-G,c=D-$,p=T-tt,pt=-Z,dt=-q,mt=-H):(u=z+G,c=D+$,p=T+tt,pt=Z,dt=q,mt=H),P=pt*Y+dt*X+mt*W,r=0>P?L:-L,a=E+r*Y,h=I+r*X,l=M+r*W,at>=.999999?(d=-dt,m=mt,f=pt):(d=pt,m=dt,f=mt),r=d*Y+m*X+f*W,it=r*Y-d,et=r*X-m,nt=r*W-f,r=n.sqrt(it*it+et*et+nt*nt),0==r)break;if(r=j/r,it*=r,et*=r,nt*=r,d=a+it,m=h+et,f=l+nt,-.96>P||P>.96)ft=Y*Y*1.5-.5,yt=Y*X*1.5-.866025403*W,vt=Y*W*1.5+.866025403*X,xt=X*Y*1.5+.866025403*W,gt=X*X*1.5-.5,bt=X*W*1.5-.866025403*Y,Nt=W*Y*1.5-.866025403*X,_t=W*X*1.5+.866025403*Y,Ct=W*W*1.5-.5,Pt=d,wt=m,kt=f,At=pt*(Pt-u)+dt*(wt-c)+mt*(kt-p),d=Pt-At*pt-u,m=wt-At*dt-c,f=kt-At*mt-p,r=d*d+m*m+f*f,r>F*F&&(r=F/n.sqrt(r),d*=r,m*=r,f*=r),Pt=u+d,wt=c+m,kt=p+f,e.addPoint(Pt,wt,kt,-pt,-dt,-mt,At,!1),Pt=it*ft+et*yt+nt*vt,wt=it*xt+et*gt+nt*bt,kt=it*Nt+et*_t+nt*Ct,Pt=(it=Pt)+a,wt=(et=wt)+h,kt=(nt=kt)+l,At=pt*(Pt-u)+dt*(wt-c)+mt*(kt-p),0>=At&&(d=Pt-At*pt-u,m=wt-At*dt-c,f=kt-At*mt-p,r=d*d+m*m+f*f,r>F*F&&(r=F/n.sqrt(r),d*=r,m*=r,f*=r),Pt=u+d,wt=c+m,kt=p+f,e.addPoint(Pt,wt,kt,-pt,-dt,-mt,At,!1)),Pt=it*ft+et*yt+nt*vt,wt=it*xt+et*gt+nt*bt,kt=it*Nt+et*_t+nt*Ct,Pt=(it=Pt)+a,wt=(et=wt)+h,kt=(nt=kt)+l,At=pt*(Pt-u)+dt*(wt-c)+mt*(kt-p),0>=At&&(d=Pt-At*pt-u,m=wt-At*dt-c,f=kt-At*mt-p,r=d*d+m*m+f*f,r>F*F&&(r=F/n.sqrt(r),d*=r,m*=r,f*=r),Pt=u+d,wt=c+m,kt=p+f,e.addPoint(Pt,wt,kt,-pt,-dt,-mt,At,!1));else{if(y=d,v=m,x=f,_=pt*(y-u)+dt*(v-c)+mt*(x-p),y-=_*pt,v-=_*dt,x-=_*mt,P>0?(g=d+Y*L*2,b=m+X*L*2,N=f+W*L*2):(g=d-Y*L*2,b=m-X*L*2,N=f-W*L*2),C=pt*(g-u)+dt*(b-c)+mt*(N-p),g-=C*pt,b-=C*dt,N-=C*mt,it=u-y,et=c-v,nt=p-x,d=g-y,m=b-v,f=N-x,St=it*it+et*et+nt*nt,Et=it*d+et*m+nt*f,It=d*d+m*m+f*f,Mt=Et*Et-It*(St-F*F),0>Mt)break;Mt=n.sqrt(Mt),w=(Et+Mt)/It,k=(Et-Mt)/It,w>k&&(r=w,w=k,k=r),k>1&&(k=1),0>w&&(w=0),d=y+(g-y)*w,m=v+(b-v)*w,f=x+(N-x)*w,g=y+(g-y)*k,b=v+(b-v)*k,N=x+(N-x)*k,y=d,v=m,x=f,r=_+(C-_)*w,C=_+(C-_)*k,_=r,0>_&&e.addPoint(y,v,x,-pt,-dt,-mt,_,!1),0>C&&e.addPoint(g,b,N,-pt,-dt,-mt,C,!1)}}}},n.SphereCylinderCollisionDetector=function(t){n.CollisionDetector.call(this),this.flip=t},n.SphereCylinderCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.SphereCylinderCollisionDetector.prototype.constructor=n.SphereCylinderCollisionDetector,n.SphereCylinderCollisionDetector.prototype.detectCollision=function(t,i,e){var s,o;this.flip?(s=i,o=t):(s=t,o=i);var r=s.position,a=r.x,h=r.y,l=r.z,u=o.position,c=u.x,p=u.y,d=u.z,m=o.normalDirection.x,f=o.normalDirection.y,y=o.normalDirection.z,v=s.radius,x=o.radius,g=v+x,b=o.halfHeight,N=a-c,_=h-p,C=l-d,P=N*m+_*f+C*y;if(!(-b-v>P||P>b+v)){var w=c+P*m,k=p+P*f,A=d+P*y,S=a-w,E=h-k,I=l-A,M=S*S+E*E+I*I;if(!(M>g*g)){M>x*x&&(M=x/n.sqrt(M),S*=M,E*=M,I*=M),-b>P?P=-b:P>b&&(P=b),w=c+P*m+S,k=p+P*f+E,A=d+P*y+I,N=w-a,_=k-h,C=A-l,M=N*N+_*_+C*C;var z;M>0&&v*v>M&&(M=n.sqrt(M),z=1/M,N*=z,_*=z,C*=z,e.addPoint(a+N*v,h+_*v,l+C*v,N,_,C,M-v,this.flip))}}},n.AABB=function(t,i,n,s,o,r){this.elements=new e(6);var a=this.elements;a[0]=t||0,a[1]=n||0,a[2]=o||0,a[3]=i||0,a[4]=s||0,a[5]=r||0},n.AABB.prototype={constructor:n.AABB,set:function(t,i,e,n,s,o){var r=this.elements;return r[0]=t,r[3]=i,r[1]=e,r[4]=n,r[2]=s,r[5]=o,this},intersectTest:function(t){var i=this.elements,e=t.elements;return i[0]>e[3]||i[1]>e[4]||i[2]>e[5]||i[3]<e[0]||i[4]<e[1]||i[5]<e[2]},intersectTestTwo:function(t){var i=this.elements,e=t.elements;return i[0]<e[0]||i[1]<e[1]||i[2]<e[2]||i[3]>e[3]||i[4]>e[4]||i[5]>e[5]},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t,i){var e=i||0,n=t.elements;return this.set(n[0]-e,n[3]+e,n[1]-e,n[4]+e,n[2]-e,n[5]+e),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,i){var e=t.elements,n=i.elements,s=this.elements;return s[0]=e[0]<n[0]?e[0]:n[0],s[1]=e[1]<n[1]?e[1]:n[1],s[2]=e[2]<n[2]?e[2]:n[2],s[3]=e[3]>n[3]?e[3]:n[3],s[4]=e[4]>n[4]?e[4]:n[4],s[5]=e[5]>n[5]?e[5]:n[5],this},surfaceArea:function(){var t=this.elements,i=t[3]-t[0],e=t[4]-t[1],n=t[5]-t[2];return 2*(i*(e+n)+e*n)},intersectsWithPoint:function(t,i,e){var n=this.elements;return t>=n[0]&&t<=n[3]&&i>=n[1]&&i<=n[4]&&e>=n[2]&&e<=n[5]}},n.Proxy=function(t){this.shape=t,this.aabb=t.aabb},n.Proxy.prototype={constructor:n.Proxy,update:function(){n.Error("Proxy","Inheritance error.")}},n.BasicProxy=function(t){n.Proxy.call(this,t),this.id=n.proxyID++},n.BasicProxy.prototype=Object.create(n.Proxy.prototype),n.BasicProxy.prototype.constructor=n.BasicProxy,n.BasicProxy.prototype.update=function(){},n.BroadPhase=function(){this.types=n.BR_NULL,this.numPairChecks=0,this.numPairs=0,this.pairs=[]},n.BroadPhase.prototype={constructor:n.BroadPhase,createProxy:function(t){n.Error("BroadPhase","Inheritance error.")},addProxy:function(t){n.Error("BroadPhase","Inheritance error.")},removeProxy:function(t){n.Error("BroadPhase","Inheritance error.")},isAvailablePair:function(t,i){var e=t.parent,n=i.parent;if(e==n||!e.isDynamic&&!n.isDynamic||0==(t.belongsTo&i.collidesWith)||0==(i.belongsTo&t.collidesWith))return!1;var s;for(s=e.numJoints<n.numJoints?e.jointLink:n.jointLink;null!==s;){var o=s.joint;if(!o.allowCollision&&(o.body1==e&&o.body2==n||o.body1==n&&o.body2==e))return!1;s=s.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){n.Error("BroadPhase","Inheritance error.")},addPair:function(t,i){var e=new n.Pair(t,i);this.pairs.push(e),this.numPairs++}},n.BruteForceBroadPhase=function(){n.BroadPhase.call(this),this.types=n.BR_BRUTE_FORCE,this.proxies=[]},n.BruteForceBroadPhase.prototype=Object.create(n.BroadPhase.prototype),n.BruteForceBroadPhase.prototype.constructor=n.BruteForceBroadPhase,n.BruteForceBroadPhase.prototype.createProxy=function(t){return new n.BasicProxy(t)},n.BruteForceBroadPhase.prototype.addProxy=function(t){this.proxies.push(t)},n.BruteForceBroadPhase.prototype.removeProxy=function(t){var i=this.proxies.indexOf(t);i>-1&&this.proxies.splice(i,1)},n.BruteForceBroadPhase.prototype.collectPairs=function(){var t,i,e,n=0,s=this.proxies,o=s.length;for(this.numPairChecks=o*(o-1)>>1;o>n;)for(i=s[n++],t=n+1;o>t;)e=s[t++],!i.aabb.intersectTest(e.aabb)&&this.isAvailablePair(i.shape,e.shape)&&this.addPair(i.shape,e.shape)},n.Pair=function(t,i){this.shape1=t||null,this.shape2=i||null},n.SAPAxis=function(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new e(64)},n.SAPAxis.prototype={constructor:n.SAPAxis,addElements:function(t,i){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var e=[],n=this.numElements;n--;)e[n]=this.elements[n]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=i},removeElements:function(t,i){for(var e=-1,n=-1,s=0,o=this.numElements;o>s;s++){var r=this.elements[s];if(r==t||r==i){if(-1!=e){n=s;break}e=s}}for(s=e+1,o=n;o>s;s++)this.elements[s-1]=this.elements[s];for(s=n+1,o=this.numElements;o>s;s++)this.elements[s-2]=this.elements[s];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,i=1;this.numElements>>i!=0;)i++;i=i*this.numElements>>2,t=0;for(var e=!1,s=this.elements,o=1,r=this.numElements;r>o;o++){var a=s[o],h=a.value,l=s[o-1];if(l.value>h){var u=o;do{if(s[u]=l,0==--u)break;l=s[u-1]}while(l.value>h);if(s[u]=a,t+=o-u,t>i){e=!0;break}}}if(e){t=2;var c=this.stack;for(c[0]=0,c[1]=this.numElements-1;t>0;){var p=c[--t],d=c[--t],m=p-d;if(m>16){var f=d+n.floor(.5*m);for(a=s[f],s[f]=s[p],s[p]=a,h=a.value,o=d-1,u=p;;){var y,v;do y=s[++o];while(y.value<h);do v=s[--u];while(h<v.value&&u!=d);if(o>=u)break;s[o]=v,s[u]=y}s[p]=s[o],s[o]=a,o-d>p-o?(c[t++]=d,c[t++]=o-1,c[t++]=o+1,c[t++]=p):(c[t++]=o+1,c[t++]=p,c[t++]=d,c[t++]=o-1)}else for(o=d+1;p>=o;o++)if(a=s[o],h=a.value,l=s[o-1],l.value>h){u=o;do{if(s[u]=l,0==--u)break;l=s[u-1]}while(l.value>h);s[u]=a}}}},calculateTestCount:function(){for(var t=1,i=0,e=1,n=this.numElements;n>e;e++)this.elements[e].max?t--:(i+=t,t++);return i}},n.SAPBroadPhase=function(){n.BroadPhase.call(this),this.types=n.BR_SWEEP_AND_PRUNE,this.numElementsD=0,this.numElementsS=0,this.axesD=[new n.SAPAxis,new n.SAPAxis,new n.SAPAxis],this.axesS=[new n.SAPAxis,new n.SAPAxis,new n.SAPAxis],this.index1=0,this.index2=1},n.SAPBroadPhase.prototype=Object.create(n.BroadPhase.prototype),n.SAPBroadPhase.prototype.constructor=n.SAPBroadPhase,n.SAPBroadPhase.prototype.createProxy=function(t){return new n.SAPProxy(this,t)},n.SAPBroadPhase.prototype.addProxy=function(t){var i=t;i.isDynamic()?(this.axesD[0].addElements(i.min[0],i.max[0]),this.axesD[1].addElements(i.min[1],i.max[1]),this.axesD[2].addElements(i.min[2],i.max[2]),i.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(i.min[0],i.max[0]),this.axesS[1].addElements(i.min[1],i.max[1]),this.axesS[2].addElements(i.min[2],i.max[2]),i.belongsTo=2,this.numElementsS+=2)},n.SAPBroadPhase.prototype.removeProxy=function(t){var i=t;if(0!=i.belongsTo){switch(i.belongsTo){case 1:this.axesD[0].removeElements(i.min[0],i.max[0]),this.axesD[1].removeElements(i.min[1],i.max[1]),this.axesD[2].removeElements(i.min[2],i.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(i.min[0],i.max[0]),this.axesS[1].removeElements(i.min[1],i.max[1]),this.axesS[2].removeElements(i.min[2],i.max[2]),this.numElementsS-=2}i.belongsTo=0}},n.SAPBroadPhase.prototype.collectPairs=function(){if(0!=this.numElementsD){var t=this.axesD[this.index1],i=this.axesD[this.index2];t.sort(),i.sort();var e,n,s=t.calculateTestCount(),o=i.calculateTestCount();o>=s?(i=this.axesS[this.index1],i.sort(),e=t.elements,n=i.elements):(t=this.axesS[this.index2],t.sort(),e=i.elements,n=t.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var r,a,h=0,l=0;h<this.numElementsD;){var u,c;if(l==this.numElementsS)u=e[h],c=!0,h++;else{var p=e[h],d=n[l];p.value<d.value?(u=p,c=!0,h++):(u=d,c=!1,l++)}if(u.max){var m=u.pair;if(c){if(m==r){r=r.pair;continue}u=r}else{if(m==a){a=a.pair;continue}u=a}do{if(b=u.pair,b==m){u.pair=b.pair;break}u=b}while(null!=u)}else{for(var f=u.proxy.shape,y=u.min1.value,v=u.max1.value,x=u.min2.value,g=u.max2.value,b=r;null!=b;b=b.pair){var N=b.proxy.shape;this.numPairChecks++,y>b.max1.value||v<b.min1.value||x>b.max2.value||g<b.min2.value||!this.isAvailablePair(f,N)||this.addPair(f,N)}if(c){for(b=a;null!=b;b=b.pair)N=b.proxy.shape,this.numPairChecks++,y>b.max1.value||v<b.min1.value||x>b.max2.value||g<b.min2.value||!this.isAvailablePair(f,N)||this.addPair(f,N);u.pair=r,r=u}else u.pair=a,a=u}}this.index2=3^(this.index1|this.index2)}},n.SAPElement=function(t,i){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=i,this.value=0},n.SAPProxy=function(t,i){n.Proxy.call(this,i),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new n.SAPElement(this,!1),this.max[0]=new n.SAPElement(this,!0),this.min[1]=new n.SAPElement(this,!1),this.max[1]=new n.SAPElement(this,!0),this.min[2]=new n.SAPElement(this,!1),this.max[2]=new n.SAPElement(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]},n.SAPProxy.prototype=Object.create(n.Proxy.prototype),n.SAPProxy.prototype.constructor=n.SAPProxy,n.SAPProxy.prototype.isDynamic=function(){var t=this.shape.parent;return t.isDynamic&&!t.sleeping},n.SAPProxy.prototype.update=function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(1==this.belongsTo&&!this.isDynamic()||2==this.belongsTo&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))},n.DBVT=function(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new n.AABB},n.DBVT.prototype={constructor:n.DBVT,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(null==this.root)return void(this.root=t);for(var i,e,s=t.aabb,o=this.root;null==o.proxy;){var r=o.child1,a=o.child2,h=o.aabb,l=r.aabb,u=a.aabb;i=h.surfaceArea(),this.aabb.combine(s,h),e=this.aabb.surfaceArea();var c=2*e,p=2*(e-i),d=p;this.aabb.combine(s,l),d+=null!=r.proxy?this.aabb.surfaceArea():this.aabb.surfaceArea()-l.surfaceArea();var m=p;if(this.aabb.combine(s,u),m+=null!=a.proxy?this.aabb.surfaceArea():this.aabb.surfaceArea()-u.surfaceArea(),m>d){if(d>c)break;o=r}else{if(m>c)break;o=a}}var f,y=o.parent;f=this.numFreeNodes>0?this.freeNodes[--this.numFreeNodes]:new n.DBVTNode,f.parent=y,f.child1=t,f.child2=o,f.aabb.combine(t.aabb,o.aabb),f.height=o.height+1,o.parent=f,t.parent=f,o==this.root?this.root=f:y.child1==o?y.child1=f:y.child2=f;do f=this.balance(f),this.fix(f),f=f.parent;while(null!=f)},getBalance:function(t){return null!=t.proxy?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t==this.root)return void(this.root=null);var i,e=t.parent;if(i=e.child1==t?e.child2:e.child1,e==this.root)return this.root=i,void(i.parent=null);var n=e.parent;i.parent=n,n.child1==e?n.child1=i:n.child2=i,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=e);do n=this.balance(n),this.fix(n),n=n.parent;while(null!=n)},balance:function s(t){var i=t.height;if(2>i)return t;var e,n=t.parent,o=t.child1,r=t.child2,a=o.height,h=r.height,s=a-h;if(s>1){var l=o.child1,u=o.child2,c=l.height,p=u.height;return c>p?(o.child2=t,t.parent=o,t.child1=u,u.parent=t,t.aabb.combine(u.aabb,r.aabb),e=p-h,t.height=p-(e&e>>31)+1,o.aabb.combine(l.aabb,t.aabb),e=c-i,o.height=c-(e&e>>31)+1):(o.child1=t,t.parent=o,t.child1=l,l.parent=t,t.aabb.combine(l.aabb,r.aabb),e=c-h,t.height=c-(e&e>>31)+1,o.aabb.combine(t.aabb,u.aabb),e=i-p,o.height=i-(e&e>>31)+1),null!=n?n.child1==t?n.child1=o:n.child2=o:this.root=o,o.parent=n,o}if(-1>s){var d=r.child1,m=r.child2,f=d.height,y=m.height;return f>y?(r.child2=t,t.parent=r,t.child2=m,m.parent=t,t.aabb.combine(o.aabb,m.aabb),e=a-y,t.height=a-(e&e>>31)+1,r.aabb.combine(d.aabb,t.aabb),e=f-i,r.height=f-(e&e>>31)+1):(r.child1=t,t.parent=r,t.child2=d,d.parent=t,t.aabb.combine(o.aabb,d.aabb),e=a-f,t.height=a-(e&e>>31)+1,r.aabb.combine(t.aabb,m.aabb),e=i-y,r.height=i-(e&e>>31)+1),null!=n?n.child1==t?n.child1=r:n.child2=r:this.root=r,r.parent=n,r}return t},fix:function(t){var i=t.child1,e=t.child2;t.aabb.combine(i.aabb,e.aabb),t.height=i.height<e.height?e.height+1:i.height+1}},n.DBVTBroadPhase=function(){n.BroadPhase.call(this),this.types=n.BR_BOUNDING_VOLUME_TREE,this.tree=new n.DBVT,this.stack=[],this.leaves=[],this.numLeaves=0},n.DBVTBroadPhase.prototype=Object.create(n.BroadPhase.prototype),n.DBVTBroadPhase.prototype.constructor=n.DBVTBroadPhase,n.DBVTBroadPhase.prototype.createProxy=function(t){return new n.DBVTProxy(t)},n.DBVTBroadPhase.prototype.addProxy=function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},n.DBVTBroadPhase.prototype.removeProxy=function(t){this.tree.deleteLeaf(t.leaf);var i=this.leaves.indexOf(t.leaf);i>-1&&(this.leaves.splice(i,1),this.numLeaves--)},n.DBVTBroadPhase.prototype.collectPairs=function(){if(!(this.numLeaves<2))for(var t,i=.1,e=this.numLeaves;e--;)t=this.leaves[e],t.proxy.aabb.intersectTestTwo(t.aabb)&&(t.aabb.copy(t.proxy.aabb,i),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},n.DBVTBroadPhase.prototype.collide=function(t,i){var e,n,s,o,r,a,h=2;for(this.stack[0]=t,this.stack[1]=i;h>0;)if(s=this.stack[--h],o=this.stack[--h],r=null!=s.proxy,a=null!=o.proxy,this.numPairChecks++,r&&a){if(e=s.proxy.shape,n=o.proxy.shape,e==n||e.aabb.intersectTest(n.aabb)||!this.isAvailablePair(e,n))continue;this.addPair(e,n)}else{if(s.aabb.intersectTest(o.aabb))continue;a||!r&&s.aabb.surfaceArea()>o.aabb.surfaceArea()?(this.stack[h++]=s.child1,this.stack[h++]=o,this.stack[h++]=s.child2,this.stack[h++]=o):(this.stack[h++]=s,this.stack[h++]=o.child1,this.stack[h++]=s,this.stack[h++]=o.child2)}},n.DBVTNode=function(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new n.AABB},n.DBVTProxy=function(t){n.Proxy.call(this,t),this.leaf=new n.DBVTNode,this.leaf.proxy=this},n.DBVTProxy.prototype=Object.create(n.Proxy.prototype),n.DBVTProxy.prototype.constructor=n.DBVTProxy,n.DBVTProxy.prototype.update=function(){},n.World.prototype.add=function(t){t=t||{};var i=t.type||"box";if("string"==typeof i&&(i=[i]),"joint"==i[0].substring(0,5)){"joint"===i[0]&&(i[0]="jointHinge");var e=t.axe1||[1,0,0],s=t.axe2||[1,0,0],o=t.pos1||[0,0,0],r=t.pos2||[0,0,0];o=o.map(function(t){return t*n.INV_SCALE}),r=r.map(function(t){return t*n.INV_SCALE});var a,h;"jointDistance"===i[0]?(a=t.min||0,h=t.max||10,a*=n.INV_SCALE,h*=n.INV_SCALE):(a=t.min||57.29578,h=t.max||0,a*=n.degtorad,h*=n.degtorad);var l=t.limit||null,u=t.spring||null,c=t.motor||null,p=new n.JointConfig;p.allowCollision=t.collision||!1,p.localAxis1.init(e[0],e[1],e[2]),p.localAxis2.init(s[0],s[1],s[2]),p.localAnchorPoint1.init(o[0],o[1],o[2]),p.localAnchorPoint2.init(r[0],r[1],r[2]),("string"==typeof t.body1||t.body1 instanceof String)&&(t.body1=this.getByName(t.body1)),("string"==typeof t.body2||t.body2 instanceof String)&&(t.body2=this.getByName(t.body2)),p.body1=t.body1,p.body2=t.body2;var d;switch(i[0]){case"jointDistance":d=new n.DistanceJoint(p,a,h),null!==u&&d.limitMotor.setSpring(u[0],u[1]),null!==c&&d.limitMotor.setSpring(c[0],c[1]);break;case"jointHinge":d=new n.HingeJoint(p,a,h),null!==u&&d.limitMotor.setSpring(u[0],u[1]),null!==c&&d.limitMotor.setSpring(c[0],c[1]);break;case"jointPrisme":d=new n.PrismaticJoint(p,a,h);break;case"jointSlide":d=new n.SliderJoint(p,a,h);break;case"jointBall":d=new n.BallAndSocketJoint(p);break;case"jointWheel":d=new n.WheelJoint(p),null!==l&&d.rotationalLimitMotor1.setLimit(l[0],l[1]),null!==u&&d.rotationalLimitMotor1.setSpring(u[0],u[1]),null!==c&&d.rotationalLimitMotor1.setSpring(c[0],c[1])}return d.name=t.name||"",this.addJoint(d),d}var m=t.move||!1,f=t.noSleep||!1,y=t.pos||[0,0,0];y=y.map(function(t){return t*n.INV_SCALE});var v=t.size||[1,1,1];v=v.map(function(t){return t*n.INV_SCALE});var x=t.rot||[0,0,0];x=x.map(function(t){return t*n.degtorad});for(var g=[],b=0;b<x.length/3;b++){var N=n.EulerToAxis(x[b+0],x[b+1],x[b+2]);g.push(N[0]),g.push(N[1]),g.push(N[2]),g.push(N[3])}var _=new n.ShapeConfig;void 0!==t.sc&&(_=t.sc),t.config&&(_.density=void 0===t.config[0]?1:t.config[0],_.friction=void 0===t.config[1]?.4:t.config[1],_.restitution=void 0===t.config[2]?.2:t.config[2],_.belongsTo=t.config[3]||1,_.collidesWith=t.config[4]||4294967295),void 0!==t.density&&(_.density=t.density),void 0!==t.friction&&(_.friction=t.friction),void 0!==t.restitution&&(_.restitution=t.restitution),void 0!==t.belongsTo&&(_.belongsTo=t.belongsTo),void 0!==t.collidesWith&&(_.collidesWith=t.collidesWith),t.massPos&&(t.massPos=t.massPos.map(function(t){return t*n.INV_SCALE}),_.relativePosition.init(t.massPos[0],t.massPos[1],t.massPos[2])),t.massRot&&(t.massRot=t.massRot.map(function(t){return t*n.degtorad}),_.relativeRotation=n.EulerToMatrix(t.massRot[0],t.massRot[1],t.massRot[2]));for(var C,P,w=new n.RigidBody(y[0],y[1],y[2],g[0],g[1],g[2],g[3]),k=[],b=0;b<i.length;b++){switch(C=3*b,P=4*b,i[b]){case"sphere":k[b]=new n.SphereShape(_,v[C]);break;case"cylinder":k[b]=new n.CylinderShape(_,v[C],v[C+1]);break;case"box":k[b]=new n.BoxShape(_,v[C],v[C+1],v[C+2])}w.addShape(k[b]),b>0&&(k[b].relativePosition=new n.Vec3(y[C],y[C+1],y[C+2]),g[P+0]&&(k[b].relativeRotation=[g[P],g[P+1],g[P+2],g[P+3]]))}return m?(t.massPos||t.massRot?w.setupMass(1,!1):w.setupMass(1,!0),f?w.allowSleep=!1:w.allowSleep=!0):w.setupMass(2),w.name=t.name||" ",this.addRigidBody(w),w},i["default"]=n},function(t,i){"use strict";var e=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};Object.defineProperty(i,"__esModule",{value:!0});var n=i.Vec3={add:function(t,i){return{x:t.x+i.x,y:t.y+i.y,z:t.z+i.z}},scale:function(t,i){return{x:i*t.x,y:i*t.y,z:i*t.z}}},s=i.Quat={scale:function(t,i){return{x:i*t.x,y:i*t.y,z:i*t.z,w:i*t.w}},mult:function(t,i){return{x:t.x*i.w+t.w*i.x+t.y*i.z-t.z*i.y,y:t.y*i.w+t.w*i.y+t.z*i.x-t.x*i.z,z:t.z*i.w+t.w*i.z+t.x*i.y-t.y*i.x,w:t.w*i.w-t.x*i.x-t.y*i.y-t.z*i.z}},conjugate:function(t){return{x:-x,y:-y,z:-z,w:w}},toEuler:function(t){var i=t.x,e=t.y,n=t.z,s=t.w;return{x:Math.atan2(2*(i*e+n*s),1-2*(e*e+n*n)),y:Math.asin(2*(i*n-s*e)),z:Math.atan2(2*(i*s+e*n),1-2*(n*n+s*s))}}},o=i.Pose={translate:n.add,rotate3:function(t,i){var n=e({},t,{w:1});return s.mult(s.mult(i,n),s.conjugate(i))}};i["default"]={Vec3:n,Quat:s,Pose:o}},function(t,i){"use strict";function e(t){var i=t.filename,e=(t.components,t.imports),o=n(e,3),r=o[0],a=o[1],h=o[2];if(!r||!r.Component)throw new Error("imports[0] for react-transform-catch-errors does not look like React.");if("function"!=typeof a)throw new Error("imports[1] for react-transform-catch-errors does not look like a React component.");return function(t,e){var n=t.prototype.render;return t.prototype.render=function(){try{return n.apply(this,arguments)}catch(t){return setTimeout(function(){if("undefined"==typeof console.reportErrorsAsExceptions)throw t;var i=console.reportErrorsAsExceptions;console.reportErrorsAsExceptions=!1,console.error(t),console.reportErrorsAsExceptions=i}),r.createElement(a,s({error:t,filename:i},h))}},t}}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){var e=[],n=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(e.push(r.value),!i||e.length!==i);n=!0);}catch(h){s=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(s)throw o}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};i["default"]=e,t.exports=i["default"]},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){var i=t.filename,e=t.components,n=t.imports,s=t.locals,a=o(n,1),h=a[0],u=o(s,1),c=u[0].hot;if(!h.Component)throw new Error("imports[0] for react-transform-hmr does not look like React.");if(!c||"function"!=typeof c.accept)throw new Error("locals[0] does not appear to be a `module` object with Hot Module replacement API enabled. You should disable react-transform-hmr in production by using `env` section in Babel configuration. See the example in README: https://github.com/gaearon/react-transform-hmr");Object.keys(e).some(function(t){return!e[t].isInFunction})&&c.accept(function(t){t&&(console.warn("[React Transform HMR] There was an error updating "+i+":"),console.error(t))});var p=(0,r.getForceUpdate)(h);return function(t,n){var s=e[n],o=s.isInFunction,a=void 0===o?!1:o,h=s.displayName,u=void 0===h?n:h;if(a)return t;var c=i+"$"+n;return l[c]?!function(){console.info("[React Transform HMR] Patching "+u);var i=l[c].update(t);setTimeout(function(){return i.forEach(p)})}():l[c]=(0,r.createProxy)(t),l[c].get()}}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,i){var e=[],n=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(e.push(r.value),!i||e.length!==i);n=!0);}catch(h){s=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(s)throw o}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i["default"]=s;var r=e(107),a=e(102),h=n(a),l=void 0;h["default"].__reactComponentProxies?l=h["default"].__reactComponentProxies:(l={},Object.defineProperty(h["default"],"__reactComponentProxies",{configurable:!0,enumerable:!1,writable:!1,value:l})),t.exports=i["default"]},function(t,i){(function(i){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof i?t.exports=i:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(i,function(){return this}())},function(t,i){"use strict";function e(t,i){var e=i.bind(t);e.__reactBoundContext=t,e.__reactBoundMethod=i,e.__reactBoundArguments=null;var n=t.constructor.displayName,s=e.bind;return e.bind=function(o){var r=Array.prototype.slice.call(arguments,1);if(o!==t&&null!==o)console.warn("bind(): React component methods may only be bound to the component instance. See "+n);else if(!r.length)return console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+n),e;var a=s.apply(e,arguments);return a.__reactBoundContext=t,a.__reactBoundMethod=i,a.__reactBoundArguments=r,a},e}function n(t){for(var i in t.__reactAutoBindMap){if(!t.__reactAutoBindMap.hasOwnProperty(i))return;if(!t.hasOwnProperty(i)||t[i].__reactBoundContext!==t){var n=t.__reactAutoBindMap[i];t[i]=e(t,n)}}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,i){if(!t&&!i)return!0;if(!t||!i)return!1;for(var e in t)if(t[e]!==i[e])return!1;return!0}function o(t){function i(t){var i=Object.getOwnPropertyDescriptor(c,t);return!s(l[t],i)}function e(t){if("function"!=typeof t)throw new Error("Expected a constructor.");if(Object.prototype.hasOwnProperty.call(t,"__reactPatchProxy"))return e(t.__reactPatchProxy.__getCurrent());a=t;var n=r.update(t.prototype);return c.prototype.constructor=c,c.__proto__=t.__proto__,Object.getOwnPropertyNames(t).forEach(function(e){if(!(v.indexOf(e)>-1)){var n=h({},Object.getOwnPropertyDescriptor(t,e),{configurable:!0});i(e)||(Object.defineProperty(c,e,n),l[e]=n)}}),Object.getOwnPropertyNames(c).forEach(function(e){if(!(v.indexOf(e)>-1||t.hasOwnProperty(e))){var n=Object.getOwnPropertyDescriptor(c,e);(!n||n.configurable)&&(i(e)||(delete c[e],delete l[e]))}}),c.displayName=t.displayName||t.name,n.forEach(p["default"]),n.forEach(m["default"]),n}function n(){return c}function o(){return a}if(Object.prototype.hasOwnProperty.call(t,"__reactPatchProxy"))return t.__reactPatchProxy;var r=(0,u["default"])(),a=void 0,l={},c=void 0;try{c=new Function("getCurrentClass","return function "+(t.name||"ProxyClass")+"() {\n        return getCurrentClass().apply(this, arguments);\n      }")(function(){return a})}catch(d){c=function(){return a.apply(this,arguments)}}c.prototype=r.get(),c.toString=function(){return a.toString()},e(t);var f={get:n,update:e};return Object.defineProperty(f,"__getCurrent",{configurable:!1,writable:!1,enumerable:!1,value:o}),Object.defineProperty(c,"__reactPatchProxy",{configurable:!1,writable:!1,enumerable:!1,value:f}),f}function r(t){var i=t;return{get:function(){return i},update:function(t){i=t}}}function a(t){return t.__proto__&&(0,y["default"])()?o(t):r(t)}var h=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};Object.defineProperty(i,"__esModule",{
value:!0}),i["default"]=o,i["default"]=a;var l=e(105),u=n(l),c=e(103),p=n(c),d=e(106),m=n(d),f=e(59),y=n(f),v=["length","name","arguments","caller","prototype","toString"]},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(){function t(t){return function(){return"function"==typeof p[t]?p[t].toString():"<method was deleted>"}}function i(i){var e=function(){return"function"==typeof p[i]?p[i].apply(this,arguments):void 0};return(0,r["default"])(e,p[i]),e.toString=t(i),e}function e(){return d.push(this),"function"==typeof p.componentDidMount?p.componentDidMount.apply(this,arguments):void 0}function n(){var t=d.indexOf(this);return-1!==t&&d.splice(t,1),"function"==typeof p.componentWillUnmount?p.componentWillUnmount.apply(this,arguments):void 0}function s(t,i){Object.defineProperty(c,t,i)}function o(t,i){var e=Object.getOwnPropertyDescriptor(p,t)||{},n=e.enumerable,o=void 0===n?!1:n,r=e.writable,a=void 0===r?!0:r;s(t,{configurable:!0,enumerable:o,writable:a,value:i})}function a(){if(p.__reactAutoBindMap){var t={};for(var i in p.__reactAutoBindMap)"function"==typeof c[i]&&p.__reactAutoBindMap.hasOwnProperty(i)&&(t[i]=c[i]);return t}}function l(t){p=t;var r=Object.getOwnPropertyNames(p),l=Object.getOwnPropertyNames(c),u=(0,h["default"])(l,r);return u.forEach(function(t){delete c[t]}),r.forEach(function(t){var e=Object.getOwnPropertyDescriptor(p,t);"function"==typeof e.value?o(t,i(t)):s(t,e)}),o("componentDidMount",e),o("componentWillUnmount",n),o("__reactAutoBindMap",a()),c.__proto__=t,d}function u(){return c}var c={},p=null,d=[];return e.toString=t("componentDidMount"),n.toString=t("componentWillUnmount"),{update:l,get:u}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s;var o=e(129),r=n(o),a=e(108),h=n(a)},function(t,i){"use strict";function e(t,i){return t.__reactAutoBindMap.hasOwnProperty(i)?!1:null!==t[i].__reactBoundArguments?!1:!0}function n(t,i){var e=t.constructor.prototype,n=Object.getOwnPropertyDescriptor(e,i);return n&&n.get?n.get().length!==t[i].length?!1:!0:!1}function s(t,i){var s=Object.getOwnPropertyDescriptor(t,i);if("function"==typeof s.value)return t.__reactAutoBindMap?e(t,i):n(t,i)}function o(t){var i=Object.getOwnPropertyNames(t);i.forEach(function(i){s(t,i)&&delete t[i]})}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0}),i.getForceUpdate=i.createProxy=void 0;var s=e(59),o=n(s),r=e(104),a=n(r),h=e(132),l=n(h);(0,o["default"])()||console.warn("This JavaScript environment does not support __proto__. This means that react-proxy is unable to proxy React components. Features that rely on react-proxy, such as react-transform-hmr, will not function as expected."),i.createProxy=a["default"],i.getForceUpdate=l["default"]},function(t,i,e){var n=e(114),s=e(115),o=e(19),r=e(20),a=e(60),h=a(function(t,i){return r(t)&&o(t)?n(t,s(i,!1,!0)):[]});t.exports=h},function(t,i,e){(function(i){function n(t){var i=t?t.length:0;for(this.data={hash:a(null),set:new r};i--;)this.push(t[i])}var s=e(120),o=e(26),r=o(i,"Set"),a=o(Object,"create");n.prototype.push=s,t.exports=n}).call(i,function(){return this}())},function(t,i){function e(t,i){for(var e=-1,n=i.length,s=t.length;++e<n;)t[s+e]=i[e];return t}t.exports=e},function(t,i,e){function n(t,i,e){for(var n=-1,o=s(i),r=o.length;++n<r;){var a=o[n],h=t[a],l=e(h,i[a],a,t,i);(l===l?l===h:h!==h)&&(void 0!==h||a in t)||(t[a]=l)}return t}var s=e(61);t.exports=n},function(t,i,e){function n(t,i){return null==i?t:s(i,o(i),t)}var s=e(113),o=e(61);t.exports=n},function(t,i){function e(t,i,e){e||(e={});for(var n=-1,s=i.length;++n<s;){var o=i[n];e[o]=t[o]}return e}t.exports=e},function(t,i,e){function n(t,i){var e=t?t.length:0,n=[];if(!e)return n;var h=-1,l=s,u=!0,c=u&&i.length>=a?r(i):null,p=i.length;c&&(l=o,u=!1,i=c);t:for(;++h<e;){var d=t[h];if(u&&d===d){for(var m=p;m--;)if(i[m]===d)continue t;n.push(d)}else l(i,d,0)<0&&n.push(d)}return n}var s=e(116),o=e(119),r=e(122),a=200;t.exports=n},function(t,i,e){function n(t,i,e,l){l||(l=[]);for(var u=-1,c=t.length;++u<c;){var p=t[u];h(p)&&a(p)&&(e||r(p)||o(p))?i?n(p,i,e,l):s(l,p):e||(l[l.length]=p)}return l}var s=e(110),o=e(38),r=e(39),a=e(19),h=e(20);t.exports=n},function(t,i,e){function n(t,i,e){if(i!==i)return s(t,e);for(var n=e-1,o=t.length;++n<o;)if(t[n]===i)return n;return-1}var s=e(124);t.exports=n},function(t,i){function e(t){return function(i){return null==i?void 0:i[t]}}t.exports=e},function(t,i,e){function n(t,i,e){if("function"!=typeof t)return s;if(void 0===i)return t;switch(e){case 1:return function(e){return t.call(i,e)};case 3:return function(e,n,s){return t.call(i,e,n,s)};case 4:return function(e,n,s,o){return t.call(i,e,n,s,o)};case 5:return function(e,n,s,o,r){return t.call(i,e,n,s,o,r)}}return function(){return t.apply(i,arguments)}}var s=e(131);t.exports=n},function(t,i,e){function n(t,i){var e=t.data,n="string"==typeof i||s(i)?e.set.has(i):e.hash[i];return n?0:-1}var s=e(16);t.exports=n},function(t,i,e){function n(t){var i=this.data;"string"==typeof t||s(t)?i.set.add(t):i.hash[t]=!0}var s=e(16);t.exports=n},function(t,i,e){function n(t){return r(function(i,e){var n=-1,r=null==i?0:e.length,a=r>2?e[r-2]:void 0,h=r>2?e[2]:void 0,l=r>1?e[r-1]:void 0;for("function"==typeof a?(a=s(a,l,5),r-=2):(a="function"==typeof l?l:void 0,r-=a?1:0),h&&o(e[0],e[1],h)&&(a=3>r?void 0:a,r=1);++n<r;){var u=e[n];u&&t(i,u,a)}return i})}var s=e(118),o=e(125),r=e(60);t.exports=n},function(t,i,e){(function(i){function n(t){return a&&r?new s(t):null}var s=e(109),o=e(26),r=o(i,"Set"),a=o(Object,"create");t.exports=n}).call(i,function(){return this}())},function(t,i,e){var n=e(117),s=n("length");t.exports=s},function(t,i){function e(t,i,e){for(var n=t.length,s=i+(e?0:-1);e?s--:++s<n;){var o=t[s];if(o!==o)return s}return-1}t.exports=e},function(t,i,e){function n(t,i,e){if(!r(e))return!1;var n=typeof i;if("number"==n?s(e)&&o(i,e.length):"string"==n&&i in e){var a=e[i];return t===t?t===a:a!==a}return!1}var s=e(19),o=e(37),r=e(16);t.exports=n},function(t,i,e){function n(t){for(var i=h(t),e=i.length,n=e&&t.length,l=!!n&&a(n)&&(o(t)||s(t)),c=-1,p=[];++c<e;){var d=i[c];(l&&r(d,n)||u.call(t,d))&&p.push(d)}return p}var s=e(38),o=e(39),r=e(37),a=e(27),h=e(130),l=Object.prototype,u=l.hasOwnProperty;t.exports=n},function(t,i,e){function n(t){return s(t)&&a.call(t)==o}var s=e(16),o="[object Function]",r=Object.prototype,a=r.toString;t.exports=n},function(t,i,e){function n(t){return null==t?!1:s(t)?u.test(h.call(t)):o(t)&&r.test(t)}var s=e(127),o=e(20),r=/^\[object .+?Constructor\]$/,a=Object.prototype,h=Function.prototype.toString,l=a.hasOwnProperty,u=RegExp("^"+h.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,i,e){var n=e(111),s=e(112),o=e(121),r=o(function(t,i,e){return e?n(t,i,e):s(t,i)});t.exports=r},function(t,i,e){function n(t){if(null==t)return[];h(t)||(t=Object(t));var i=t.length;i=i&&a(i)&&(o(t)||s(t))&&i||0;for(var e=t.constructor,n=-1,l="function"==typeof e&&e.prototype===t,c=Array(i),p=i>0;++n<i;)c[n]=n+"";for(var d in t)p&&r(d,i)||"constructor"==d&&(l||!u.call(t,d))||c.push(d);return c}var s=e(38),o=e(39),r=e(37),a=e(27),h=e(16),l=Object.prototype,u=l.hasOwnProperty;t.exports=n},function(t,i){function e(t){return t}t.exports=e},function(t,i){"use strict";function e(t,i,n){if(i(t,n),t._renderedComponent)e(t._renderedComponent,i,n);else for(var s in t._renderedChildren)t._renderedChildren.hasOwnProperty(s)&&e(t._renderedChildren[s],i,n)}function n(t){t._pendingForceUpdate===!1&&(t._pendingForceUpdate=!0)}function s(t,i){if(t._pendingForceUpdate===!0){var e=t._instance;i.Component.prototype.forceUpdate.call(e)}}function o(t){return function(i){var o=i._reactInternalInstance;e(o,n),e(o,s,t)}}i.__esModule=!0,i["default"]=o,t.exports=i["default"]},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function o(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(t.__proto__=i)}function r(t){return g[t]()}function a(t,i){b[t](i)}function h(t){N[t]()}i.__esModule=!0;var l=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),u=e(95),c=n(u),p=e(135),d=n(p),m=e(136),f=n(m),y=e(138),v=n(y),x=e(134),g=[],b=[],N=[],_={__GetDependency__:r,__get__:r,__Rewire__:a,__set__:a,__ResetDependency__:h},C=c["default"],P=u.Component,w=u.PropTypes;g.React=function(){return C},b.React=function(t){C=t},N.React=function(){C=c["default"]},g.Component=function(){return P},b.Component=function(t){P=t},N.Component=function(){P=u.Component},g.PropTypes=function(){return w},b.PropTypes=function(t){w=t},N.PropTypes=function(){w=u.PropTypes};var k=d["default"];g.style=function(){return k},b.style=function(t){k=t},N.style=function(){k=d["default"]};var A=f["default"];g.ErrorStackParser=function(){return A},b.ErrorStackParser=function(t){A=t},N.ErrorStackParser=function(){A=f["default"]};var S=v["default"];g.assign=function(){return S},b.assign=function(t){S=t},N.assign=function(){S=v["default"]};var E=x.isFilenameAbsolute,I=x.makeUrl,M=x.makeLinkText;g.isFilenameAbsolute=function(){return E},b.isFilenameAbsolute=function(t){E=t},N.isFilenameAbsolute=function(){E=x.isFilenameAbsolute},g.makeUrl=function(){return I},b.makeUrl=function(t){I=t},N.makeUrl=function(){I=x.makeUrl},g.makeLinkText=function(){return M},b.makeLinkText=function(t){M=t},N.makeLinkText=function(){M=x.makeLinkText};var z=function(t){function i(){s(this,i),t.apply(this,arguments)}return o(i,t),i.prototype.render=function(){var t=this.props,i=t.error,e=t.filename,n=t.editorScheme,s=t.useLines,o=t.useColumns,r=S({},k,this.props.style),a=r.redbox,h=r.message,l=r.stack,u=r.frame,c=r.file,p=r.linkToFile,d=A.parse(i).map(function(t,i){var r=void 0,a=void 0;if(0===i&&e&&!E(t.fileName))a=I(e,n),r=M(e);else{var h=s?t.lineNumber:null,l=o?t.columnNumber:null;a=I(t.fileName,n,h,l),r=M(t.fileName,h,l)}return C.createElement("div",{style:u,key:i},C.createElement("div",null,t.functionName),C.createElement("div",{style:c},C.createElement("a",{href:a,style:p},r)))});return C.createElement("div",{style:a},C.createElement("div",{style:h},i.name,": ",i.message),C.createElement("div",{style:l},d))},l(i,null,[{key:"propTypes",value:{error:w.instanceOf(Error).isRequired,filename:w.string,editorScheme:w.string,useLines:w.bool,useColumns:w.bool},enumerable:!0},{key:"displayName",value:"RedBox",enumerable:!0},{key:"defaultProps",value:{useLines:!0,useColumns:!0},enumerable:!0}]),i}(P),D=z;("object"==typeof D||"function"==typeof D)&&(Object.defineProperty(D,"__Rewire__",{value:a,enumberable:!1}),Object.defineProperty(D,"__set__",{value:a,enumberable:!1}),Object.defineProperty(D,"__ResetDependency__",{value:h,enumberable:!1}),Object.defineProperty(D,"__GetDependency__",{value:r,enumberable:!1}),Object.defineProperty(D,"__get__",{value:r,enumberable:!1}),Object.defineProperty(D,"__RewireAPI__",{value:_,enumberable:!1})),i["default"]=D,i.__GetDependency__=r,i.__get__=r,i.__Rewire__=a,i.__set__=a,i.__ResetDependency__=h,i.__RewireAPI__=_,t.exports=i["default"]},function(t,i){"use strict";function e(t){return o[t]()}function n(t,i){r[t](i)}function s(t){a[t]()}i.__esModule=!0;var o=[],r=[],a=[],h={__GetDependency__:e,__get__:e,__Rewire__:n,__set__:n,__ResetDependency__:s},l=function(t){var i=t.lastIndexOf("!");return 0>i?t:t.substr(i+1)},u=l;o.filenameWithoutLoaders=function(){return l},r.filenameWithoutLoaders=function(t){i.filenameWithoutLoaders=l=t},a.filenameWithoutLoaders=function(){i.filenameWithoutLoaders=l=u},i.filenameWithoutLoaders=u;var c=function(t){var i=l(t);return i!==t},p=c;o.filenameHasLoaders=function(){return c},r.filenameHasLoaders=function(t){i.filenameHasLoaders=c=t},a.filenameHasLoaders=function(){i.filenameHasLoaders=c=p},i.filenameHasLoaders=p;var d=function(t){return/^[\w]+\:/.test(t)},m=d;o.filenameHasSchema=function(){return d},r.filenameHasSchema=function(t){i.filenameHasSchema=d=t},a.filenameHasSchema=function(){i.filenameHasSchema=d=m},i.filenameHasSchema=m;var f=function(t){var i=l(t);return 0===i.indexOf("/")?!0:!1},y=f;o.isFilenameAbsolute=function(){return f},r.isFilenameAbsolute=function(t){i.isFilenameAbsolute=f=t},a.isFilenameAbsolute=function(){i.isFilenameAbsolute=f=y},i.isFilenameAbsolute=y;var v=function(t,i,e,n){var s=l(t);if(d(t))return s;var o="file://"+s;return i&&(o=i+"://open?url="+o,e&&s===t&&(o=o+"&line="+e,n&&(o=o+"&column="+n))),o},x=v;o.makeUrl=function(){return v},r.makeUrl=function(t){i.makeUrl=v=t},a.makeUrl=function(){i.makeUrl=v=x},i.makeUrl=x;var g=function(t,i,e){var n=l(t);return i&&n===t&&(n=n+":"+i,e&&(n=n+":"+e)),n},b=g;o.makeLinkText=function(){return g},r.makeLinkText=function(t){i.makeLinkText=g=t},a.makeLinkText=function(){i.makeLinkText=g=b},i.makeLinkText=b,i.__GetDependency__=e,i.__get__=e,i.__Rewire__=n,i.__set__=n,i.__ResetDependency__=s,i.__RewireAPI__=h,i["default"]=h},function(t,i){"use strict";function e(t){return o[t]()}function n(t,i){r[t](i)}function s(t){a[t]()}i.__esModule=!0;var o=[],r=[],a=[],h={__GetDependency__:e,__get__:e,__Rewire__:n,__set__:n,__ResetDependency__:s},l={redbox:{boxSizing:"border-box",fontFamily:"sans-serif",position:"fixed",padding:10,top:0,left:0,bottom:0,right:0,width:"100%",background:"rgb(204, 0, 0)",color:"white",zIndex:9999,textAlign:"left",fontSize:"16px",lineHeight:1.2},message:{fontWeight:"bold"},stack:{fontFamily:"monospace",marginTop:"2em"},frame:{marginTop:"1em"},file:{fontSize:"0.8em",color:"rgba(255, 255, 255, 0.7)"},linkToFile:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)"}};("object"==typeof l||"function"==typeof l)&&(Object.defineProperty(l,"__Rewire__",{value:n,enumberable:!1}),Object.defineProperty(l,"__set__",{value:n,enumberable:!1}),Object.defineProperty(l,"__ResetDependency__",{value:s,enumberable:!1}),Object.defineProperty(l,"__GetDependency__",{value:e,enumberable:!1}),Object.defineProperty(l,"__get__",{value:e,enumberable:!1}),Object.defineProperty(l,"__RewireAPI__",{value:h,enumberable:!1})),i["default"]=l,i.__GetDependency__=e,i.__get__=e,i.__Rewire__=n,i.__set__=n,i.__ResetDependency__=s,i.__RewireAPI__=h,t.exports=i["default"]},function(t,i,e){var n,s,o;!function(r,a){"use strict";s=[e(137)],n=a,o="function"==typeof n?n.apply(i,s):n,!(void 0!==o&&(t.exports=o))}(this,function(t){"use strict";function i(t,i,e){if("function"==typeof Array.prototype.map)return t.map(i,e);for(var n=new Array(t.length),s=0;s<t.length;s++)n[s]=i.call(e,t[s]);return n}function e(t,i,e){if("function"==typeof Array.prototype.filter)return t.filter(i,e);for(var n=[],s=0;s<t.length;s++)i.call(e,t[s])&&n.push(t[s]);return n}var n=/(^|@)\S+\:\d+/,s=/^\s*at .*(\S+\:\d+|\(native\))/m,o=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if("undefined"!=typeof t.stacktrace||"undefined"!=typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(s))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var i=t.replace(/[\(\)\s]/g,"").split(":"),e=i.pop(),n=i[i.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var s=i.pop();return[i.join(":"),s,e]}return[i.join(":"),e,void 0]},parseV8OrIE:function(n){var o=e(n.stack.split("\n"),function(t){return!!t.match(s)},this);return i(o,function(i){i.indexOf("(eval ")>-1&&(i=i.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var e=i.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(e.pop()),s=e.join(" ")||void 0,o="eval"===n[0]?void 0:n[0];return new t(s,void 0,o,n[1],n[2],i)},this)},parseFFOrSafari:function(n){var s=e(n.stack.split("\n"),function(t){return!t.match(o)},this);return i(s,function(i){if(i.indexOf(" > eval")>-1&&(i=i.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===i.indexOf("@")&&-1===i.indexOf(":"))return new t(i);var e=i.split("@"),n=this.extractLocation(e.pop()),s=e.shift()||void 0;return new t(s,void 0,n[0],n[1],n[2],i)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(i){for(var e=/Line (\d+).*script (?:in )?(\S+)/i,n=i.message.split("\n"),s=[],o=2,r=n.length;r>o;o+=2){var a=e.exec(n[o]);a&&s.push(new t(void 0,void 0,a[2],a[1],void 0,n[o]))}return s},parseOpera10:function(i){for(var e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=i.stacktrace.split("\n"),s=[],o=0,r=n.length;r>o;o+=2){var a=e.exec(n[o]);a&&s.push(new t(a[3]||void 0,void 0,a[2],a[1],void 0,n[o]))}return s},parseOpera11:function(s){var o=e(s.stack.split("\n"),function(t){return!!t.match(n)&&!t.match(/^Error created at/)},this);return i(o,function(i){var e,n=i.split("@"),s=this.extractLocation(n.pop()),o=n.shift()||"",r=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(e=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===e||"[arguments not available]"===e?void 0:e.split(",");return new t(r,a,s[0],s[1],s[2],i)},this)}}})},function(t,i,e){var n,s,o;!function(e,r){"use strict";s=[],n=r,o="function"==typeof n?n.apply(i,s):n,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function i(t,i,e,n,s,o){void 0!==t&&this.setFunctionName(t),void 0!==i&&this.setArgs(i),void 0!==e&&this.setFileName(e),void 0!==n&&this.setLineNumber(n),void 0!==s&&this.setColumnNumber(s),void 0!==o&&this.setSource(o)}return i.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(i){if(!t(i))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(i)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(i){if(!t(i))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(i)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){var i=this.getFunctionName()||"{anonymous}",e="("+(this.getArgs()||[]).join(",")+")",n=this.getFileName()?"@"+this.getFileName():"",s=t(this.getLineNumber())?":"+this.getLineNumber():"",o=t(this.getColumnNumber())?":"+this.getColumnNumber():"";return i+e+n+s+o}},i})},function(t,i){"use strict";function e(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,i){for(var o,r,a=e(t),h=1;h<arguments.length;h++){o=Object(arguments[h]);for(var l in o)n.call(o,l)&&(a[l]=o[l]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(o);for(var u=0;u<r.length;u++)s.call(o,r[u])&&(a[r[u]]=o[r[u]])}}return a}},function(t,i,e){"use strict";var n=e(5),s=e(48),o=e(91),r={componentDidMount:function(){this.props.autoFocus&&o(s(this))}},a={Mixin:r,focusDOMComponent:function(){o(n.getNode(this._rootNodeID))}};t.exports=a},function(t,i,e){"use strict";function n(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function s(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case S.topCompositionStart:return E.compositionStart;case S.topCompositionEnd:return E.compositionEnd;case S.topCompositionUpdate:return E.compositionUpdate}}function r(t,i){return t===S.topKeyDown&&i.keyCode===N}function a(t,i){switch(t){case S.topKeyUp:return-1!==b.indexOf(i.keyCode);case S.topKeyDown:return i.keyCode!==N;case S.topKeyPress:case S.topMouseDown:case S.topBlur:return!0;default:return!1}}function h(t){var i=t.detail;return"object"==typeof i&&"data"in i?i.data:null}function l(t,i,e,n,s){var l,u;if(_?l=o(t):M?a(t,n)&&(l=E.compositionEnd):r(t,n)&&(l=E.compositionStart),!l)return null;w&&(M||l!==E.compositionStart?l===E.compositionEnd&&M&&(u=M.getData()):M=y.getPooled(i));var c=v.getPooled(l,e,n,s);if(u)c.data=u;else{var p=h(n);null!==p&&(c.data=p)}return m.accumulateTwoPhaseDispatches(c),c}function u(t,i){switch(t){case S.topCompositionEnd:return h(i);case S.topKeyPress:var e=i.which;return e!==k?null:(I=!0,A);case S.topTextInput:var n=i.data;return n===A&&I?null:n;default:return null}}function c(t,i){if(M){if(t===S.topCompositionEnd||a(t,i)){var e=M.getData();return y.release(M),M=null,e}return null}switch(t){case S.topPaste:return null;case S.topKeyPress:return i.which&&!s(i)?String.fromCharCode(i.which):null;case S.topCompositionEnd:return w?null:i.data;default:return null}}function p(t,i,e,n,s){var o;if(o=P?u(t,n):c(t,n),!o)return null;var r=x.getPooled(E.beforeInput,e,n,s);return r.data=o,m.accumulateTwoPhaseDispatches(r),r}var d=e(10),m=e(22),f=e(4),y=e(148),v=e(179),x=e(182),g=e(13),b=[9,13,27,32],N=229,_=f.canUseDOM&&"CompositionEvent"in window,C=null;f.canUseDOM&&"documentMode"in document&&(C=document.documentMode);var P=f.canUseDOM&&"TextEvent"in window&&!C&&!n(),w=f.canUseDOM&&(!_||C&&C>8&&11>=C),k=32,A=String.fromCharCode(k),S=d.topLevelTypes,E={beforeInput:{phasedRegistrationNames:{bubbled:g({onBeforeInput:null}),captured:g({onBeforeInputCapture:null})},dependencies:[S.topCompositionEnd,S.topKeyPress,S.topTextInput,S.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:g({onCompositionEnd:null}),captured:g({onCompositionEndCapture:null})},dependencies:[S.topBlur,S.topCompositionEnd,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:g({onCompositionStart:null}),captured:g({onCompositionStartCapture:null})},dependencies:[S.topBlur,S.topCompositionStart,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:g({onCompositionUpdate:null}),captured:g({onCompositionUpdateCapture:null})},dependencies:[S.topBlur,S.topCompositionUpdate,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]}},I=!1,M=null,z={eventTypes:E,extractEvents:function(t,i,e,n,s){return[l(t,i,e,n,s),p(t,i,e,n,s)]}};t.exports=z},function(t,i,e){"use strict";var n=e(62),s=e(4),o=e(7),r=(e(196),e(187)),a=e(201),h=e(205),l=(e(3),h(function(t){return a(t)})),u=!1,c="cssFloat";if(s.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(d){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var m={createMarkupForStyles:function(t){var i="";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];null!=n&&(i+=l(e)+":",i+=r(e,n)+";")}return i||null},setValueForStyles:function(t,i){var e=t.style;for(var s in i)if(i.hasOwnProperty(s)){var o=r(s,i[s]);if("float"===s&&(s=c),o)e[s]=o;else{var a=u&&n.shorthandPropertyExpansions[s];if(a)for(var h in a)e[h]="";else e[s]=""}}}};o.measureMethods(m,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),t.exports=m},function(t,i,e){"use strict";function n(t){var i=t.nodeName&&t.nodeName.toLowerCase();return"select"===i||"input"===i&&"file"===t.type}function s(t){var i=C.getPooled(E.change,M,t,P(t));b.accumulateTwoPhaseDispatches(i),_.batchedUpdates(o,i)}function o(t){g.enqueueEvents(t),g.processEventQueue(!1)}function r(t,i){I=t,M=i,I.attachEvent("onchange",s)}function a(){I&&(I.detachEvent("onchange",s),I=null,M=null)}function h(t,i,e){return t===S.topChange?e:void 0}function l(t,i,e){t===S.topFocus?(a(),r(i,e)):t===S.topBlur&&a()}function u(t,i){I=t,M=i,z=t.value,D=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(I,"value",O),I.attachEvent("onpropertychange",p)}function c(){I&&(delete I.value,I.detachEvent("onpropertychange",p),I=null,M=null,z=null,D=null)}function p(t){if("value"===t.propertyName){var i=t.srcElement.value;i!==z&&(z=i,s(t))}}function d(t,i,e){return t===S.topInput?e:void 0}function m(t,i,e){t===S.topFocus?(c(),u(i,e)):t===S.topBlur&&c()}function f(t,i,e){return t!==S.topSelectionChange&&t!==S.topKeyUp&&t!==S.topKeyDown||!I||I.value===z?void 0:(z=I.value,M)}function y(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function v(t,i,e){return t===S.topClick?e:void 0}var x=e(10),g=e(21),b=e(22),N=e(4),_=e(8),C=e(15),P=e(51),w=e(54),k=e(88),A=e(13),S=x.topLevelTypes,E={change:{phasedRegistrationNames:{bubbled:A({onChange:null}),captured:A({onChangeCapture:null})},dependencies:[S.topBlur,S.topChange,S.topClick,S.topFocus,S.topInput,S.topKeyDown,S.topKeyUp,S.topSelectionChange]}},I=null,M=null,z=null,D=null,T=!1;N.canUseDOM&&(T=w("change")&&(!("documentMode"in document)||document.documentMode>8));var L=!1;N.canUseDOM&&(L=w("input")&&(!("documentMode"in document)||document.documentMode>9));var O={get:function(){return D.get.call(this)},set:function(t){z=""+t,D.set.call(this,t)}},R={eventTypes:E,extractEvents:function(t,i,e,s,o){var r,a;if(n(i)?T?r=h:a=l:k(i)?L?r=d:(r=f,a=m):y(i)&&(r=v),r){var u=r(t,i,e);if(u){var c=C.getPooled(E.change,u,s,o);return c.type="change",b.accumulateTwoPhaseDispatches(c),c}}a&&a(t,i,e)}};t.exports=R},function(t,i){"use strict";var e=0,n={createReactRootIndex:function(){return e++}};t.exports=n},function(t,i,e){"use strict";function n(t){return t.substring(1,t.indexOf(" "))}var s=e(4),o=e(198),r=e(9),a=e(93),h=e(1),l=/^(<[^ \/>]+)/,u="data-danger-index",c={dangerouslyRenderMarkup:function(t){s.canUseDOM?void 0:h(!1);for(var i,e={},c=0;c<t.length;c++)t[c]?void 0:h(!1),i=n(t[c]),i=a(i)?i:"*",e[i]=e[i]||[],e[i][c]=t[c];var p=[],d=0;for(i in e)if(e.hasOwnProperty(i)){var m,f=e[i];for(m in f)if(f.hasOwnProperty(m)){var y=f[m];f[m]=y.replace(l,"$1 "+u+'="'+m+'" ')}for(var v=o(f.join(""),r),x=0;x<v.length;++x){var g=v[x];g.hasAttribute&&g.hasAttribute(u)&&(m=+g.getAttribute(u),g.removeAttribute(u),p.hasOwnProperty(m)?h(!1):void 0,p[m]=g,d+=1)}}return d!==p.length?h(!1):void 0,p.length!==t.length?h(!1):void 0,p},dangerouslyReplaceNodeWithMarkup:function(t,i){s.canUseDOM?void 0:h(!1),i?void 0:h(!1),"html"===t.tagName.toLowerCase()?h(!1):void 0;var e;e="string"==typeof i?o(i,r)[0]:i,t.parentNode.replaceChild(e,t)}};t.exports=c},function(t,i,e){"use strict";var n=e(13),s=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({BeforeInputEventPlugin:null})];t.exports=s},function(t,i,e){"use strict";var n=e(10),s=e(22),o=e(31),r=e(5),a=e(13),h=n.topLevelTypes,l=r.getFirstReactDOM,u={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[h.topMouseOut,h.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[h.topMouseOut,h.topMouseOver]}},c=[null,null],p={eventTypes:u,extractEvents:function(t,i,e,n,a){if(t===h.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==h.topMouseOut&&t!==h.topMouseOver)return null;var p;if(i.window===i)p=i;else{var d=i.ownerDocument;p=d?d.defaultView||d.parentWindow:window}var m,f,y="",v="";if(t===h.topMouseOut?(m=i,y=e,f=l(n.relatedTarget||n.toElement),f?v=r.getID(f):f=p,f=f||p):(m=p,f=i,v=e),m===f)return null;var x=o.getPooled(u.mouseLeave,y,n,a);x.type="mouseleave",x.target=m,x.relatedTarget=f;var g=o.getPooled(u.mouseEnter,v,n,a);return g.type="mouseenter",g.target=f,g.relatedTarget=m,s.accumulateEnterLeaveDispatches(x,g,y,v),c[0]=x,c[1]=g,c}};t.exports=p},function(t,i,e){"use strict";function n(t){return t===y.topMouseUp||t===y.topTouchEnd||t===y.topTouchCancel}function s(t){return t===y.topMouseMove||t===y.topTouchMove}function o(t){return t===y.topMouseDown||t===y.topTouchStart}function r(t,i,e,n){var s=t.type||"unknown-event";t.currentTarget=f.Mount.getNode(n),i?d.invokeGuardedCallbackWithCatch(s,e,t,n):d.invokeGuardedCallback(s,e,t,n),t.currentTarget=null}function a(t,i){var e=t._dispatchListeners,n=t._dispatchIDs;if(Array.isArray(e))for(var s=0;s<e.length&&!t.isPropagationStopped();s++)r(t,i,e[s],n[s]);else e&&r(t,i,e,n);t._dispatchListeners=null,t._dispatchIDs=null}function h(t){var i=t._dispatchListeners,e=t._dispatchIDs;if(Array.isArray(i)){for(var n=0;n<i.length&&!t.isPropagationStopped();n++)if(i[n](t,e[n]))return e[n]}else if(i&&i(t,e))return e;return null}function l(t){var i=h(t);return t._dispatchIDs=null,t._dispatchListeners=null,i}function u(t){var i=t._dispatchListeners,e=t._dispatchIDs;Array.isArray(i)?m(!1):void 0;var n=i?i(t,e):null;return t._dispatchListeners=null,t._dispatchIDs=null,n}function c(t){return!!t._dispatchListeners}var p=e(10),d=e(76),m=e(1),f=(e(3),{Mount:null,injectMount:function(t){f.Mount=t}}),y=p.topLevelTypes,v={isEndish:n,isMoveish:s,isStartish:o,executeDirectDispatch:u,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:l,hasDispatches:c,getNode:function(t){return f.Mount.getNode(t)},getID:function(t){return f.Mount.getID(t)},injection:f};t.exports=v},function(t,i,e){"use strict";function n(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var s=e(12),o=e(2),r=e(87);o(n.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[r()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,i,e=this._startText,n=e.length,s=this.getText(),o=s.length;for(t=0;n>t&&e[t]===s[t];t++);var r=n-t;for(i=1;r>=i&&e[n-i]===s[o-i];i++);var a=i>1?1-i:void 0;return this._fallbackText=s.slice(t,a),this._fallbackText}}),s.addPoolingTo(n),t.exports=n},function(t,i,e){"use strict";var n,s=e(17),o=e(4),r=s.injection.MUST_USE_ATTRIBUTE,a=s.injection.MUST_USE_PROPERTY,h=s.injection.HAS_BOOLEAN_VALUE,l=s.injection.HAS_SIDE_EFFECTS,u=s.injection.HAS_NUMERIC_VALUE,c=s.injection.HAS_POSITIVE_NUMERIC_VALUE,p=s.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var d=document.implementation;n=d&&d.hasFeature&&d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var m={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:r|h,allowTransparency:r,alt:null,async:h,autoComplete:null,autoPlay:h,capture:r|h,cellPadding:null,cellSpacing:null,charSet:r,challenge:r,checked:a|h,classID:r,className:n?r:a,cols:r|c,colSpan:null,content:null,contentEditable:null,contextMenu:r,controls:a|h,coords:null,crossOrigin:null,data:null,dateTime:r,"default":h,defer:h,dir:null,disabled:r|h,download:p,draggable:null,encType:null,form:r,formAction:r,formEncType:r,formMethod:r,formNoValidate:h,formTarget:r,frameBorder:r,headers:null,height:r,hidden:r|h,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,inputMode:r,integrity:null,is:r,keyParams:r,keyType:r,kind:null,label:null,lang:null,list:r,loop:a|h,low:null,manifest:r,marginHeight:null,marginWidth:null,max:null,maxLength:r,media:r,mediaGroup:null,method:null,min:null,minLength:r,multiple:a|h,muted:a|h,name:null,nonce:r,noValidate:h,open:h,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|h,rel:null,required:h,reversed:h,role:r,rows:r|c,rowSpan:null,sandbox:null,
scope:null,scoped:h,scrolling:null,seamless:r|h,selected:a|h,shape:null,size:r|c,sizes:r,span:c,spellCheck:null,src:null,srcDoc:a,srcLang:null,srcSet:r,start:u,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|l,width:r,wmode:r,wrap:null,about:r,datatype:r,inlist:r,prefix:r,property:r,resource:r,"typeof":r,vocab:r,autoCapitalize:null,autoCorrect:null,autoSave:null,color:null,itemProp:r,itemScope:r|h,itemType:r,itemID:r,itemRef:r,results:null,security:r,unselectable:r},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=m},function(t,i,e){"use strict";var n=e(154),s=e(161),o=e(166),r=e(2),a=e(188),h={};r(h,o),r(h,{findDOMNode:a("findDOMNode","ReactDOM","react-dom",n,n.findDOMNode),render:a("render","ReactDOM","react-dom",n,n.render),unmountComponentAtNode:a("unmountComponentAtNode","ReactDOM","react-dom",n,n.unmountComponentAtNode),renderToString:a("renderToString","ReactDOMServer","react-dom/server",s,s.renderToString),renderToStaticMarkup:a("renderToStaticMarkup","ReactDOMServer","react-dom/server",s,s.renderToStaticMarkup)}),h.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n,h.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s,t.exports=h},function(t,i,e){"use strict";var n=(e(23),e(48)),s=(e(3),"_getDOMNodeDidWarn"),o={getDOMNode:function(){return this.constructor[s]=!0,n(this)}};t.exports=o},function(t,i,e){"use strict";function n(t,i,e){var n=void 0===t[e];null!=i&&n&&(t[e]=o(i,null))}var s=e(14),o=e(53),r=e(56),a=e(57),h=(e(3),{instantiateChildren:function(t,i,e){if(null==t)return null;var s={};return a(t,n,s),s},updateChildren:function(t,i,e,n){if(!i&&!t)return null;var a;for(a in i)if(i.hasOwnProperty(a)){var h=t&&t[a],l=h&&h._currentElement,u=i[a];if(null!=h&&r(l,u))s.receiveComponent(h,u,e,n),i[a]=h;else{h&&s.unmountComponent(h,a);var c=o(u,null);i[a]=c}}for(a in t)!t.hasOwnProperty(a)||i&&i.hasOwnProperty(a)||s.unmountComponent(t[a]);return i},unmountChildren:function(t){for(var i in t)if(t.hasOwnProperty(i)){var e=t[i];s.unmountComponent(e)}}});t.exports=h},function(t,i,e){"use strict";function n(t){var i=t._currentElement._owner||null;if(i){var e=i.getName();if(e)return" Check the render method of `"+e+"`."}return""}function s(t){}var o=e(44),r=e(11),a=e(6),h=e(23),l=e(7),u=e(30),c=(e(29),e(14)),p=e(46),d=e(2),m=e(25),f=e(1),y=e(56);e(3);s.prototype.render=function(){var t=h.get(this)._currentElement.type;return t(this.props,this.context,this.updater)};var v=1,x={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(t,i,e){this._context=e,this._mountOrder=v++,this._rootNodeID=t;var n,o,r=this._processProps(this._currentElement.props),l=this._processContext(e),u=this._currentElement.type,d="prototype"in u;d&&(n=new u(r,l,p)),(!d||null===n||n===!1||a.isValidElement(n))&&(o=n,n=new s(u)),n.props=r,n.context=l,n.refs=m,n.updater=p,this._instance=n,h.set(n,this);var y=n.state;void 0===y&&(n.state=y=null),"object"!=typeof y||Array.isArray(y)?f(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,n.componentWillMount&&(n.componentWillMount(),this._pendingStateQueue&&(n.state=this._processPendingState(n.props,n.context))),void 0===o&&(o=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(o);var x=c.mountComponent(this._renderedComponent,t,i,this._processChildContext(e));return n.componentDidMount&&i.getReactMountReady().enqueue(n.componentDidMount,n),x},unmountComponent:function(){var t=this._instance;t.componentWillUnmount&&t.componentWillUnmount(),c.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,h.remove(t)},_maskContext:function(t){var i=null,e=this._currentElement.type,n=e.contextTypes;if(!n)return m;i={};for(var s in n)i[s]=t[s];return i},_processContext:function(t){var i=this._maskContext(t);return i},_processChildContext:function(t){var i=this._currentElement.type,e=this._instance,n=e.getChildContext&&e.getChildContext();if(n){"object"!=typeof i.childContextTypes?f(!1):void 0;for(var s in n)s in i.childContextTypes?void 0:f(!1);return d({},t,n)}return t},_processProps:function(t){return t},_checkPropTypes:function(t,i,e){var s=this.getName();for(var o in t)if(t.hasOwnProperty(o)){var r;try{"function"!=typeof t[o]?f(!1):void 0,r=t[o](i,o,s,e)}catch(a){r=a}if(r instanceof Error){n(this);e===u.prop}}},receiveComponent:function(t,i,e){var n=this._currentElement,s=this._context;this._pendingElement=null,this.updateComponent(i,n,t,s,e)},performUpdateIfNecessary:function(t){null!=this._pendingElement&&c.receiveComponent(this,this._pendingElement||this._currentElement,t,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(t,i,e,n,s){var o,r=this._instance,a=this._context===s?r.context:this._processContext(s);i===e?o=e.props:(o=this._processProps(e.props),r.componentWillReceiveProps&&r.componentWillReceiveProps(o,a));var h=this._processPendingState(o,a),l=this._pendingForceUpdate||!r.shouldComponentUpdate||r.shouldComponentUpdate(o,h,a);l?(this._pendingForceUpdate=!1,this._performComponentUpdate(e,o,h,a,t,s)):(this._currentElement=e,this._context=s,r.props=o,r.state=h,r.context=a)},_processPendingState:function(t,i){var e=this._instance,n=this._pendingStateQueue,s=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!n)return e.state;if(s&&1===n.length)return n[0];for(var o=d({},s?n[0]:e.state),r=s?1:0;r<n.length;r++){var a=n[r];d(o,"function"==typeof a?a.call(e,o,t,i):a)}return o},_performComponentUpdate:function(t,i,e,n,s,o){var r,a,h,l=this._instance,u=Boolean(l.componentDidUpdate);u&&(r=l.props,a=l.state,h=l.context),l.componentWillUpdate&&l.componentWillUpdate(i,e,n),this._currentElement=t,this._context=o,l.props=i,l.state=e,l.context=n,this._updateRenderedComponent(s,o),u&&s.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,r,a,h),l)},_updateRenderedComponent:function(t,i){var e=this._renderedComponent,n=e._currentElement,s=this._renderValidatedComponent();if(y(n,s))c.receiveComponent(e,s,t,this._processChildContext(i));else{var o=this._rootNodeID,r=e._rootNodeID;c.unmountComponent(e),this._renderedComponent=this._instantiateReactComponent(s);var a=c.mountComponent(this._renderedComponent,o,t,this._processChildContext(i));this._replaceNodeWithMarkupByID(r,a)}},_replaceNodeWithMarkupByID:function(t,i){o.replaceNodeWithMarkupByID(t,i)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,i=t.render();return i},_renderValidatedComponent:function(){var t;r.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{r.current=null}return null===t||t===!1||a.isValidElement(t)?void 0:f(!1),t},attachRef:function(t,i){var e=this.getPublicInstance();null==e?f(!1):void 0;var n=i.getPublicInstance(),s=e.refs===m?e.refs={}:e.refs;s[t]=n},detachRef:function(t){var i=this.getPublicInstance().refs;delete i[t]},getName:function(){var t=this._currentElement.type,i=this._instance&&this._instance.constructor;return t.displayName||i&&i.displayName||t.name||i&&i.name||null},getPublicInstance:function(){var t=this._instance;return t instanceof s?null:t},_instantiateReactComponent:null};l.measureMethods(x,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var g={Mixin:x};t.exports=g},function(t,i,e){"use strict";var n=e(11),s=e(70),o=e(72),r=e(18),a=e(5),h=e(7),l=e(14),u=e(8),c=e(47),p=e(48),d=e(194);e(3);o.inject();var m=h.measure("React","render",a.render),f={findDOMNode:p,render:m,unmountComponentAtNode:a.unmountComponentAtNode,version:c,unstable_batchedUpdates:u.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:n,InstanceHandles:r,Mount:a,Reconciler:l,TextComponent:s});t.exports=f},function(t,i){"use strict";var e={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},n={getNativeProps:function(t,i,n){if(!i.disabled)return i;var s={};for(var o in i)i.hasOwnProperty(o)&&!e[o]&&(s[o]=i[o]);return s}};t.exports=n},function(t,i,e){"use strict";function n(){return this}function s(){var t=this._reactInternalComponent;return!!t}function o(){}function r(t,i){var e=this._reactInternalComponent;e&&(z.enqueueSetPropsInternal(e,t),i&&z.enqueueCallbackInternal(e,i))}function a(t,i){var e=this._reactInternalComponent;e&&(z.enqueueReplacePropsInternal(e,t),i&&z.enqueueCallbackInternal(e,i))}function h(t,i){i&&(null!=i.dangerouslySetInnerHTML&&(null!=i.children?O(!1):void 0,"object"==typeof i.dangerouslySetInnerHTML&&Z in i.dangerouslySetInnerHTML?void 0:O(!1)),null!=i.style&&"object"!=typeof i.style?O(!1):void 0)}function l(t,i,e,n){var s=E.findReactContainerForID(t);if(s){var o=s.nodeType===q?s.ownerDocument:s;j(i,o)}n.getReactMountReady().enqueue(u,{id:t,registrationName:i,listener:e})}function u(){var t=this;_.putListener(t.id,t.registrationName,t.listener)}function c(){var t=this;t._rootNodeID?void 0:O(!1);var i=E.getNode(t._rootNodeID);switch(i?void 0:O(!1),t._tag){case"iframe":t._wrapperState.listeners=[_.trapBubbledEvent(N.topLevelTypes.topLoad,"load",i)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var e in H)H.hasOwnProperty(e)&&t._wrapperState.listeners.push(_.trapBubbledEvent(N.topLevelTypes[e],H[e],i));break;case"img":t._wrapperState.listeners=[_.trapBubbledEvent(N.topLevelTypes.topError,"error",i),_.trapBubbledEvent(N.topLevelTypes.topLoad,"load",i)];break;case"form":t._wrapperState.listeners=[_.trapBubbledEvent(N.topLevelTypes.topReset,"reset",i),_.trapBubbledEvent(N.topLevelTypes.topSubmit,"submit",i)]}}function p(){w.mountReadyWrapper(this)}function d(){A.postUpdateWrapper(this)}function m(t){$.call(G,t)||(Q.test(t)?void 0:O(!1),G[t]=!0)}function f(t,i){return t.indexOf("-")>=0||null!=i.is}function y(t){m(t),this._tag=t.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var v=e(139),x=e(141),g=e(17),b=e(41),N=e(10),_=e(28),C=e(43),P=e(155),w=e(158),k=e(159),A=e(69),S=e(162),E=e(5),I=e(167),M=e(7),z=e(46),D=e(2),T=e(33),L=e(34),O=e(1),R=(e(54),e(13)),V=e(35),B=e(55),U=(e(94),e(58),e(3),_.deleteListener),j=_.listenTo,F=_.registrationNameModules,Y={string:!0,number:!0},X=R({children:null}),W=R({style:null}),Z=R({__html:null}),q=1,H={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},J={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},K={listing:!0,pre:!0,textarea:!0},Q=(D({menuitem:!0},J),/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/),G={},$={}.hasOwnProperty;y.displayName="ReactDOMComponent",y.Mixin={construct:function(t){this._currentElement=t},mountComponent:function(t,i,e){this._rootNodeID=t;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},i.getReactMountReady().enqueue(c,this);break;case"button":n=P.getNativeProps(this,n,e);break;case"input":w.mountWrapper(this,n,e),n=w.getNativeProps(this,n,e);break;case"option":k.mountWrapper(this,n,e),n=k.getNativeProps(this,n,e);break;case"select":A.mountWrapper(this,n,e),n=A.getNativeProps(this,n,e),e=A.processChildContext(this,n,e);break;case"textarea":S.mountWrapper(this,n,e),n=S.getNativeProps(this,n,e)}h(this,n);var s;if(i.useCreateElement){var o=e[E.ownerDocumentContextKey],r=o.createElement(this._currentElement.type);b.setAttributeForID(r,this._rootNodeID),E.getID(r),this._updateDOMProperties({},n,i,r),this._createInitialChildren(i,n,e,r),s=r}else{var a=this._createOpenTagMarkupAndPutListeners(i,n),l=this._createContentMarkup(i,n,e);s=!l&&J[this._tag]?a+"/>":a+">"+l+"</"+this._currentElement.type+">"}switch(this._tag){case"input":i.getReactMountReady().enqueue(p,this);case"button":case"select":case"textarea":n.autoFocus&&i.getReactMountReady().enqueue(v.focusDOMComponent,this)}return s},_createOpenTagMarkupAndPutListeners:function(t,i){var e="<"+this._currentElement.type;for(var n in i)if(i.hasOwnProperty(n)){var s=i[n];if(null!=s)if(F.hasOwnProperty(n))s&&l(this._rootNodeID,n,s,t);else{n===W&&(s&&(s=this._previousStyleCopy=D({},i.style)),s=x.createMarkupForStyles(s));var o=null;null!=this._tag&&f(this._tag,i)?n!==X&&(o=b.createMarkupForCustomAttribute(n,s)):o=b.createMarkupForProperty(n,s),o&&(e+=" "+o)}}if(t.renderToStaticMarkup)return e;var r=b.createMarkupForID(this._rootNodeID);return e+" "+r},_createContentMarkup:function(t,i,e){var n="",s=i.dangerouslySetInnerHTML;if(null!=s)null!=s.__html&&(n=s.__html);else{var o=Y[typeof i.children]?i.children:null,r=null!=o?null:i.children;if(null!=o)n=L(o);else if(null!=r){var a=this.mountChildren(r,t,e);n=a.join("")}}return K[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(t,i,e,n){var s=i.dangerouslySetInnerHTML;if(null!=s)null!=s.__html&&V(n,s.__html);else{var o=Y[typeof i.children]?i.children:null,r=null!=o?null:i.children;if(null!=o)B(n,o);else if(null!=r)for(var a=this.mountChildren(r,t,e),h=0;h<a.length;h++)n.appendChild(a[h])}},receiveComponent:function(t,i,e){var n=this._currentElement;this._currentElement=t,this.updateComponent(i,n,t,e)},updateComponent:function(t,i,e,n){var s=i.props,o=this._currentElement.props;switch(this._tag){case"button":s=P.getNativeProps(this,s),o=P.getNativeProps(this,o);break;case"input":w.updateWrapper(this),s=w.getNativeProps(this,s),o=w.getNativeProps(this,o);break;case"option":s=k.getNativeProps(this,s),o=k.getNativeProps(this,o);break;case"select":s=A.getNativeProps(this,s),o=A.getNativeProps(this,o);break;case"textarea":S.updateWrapper(this),s=S.getNativeProps(this,s),o=S.getNativeProps(this,o)}h(this,o),this._updateDOMProperties(s,o,t,null),this._updateDOMChildren(s,o,t,n),!T&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&t.getReactMountReady().enqueue(d,this)},_updateDOMProperties:function(t,i,e,n){var s,o,r;for(s in t)if(!i.hasOwnProperty(s)&&t.hasOwnProperty(s))if(s===W){var a=this._previousStyleCopy;for(o in a)a.hasOwnProperty(o)&&(r=r||{},r[o]="");this._previousStyleCopy=null}else F.hasOwnProperty(s)?t[s]&&U(this._rootNodeID,s):(g.properties[s]||g.isCustomAttribute(s))&&(n||(n=E.getNode(this._rootNodeID)),b.deleteValueForProperty(n,s));for(s in i){var h=i[s],u=s===W?this._previousStyleCopy:t[s];if(i.hasOwnProperty(s)&&h!==u)if(s===W)if(h?h=this._previousStyleCopy=D({},h):this._previousStyleCopy=null,u){for(o in u)!u.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(r=r||{},r[o]="");for(o in h)h.hasOwnProperty(o)&&u[o]!==h[o]&&(r=r||{},r[o]=h[o])}else r=h;else F.hasOwnProperty(s)?h?l(this._rootNodeID,s,h,e):u&&U(this._rootNodeID,s):f(this._tag,i)?(n||(n=E.getNode(this._rootNodeID)),s===X&&(h=null),b.setValueForAttribute(n,s,h)):(g.properties[s]||g.isCustomAttribute(s))&&(n||(n=E.getNode(this._rootNodeID)),null!=h?b.setValueForProperty(n,s,h):b.deleteValueForProperty(n,s))}r&&(n||(n=E.getNode(this._rootNodeID)),x.setValueForStyles(n,r))},_updateDOMChildren:function(t,i,e,n){var s=Y[typeof t.children]?t.children:null,o=Y[typeof i.children]?i.children:null,r=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,a=i.dangerouslySetInnerHTML&&i.dangerouslySetInnerHTML.__html,h=null!=s?null:t.children,l=null!=o?null:i.children,u=null!=s||null!=r,c=null!=o||null!=a;null!=h&&null==l?this.updateChildren(null,e,n):u&&!c&&this.updateTextContent(""),null!=o?s!==o&&this.updateTextContent(""+o):null!=a?r!==a&&this.updateMarkup(""+a):null!=l&&this.updateChildren(l,e,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var t=this._wrapperState.listeners;if(t)for(var i=0;i<t.length;i++)t[i].remove();break;case"input":w.unmountWrapper(this);break;case"html":case"head":case"body":O(!1)}if(this.unmountChildren(),_.deleteAllListeners(this._rootNodeID),C.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var e=this._nodeWithLegacyProperties;e._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var t=E.getNode(this._rootNodeID);t._reactInternalComponent=this,t.getDOMNode=n,t.isMounted=s,t.setState=o,t.replaceState=o,t.forceUpdate=o,t.setProps=r,t.replaceProps=a,t.props=this._currentElement.props,this._nodeWithLegacyProperties=t}return this._nodeWithLegacyProperties}},M.measureMethods(y,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),D(y.prototype,y.Mixin,I.Mixin),t.exports=y},function(t,i,e){"use strict";function n(t){return s.createFactory(t)}var s=e(6),o=(e(73),e(204)),r=o({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},n);t.exports=r},function(t,i,e){"use strict";function n(){this._rootNodeID&&p.updateWrapper(this)}function s(t){var i=this._currentElement.props,e=r.executeOnChange(i,t);h.asap(n,this);var s=i.name;if("radio"===i.type&&null!=s){for(var o=a.getNode(this._rootNodeID),l=o;l.parentNode;)l=l.parentNode;for(var p=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),d=0;d<p.length;d++){var m=p[d];if(m!==o&&m.form===o.form){var f=a.getID(m);f?void 0:u(!1);var y=c[f];y?void 0:u(!1),h.asap(n,y)}}}return e}var o=e(45),r=e(42),a=e(5),h=e(8),l=e(2),u=e(1),c={},p={getNativeProps:function(t,i,e){var n=r.getValue(i),s=r.getChecked(i),o=l({},i,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=s?s:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return o},mountWrapper:function(t,i){var e=i.defaultValue;t._wrapperState={initialChecked:i.defaultChecked||!1,initialValue:null!=e?e:null,onChange:s.bind(t)}},mountReadyWrapper:function(t){c[t._rootNodeID]=t},unmountWrapper:function(t){delete c[t._rootNodeID]},updateWrapper:function(t){var i=t._currentElement.props,e=i.checked;null!=e&&o.updatePropertyByID(t._rootNodeID,"checked",e||!1);var n=r.getValue(i);null!=n&&o.updatePropertyByID(t._rootNodeID,"value",""+n)}};t.exports=p},function(t,i,e){"use strict";var n=e(65),s=e(69),o=e(2),r=(e(3),s.valueContextKey),a={mountWrapper:function(t,i,e){var n=e[r],s=null;if(null!=n)if(s=!1,Array.isArray(n)){for(var o=0;o<n.length;o++)if(""+n[o]==""+i.value){s=!0;break}}else s=""+n==""+i.value;t._wrapperState={selected:s}},getNativeProps:function(t,i,e){var s=o({selected:void 0,children:void 0},i);null!=t._wrapperState.selected&&(s.selected=t._wrapperState.selected);var r="";return n.forEach(i.children,function(t){null!=t&&("string"==typeof t||"number"==typeof t)&&(r+=t)}),s.children=r,s}};t.exports=a},function(t,i,e){"use strict";function n(t,i,e,n){return t===e&&i===n}function s(t){var i=document.selection,e=i.createRange(),n=e.text.length,s=e.duplicate();s.moveToElementText(t),s.setEndPoint("EndToStart",e);var o=s.text.length,r=o+n;return{start:o,end:r}}function o(t){var i=window.getSelection&&window.getSelection();if(!i||0===i.rangeCount)return null;var e=i.anchorNode,s=i.anchorOffset,o=i.focusNode,r=i.focusOffset,a=i.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(h){return null}var l=n(i.anchorNode,i.anchorOffset,i.focusNode,i.focusOffset),u=l?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(t),c.setEnd(a.startContainer,a.startOffset);var p=n(c.startContainer,c.startOffset,c.endContainer,c.endOffset),d=p?0:c.toString().length,m=d+u,f=document.createRange();f.setStart(e,s),f.setEnd(o,r);var y=f.collapsed;return{start:y?m:d,end:y?d:m}}function r(t,i){var e,n,s=document.selection.createRange().duplicate();"undefined"==typeof i.end?(e=i.start,n=e):i.start>i.end?(e=i.end,n=i.start):(e=i.start,n=i.end),s.moveToElementText(t),s.moveStart("character",e),s.setEndPoint("EndToStart",s),s.moveEnd("character",n-e),s.select()}function a(t,i){if(window.getSelection){var e=window.getSelection(),n=t[u()].length,s=Math.min(i.start,n),o="undefined"==typeof i.end?s:Math.min(i.end,n);if(!e.extend&&s>o){var r=o;o=s,s=r}var a=l(t,s),h=l(t,o);if(a&&h){var c=document.createRange();c.setStart(a.node,a.offset),e.removeAllRanges(),s>o?(e.addRange(c),e.extend(h.node,h.offset)):(c.setEnd(h.node,h.offset),e.addRange(c))}}}var h=e(4),l=e(191),u=e(87),c=h.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:c?s:o,setOffsets:c?r:a};t.exports=p},function(t,i,e){"use strict";var n=e(72),s=e(172),o=e(47);n.inject();var r={renderToString:s.renderToString,renderToStaticMarkup:s.renderToStaticMarkup,version:o};t.exports=r},function(t,i,e){"use strict";function n(){this._rootNodeID&&u.updateWrapper(this)}function s(t){var i=this._currentElement.props,e=o.executeOnChange(i,t);return a.asap(n,this),e}var o=e(42),r=e(45),a=e(8),h=e(2),l=e(1),u=(e(3),{getNativeProps:function(t,i,e){null!=i.dangerouslySetInnerHTML?l(!1):void 0;var n=h({},i,{defaultValue:void 0,value:void 0,children:t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,i){var e=i.defaultValue,n=i.children;null!=n&&(null!=e?l(!1):void 0,Array.isArray(n)&&(n.length<=1?void 0:l(!1),n=n[0]),e=""+n),null==e&&(e="");var r=o.getValue(i);t._wrapperState={initialValue:""+(null!=r?r:e),onChange:s.bind(t)}},updateWrapper:function(t){var i=t._currentElement.props,e=o.getValue(i);null!=e&&r.updatePropertyByID(t._rootNodeID,"value",""+e)}});t.exports=u},function(t,i,e){"use strict";function n(t){s.enqueueEvents(t),s.processEventQueue(!1)}var s=e(21),o={handleTopLevel:function(t,i,e,o,r){var a=s.extractEvents(t,i,e,o,r);n(a)}};t.exports=o},function(t,i,e){"use strict";function n(t){var i=p.getID(t),e=c.getReactRootIDFromNodeID(i),n=p.findReactContainerForID(e),s=p.getFirstReactDOM(n);return s}function s(t,i){this.topLevelType=t,this.nativeEvent=i,this.ancestors=[]}function o(t){r(t)}function r(t){for(var i=p.getFirstReactDOM(f(t.nativeEvent))||window,e=i;e;)t.ancestors.push(e),e=n(e);for(var s=0;s<t.ancestors.length;s++){i=t.ancestors[s];var o=p.getID(i)||"";v._handleTopLevel(t.topLevelType,i,o,t.nativeEvent,f(t.nativeEvent))}}function a(t){var i=y(window);t(i)}var h=e(89),l=e(4),u=e(12),c=e(18),p=e(5),d=e(8),m=e(2),f=e(51),y=e(199);m(s.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),u.addPoolingTo(s,u.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(t){v._handleTopLevel=t},setEnabled:function(t){v._enabled=!!t},isEnabled:function(){return v._enabled},trapBubbledEvent:function(t,i,e){var n=e;return n?h.listen(n,i,v.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,i,e){var n=e;return n?h.capture(n,i,v.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var i=a.bind(null,t);h.listen(window,"scroll",i)},dispatchEvent:function(t,i){if(v._enabled){var e=s.getPooled(t,i);try{d.batchedUpdates(o,e)}finally{s.release(e)}}}};t.exports=v},function(t,i,e){"use strict";var n=e(17),s=e(21),o=e(44),r=e(66),a=e(74),h=e(28),l=e(80),u=e(7),c=e(83),p=e(8),d={Component:o.injection,Class:r.injection,DOMProperty:n.injection,EmptyComponent:a.injection,EventPluginHub:s.injection,EventEmitter:h.injection,NativeComponent:l.injection,Perf:u.injection,RootIndex:c.injection,Updates:p.injection};t.exports=d},function(t,i,e){"use strict";var n=e(65),s=e(67),o=e(66),r=e(157),a=e(6),h=(e(73),e(82)),l=e(47),u=e(2),c=e(192),p=a.createElement,d=a.createFactory,m=a.cloneElement,f={Children:{map:n.map,forEach:n.forEach,count:n.count,toArray:n.toArray,only:c},Component:s,createElement:p,cloneElement:m,isValidElement:a.isValidElement,PropTypes:h,createClass:o.createClass,createFactory:d,createMixin:function(t){return t},DOM:r,version:l,__spread:u};t.exports=f},function(t,i,e){"use strict";function n(t,i,e){y.push({parentID:t,parentNode:null,type:c.INSERT_MARKUP,markupIndex:v.push(i)-1,content:null,fromIndex:null,toIndex:e})}function s(t,i,e){y.push({parentID:t,parentNode:null,type:c.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:i,toIndex:e})}function o(t,i){y.push({parentID:t,parentNode:null,type:c.REMOVE_NODE,markupIndex:null,content:null,fromIndex:i,toIndex:null})}function r(t,i){y.push({parentID:t,parentNode:null,type:c.SET_MARKUP,markupIndex:null,content:i,fromIndex:null,toIndex:null})}function a(t,i){y.push({parentID:t,parentNode:null,type:c.TEXT_CONTENT,markupIndex:null,content:i,fromIndex:null,toIndex:null})}function h(){y.length&&(u.processChildrenUpdates(y,v),l())}function l(){y.length=0,v.length=0}var u=e(44),c=e(79),p=(e(11),e(14)),d=e(152),m=e(189),f=0,y=[],v=[],x={Mixin:{_reconcilerInstantiateChildren:function(t,i,e){return d.instantiateChildren(t,i,e)},_reconcilerUpdateChildren:function(t,i,e,n){var s;return s=m(i),d.updateChildren(t,s,e,n)},mountChildren:function(t,i,e){var n=this._reconcilerInstantiateChildren(t,i,e);this._renderedChildren=n;var s=[],o=0;for(var r in n)if(n.hasOwnProperty(r)){var a=n[r],h=this._rootNodeID+r,l=p.mountComponent(a,h,i,e);a._mountIndex=o++,s.push(l)}return s},updateTextContent:function(t){f++;var i=!0;try{var e=this._renderedChildren;d.unmountChildren(e);for(var n in e)e.hasOwnProperty(n)&&this._unmountChild(e[n]);this.setTextContent(t),i=!1}finally{f--,f||(i?l():h())}},updateMarkup:function(t){f++;var i=!0;try{var e=this._renderedChildren;d.unmountChildren(e);for(var n in e)e.hasOwnProperty(n)&&this._unmountChildByName(e[n],n);this.setMarkup(t),i=!1}finally{f--,f||(i?l():h())}},updateChildren:function(t,i,e){f++;var n=!0;try{this._updateChildren(t,i,e),n=!1}finally{f--,f||(n?l():h())}},_updateChildren:function(t,i,e){var n=this._renderedChildren,s=this._reconcilerUpdateChildren(n,t,i,e);if(this._renderedChildren=s,s||n){var o,r=0,a=0;for(o in s)if(s.hasOwnProperty(o)){var h=n&&n[o],l=s[o];h===l?(this.moveChild(h,a,r),r=Math.max(h._mountIndex,r),h._mountIndex=a):(h&&(r=Math.max(h._mountIndex,r),this._unmountChild(h)),this._mountChildByNameAtIndex(l,o,a,i,e)),a++}for(o in n)!n.hasOwnProperty(o)||s&&s.hasOwnProperty(o)||this._unmountChild(n[o])}},unmountChildren:function(){var t=this._renderedChildren;d.unmountChildren(t),this._renderedChildren=null},moveChild:function(t,i,e){t._mountIndex<e&&s(this._rootNodeID,t._mountIndex,i)},createChild:function(t,i){n(this._rootNodeID,i,t._mountIndex)},removeChild:function(t){o(this._rootNodeID,t._mountIndex)},setTextContent:function(t){a(this._rootNodeID,t)},setMarkup:function(t){r(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,i,e,n,s){var o=this._rootNodeID+i,r=p.mountComponent(t,o,n,s);t._mountIndex=e,this.createChild(t,r)},_unmountChild:function(t){this.removeChild(t),t._mountIndex=null}}};t.exports=x},function(t,i,e){"use strict";var n=e(1),s={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,i,e){s.isValidOwner(e)?void 0:n(!1),e.attachRef(i,t)},removeComponentAsRefFrom:function(t,i,e){s.isValidOwner(e)?void 0:n(!1),e.getPublicInstance().refs[i]===t.getPublicInstance()&&e.detachRef(i)}};t.exports=s},function(t,i,e){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=s.getPooled(null),this.useCreateElement=!t&&a.useCreateElement}var s=e(40),o=e(12),r=e(28),a=e(68),h=e(77),l=e(32),u=e(2),c={initialize:h.getSelectionInformation,close:h.restoreSelection},p={initialize:function(){var t=r.isEnabled();return r.setEnabled(!1),t},close:function(t){r.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},m=[c,p,d],f={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null}};u(n.prototype,l.Mixin,f),o.addPoolingTo(n),t.exports=n},function(t,i,e){"use strict";function n(t,i,e){"function"==typeof t?t(i.getPublicInstance()):o.addComponentAsRefTo(i,t,e)}function s(t,i,e){"function"==typeof t?t(null):o.removeComponentAsRefFrom(i,t,e)}var o=e(168),r={};r.attachRefs=function(t,i){if(null!==i&&i!==!1){var e=i.ref;null!=e&&n(e,t,i._owner)}},r.shouldUpdateRefs=function(t,i){var e=null===t||t===!1,n=null===i||i===!1;return e||n||i._owner!==t._owner||i.ref!==t.ref},r.detachRefs=function(t,i){if(null!==i&&i!==!1){var e=i.ref;null!=e&&s(e,t,i._owner)}},t.exports=r},function(t,i){"use strict";var e={isBatchingUpdates:!1,batchedUpdates:function(t){}};t.exports=e},function(t,i,e){"use strict";function n(t){r.isValidElement(t)?void 0:m(!1);var i;try{c.injection.injectBatchingStrategy(l);var e=a.createReactRootID();
return i=u.getPooled(!1),i.perform(function(){var n=d(t,null),s=n.mountComponent(e,i,p);return h.addChecksumToMarkup(s)},null)}finally{u.release(i),c.injection.injectBatchingStrategy(o)}}function s(t){r.isValidElement(t)?void 0:m(!1);var i;try{c.injection.injectBatchingStrategy(l);var e=a.createReactRootID();return i=u.getPooled(!0),i.perform(function(){var n=d(t,null);return n.mountComponent(e,i,p)},null)}finally{u.release(i),c.injection.injectBatchingStrategy(o)}}var o=e(71),r=e(6),a=e(18),h=e(78),l=e(171),u=e(173),c=e(8),p=e(25),d=e(53),m=e(1);t.exports={renderToString:n,renderToStaticMarkup:s}},function(t,i,e){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=o.getPooled(null),this.useCreateElement=!1}var s=e(12),o=e(40),r=e(32),a=e(2),h=e(9),l={initialize:function(){this.reactMountReady.reset()},close:h},u=[l],c={getTransactionWrappers:function(){return u},getReactMountReady:function(){return this.reactMountReady},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};a(n.prototype,r.Mixin,c),s.addPoolingTo(n),t.exports=n},function(t,i,e){"use strict";var n=e(17),s=n.injection.MUST_USE_ATTRIBUTE,o={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={Properties:{clipPath:s,cx:s,cy:s,d:s,dx:s,dy:s,fill:s,fillOpacity:s,fontFamily:s,fontSize:s,fx:s,fy:s,gradientTransform:s,gradientUnits:s,markerEnd:s,markerMid:s,markerStart:s,offset:s,opacity:s,patternContentUnits:s,patternUnits:s,points:s,preserveAspectRatio:s,r:s,rx:s,ry:s,spreadMethod:s,stopColor:s,stopOpacity:s,stroke:s,strokeDasharray:s,strokeLinecap:s,strokeOpacity:s,strokeWidth:s,textAnchor:s,transform:s,version:s,viewBox:s,x1:s,x2:s,x:s,xlinkActuate:s,xlinkArcrole:s,xlinkHref:s,xlinkRole:s,xlinkShow:s,xlinkTitle:s,xlinkType:s,xmlBase:s,xmlLang:s,xmlSpace:s,y1:s,y2:s,y:s},DOMAttributeNamespaces:{xlinkActuate:o.xlink,xlinkArcrole:o.xlink,xlinkHref:o.xlink,xlinkRole:o.xlink,xlinkShow:o.xlink,xlinkTitle:o.xlink,xlinkType:o.xlink,xmlBase:o.xml,xmlLang:o.xml,xmlSpace:o.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};t.exports=r},function(t,i,e){"use strict";function n(t){if("selectionStart"in t&&h.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var i=window.getSelection();return{anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}}if(document.selection){var e=document.selection.createRange();return{parentElement:e.parentElement(),text:e.text,top:e.boundingTop,left:e.boundingLeft}}}function s(t,i){if(b||null==v||v!==u())return null;var e=n(v);if(!g||!d(g,e)){g=e;var s=l.getPooled(y.select,x,t,i);return s.type="select",s.target=v,r.accumulateTwoPhaseDispatches(s),s}return null}var o=e(10),r=e(22),a=e(4),h=e(77),l=e(15),u=e(92),c=e(88),p=e(13),d=e(94),m=o.topLevelTypes,f=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,y={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},v=null,x=null,g=null,b=!1,N=!1,_=p({onSelect:null}),C={eventTypes:y,extractEvents:function(t,i,e,n,o){if(!N)return null;switch(t){case m.topFocus:(c(i)||"true"===i.contentEditable)&&(v=i,x=e,g=null);break;case m.topBlur:v=null,x=null,g=null;break;case m.topMouseDown:b=!0;break;case m.topContextMenu:case m.topMouseUp:return b=!1,s(n,o);case m.topSelectionChange:if(f)break;case m.topKeyDown:case m.topKeyUp:return s(n,o)}return null},didPutListener:function(t,i,e){i===_&&(N=!0)}};t.exports=C},function(t,i){"use strict";var e=Math.pow(2,53),n={createReactRootIndex:function(){return Math.ceil(Math.random()*e)}};t.exports=n},function(t,i,e){"use strict";var n=e(10),s=e(89),o=e(22),r=e(5),a=e(178),h=e(15),l=e(181),u=e(183),c=e(31),p=e(180),d=e(184),m=e(24),f=e(185),y=e(9),v=e(49),x=e(1),g=e(13),b=n.topLevelTypes,N={abort:{phasedRegistrationNames:{bubbled:g({onAbort:!0}),captured:g({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:g({onCanPlay:!0}),captured:g({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:g({onCanPlayThrough:!0}),captured:g({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:g({onDurationChange:!0}),captured:g({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:g({onEmptied:!0}),captured:g({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:g({onEncrypted:!0}),captured:g({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:g({onEnded:!0}),captured:g({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:g({onLoadedData:!0}),captured:g({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:g({onLoadedMetadata:!0}),captured:g({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:g({onLoadStart:!0}),captured:g({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:g({onPause:!0}),captured:g({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:g({onPlay:!0}),captured:g({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:g({onPlaying:!0}),captured:g({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:g({onProgress:!0}),captured:g({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:g({onRateChange:!0}),captured:g({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:g({onSeeked:!0}),captured:g({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:g({onSeeking:!0}),captured:g({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:g({onStalled:!0}),captured:g({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:g({onSuspend:!0}),captured:g({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:g({onTimeUpdate:!0}),captured:g({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:g({onVolumeChange:!0}),captured:g({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:g({onWaiting:!0}),captured:g({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},_={topAbort:N.abort,topBlur:N.blur,topCanPlay:N.canPlay,topCanPlayThrough:N.canPlayThrough,topClick:N.click,topContextMenu:N.contextMenu,topCopy:N.copy,topCut:N.cut,topDoubleClick:N.doubleClick,topDrag:N.drag,topDragEnd:N.dragEnd,topDragEnter:N.dragEnter,topDragExit:N.dragExit,topDragLeave:N.dragLeave,topDragOver:N.dragOver,topDragStart:N.dragStart,topDrop:N.drop,topDurationChange:N.durationChange,topEmptied:N.emptied,topEncrypted:N.encrypted,topEnded:N.ended,topError:N.error,topFocus:N.focus,topInput:N.input,topKeyDown:N.keyDown,topKeyPress:N.keyPress,topKeyUp:N.keyUp,topLoad:N.load,topLoadedData:N.loadedData,topLoadedMetadata:N.loadedMetadata,topLoadStart:N.loadStart,topMouseDown:N.mouseDown,topMouseMove:N.mouseMove,topMouseOut:N.mouseOut,topMouseOver:N.mouseOver,topMouseUp:N.mouseUp,topPaste:N.paste,topPause:N.pause,topPlay:N.play,topPlaying:N.playing,topProgress:N.progress,topRateChange:N.rateChange,topReset:N.reset,topScroll:N.scroll,topSeeked:N.seeked,topSeeking:N.seeking,topStalled:N.stalled,topSubmit:N.submit,topSuspend:N.suspend,topTimeUpdate:N.timeUpdate,topTouchCancel:N.touchCancel,topTouchEnd:N.touchEnd,topTouchMove:N.touchMove,topTouchStart:N.touchStart,topVolumeChange:N.volumeChange,topWaiting:N.waiting,topWheel:N.wheel};for(var C in _)_[C].dependencies=[C];var P=g({onClick:null}),w={},k={eventTypes:N,extractEvents:function(t,i,e,n,s){var r=_[t];if(!r)return null;var y;switch(t){case b.topAbort:case b.topCanPlay:case b.topCanPlayThrough:case b.topDurationChange:case b.topEmptied:case b.topEncrypted:case b.topEnded:case b.topError:case b.topInput:case b.topLoad:case b.topLoadedData:case b.topLoadedMetadata:case b.topLoadStart:case b.topPause:case b.topPlay:case b.topPlaying:case b.topProgress:case b.topRateChange:case b.topReset:case b.topSeeked:case b.topSeeking:case b.topStalled:case b.topSubmit:case b.topSuspend:case b.topTimeUpdate:case b.topVolumeChange:case b.topWaiting:y=h;break;case b.topKeyPress:if(0===v(n))return null;case b.topKeyDown:case b.topKeyUp:y=u;break;case b.topBlur:case b.topFocus:y=l;break;case b.topClick:if(2===n.button)return null;case b.topContextMenu:case b.topDoubleClick:case b.topMouseDown:case b.topMouseMove:case b.topMouseOut:case b.topMouseOver:case b.topMouseUp:y=c;break;case b.topDrag:case b.topDragEnd:case b.topDragEnter:case b.topDragExit:case b.topDragLeave:case b.topDragOver:case b.topDragStart:case b.topDrop:y=p;break;case b.topTouchCancel:case b.topTouchEnd:case b.topTouchMove:case b.topTouchStart:y=d;break;case b.topScroll:y=m;break;case b.topWheel:y=f;break;case b.topCopy:case b.topCut:case b.topPaste:y=a}y?void 0:x(!1);var g=y.getPooled(r,e,n,s);return o.accumulateTwoPhaseDispatches(g),g},didPutListener:function(t,i,e){if(i===P){var n=r.getNode(t);w[t]||(w[t]=s.listen(n,"click",y))}},willDeleteListener:function(t,i){i===P&&(w[t].remove(),delete w[t])}};t.exports=k},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(15),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};s.augmentClass(n,o),t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(15),o={data:null};s.augmentClass(n,o),t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(31),o={dataTransfer:null};s.augmentClass(n,o),t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(24),o={relatedTarget:null};s.augmentClass(n,o),t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(15),o={data:null};s.augmentClass(n,o),t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(24),o=e(49),r=e(190),a=e(50),h={key:r,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};s.augmentClass(n,h),t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(24),o=e(50),r={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};s.augmentClass(n,r),t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n){s.call(this,t,i,e,n)}var s=e(31),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};s.augmentClass(n,o),t.exports=n},function(t,i){"use strict";function e(t){for(var i=1,e=0,s=0,o=t.length,r=-4&o;r>s;){for(;s<Math.min(s+4096,r);s+=4)e+=(i+=t.charCodeAt(s))+(i+=t.charCodeAt(s+1))+(i+=t.charCodeAt(s+2))+(i+=t.charCodeAt(s+3));i%=n,e%=n}for(;o>s;s++)e+=i+=t.charCodeAt(s);return i%=n,e%=n,i|e<<16}var n=65521;t.exports=e},function(t,i,e){"use strict";function n(t,i){var e=null==i||"boolean"==typeof i||""===i;if(e)return"";var n=isNaN(i);return n||0===i||o.hasOwnProperty(t)&&o[t]?""+i:("string"==typeof i&&(i=i.trim()),i+"px")}var s=e(62),o=s.isUnitlessNumber;t.exports=n},function(t,i,e){"use strict";function n(t,i,e,n,s){return s}e(2),e(3);t.exports=n},function(t,i,e){"use strict";function n(t,i,e){var n=t,s=void 0===n[e];s&&null!=i&&(n[e]=i)}function s(t){if(null==t)return t;var i={};return o(t,n,i),i}var o=e(57);e(3);t.exports=s},function(t,i,e){"use strict";function n(t){if(t.key){var i=o[t.key]||t.key;if("Unidentified"!==i)return i}if("keypress"===t.type){var e=s(t);return 13===e?"Enter":String.fromCharCode(e)}return"keydown"===t.type||"keyup"===t.type?r[t.keyCode]||"Unidentified":""}var s=e(49),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=n},function(t,i){"use strict";function e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function s(t,i){for(var s=e(t),o=0,r=0;s;){if(3===s.nodeType){if(r=o+s.textContent.length,i>=o&&r>=i)return{node:s,offset:i-o};o=r}s=e(n(s))}}t.exports=s},function(t,i,e){"use strict";function n(t){return s.isValidElement(t)?void 0:o(!1),t}var s=e(6),o=e(1);t.exports=n},function(t,i,e){"use strict";function n(t){return'"'+s(t)+'"'}var s=e(34);t.exports=n},function(t,i,e){"use strict";var n=e(5);t.exports=n.renderSubtreeIntoContainer},function(t,i){"use strict";function e(t){return t.replace(n,function(t,i){return i.toUpperCase()})}var n=/-(.)/g;t.exports=e},function(t,i,e){"use strict";function n(t){return s(t.replace(o,"ms-"))}var s=e(195),o=/^-ms-/;t.exports=n},function(t,i,e){"use strict";function n(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function s(t){return n(t)?Array.isArray(t)?t.slice():o(t):[t]}var o=e(206);t.exports=s},function(t,i,e){"use strict";function n(t){var i=t.match(u);return i&&i[1].toLowerCase()}function s(t,i){var e=l;l?void 0:h(!1);var s=n(t),o=s&&a(s);if(o){e.innerHTML=o[1]+t+o[2];for(var u=o[0];u--;)e=e.lastChild}else e.innerHTML=t;var c=e.getElementsByTagName("script");c.length&&(i?void 0:h(!1),r(c).forEach(i));for(var p=r(e.childNodes);e.lastChild;)e.removeChild(e.lastChild);return p}var o=e(4),r=e(197),a=e(93),h=e(1),l=o.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;t.exports=s},function(t,i){"use strict";function e(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=e},function(t,i){"use strict";function e(t){return t.replace(n,"-$1").toLowerCase()}var n=/([A-Z])/g;t.exports=e},function(t,i,e){"use strict";function n(t){return s(t).replace(o,"-ms-")}var s=e(200),o=/^ms-/;t.exports=n},function(t,i){"use strict";function e(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=e},function(t,i,e){"use strict";function n(t){return s(t)&&3==t.nodeType}var s=e(202);t.exports=n},function(t,i){"use strict";function e(t,i,e){if(!t)return null;var s={};for(var o in t)n.call(t,o)&&(s[o]=i.call(e,t[o],o,t));return s}var n=Object.prototype.hasOwnProperty;t.exports=e},function(t,i){"use strict";function e(t){var i={};return function(e){return i.hasOwnProperty(e)||(i[e]=t.call(this,e)),i[e]}}t.exports=e},function(t,i,e){"use strict";function n(t){var i=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?s(!1):void 0,"number"!=typeof i?s(!1):void 0,0===i||i-1 in t?void 0:s(!1),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(e){}for(var n=Array(i),o=0;i>o;o++)n[o]=t[o];return n}var s=e(1);t.exports=n},function(t,i){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);