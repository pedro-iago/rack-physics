!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var i=e.slice(1),n=t[e[0]];return function(t,e,r){n.apply(this,[t,e,r].concat(i))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,i){t.exports=i(265)},[791,302],[797,306],[792,303],function(t,e,i){var n,r,o={REVISION:"73"};n=o,r="function"==typeof n?n.call(e,i,e,t):n,!(void 0!==r&&(t.exports=r)),(void 0===self.requestAnimationFrame||void 0===self.cancelAnimationFrame)&&!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!self.requestAnimationFrame;++i)self.requestAnimationFrame=self[e[i]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[e[i]+"CancelAnimationFrame"]||self[e[i]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(e){var i=Date.now(),n=Math.max(0,16-(i-t)),r=self.setTimeout(function(){e(i+n)},n);return t=i+n,r}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(t){self.clearTimeout(t)})}(),void 0===self.performance&&(self.performance={}),void 0===self.performance.now&&!function(){var t=Date.now();self.performance.now=function(){return Date.now()-t}}(),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:t>0?1:+t}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),o.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},o.CullFaceNone=0,o.CullFaceBack=1,o.CullFaceFront=2,o.CullFaceFrontBack=3,o.FrontFaceDirectionCW=0,o.FrontFaceDirectionCCW=1,o.BasicShadowMap=0,o.PCFShadowMap=1,o.PCFSoftShadowMap=2,o.FrontSide=0,o.BackSide=1,o.DoubleSide=2,o.FlatShading=1,o.SmoothShading=2,o.NoColors=0,o.FaceColors=1,o.VertexColors=2,o.NoBlending=0,o.NormalBlending=1,o.AdditiveBlending=2,o.SubtractiveBlending=3,o.MultiplyBlending=4,o.CustomBlending=5,o.AddEquation=100,o.SubtractEquation=101,o.ReverseSubtractEquation=102,o.MinEquation=103,o.MaxEquation=104,o.ZeroFactor=200,o.OneFactor=201,o.SrcColorFactor=202,o.OneMinusSrcColorFactor=203,o.SrcAlphaFactor=204,o.OneMinusSrcAlphaFactor=205,o.DstAlphaFactor=206,o.OneMinusDstAlphaFactor=207,o.DstColorFactor=208,o.OneMinusDstColorFactor=209,o.SrcAlphaSaturateFactor=210,o.NeverDepth=0,o.AlwaysDepth=1,o.LessDepth=2,o.LessEqualDepth=3,o.EqualDepth=4,o.GreaterEqualDepth=5,o.GreaterDepth=6,o.NotEqualDepth=7,o.MultiplyOperation=0,o.MixOperation=1,o.AddOperation=2,o.UVMapping=300,o.CubeReflectionMapping=301,o.CubeRefractionMapping=302,o.EquirectangularReflectionMapping=303,o.EquirectangularRefractionMapping=304,o.SphericalReflectionMapping=305,o.RepeatWrapping=1e3,o.ClampToEdgeWrapping=1001,o.MirroredRepeatWrapping=1002,o.NearestFilter=1003,o.NearestMipMapNearestFilter=1004,o.NearestMipMapLinearFilter=1005,o.LinearFilter=1006,o.LinearMipMapNearestFilter=1007,o.LinearMipMapLinearFilter=1008,o.UnsignedByteType=1009,o.ByteType=1010,o.ShortType=1011,o.UnsignedShortType=1012,o.IntType=1013,o.UnsignedIntType=1014,o.FloatType=1015,o.HalfFloatType=1025,o.UnsignedShort4444Type=1016,o.UnsignedShort5551Type=1017,o.UnsignedShort565Type=1018,o.AlphaFormat=1019,o.RGBFormat=1020,o.RGBAFormat=1021,o.LuminanceFormat=1022,o.LuminanceAlphaFormat=1023,o.RGBEFormat=o.RGBAFormat,o.RGB_S3TC_DXT1_Format=2001,o.RGBA_S3TC_DXT1_Format=2002,o.RGBA_S3TC_DXT3_Format=2003,o.RGBA_S3TC_DXT5_Format=2004,o.RGB_PVRTC_4BPPV1_Format=2100,o.RGB_PVRTC_2BPPV1_Format=2101,o.RGBA_PVRTC_4BPPV1_Format=2102,o.RGBA_PVRTC_2BPPV1_Format=2103,o.LoopOnce=2200,o.LoopRepeat=2201,o.LoopPingPong=2202,o.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},o.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},o.Color=function(t){return 3===arguments.length?this.fromArray(arguments):this.set(t)},o.Color.prototype={constructor:o.Color,r:1,g:1,b:1,set:function(t){return t instanceof o.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=o.Math.euclideanModulo(e,1),i=o.Math.clamp(i,0,1),n=o.Math.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;this.r=t(a,r,e+1/3),this.g=t(a,r,e),this.b=t(a,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],a=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(n[1])/360,u=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(s,u,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var h=i[1],c=h.length;if(3===c)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}if(t&&t.length>0){var h=o.ColorKeywords[t];void 0!==h?this.setHex(h):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,o=this.g,a=this.b,s=Math.max(r,o,a),u=Math.min(r,o,a),l=(u+s)/2;if(u===s)e=0,i=0;else{var h=s-u;switch(i=.5>=l?h/(s+u):h/(2-s-u),s){case r:e=(o-a)/h+(a>o?6:0);break;case o:e=(a-r)/h+2;break;case a:e=(r-o)/h+4}e/=6}return n.h=e,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},o.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},o.Quaternion=function(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1},o.Quaternion.prototype={constructor:o.Quaternion,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof o.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),a=Math.sin(t._x/2),s=Math.sin(t._y/2),u=Math.sin(t._z/2),l=t.order;return"XYZ"===l?(this._x=a*n*r+i*s*u,this._y=i*s*r-a*n*u,this._z=i*n*u+a*s*r,this._w=i*n*r-a*s*u):"YXZ"===l?(this._x=a*n*r+i*s*u,this._y=i*s*r-a*n*u,this._z=i*n*u-a*s*r,this._w=i*n*r+a*s*u):"ZXY"===l?(this._x=a*n*r-i*s*u,this._y=i*s*r+a*n*u,this._z=i*n*u+a*s*r,this._w=i*n*r-a*s*u):"ZYX"===l?(this._x=a*n*r-i*s*u,this._y=i*s*r+a*n*u,this._z=i*n*u-a*s*r,this._w=i*n*r+a*s*u):"YZX"===l?(this._x=a*n*r+i*s*u,this._y=i*s*r+a*n*u,this._z=i*n*u-a*s*r,this._w=i*n*r-a*s*u):"XZY"===l&&(this._x=a*n*r-i*s*u,this._y=i*s*r-a*n*u,this._z=i*n*u+a*s*r,this._w=i*n*r+a*s*u),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],o=i[8],a=i[1],s=i[5],u=i[9],l=i[2],h=i[6],c=i[10],p=n+s+c;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(h-u)*e,this._y=(o-l)*e,this._z=(a-r)*e):n>s&&n>c?(e=2*Math.sqrt(1+n-s-c),this._w=(h-u)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+l)/e):s>c?(e=2*Math.sqrt(1+s-n-c),this._w=(o-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(u+h)/e):(e=2*Math.sqrt(1+c-n-s),this._w=(a-r)/e,this._x=(o+l)/e,this._y=(u+h)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,i=1e-6;return function(n,r){return void 0===t&&(t=new o.Vector3),e=n.dot(r)+1,i>e?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=i*l+o*a+n*u-r*s,this._y=n*l+o*s+r*a-i*u,this._z=r*l+o*u+i*s-n*a,this._w=o*l-i*a-n*s-r*u,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w,a=o*t._w+i*t._x+n*t._y+r*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var s=Math.acos(a),u=Math.sqrt(1-a*a);if(Math.abs(u)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var l=Math.sin((1-e)*s)/u,h=Math.sin(e*s)/u;return this._w=o*l+this._w*h,this._x=i*l+this._x*h,this._y=n*l+this._y*h,this._z=r*l+this._z*h,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},o.Quaternion.slerp=function(t,e,i,n){return i.copy(t).slerp(e,n)},o.Vector2=function(t,e){this.x=t||0,this.y=e||0},o.Vector2.prototype={constructor:o.Vector2,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new o.Vector2,e=new o.Vector2),t.set(i,i),e.set(n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this}},o.Vector3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},o.Vector3.prototype={constructor:o.Vector3,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof o.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new o.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new o.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,i)),this}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14],this},applyProjection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*n-a*i,l=s*i+a*e-r*n,h=s*n+r*i-o*e,c=-r*e-o*i-a*n;return this.x=u*s+c*-r+l*-a-h*-o,this.y=l*s+c*-o+h*-r-u*-a,this.z=h*s+c*-a+u*-o-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new o.Vector3,e=new o.Vector3),t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t),this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this},projectOnVector:function(){var t,e;return function(i){return void 0===t&&(t=new o.Vector3),t.copy(i).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new o.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new o.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/(this.length()*t.length());return Math.acos(o.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},setEulerFromRotationMatrix:function(t,e){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),i=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),n=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){var i=4*t,n=e.elements;return this.x=n[i],this.y=n[i+1],this.z=n[i+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},o.Vector4=function(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1},o.Vector4.prototype={constructor:o.Vector4,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,o=.01,a=.1,s=t.elements,u=s[0],l=s[4],h=s[8],c=s[1],p=s[5],d=s[9],f=s[2],m=s[6],y=s[10];if(Math.abs(l-c)<o&&Math.abs(h-f)<o&&Math.abs(d-m)<o){if(Math.abs(l+c)<a&&Math.abs(h+f)<a&&Math.abs(d+m)<a&&Math.abs(u+p+y-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var v=(u+1)/2,g=(p+1)/2,b=(y+1)/2,x=(l+c)/4,_=(h+f)/4,w=(d+m)/4;return v>g&&v>b?o>v?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(v),n=x/i,r=_/i):g>b?o>g?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(g),i=x/n,r=w/n):o>b?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(b),i=_/r,n=w/r),this.set(i,n,r,e),this}var M=Math.sqrt((m-d)*(m-d)+(h-f)*(h-f)+(c-l)*(c-l));return Math.abs(M)<.001&&(M=1),this.x=(m-d)/M,this.y=(h-f)/M,this.z=(c-l)/M,
this.w=Math.acos((u+p+y-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new o.Vector4,e=new o.Vector4),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},o.Euler=function(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||o.Euler.DefaultOrder},o.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],o.Euler.DefaultOrder="XYZ",o.Euler.prototype={constructor:o.Euler,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=o.Math.clamp,r=t.elements,a=r[0],s=r[4],u=r[8],l=r[1],h=r[5],c=r[9],p=r[2],d=r[6],f=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(u,f),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-p,f),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-n(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,h))):"YZX"===e?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(u,f))):"XZY"===e?(this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,h),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,n){return void 0===t&&(t=new o.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n),this}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new o.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},o.Line3=function(t,e){this.start=void 0!==t?t:new o.Vector3,this.end=void 0!==e?e:new o.Vector3},o.Line3.prototype={constructor:o.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){var e=t||new o.Vector3;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new o.Vector3;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new o.Vector3;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new o.Vector3,e=new o.Vector3;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),a=e.dot(t),s=a/r;return n&&(s=o.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new o.Vector3;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},o.Box2=function(t,e){this.min=void 0!==t?t:new o.Vector2(1/0,1/0),this.max=void 0!==e?e:new o.Vector2(-(1/0),-(1/0))},o.Box2.prototype={constructor:o.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;i>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o.Vector2;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var e=t||new o.Vector2;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new o.Vector2;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y?!0:!1},getParameter:function(t,e){var i=e||new o.Vector2;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},clampPoint:function(t,e){var i=e||new o.Vector2;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o.Vector2;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},o.Box3=function(t,e){this.min=void 0!==t?t:new o.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new o.Vector3(-(1/0),-(1/0),-(1/0))},o.Box3.prototype={constructor:o.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;i>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o.Vector3;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(){var t=new o.Vector3;return function(e){var i=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var n=e.geometry;if(void 0!==n)if(n instanceof o.Geometry)for(var r=n.vertices,a=0,s=r.length;s>a;a++)t.copy(r[a]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t);else if(n instanceof o.BufferGeometry&&void 0!==n.attributes.position)for(var u=n.attributes.position.array,a=0,s=u.length;s>a;a+=3)t.set(u[a],u[a+1],u[a+2]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var e=t||new o.Vector3;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new o.Vector3;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t,e){var i=e||new o.Vector3;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},clampPoint:function(t,e){var i=e||new o.Vector3;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o.Vector3;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),getBoundingSphere:function(){var t=new o.Vector3;return function(e){var i=e||new o.Sphere;return i.center=this.center(),i.radius=.5*this.size(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},o.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},o.Matrix3.prototype={constructor:o.Matrix3,set:function(t,e,i,n,r,o,a,s,u){var l=this.elements;return l[0]=t,l[3]=e,l[6]=i,l[1]=n,l[4]=r,l[7]=o,l[2]=a,l[5]=s,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t;return function(e,i,n){void 0===t&&(t=new o.Vector3),void 0===i&&(i=0),void 0===n&&(n=e.length);for(var r=0,a=i;n>r;r+=3,a+=3)t.fromArray(e,a),t.applyMatrix3(this),t.toArray(e,a);return e}}(),applyToBuffer:function(){var t;return function(e,i,n){void 0===t&&(t=new o.Vector3),void 0===i&&(i=0),void 0===n&&(n=e.length/e.itemSize);for(var r=0,a=i;n>r;r++,a++)t.x=e.getX(a),t.y=e.getY(a),t.z=e.getZ(a),t.applyMatrix3(this),e.setXYZ(t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-i*r*l+i*a*s+n*r*u-n*o*s},getInverse:function(t,e){var i=t.elements,n=this.elements;n[0]=i[10]*i[5]-i[6]*i[9],n[1]=-i[10]*i[1]+i[2]*i[9],n[2]=i[6]*i[1]-i[2]*i[5],n[3]=-i[10]*i[4]+i[6]*i[8],n[4]=i[10]*i[0]-i[2]*i[8],n[5]=-i[6]*i[0]+i[2]*i[4],n[6]=i[9]*i[4]-i[5]*i[8],n[7]=-i[9]*i[0]+i[1]*i[8],n[8]=i[5]*i[0]-i[1]*i[4];var r=i[0]*n[0]+i[1]*n[3]+i[2]*n[6];if(0===r){var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/r),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}},o.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},o.Matrix4.prototype={constructor:o.Matrix4,set:function(t,e,i,n,r,o,a,s,u,l,h,c,p,d,f,m){var y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=n,y[1]=r,y[5]=o,y[9]=a,y[13]=s,y[2]=u,y[6]=l,y[10]=h,y[14]=c,y[3]=p,y[7]=d,y[11]=f,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o.Matrix4).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){var n=this.elements;return t.set(n[0],n[1],n[2]),e.set(n[4],n[5],n[6]),i.set(n[8],n[9],n[10]),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new o.Vector3);var i=this.elements,n=e.elements,r=1/t.set(n[0],n[1],n[2]).length(),a=1/t.set(n[4],n[5],n[6]).length(),s=1/t.set(n[8],n[9],n[10]).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,this}}(),makeRotationFromEuler:function(t){t instanceof o.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i),s=Math.sin(i),u=Math.cos(n),l=Math.sin(n),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var p=a*h,d=a*c,f=s*h,m=s*c;e[0]=u*h,e[4]=-u*c,e[8]=l,e[1]=d+f*l,e[5]=p-m*l,e[9]=-s*u,e[2]=m-p*l,e[6]=f+d*l,e[10]=a*u}else if("YXZ"===t.order){var y=u*h,v=u*c,g=l*h,b=l*c;e[0]=y+b*s,e[4]=g*s-v,e[8]=a*l,e[1]=a*c,e[5]=a*h,e[9]=-s,e[2]=v*s-g,e[6]=b+y*s,e[10]=a*u}else if("ZXY"===t.order){var y=u*h,v=u*c,g=l*h,b=l*c;e[0]=y-b*s,e[4]=-a*c,e[8]=g+v*s,e[1]=v+g*s,e[5]=a*h,e[9]=b-y*s,e[2]=-a*l,e[6]=s,e[10]=a*u}else if("ZYX"===t.order){var p=a*h,d=a*c,f=s*h,m=s*c;e[0]=u*h,e[4]=f*l-d,e[8]=p*l+m,e[1]=u*c,e[5]=m*l+p,e[9]=d*l-f,e[2]=-l,e[6]=s*u,e[10]=a*u}else if("YZX"===t.order){var x=a*u,_=a*l,w=s*u,M=s*l;e[0]=u*h,e[4]=M-x*c,e[8]=w*c+_,e[1]=c,e[5]=a*h,e[9]=-s*h,e[2]=-l*h,e[6]=_*c+w,e[10]=x-M*c}else if("XZY"===t.order){var x=a*u,_=a*l,w=s*u,M=s*l;e[0]=u*h,e[4]=-c,e[8]=l*h,e[1]=x*c+M,e[5]=a*h,e[9]=_*c-w,e[2]=w*c-_,e[6]=s*h,e[10]=M*c+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,o=t.w,a=i+i,s=n+n,u=r+r,l=i*a,h=i*s,c=i*u,p=n*s,d=n*u,f=r*u,m=o*a,y=o*s,v=o*u;return e[0]=1-(p+f),e[4]=h-v,e[8]=c+y,e[1]=h+v,e[5]=1-(l+f),e[9]=d-m,e[2]=c-y,e[6]=d+m,e[10]=1-(l+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,i;return function(n,r,a){void 0===t&&(t=new o.Vector3),void 0===e&&(e=new o.Vector3),void 0===i&&(i=new o.Vector3);var s=this.elements;return i.subVectors(n,r).normalize(),0===i.lengthSq()&&(i.z=1),t.crossVectors(a,i).normalize(),0===t.lengthSq()&&(i.x+=1e-4,t.crossVectors(a,i).normalize()),e.crossVectors(i,t),s[0]=t.x,s[4]=e.x,s[8]=i.x,s[1]=t.y,s[5]=e.y,s[9]=i.y,s[2]=t.z,s[6]=e.z,s[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],a=i[4],s=i[8],u=i[12],l=i[1],h=i[5],c=i[9],p=i[13],d=i[2],f=i[6],m=i[10],y=i[14],v=i[3],g=i[7],b=i[11],x=i[15],_=n[0],w=n[4],M=n[8],S=n[12],C=n[1],E=n[5],T=n[9],P=n[13],A=n[2],k=n[6],O=n[10],N=n[14],D=n[3],L=n[7],R=n[11],I=n[15];return r[0]=o*_+a*C+s*A+u*D,r[4]=o*w+a*E+s*k+u*L,r[8]=o*M+a*T+s*O+u*R,r[12]=o*S+a*P+s*N+u*I,r[1]=l*_+h*C+c*A+p*D,r[5]=l*w+h*E+c*k+p*L,r[9]=l*M+h*T+c*O+p*R,r[13]=l*S+h*P+c*N+p*I,r[2]=d*_+f*C+m*A+y*D,r[6]=d*w+f*E+m*k+y*L,r[10]=d*M+f*T+m*O+y*R,r[14]=d*S+f*P+m*N+y*I,r[3]=v*_+g*C+b*A+x*D,r[7]=v*w+g*E+b*k+x*L,r[11]=v*M+g*T+b*O+x*R,r[15]=v*S+g*P+b*N+x*I,this},multiplyToArray:function(t,e,i){var n=this.elements;return this.multiplyMatrices(t,e),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t;return function(e,i,n){void 0===t&&(t=new o.Vector3),void 0===i&&(i=0),void 0===n&&(n=e.length);for(var r=0,a=i;n>r;r+=3,a+=3)t.fromArray(e,a),t.applyMatrix4(this),t.toArray(e,a);return e}}(),applyToBuffer:function(){var t;return function(e,i,n){void 0===t&&(t=new o.Vector3),void 0===i&&(i=0),void 0===n&&(n=e.length/e.itemSize);for(var r=0,a=i;n>r;r++,a++)t.x=e.getX(a),t.y=e.getY(a),t.z=e.getZ(a),t.applyMatrix4(this),e.setXYZ(t.x,t.y,t.z);return e}}(),rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],h=t[6],c=t[10],p=t[14],d=t[3],f=t[7],m=t[11],y=t[15];return d*(+r*s*h-n*u*h-r*a*c+i*u*c+n*a*p-i*s*p)+f*(+e*s*p-e*u*c+r*o*c-n*o*p+n*u*l-r*s*l)+m*(+e*u*h-e*a*p-r*o*h+i*o*p+r*a*l-i*u*l)+y*(-n*a*l-e*s*h+e*a*c+n*o*h-i*o*c+i*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t},getPosition:function(){var t;return function(){void 0===t&&(t=new o.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],o=n[4],a=n[8],s=n[12],u=n[1],l=n[5],h=n[9],c=n[13],p=n[2],d=n[6],f=n[10],m=n[14],y=n[3],v=n[7],g=n[11],b=n[15];i[0]=h*m*v-c*f*v+c*d*g-l*m*g-h*d*b+l*f*b,i[4]=s*f*v-a*m*v-s*d*g+o*m*g+a*d*b-o*f*b,i[8]=a*c*v-s*h*v+s*l*g-o*c*g-a*l*b+o*h*b,i[12]=s*h*d-a*c*d-s*l*f+o*c*f+a*l*m-o*h*m,i[1]=c*f*y-h*m*y-c*p*g+u*m*g+h*p*b-u*f*b,i[5]=a*m*y-s*f*y+s*p*g-r*m*g-a*p*b+r*f*b,i[9]=s*h*y-a*c*y-s*u*g+r*c*g+a*u*b-r*h*b,i[13]=a*c*p-s*h*p+s*u*f-r*c*f-a*u*m+r*h*m,i[2]=l*m*y-c*d*y+c*p*v-u*m*v-l*p*b+u*d*b,i[6]=s*d*y-o*m*y-s*p*v+r*m*v+o*p*b-r*d*b,i[10]=o*c*y-s*l*y+s*u*v-r*c*v-o*u*b+r*l*b,i[14]=s*l*p-o*c*p-s*u*d+r*c*d+o*u*m-r*l*m,i[3]=h*d*y-l*f*y-h*p*v+u*f*v+l*p*g-u*d*g,i[7]=o*f*y-a*d*y+a*p*v-r*f*v-o*p*g+r*d*g,i[11]=a*l*y-o*h*y-a*u*v+r*h*v+o*u*g-r*l*g,i[15]=o*h*p-a*l*p+a*u*d-r*h*d-o*u*f+r*l*f;var x=r*i[0]+u*i[4]+p*i[8]+y*i[12];if(0===x){var _="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(_);return console.warn(_),this.identity(),this}return this.multiplyScalar(1/x),this},translate:function(t){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,a=t.y,s=t.z,u=r*o,l=r*a;return this.set(u*o+i,u*a-n*s,u*s+n*a,0,u*a+n*s,l*a+i,l*s-n*o,0,u*s-n*a,l*s+n*o,r*s*s+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t,e;return function(i,n,r){void 0===t&&(t=new o.Vector3),void 0===e&&(e=new o.Matrix4);var a=this.elements,s=t.set(a[0],a[1],a[2]).length(),u=t.set(a[4],a[5],a[6]).length(),l=t.set(a[8],a[9],a[10]).length(),h=this.determinant();0>h&&(s=-s),i.x=a[12],i.y=a[13],i.z=a[14],e.elements.set(this.elements);var c=1/s,p=1/u,d=1/l;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=p,e.elements[5]*=p,e.elements[6]*=p,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),r.x=s,r.y=u,r.z=l,this}}(),makeFrustum:function(t,e,i,n,r,o){var a=this.elements,s=2*r/(e-t),u=2*r/(n-i),l=(e+t)/(e-t),h=(n+i)/(n-i),c=-(o+r)/(o-r),p=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,i,n){var r=i*Math.tan(o.Math.degToRad(.5*t)),a=-r,s=a*e,u=r*e;return this.makeFrustum(s,u,a,r,i,n)},makeOrthographic:function(t,e,i,n,r,o){var a=this.elements,s=e-t,u=i-n,l=o-r,h=(e+t)/s,c=(i+n)/u,p=(o+r)/l;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2/u,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2/l,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;16>n;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}},o.Ray=function(t,e){this.origin=void 0!==t?t:new o.Vector3,this.direction=void 0!==e?e:new o.Vector3},o.Ray.prototype={constructor:o.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var i=e||new o.Vector3;return i.copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new o.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new o.Vector3;i.subVectors(t,this.origin);var n=i.dot(this.direction);return 0>n?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new o.Vector3;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return 0>i?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new o.Vector3,e=new o.Vector3,i=new o.Vector3;return function(n,r,o,a){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var s,u,l,h,c=.5*n.distanceTo(r),p=-this.direction.dot(e),d=i.dot(this.direction),f=-i.dot(e),m=i.lengthSq(),y=Math.abs(1-p*p);if(y>0)if(s=p*f-d,u=p*d-f,h=c*y,s>=0)if(u>=-h)if(h>=u){var v=1/y;s*=v,u*=v,l=s*(s+p*u+2*d)+u*(p*s+u+2*f)+m}else u=c,s=Math.max(0,-(p*u+d)),l=-s*s+u*(u+2*f)+m;else u=-c,s=Math.max(0,-(p*u+d)),l=-s*s+u*(u+2*f)+m;else-h>=u?(s=Math.max(0,-(-p*c+d)),u=s>0?-c:Math.min(Math.max(-c,-f),c),l=-s*s+u*(u+2*f)+m):h>=u?(s=0,u=Math.min(Math.max(-c,-f),c),l=u*(u+2*f)+m):(s=Math.max(0,-(p*c+d)),u=s>0?c:Math.min(Math.max(-c,-f),c),l=-s*s+u*(u+2*f)+m);else u=p>0?-c:c,s=Math.max(0,-(p*u+d)),l=-s*s+u*(u+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(u).add(t),l}}(),isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},intersectSphere:function(){var t=new o.Vector3;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,o=e.radius*e.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=n-a,u=n+a;return 0>s&&0>u?null:0>s?this.at(u,i):this.at(s,i)}}(),isIntersectionPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var i=t.normal.dot(this.direction);return 0>i*e?!0:!1},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},isIntersectionBox:function(){var t=new o.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(t,e){var i,n,r,o,a,s,u=1/this.direction.x,l=1/this.direction.y,h=1/this.direction.z,c=this.origin;return u>=0?(i=(t.min.x-c.x)*u,n=(t.max.x-c.x)*u):(i=(t.max.x-c.x)*u,n=(t.min.x-c.x)*u),l>=0?(r=(t.min.y-c.y)*l,o=(t.max.y-c.y)*l):(r=(t.max.y-c.y)*l,o=(t.min.y-c.y)*l),i>o||r>n?null:((r>i||i!==i)&&(i=r),(n>o||n!==n)&&(n=o),h>=0?(a=(t.min.z-c.z)*h,s=(t.max.z-c.z)*h):(a=(t.max.z-c.z)*h,s=(t.min.z-c.z)*h),i>s||a>n?null:((a>i||i!==i)&&(i=a),(n>s||n!==n)&&(n=s),0>n?null:this.at(i>=0?i:n,e)))},intersectTriangle:function(){var t=new o.Vector3,e=new o.Vector3,i=new o.Vector3,n=new o.Vector3;return function(r,o,a,s,u){e.subVectors(o,r),i.subVectors(a,r),n.crossVectors(e,i);var l,h=this.direction.dot(n);if(h>0){if(s)return null;l=1}else{if(!(0>h))return null;l=-1,h=-h}t.subVectors(this.origin,r);var c=l*this.direction.dot(i.crossVectors(t,i));if(0>c)return null;var p=l*this.direction.dot(e.cross(t));if(0>p)return null;if(c+p>h)return null;var d=-l*t.dot(n);return 0>d?null:this.at(d/h,u)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},o.Sphere=function(t,e){this.center=void 0!==t?t:new o.Vector3,this.radius=void 0!==e?e:0},o.Sphere.prototype={constructor:o.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new o.Box3;return function(e,i){var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).center(n);for(var r=0,o=0,a=e.length;a>o;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),
this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new o.Vector3;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new o.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},o.Frustum=function(t,e,i,n,r,a){this.planes=[void 0!==t?t:new o.Plane,void 0!==e?e:new o.Plane,void 0!==i?i:new o.Plane,void 0!==n?n:new o.Plane,void 0!==r?r:new o.Plane,void 0!==a?a:new o.Plane]},o.Frustum.prototype={constructor:o.Frustum,set:function(t,e,i,n,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],u=i[5],l=i[6],h=i[7],c=i[8],p=i[9],d=i[10],f=i[11],m=i[12],y=i[13],v=i[14],g=i[15];return e[0].setComponents(a-n,h-s,f-c,g-m).normalize(),e[1].setComponents(a+n,h+s,f+c,g+m).normalize(),e[2].setComponents(a+r,h+u,f+p,g+y).normalize(),e[3].setComponents(a-r,h-u,f-p,g-y).normalize(),e[4].setComponents(a-o,h-l,f-d,g-v).normalize(),e[5].setComponents(a+o,h+l,f+d,g+v).normalize(),this},intersectsObject:function(){var t=new o.Sphere;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere),t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;6>r;r++){var o=e[r].distanceToPoint(i);if(n>o)return!1}return!0},intersectsBox:function(){var t=new o.Vector3,e=new o.Vector3;return function(i){for(var n=this.planes,r=0;6>r;r++){var o=n[r];t.x=o.normal.x>0?i.min.x:i.max.x,e.x=o.normal.x>0?i.max.x:i.min.x,t.y=o.normal.y>0?i.min.y:i.max.y,e.y=o.normal.y>0?i.max.y:i.min.y,t.z=o.normal.z>0?i.min.z:i.max.z,e.z=o.normal.z>0?i.max.z:i.min.z;var a=o.distanceToPoint(t),s=o.distanceToPoint(e);if(0>a&&0>s)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}},o.Plane=function(t,e){this.normal=void 0!==t?t:new o.Vector3(1,0,0),this.constant=void 0!==e?e:0},o.Plane.prototype={constructor:o.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new o.Vector3,e=new o.Vector3;return function(i,n,r){var o=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t),n=e||new o.Vector3;return n.copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return 0>e&&i>0||0>i&&e>0},intersectLine:function(){var t=new o.Vector3;return function(e,i){var n=i||new o.Vector3,r=e.delta(t),a=this.normal.dot(r);if(0!==a){var s=-(e.start.dot(this.normal)+this.constant)/a;if(!(0>s||s>1))return n.copy(r).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),coplanarPoint:function(t){var e=t||new o.Vector3;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new o.Vector3,e=new o.Vector3,i=new o.Matrix3;return function(n,r){var o=r||i.getNormalMatrix(n),a=t.copy(this.normal).applyMatrix3(o),s=this.coplanarPoint(e);return s.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(a,s),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},o.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;36>r;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19===r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},smoothstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},o.Spline=function(t){function e(t,e,i,n,r,o,a){var s=.5*(i-t),u=.5*(n-e);return(2*(e-i)+s+u)*a+(-3*(e-i)-2*s-u)*o+s*r+e}this.points=t;var i,n,r,a,s,u,l,h,c,p=[],d={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return i=(this.points.length-1)*t,n=Math.floor(i),r=i-n,p[0]=0===n?n:n-1,p[1]=n,p[2]=n>this.points.length-2?this.points.length-1:n+1,p[3]=n>this.points.length-3?this.points.length-1:n+2,u=this.points[p[0]],l=this.points[p[1]],h=this.points[p[2]],c=this.points[p[3]],a=r*r,s=r*a,d.x=e(u.x,l.x,h.x,c.x,r,a,s),d.y=e(u.y,l.y,h.y,c.y,r,a,s),d.z=e(u.z,l.z,h.z,c.z,r,a,s),d},this.getControlPointsArray=function(){var t,e,i=this.points.length,n=[];for(t=0;i>t;t++)e=this.points[t],n[t]=[e.x,e.y,e.z];return n},this.getLength=function(t){var e,i,n,r,a=0,s=0,u=0,l=new o.Vector3,h=new o.Vector3,c=[],p=0;for(c[0]=0,t||(t=100),n=this.points.length*t,l.copy(this.points[0]),e=1;n>e;e++)i=e/n,r=this.getPoint(i),h.copy(r),p+=h.distanceTo(l),l.copy(r),a=(this.points.length-1)*i,s=Math.floor(a),s!==u&&(c[s]=p,u=s);return c[c.length]=p,{chunks:c,total:p}},this.reparametrizeByArcLength=function(t){var e,i,n,r,a,s,u,l,h=[],c=new o.Vector3,p=this.getLength();for(h.push(c.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(s=p.chunks[e]-p.chunks[e-1],u=Math.ceil(t*s/p.total),r=(e-1)/(this.points.length-1),a=e/(this.points.length-1),i=1;u-1>i;i++)n=r+i*(1/u)*(a-r),l=this.getPoint(n),h.push(c.copy(l).clone());h.push(c.copy(this.points[e]).clone())}this.points=h}},o.Triangle=function(t,e,i){this.a=void 0!==t?t:new o.Vector3,this.b=void 0!==e?e:new o.Vector3,this.c=void 0!==i?i:new o.Vector3},o.Triangle.normal=function(){var t=new o.Vector3;return function(e,i,n,r){var a=r||new o.Vector3;a.subVectors(n,i),t.subVectors(e,i),a.cross(t);var s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}}(),o.Triangle.barycoordFromPoint=function(){var t=new o.Vector3,e=new o.Vector3,i=new o.Vector3;return function(n,r,a,s,u){t.subVectors(s,r),e.subVectors(a,r),i.subVectors(n,r);var l=t.dot(t),h=t.dot(e),c=t.dot(i),p=e.dot(e),d=e.dot(i),f=l*p-h*h,m=u||new o.Vector3;if(0===f)return m.set(-2,-1,-1);var y=1/f,v=(p*c-h*d)*y,g=(l*d-h*c)*y;return m.set(1-v-g,g,v)}}(),o.Triangle.containsPoint=function(){var t=new o.Vector3;return function(e,i,n,r){var a=o.Triangle.barycoordFromPoint(e,i,n,r,t);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),o.Triangle.prototype={constructor:o.Triangle,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new o.Vector3,e=new o.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new o.Vector3;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return o.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new o.Plane;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return o.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return o.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},o.Channels=function(){this.mask=1},o.Channels.prototype={constructor:o.Channels,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)}},o.Clock=function(t){this.autoStart=void 0!==t?t:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},o.Clock.prototype={constructor:o.Clock,start:function(){this.startTime=self.performance.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=self.performance.now();t=.001*(e-this.oldTime),this.oldTime=e,this.elapsedTime+=t}return t}},o.EventDispatcher=function(){},o.EventDispatcher.prototype={constructor:o.EventDispatcher,apply:function(t){t.addEventListener=o.EventDispatcher.prototype.addEventListener,t.hasEventListener=o.EventDispatcher.prototype.hasEventListener,t.removeEventListener=o.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=o.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)?!0:!1},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;for(var n=[],r=i.length,o=0;r>o;o++)n[o]=i[o];for(var o=0;r>o;o++)n[o].call(this,t)}}}},function(t){function e(t,e){return t.distance-e.distance}function i(t,e,n,r){if(t.visible!==!1&&(t.raycast(e,n),r===!0))for(var o=t.children,a=0,s=o.length;s>a;a++)i(o[a],e,n,!0)}t.Raycaster=function(e,i,n,r){this.ray=new t.Ray(e,i),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},t.Raycaster.prototype={constructor:t.Raycaster,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(e,i){i instanceof t.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize()):i instanceof t.OrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,n){var r=[];return i(t,this,r,n),r.sort(e),r},intersectObjects:function(t,n){var r=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var o=0,a=t.length;a>o;o++)i(t[o],this,r,n);return r.sort(e),r}}}(o),o.Object3D=function(){function t(){r.setFromEuler(n,!1)}function e(){n.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:o.Object3DIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.channels=new o.Channels,this.children=[],this.up=o.Object3D.DefaultUp.clone();var i=new o.Vector3,n=new o.Euler,r=new o.Quaternion,a=new o.Vector3(1,1,1);n.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new o.Matrix4},normalMatrix:{value:new o.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new o.Matrix4,this.matrixWorld=new o.Matrix4,this.matrixAutoUpdate=o.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},o.Object3D.DefaultUp=new o.Vector3(0,1,0),o.Object3D.DefaultMatrixAutoUpdate=!0,o.Object3D.prototype={constructor:o.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set eulerOrder(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set renderDepth(t){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new o.Quaternion;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new o.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new o.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new o.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new o.Vector3;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},translateX:function(){var t=new o.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new o.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new o.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new o.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t instanceof o.Object3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.children.indexOf(t);-1!==i&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;n>i;i++){var r=this.children[i],o=r.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){var e=t||new o.Vector3;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new o.Vector3,e=new o.Vector3;return function(i){var n=i||new o.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new o.Quaternion;return function(e){var i=e||new o.Euler;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new o.Vector3,e=new o.Quaternion;return function(i){var n=i||new o.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new o.Quaternion;return function(e){var i=e||new o.Vector3;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;n>i;i++)e[i].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,i=0,n=e.length;n>i;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||t===!0)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,i=this.children.length;i>e;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t,n={};i&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(t).object)}if(i){var a=e(t.geometries),s=e(t.materials),u=e(t.textures),l=e(t.images);a.length>0&&(n.geometries=a),s.length>0&&(n.materials=s),u.length>0&&(n.textures=u),l.length>0&&(n.images=l)}return n.object=r,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.rotationAutoUpdate=t.rotationAutoUpdate,this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}},o.EventDispatcher.prototype.apply(o.Object3D.prototype),o.Object3DIdCount=0,o.Face3=function(t,e,i,n,r,a){this.a=t,this.b=e,this.c=i,this.normal=n instanceof o.Vector3?n:new o.Vector3,this.vertexNormals=Array.isArray(n)?n:[],this.color=r instanceof o.Color?r:new o.Color,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0},o.Face3.prototype={constructor:o.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;i>e;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,i=t.vertexColors.length;i>e;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},o.Face4=function(t,e,i,n,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new o.Face3(t,e,i,r,a,s)},o.BufferAttribute=function(t,e){this.uuid=o.Math.generateUUID(),this.array=t,this.itemSize=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},o.BufferAttribute.prototype={constructor:o.BufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;r>n;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;r>n;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new o.Color),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;r>n;n++){var o=t[n];e[i++]=o.a,e[i++]=o.b,e[i++]=o.c}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;r>n;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),a=new o.Vector2),e[i++]=a.x,e[i++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;r>n;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new o.Vector3),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;r>n;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new o.Vector4),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},clone:function(){return(new this.constructor).copy(this)}},o.Int8Attribute=function(t,e){return new o.BufferAttribute(new Int8Array(t),e)},o.Uint8Attribute=function(t,e){return new o.BufferAttribute(new Uint8Array(t),e)},o.Uint8ClampedAttribute=function(t,e){return new o.BufferAttribute(new Uint8ClampedArray(t),e)},o.Int16Attribute=function(t,e){return new o.BufferAttribute(new Int16Array(t),e)},o.Uint16Attribute=function(t,e){return new o.BufferAttribute(new Uint16Array(t),e)},o.Int32Attribute=function(t,e){return new o.BufferAttribute(new Int32Array(t),e)},o.Uint32Attribute=function(t,e){return new o.BufferAttribute(new Uint32Array(t),e)},o.Float32Attribute=function(t,e){return new o.BufferAttribute(new Float32Array(t),e)},o.Float64Attribute=function(t,e){return new o.BufferAttribute(new Float64Array(t),e)},o.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new o.BufferAttribute(t,e).setDynamic(!0)},o.InstancedBufferAttribute=function(t,e,i){o.BufferAttribute.call(this,t,e),this.meshPerAttribute=i||1},o.InstancedBufferAttribute.prototype=Object.create(o.BufferAttribute.prototype),o.InstancedBufferAttribute.prototype.constructor=o.InstancedBufferAttribute,o.InstancedBufferAttribute.prototype.copy=function(t){return o.BufferAttribute.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},o.InterleavedBuffer=function(t,e){this.uuid=o.Math.generateUUID(),this.array=t,this.stride=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},o.InterleavedBuffer.prototype={constructor:o.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){this.array=new t.array.constructor(t.array),this.stride=t.stride,this.dynamic=t.dynamic},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;r>n;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)}},o.InstancedInterleavedBuffer=function(t,e,i){o.InterleavedBuffer.call(this,t,e),this.meshPerAttribute=i||1},o.InstancedInterleavedBuffer.prototype=Object.create(o.InterleavedBuffer.prototype),o.InstancedInterleavedBuffer.prototype.constructor=o.InstancedInterleavedBuffer,o.InstancedInterleavedBuffer.prototype.copy=function(t){return o.InterleavedBuffer.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},o.InterleavedBufferAttribute=function(t,e,i){this.uuid=o.Math.generateUUID(),this.data=t,this.itemSize=e,this.offset=i},o.InterleavedBufferAttribute.prototype={constructor:o.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}},o.Geometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},o.Geometry.prototype={constructor:o.Geometry,applyMatrix:function(t){for(var e=(new o.Matrix3).getNormalMatrix(t),i=0,n=this.vertices.length;n>i;i++){var r=this.vertices[i];r.applyMatrix4(t)}for(var i=0,n=this.faces.length;n>i;i++){var a=this.faces[i];a.normal.applyMatrix3(e).normalize();for(var s=0,u=a.vertexNormals.length;u>s;s++)a.vertexNormals[s].applyMatrix3(e).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},rotateX:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new o.Matrix4),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new o.Matrix4),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new o.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n){var r=void 0!==s?[c[t].clone(),c[e].clone(),c[n].clone()]:[],a=void 0!==u?[i.colors[t].clone(),i.colors[e].clone(),i.colors[n].clone()]:[],f=new o.Face3(t,e,n,r,a);i.faces.push(f),void 0!==l&&i.faceVertexUvs[0].push([p[t].clone(),p[e].clone(),p[n].clone()]),void 0!==h&&i.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[n].clone()])}var i=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,a=r.position.array,s=void 0!==r.normal?r.normal.array:void 0,u=void 0!==r.color?r.color.array:void 0,l=void 0!==r.uv?r.uv.array:void 0,h=void 0!==r.uv2?r.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var c=[],p=[],d=[],f=0,m=0,y=0;f<a.length;f+=3,m+=2,y+=4)i.vertices.push(new o.Vector3(a[f],a[f+1],a[f+2])),void 0!==s&&c.push(new o.Vector3(s[f],s[f+1],s[f+2])),void 0!==u&&i.colors.push(new o.Color(u[f],u[f+1],u[f+2])),void 0!==l&&p.push(new o.Vector2(l[m],l[m+1])),void 0!==h&&d.push(new o.Vector2(h[m],h[m+1]));if(void 0!==n){var v=t.groups;if(v.length>0)for(var f=0;f<v.length;f++)for(var g=v[f],b=g.start,x=g.count,m=b,_=b+x;_>m;m+=3)e(n[m],n[m+1],n[m+2]);else for(var f=0;f<n.length;f+=3)e(n[f],n[f+1],n[f+2]);
}else for(var f=0;f<a.length/3;f+=3)e(f,f+1,f+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new o.Matrix4;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new o.Vector3,e=new o.Vector3,i=0,n=this.faces.length;n>i;i++){var r=this.faces[i],a=this.vertices[r.a],s=this.vertices[r.b],u=this.vertices[r.c];t.subVectors(u,s),e.subVectors(a,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,i,n,r,a,s;for(s=new Array(this.vertices.length),e=0,i=this.vertices.length;i>e;e++)s[e]=new o.Vector3;if(t){var u,l,h,c=new o.Vector3,p=new o.Vector3;for(n=0,r=this.faces.length;r>n;n++)a=this.faces[n],u=this.vertices[a.a],l=this.vertices[a.b],h=this.vertices[a.c],c.subVectors(h,l),p.subVectors(u,l),c.cross(p),s[a.a].add(c),s[a.b].add(c),s[a.c].add(c)}else for(n=0,r=this.faces.length;r>n;n++)a=this.faces[n],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(e=0,i=this.vertices.length;i>e;e++)s[e].normalize();for(n=0,r=this.faces.length;r>n;n++){a=this.faces[n];var d=a.vertexNormals;3===d.length?(d[0].copy(s[a.a]),d[1].copy(s[a.b]),d[2].copy(s[a.c])):(d[0]=s[a.a].clone(),d[1]=s[a.b].clone(),d[2]=s[a.c].clone())}},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;n>i;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;e>t;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new o.Geometry;for(a.faces=this.faces,t=0,e=this.morphTargets.length;e>t;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,u,l=this.morphNormals[t].faceNormals,h=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;n>i;i++)s=new o.Vector3,u={a:new o.Vector3,b:new o.Vector3,c:new o.Vector3},l.push(s),h.push(u)}var c=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,u;for(i=0,n=this.faces.length;n>i;i++)r=this.faces[i],s=c.faceNormals[i],u=c.vertexNormals[i],s.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;n>i;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,n=e.length;n>i;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new o.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t instanceof o.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var n,r=this.vertices.length,a=this.vertices,s=t.vertices,u=this.faces,l=t.faces,h=this.faceVertexUvs[0],c=t.faceVertexUvs[0];void 0===i&&(i=0),void 0!==e&&(n=(new o.Matrix3).getNormalMatrix(e));for(var p=0,d=s.length;d>p;p++){var f=s[p],m=f.clone();void 0!==e&&m.applyMatrix4(e),a.push(m)}for(p=0,d=l.length;d>p;p++){var y,v,g,b=l[p],x=b.vertexNormals,_=b.vertexColors;y=new o.Face3(b.a+r,b.b+r,b.c+r),y.normal.copy(b.normal),void 0!==n&&y.normal.applyMatrix3(n).normalize();for(var w=0,M=x.length;M>w;w++)v=x[w].clone(),void 0!==n&&v.applyMatrix3(n).normalize(),y.vertexNormals.push(v);y.color.copy(b.color);for(var w=0,M=_.length;M>w;w++)g=_[w],y.vertexColors.push(g.clone());y.materialIndex=b.materialIndex+i,u.push(y)}for(p=0,d=c.length;d>p;p++){var S=c[p],C=[];if(void 0!==S){for(var w=0,M=S.length;M>w;w++)C.push(S[w].clone());h.push(C)}}},mergeMesh:function(t){return t instanceof o.Mesh==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,i,n,r,o,a,s,u={},l=[],h=[],c=4,p=Math.pow(10,c);for(i=0,n=this.vertices.length;n>i;i++)t=this.vertices[i],e=Math.round(t.x*p)+"_"+Math.round(t.y*p)+"_"+Math.round(t.z*p),void 0===u[e]?(u[e]=i,l.push(this.vertices[i]),h[i]=l.length-1):h[i]=h[u[e]];var d=[];for(i=0,n=this.faces.length;n>i;i++){r=this.faces[i],r.a=h[r.a],r.b=h[r.b],r.c=h[r.c],o=[r.a,r.b,r.c];for(var f=-1,m=0;3>m;m++)if(o[m]===o[(m+1)%3]){f=m,d.push(i);break}}for(i=d.length-1;i>=0;i--){var y=d[i];for(this.faces.splice(y,1),a=0,s=this.faceVertexUvs.length;s>a;a++)this.faceVertexUvs[a].splice(y,1)}var v=this.vertices.length-l.length;return this.vertices=l,v},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,i=e.length,n=0;i>n;n++)e[n]._id=n;e.sort(t);var r,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===i&&(r=[]),s&&s.length===i&&(o=[]);for(var n=0;i>n;n++){var u=e[n]._id;r&&r.push(a[u]),o&&o.push(s[u])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==p[e]?p[e]:(p[e]=c.length/3,c.push(t.x,t.y,t.z),p[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==f[e]?f[e]:(f[e]=d.length,d.push(t.getHex()),f[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==y[e]?y[e]:(y[e]=m.length/2,m.push(t.x,t.y),y[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z)}for(var h=[],c=[],p={},d=[],f={},m=[],y={},u=0;u<this.faces.length;u++){var v=this.faces[u],g=!1,b=!1,x=void 0!==this.faceVertexUvs[0][u],_=v.normal.length()>0,w=v.vertexNormals.length>0,M=1!==v.color.r||1!==v.color.g||1!==v.color.b,S=v.vertexColors.length>0,C=0;if(C=t(C,0,0),C=t(C,1,g),C=t(C,2,b),C=t(C,3,x),C=t(C,4,_),C=t(C,5,w),C=t(C,6,M),C=t(C,7,S),h.push(C),h.push(v.a,v.b,v.c),x){var E=this.faceVertexUvs[0][u];h.push(n(E[0]),n(E[1]),n(E[2]))}if(_&&h.push(e(v.normal)),w){var T=v.vertexNormals;h.push(e(T[0]),e(T[1]),e(T[2]))}if(M&&h.push(i(v.color)),S){var P=v.vertexColors;h.push(i(P[0]),i(P[1]),i(P[2]))}}return r.data={},r.data.vertices=s,r.data.normals=c,d.length>0&&(r.data.colors=d),m.length>0&&(r.data.uvs=[m]),r.data.faces=h,r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var e=t.vertices,i=0,n=e.length;n>i;i++)this.vertices.push(e[i].clone());for(var r=t.faces,i=0,n=r.length;n>i;i++)this.faces.push(r[i].clone());for(var i=0,n=t.faceVertexUvs.length;n>i;i++){var o=t.faceVertexUvs[i];void 0===this.faceVertexUvs[i]&&(this.faceVertexUvs[i]=[]);for(var a=0,s=o.length;s>a;a++){for(var u=o[a],l=[],h=0,c=u.length;c>h;h++){var p=u[h];l.push(p.clone())}this.faceVertexUvs[i].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.Geometry.prototype),o.GeometryIdCount=0,o.DirectGeometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},o.DirectGeometry.prototype={constructor:o.DirectGeometry,computeBoundingBox:o.Geometry.prototype.computeBoundingBox,computeBoundingSphere:o.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(t){for(var e,i,n=[],r=t.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:i})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e=t.faces,i=t.vertices,n=t.faceVertexUvs,r=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,s=t.morphTargets,u=s.length;if(u>0){for(var l=[],h=0;u>h;h++)l[h]=[];this.morphTargets.position=l}var c=t.morphNormals,p=c.length;if(p>0){for(var d=[],h=0;p>h;h++)d[h]=[];this.morphTargets.normal=d}for(var f=t.skinIndices,m=t.skinWeights,y=f.length===i.length,v=m.length===i.length,h=0;h<e.length;h++){var g=e[h];this.vertices.push(i[g.a],i[g.b],i[g.c]);var b=g.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var x=g.normal;this.normals.push(x,x,x)}var _=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=g.color;this.colors.push(w,w,w)}if(r===!0){var M=n[0][h];void 0!==M?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new o.Vector2,new o.Vector2,new o.Vector2))}if(a===!0){var M=n[1][h];void 0!==M?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new o.Vector2,new o.Vector2,new o.Vector2))}for(var S=0;u>S;S++){var C=s[S].vertices;l[S].push(C[g.a],C[g.b],C[g.c])}for(var S=0;p>S;S++){var E=c[S].vertexNormals[h];d[S].push(E.a,E.b,E.c)}y&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),v&&this.skinWeights.push(m[g.a],m[g.b],m[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.DirectGeometry.prototype),o.BufferGeometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},o.BufferGeometry.prototype={constructor:o.BufferGeometry,addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return e instanceof o.BufferAttribute==!1&&e instanceof o.InterleavedBufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new o.BufferAttribute(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):void(this.attributes[t]=e)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){delete this.attributes[t]},get drawcalls(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups},get offsets(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var n=(new o.Matrix3).getNormalMatrix(t);n.applyToVector3Array(i.array),i.needsUpdate=!0}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new o.Matrix4),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new o.Matrix4),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new o.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t instanceof o.Points||t instanceof o.Line){var i=new o.Float32Attribute(3*e.vertices.length,3),n=new o.Float32Attribute(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new o.Float32Attribute(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t instanceof o.Mesh&&e instanceof o.Geometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t instanceof o.Mesh){var i=e.__directGeometry;if(void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}if(e.verticesNeedUpdate===!0){var n=this.attributes.position;void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){var n=this.attributes.normal;void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){var n=this.attributes.color;void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var n=this.attributes.uv;void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var n=this.attributes.lineDistance;void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new o.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new o.BufferAttribute(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new o.BufferAttribute(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new o.BufferAttribute(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new o.BufferAttribute(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new o.BufferAttribute(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var s=t.vertices.length>65535?Uint32Array:Uint16Array,u=new s(3*t.indices.length);this.setIndex(new o.BufferAttribute(u,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var l in t.morphTargets){for(var h=[],c=t.morphTargets[l],p=0,d=c.length;d>p;p++){var f=c[p],m=new o.Float32Attribute(3*f.length,3);h.push(m.copyVector3sArray(f))}this.morphAttributes[l]=h}if(t.skinIndices.length>0){var y=new o.Float32Attribute(4*t.skinIndices.length,4);this.addAttribute("skinIndex",y.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var v=new o.Float32Attribute(4*t.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new o.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new o.Box3);var e=this.attributes.position.array;if(e){var i=this.boundingBox;i.makeEmpty();for(var n=0,r=e.length;r>n;n+=3)t.fromArray(e,n),i.expandByPoint(t)}(void 0===e||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new o.Box3,e=new o.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere);var i=this.attributes.position.array;if(i){t.makeEmpty();for(var n=this.boundingSphere.center,r=0,a=i.length;a>r;r+=3)e.fromArray(i,r),t.expandByPoint(e);t.center(n);for(var s=0,r=0,a=i.length;a>r;r+=3)e.fromArray(i,r),s=Math.max(s,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new o.BufferAttribute(new Float32Array(n.length),3));else for(var r=e.normal.array,a=0,s=r.length;s>a;a++)r[a]=0;var u,l,h,r=e.normal.array,c=new o.Vector3,p=new o.Vector3,d=new o.Vector3,f=new o.Vector3,m=new o.Vector3;if(t){var y=t.array;0===i.length&&this.addGroup(0,y.length);for(var v=0,g=i.length;g>v;++v)for(var b=i[v],x=b.start,_=b.count,a=x,s=x+_;s>a;a+=3)u=3*y[a+0],l=3*y[a+1],h=3*y[a+2],c.fromArray(n,u),p.fromArray(n,l),d.fromArray(n,h),f.subVectors(d,p),m.subVectors(c,p),f.cross(m),r[u]+=f.x,r[u+1]+=f.y,r[u+2]+=f.z,r[l]+=f.x,r[l+1]+=f.y,r[l+2]+=f.z,r[h]+=f.x,r[h+1]+=f.y,r[h+2]+=f.z}else for(var a=0,s=n.length;s>a;a+=9)c.fromArray(n,a),p.fromArray(n,a+3),d.fromArray(n,a+6),f.subVectors(d,p),m.subVectors(c,p),f.cross(m),r[a]=f.x,r[a+1]=f.y,r[a+2]=f.z,r[a+3]=f.x,r[a+4]=f.y,r[a+5]=f.z,r[a+6]=f.x,r[a+7]=f.y,r[a+8]=f.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(t){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(t,e){if(t instanceof o.BufferGeometry==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n],a=r.array,s=t.attributes[n],u=s.array,l=s.itemSize,h=0,c=l*e;h<u.length;h++,c++)a[c]=u[h];return this},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal.array,o=0,a=r.length;a>o;o+=3)t=r[o],e=r[o+1],i=r[o+2],n=1/Math.sqrt(t*t+e*e+i*i),r[o]*=n,r[o+1]*=n,r[o+2]*=n},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var o=this.attributes;for(var i in o){var a=o[i],r=Array.prototype.slice.call(a.array);t.data.attributes[i]={itemSize:a.itemSize,type:a.array.constructor.name,array:r}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new this.constructor).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var i=t.attributes;for(var n in i){var r=i[n];this.addAttribute(n,r.clone())}for(var o=t.groups,a=0,s=o.length;s>a;a++){var u=o[a];this.addGroup(u.start,u.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.BufferGeometry.prototype),o.BufferGeometry.MaxIndex=65535,o.InstancedBufferGeometry=function(){o.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},o.InstancedBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.InstancedBufferGeometry.prototype.constructor=o.InstancedBufferGeometry,o.InstancedBufferGeometry.prototype.addGroup=function(t,e,i){this.groups.push({start:t,count:e,instances:i})},o.InstancedBufferGeometry.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var i=t.attributes;for(var n in i){var r=i[n];this.addAttribute(n,r.clone())}for(var o=t.groups,a=0,s=o.length;s>a;a++){var u=o[a];this.addGroup(u.start,u.count,u.instances)}return this},o.EventDispatcher.prototype.apply(o.InstancedBufferGeometry.prototype),o.AnimationAction=function(t,e,i,n,r){if(void 0===t)throw new Error("clip is null");this.clip=t,this.localRoot=null,this.startTime=e||0,this.timeScale=i||1,this.weight=n||1,this.loop=r||o.LoopRepeat,this.loopCount=0,this.enabled=!0,this.actionTime=-this.startTime,this.clipTime=0,this.propertyBindings=[]},o.AnimationAction.prototype={constructor:o.AnimationAction,setLocalRoot:function(t){return this.localRoot=t,this},updateTime:function(t){var e=this.clipTime,i=this.loopCount,n=(this.actionTime,this.clip.duration);if(this.actionTime=this.actionTime+t,this.loop===o.LoopOnce)return this.loopCount=0,this.clipTime=Math.min(Math.max(this.actionTime,0),n),this.clipTime!==e&&(this.clipTime===n?this.mixer.dispatchEvent({type:"finished",action:this,direction:1}):0===this.clipTime&&this.mixer.dispatchEvent({type:"finished",action:this,direction:-1})),this.clipTime;this.loopCount=Math.floor(this.actionTime/n);var r=this.actionTime-this.loopCount*n;return r%=n,this.loop==o.LoopPingPong&&1===Math.abs(this.loopCount%2)&&(r=n-r),this.clipTime=r,this.loopCount!==i&&this.mixer.dispatchEvent({type:"loop",action:this,loopDelta:this.loopCount-this.loopCount}),this.clipTime},syncWith:function(t){return this.actionTime=t.actionTime,this.timeScale=t.timeScale,this},warpToDuration:function(t){return this.timeScale=this.clip.duration/t,this},init:function(t){return this.clipTime=t-this.startTime,this},update:function(t){this.updateTime(t);var e=this.clip.getAt(this.clipTime);return e},getTimeScaleAt:function(t){return this.timeScale.getAt?this.timeScale.getAt(t):this.timeScale},getWeightAt:function(t){return this.weight.getAt?this.weight.getAt(t):this.weight}},o.AnimationClip=function(t,e,i){if(this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.duration<0)for(var n=0;n<this.tracks.length;n++){var r=this.tracks[n];this.duration=Math.max(r.keys[r.keys.length-1].time)}this.trim(),this.optimize(),this.results=[]},o.AnimationClip.prototype={constructor:o.AnimationClip,getAt:function(t){t=Math.max(0,Math.min(t,this.duration));for(var e=0;e<this.tracks.length;e++){var i=this.tracks[e];this.results[e]=i.getAt(t)}return this.results},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},o.AnimationClip.CreateFromMorphTargetSequence=function(t,e,i){for(var n=e.length,r=[],a=0;n>a;a++){var s=[];s.push({time:(a+n-1)%n,value:0}),s.push({time:a,value:1}),s.push({time:(a+1)%n,value:0}),s.sort(o.KeyframeTrack.keyComparer),0===s[0].time&&s.push({time:n,value:s[0].value}),r.push(new o.NumberKeyframeTrack(".morphTargetInfluences["+e[a].name+"]",s).scale(1/i))}return new o.AnimationClip(t,-1,r)},o.AnimationClip.findByName=function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},o.AnimationClip.CreateClipsFromMorphTargetSequences=function(t,e){for(var i={},n=/^([\w-]*?)([\d]+)$/,r=0,a=t.length;a>r;r++){var s=t[r],u=s.name.match(n);if(u&&u.length>1){var l=u[1],h=i[l];h||(i[l]=h=[]),h.push(s)}}var c=[];for(var l in i)c.push(o.AnimationClip.CreateFromMorphTargetSequence(l,i[l],e));return c},o.AnimationClip.parse=function(t){for(var e=[],i=0;i<t.tracks.length;i++)e.push(o.KeyframeTrack.parse(t.tracks[i]).scale(1/t.fps));return new o.AnimationClip(t.name,t.duration,e)},o.AnimationClip.parseAnimation=function(t,e,i){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var n=function(t,e,i,n,r){for(var o=[],a=0;a<e.length;a++){var s=e[a];void 0!==s[i]&&o.push({time:s.time,value:r(s)})}return o.length>0?new n(t,o):null},r=[],a=t.name||"default",s=t.length||-1,u=t.fps||30,l=t.hierarchy||[],h=0;h<l.length;h++){var c=l[h].keys;if(c&&0!=c.length)if(c[0].morphTargets){for(var p={},d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)p[c[d].morphTargets[f]]=-1;for(var m in p){for(var y=[],f=0;f<c[d].morphTargets.length;f++){var v=c[d];y.push({time:v.time,value:v.morphTarget===m?1:0})}r.push(new o.NumberKeyframeTrack(i+".morphTargetInfluence["+m+"]",y))}s=p.length*(u||1)}else{var g=i+".bones["+e[h].name+"]",b=n(g+".position",c,"pos",o.VectorKeyframeTrack,function(t){return(new o.Vector3).fromArray(t.pos)});b&&r.push(b);var x=n(g+".quaternion",c,"rot",o.QuaternionKeyframeTrack,function(t){return t.rot.slerp?t.rot.clone():(new o.Quaternion).fromArray(t.rot)});x&&r.push(x);var _=n(g+".scale",c,"scl",o.VectorKeyframeTrack,function(t){return(new o.Vector3).fromArray(t.scl)});_&&r.push(_)}}if(0===r.length)return null;var w=new o.AnimationClip(a,s,r);return w},o.AnimationMixer=function(t){this.root=t,this.time=0,this.timeScale=1,this.actions=[],this.propertyBindingMap={}},o.AnimationMixer.prototype={constructor:o.AnimationMixer,addAction:function(t){this.actions.push(t),t.init(this.time),t.mixer=this;for(var e=t.clip.tracks,i=t.localRoot||this.root,n=0;n<e.length;n++){var r=e[n],a=i.uuid+"-"+r.name,s=this.propertyBindingMap[a];void 0===s&&(s=new o.PropertyBinding(i,r.name),this.propertyBindingMap[a]=s),t.propertyBindings.push(s),s.referenceCount+=1}},removeAllActions:function(){for(var t=0;t<this.actions.length;t++)this.actions[t].mixer=null;for(var e in this.propertyBindingMap)this.propertyBindingMap[e].unbind();return this.actions=[],this.propertyBindingMap={},this},removeAction:function(t){var e=this.actions.indexOf(t);-1!==e&&(this.actions.splice(e,1),t.mixer=null);for(var i=t.localRoot||this.root,n=t.clip.tracks,r=0;r<n.length;r++){var o=n[r],a=i.uuid+"-"+o.name,s=this.propertyBindingMap[a];s.referenceCount-=1,s.referenceCount<=0&&(s.unbind(),delete this.propertyBindingMap[a])}return this},findActionByName:function(t){for(var e=0;e<this.actions.length;e++)if(this.actions[e].name===t)return this.actions[e];return null},play:function(t,e){return t.startTime=this.time,this.addAction(t),this},fadeOut:function(t,e){var i=[];return i.push({time:this.time,value:1}),i.push({time:this.time+e,value:0}),t.weight=new o.NumberKeyframeTrack("weight",i),this},fadeIn:function(t,e){var i=[];return i.push({time:this.time,value:0}),i.push({time:this.time+e,value:1}),t.weight=new o.NumberKeyframeTrack("weight",i),this},warp:function(t,e,i,n){var r=[];return r.push({time:this.time,value:e}),r.push({time:this.time+n,value:i}),t.timeScale=new o.NumberKeyframeTrack("timeScale",r),this},crossFade:function(t,e,i,n){if(this.fadeOut(t,i),this.fadeIn(e,i),n){var r=t.clip.duration/e.clip.duration,o=1/r;this.warp(t,1,r,i),this.warp(e,o,1,i)}return this},update:function(t){var e=t*this.timeScale;this.time+=e;for(var i=0;i<this.actions.length;i++){var n=this.actions[i],r=n.getWeightAt(this.time),o=n.getTimeScaleAt(this.time),a=e*o,s=n.update(a);if(!(n.weight<=0)&&n.enabled)for(var u=0;u<s.length;u++){n.clip.tracks[u].name;n.propertyBindings[u].accumulate(s[u],r)}}for(var l in this.propertyBindingMap)this.propertyBindingMap[l].apply();return this}},o.EventDispatcher.prototype.apply(o.AnimationMixer.prototype),o.AnimationUtils={getEqualsFunc:function(t){return t.equals?function(t,e){return t.equals(e)}:function(t,e){return t===e}},clone:function(t){var e=typeof t;if("object"===e){if(t.clone)return t.clone();console.error("can not figure out how to copy exemplarValue",t)}return t},lerp:function(t,e,i,n){var r=o.AnimationUtils.getLerpFunc(t,n);return r(t,e,i)},lerp_object:function(t,e,i){return t.lerp(e,i)},slerp_object:function(t,e,i){return t.slerp(e,i)},lerp_number:function(t,e,i){return t*(1-i)+e*i},lerp_boolean:function(t,e,i){return.5>i?t:e},lerp_boolean_immediate:function(t,e,i){return t},lerp_string:function(t,e,i){return.5>i?t:e},lerp_string_immediate:function(t,e,i){return t},getLerpFunc:function(t,e){if(void 0===t||null===t)throw new Error("examplarValue is null");var i=typeof t;switch(i){case"object":if(t.lerp)return o.AnimationUtils.lerp_object;if(t.slerp)return o.AnimationUtils.slerp_object;break;case"number":return o.AnimationUtils.lerp_number;case"boolean":return e?o.AnimationUtils.lerp_boolean:o.AnimationUtils.lerp_boolean_immediate;case"string":return e?o.AnimationUtils.lerp_string:o.AnimationUtils.lerp_string_immediate}}},o.KeyframeTrack=function(t,e){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keys in track named "+t);this.name=t,this.keys=e,this.lastIndex=0,this.validate(),this.optimize()},o.KeyframeTrack.prototype={constructor:o.KeyframeTrack,getAt:function(t){for(;this.lastIndex<this.keys.length&&t>=this.keys[this.lastIndex].time;)this.lastIndex++;for(;this.lastIndex>0&&t<this.keys[this.lastIndex-1].time;)this.lastIndex--;if(this.lastIndex>=this.keys.length)return this.setResult(this.keys[this.keys.length-1].value),this.result;if(0===this.lastIndex)return this.setResult(this.keys[0].value),this.result;var e=this.keys[this.lastIndex-1];if(this.setResult(e.value),e.constantToNext)return this.result;var i=this.keys[this.lastIndex],n=(t-e.time)/(i.time-e.time);return this.result=this.lerpValues(this.result,i.value,n),this.result},shift:function(t){if(0!==t)for(var e=0;e<this.keys.length;e++)this.keys[e].time+=t;return this},scale:function(t){if(1!==t)for(var e=0;e<this.keys.length;e++)this.keys[e].time*=t;return this},trim:function(t,e){for(var i=0,n=1;n<this.keys.length;n++)this.keys[n]<=t&&i++;for(var r=0,n=this.keys.length-2;n>0&&this.keys[n]>=e;n++)r++;
return i+r>0&&(this.keys=this.keys.splice(i,this.keys.length-r-i)),this},validate:function(){var t=null;if(0===this.keys.length)return void console.error("  track is empty, no keys",this);for(var e=0;e<this.keys.length;e++){var i=this.keys[e];if(!i)return void console.error("  key is null in track",this,e);if("number"!=typeof i.time||isNaN(i.time))return void console.error("  key.time is not a valid number",this,e,i);if(void 0===i.value||null===i.value)return void console.error("  key.value is null in track",this,e,i);if(t&&t.time>i.time)return void console.error("  key.time is less than previous key time, out of order keys",this,e,i,t);t=i}return this},optimize:function(){var t=[],e=this.keys[0];t.push(e);for(var i=(o.AnimationUtils.getEqualsFunc(e.value),1);i<this.keys.length-1;i++){var n=this.keys[i],r=this.keys[i+1];e.time!==n.time&&(this.compareValues(e.value,n.value)&&this.compareValues(n.value,r.value)||(e.constantToNext=this.compareValues(e.value,n.value),t.push(n),e=n))}return t.push(this.keys[this.keys.length-1]),this.keys=t,this}},o.KeyframeTrack.keyComparer=function(t,e){return t.time-e.time},o.KeyframeTrack.parse=function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=o.KeyframeTrack.GetTrackTypeForTypeName(t.type);return e.parse(t)},o.KeyframeTrack.GetTrackTypeForTypeName=function(t){switch(t.toLowerCase()){case"vector":case"vector2":case"vector3":case"vector4":return o.VectorKeyframeTrack;case"quaternion":return o.QuaternionKeyframeTrack;case"integer":case"scalar":case"double":case"float":case"number":return o.NumberKeyframeTrack;case"bool":case"boolean":return o.BooleanKeyframeTrack;case"string":return o.StringKeyframeTrack}throw new Error("Unsupported typeName: "+t)},o.PropertyBinding=function(t,e){this.rootNode=t,this.trackName=e,this.referenceCount=0,this.originalValue=null;var i=o.PropertyBinding.parseTrackName(e);this.directoryName=i.directoryName,this.nodeName=i.nodeName,this.objectName=i.objectName,this.objectIndex=i.objectIndex,this.propertyName=i.propertyName,this.propertyIndex=i.propertyIndex,this.node=o.PropertyBinding.findNode(t,this.nodeName)||t,this.cumulativeValue=null,this.cumulativeWeight=0},o.PropertyBinding.prototype={constructor:o.PropertyBinding,reset:function(){this.cumulativeValue=null,this.cumulativeWeight=0},accumulate:function(t,e){if(this.isBound||this.bind(),0===this.cumulativeWeight)e>0&&(null===this.cumulativeValue&&(this.cumulativeValue=o.AnimationUtils.clone(t)),this.cumulativeWeight=e);else{var i=e/(this.cumulativeWeight+e);this.cumulativeValue=this.lerpValue(this.cumulativeValue,t,i),this.cumulativeWeight+=e}},unbind:function(){this.isBound&&(this.setValue(this.originalValue),this.setValue=null,this.getValue=null,this.lerpValue=null,this.equalsValue=null,this.triggerDirty=null,this.isBound=!1)},bind:function(){if(!this.isBound){var t=this.node;if(!t)return void console.error("  trying to update node for track: "+this.trackName+" but it wasn't found.");if(this.objectName){if("materials"===this.objectName){if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials}else if("bones"===this.objectName){if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var e=0;e<t.length;e++)if(t[e].name===this.objectIndex){this.objectIndex=e;break}}else{if(void 0===t[this.objectName])return void console.error("  can not bind to objectName of node, undefined",this);t=t[this.objectName]}if(void 0!==this.objectIndex){if(void 0===t[this.objectIndex])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[this.objectIndex]}}var i=t[this.propertyName];if(!i)return void console.error("  trying to update property for track: "+this.nodeName+"."+this.propertyName+" but it wasn't found.",t);if(void 0!==this.propertyIndex){if("morphTargetInfluences"===this.propertyName){t.geometry||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this),t.geometry.morphTargets||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var e=0;e<this.node.geometry.morphTargets.length;e++)if(t.geometry.morphTargets[e].name===this.propertyIndex){this.propertyIndex=e;break}}this.setValue=function(t){return this.equalsValue(i[this.propertyIndex],t)?!1:(i[this.propertyIndex]=t,!0)},this.getValue=function(){return i[this.propertyIndex]}}else i.copy?(this.setValue=function(t){return this.equalsValue(i,t)?!1:(i.copy(t),!0)},this.getValue=function(){return i}):(this.setValue=function(e){return this.equalsValue(t[this.propertyName],e)?!1:(t[this.propertyName]=e,!0)},this.getValue=function(){return t[this.propertyName]});void 0!==t.needsUpdate?this.triggerDirty=function(){this.node.needsUpdate=!0}:void 0!==t.matrixWorldNeedsUpdate&&(this.triggerDirty=function(){t.matrixWorldNeedsUpdate=!0}),this.originalValue=this.getValue(),this.equalsValue=o.AnimationUtils.getEqualsFunc(this.originalValue),this.lerpValue=o.AnimationUtils.getLerpFunc(this.originalValue,!0),this.isBound=!0}},apply:function(){if(this.isBound||this.bind(),this.cumulativeWeight>0){if(this.cumulativeWeight<1){var t=1-this.cumulativeWeight,e=t/(this.cumulativeWeight+t);this.cumulativeValue=this.lerpValue(this.cumulativeValue,this.originalValue,e)}var i=this.setValue(this.cumulativeValue);i&&this.triggerDirty&&this.triggerDirty(),this.cumulativeValue=null,this.cumulativeWeight=0}}},o.PropertyBinding.parseTrackName=function(t){var e=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,i=e.exec(t);if(!i)throw new Error("cannot parse trackName at all: "+t);i.index===e.lastIndex&&e.lastIndex++;var n={directoryName:i[1],nodeName:i[3],objectName:i[5],objectIndex:i[7],propertyName:i[9],propertyIndex:i[11]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return n},o.PropertyBinding.findNode=function(t,e){function i(t){for(var i=0;i<t.bones.length;i++){var n=t.bones[i];if(n.name===e)return n}return null}function n(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e)return r;var o=n(r.children);if(o)return o}return null}if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=i(t.skeleton);if(r)return r}if(t.children){var o=n(t.children);if(o)return o}return null},o.VectorKeyframeTrack=function(t,e){o.KeyframeTrack.call(this,t,e),this.result=this.keys[0].value.clone()},o.VectorKeyframeTrack.prototype=Object.create(o.KeyframeTrack.prototype),o.VectorKeyframeTrack.prototype.constructor=o.VectorKeyframeTrack,o.VectorKeyframeTrack.prototype.setResult=function(t){this.result.copy(t)},o.VectorKeyframeTrack.prototype.lerpValues=function(t,e,i){return t.lerp(e,i)},o.VectorKeyframeTrack.prototype.compareValues=function(t,e){return t.equals(e)},o.VectorKeyframeTrack.prototype.clone=function(){for(var t=[],e=0;e<this.keys.length;e++){var i=this.keys[e];t.push({time:i.time,value:i.value.clone()})}return new o.VectorKeyframeTrack(this.name,t)},o.VectorKeyframeTrack.parse=function(t){for(var e=t.keys[0].value.length,i=o["Vector"+e],n=[],r=0;r<t.keys.length;r++){var a=t.keys[r];n.push({value:(new i).fromArray(a.value),time:a.time})}return new o.VectorKeyframeTrack(t.name,n)},o.QuaternionKeyframeTrack=function(t,e){o.KeyframeTrack.call(this,t,e),this.result=this.keys[0].value.clone()},o.QuaternionKeyframeTrack.prototype=Object.create(o.KeyframeTrack.prototype),o.QuaternionKeyframeTrack.prototype.constructor=o.QuaternionKeyframeTrack,o.QuaternionKeyframeTrack.prototype.setResult=function(t){this.result.copy(t)},o.QuaternionKeyframeTrack.prototype.lerpValues=function(t,e,i){return t.slerp(e,i)},o.QuaternionKeyframeTrack.prototype.compareValues=function(t,e){return t.equals(e)},o.QuaternionKeyframeTrack.prototype.multiply=function(t){for(var e=0;e<this.keys.length;e++)this.keys[e].value.multiply(t);return this},o.QuaternionKeyframeTrack.prototype.clone=function(){for(var t=[],e=0;e<this.keys.length;e++){var i=this.keys[e];t.push({time:i.time,value:i.value.clone()})}return new o.QuaternionKeyframeTrack(this.name,t)},o.QuaternionKeyframeTrack.parse=function(t){for(var e=[],i=0;i<t.keys.length;i++){var n=t.keys[i];e.push({value:(new o.Quaternion).fromArray(n.value),time:n.time})}return new o.QuaternionKeyframeTrack(t.name,e)},o.StringKeyframeTrack=function(t,e){o.KeyframeTrack.call(this,t,e),this.result=this.keys[0].value},o.StringKeyframeTrack.prototype=Object.create(o.KeyframeTrack.prototype),o.StringKeyframeTrack.prototype.constructor=o.StringKeyframeTrack,o.StringKeyframeTrack.prototype.setResult=function(t){this.result=t},o.StringKeyframeTrack.prototype.lerpValues=function(t,e,i){return 1>i?t:e},o.StringKeyframeTrack.prototype.compareValues=function(t,e){return t===e},o.StringKeyframeTrack.prototype.clone=function(){for(var t=[],e=0;e<this.keys.length;e++){var i=this.keys[e];t.push({time:i.time,value:i.value})}return new o.StringKeyframeTrack(this.name,t)},o.StringKeyframeTrack.parse=function(t){return new o.StringKeyframeTrack(t.name,t.keys)},o.BooleanKeyframeTrack=function(t,e){o.KeyframeTrack.call(this,t,e),this.result=this.keys[0].value},o.BooleanKeyframeTrack.prototype=Object.create(o.KeyframeTrack.prototype),o.BooleanKeyframeTrack.prototype.constructor=o.BooleanKeyframeTrack,o.BooleanKeyframeTrack.prototype.setResult=function(t){this.result=t},o.BooleanKeyframeTrack.prototype.lerpValues=function(t,e,i){return 1>i?t:e},o.BooleanKeyframeTrack.prototype.compareValues=function(t,e){return t===e},o.BooleanKeyframeTrack.prototype.clone=function(){for(var t=[],e=0;e<this.keys.length;e++){var i=this.keys[e];t.push({time:i.time,value:i.value})}return new o.BooleanKeyframeTrack(this.name,t)},o.BooleanKeyframeTrack.parse=function(t){return new o.BooleanKeyframeTrack(t.name,t.keys)},o.NumberKeyframeTrack=function(t,e){o.KeyframeTrack.call(this,t,e),this.result=this.keys[0].value},o.NumberKeyframeTrack.prototype=Object.create(o.KeyframeTrack.prototype),o.NumberKeyframeTrack.prototype.constructor=o.NumberKeyframeTrack,o.NumberKeyframeTrack.prototype.setResult=function(t){this.result=t},o.NumberKeyframeTrack.prototype.lerpValues=function(t,e,i){return t*(1-i)+e*i},o.NumberKeyframeTrack.prototype.compareValues=function(t,e){return t===e},o.NumberKeyframeTrack.prototype.clone=function(){for(var t=[],e=0;e<this.keys.length;e++){var i=this.keys[e];t.push({time:i.time,value:i.value})}return new o.NumberKeyframeTrack(this.name,t)},o.NumberKeyframeTrack.parse=function(t){return new o.NumberKeyframeTrack(t.name,t.keys)},o.Camera=function(){o.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new o.Matrix4,this.projectionMatrix=new o.Matrix4},o.Camera.prototype=Object.create(o.Object3D.prototype),o.Camera.prototype.constructor=o.Camera,o.Camera.prototype.getWorldDirection=function(){var t=new o.Quaternion;return function(e){var i=e||new o.Vector3;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),o.Camera.prototype.lookAt=function(){var t=new o.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),o.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},o.Camera.prototype.copy=function(t){return o.Object3D.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},o.CubeCamera=function(t,e,i){o.Object3D.call(this),this.type="CubeCamera";var n=90,r=1,a=new o.PerspectiveCamera(n,r,t,e);a.up.set(0,-1,0),a.lookAt(new o.Vector3(1,0,0)),this.add(a);var s=new o.PerspectiveCamera(n,r,t,e);s.up.set(0,-1,0),s.lookAt(new o.Vector3(-1,0,0)),this.add(s);var u=new o.PerspectiveCamera(n,r,t,e);u.up.set(0,0,1),u.lookAt(new o.Vector3(0,1,0)),this.add(u);var l=new o.PerspectiveCamera(n,r,t,e);l.up.set(0,0,-1),l.lookAt(new o.Vector3(0,-1,0)),this.add(l);var h=new o.PerspectiveCamera(n,r,t,e);h.up.set(0,-1,0),h.lookAt(new o.Vector3(0,0,1)),this.add(h);var c=new o.PerspectiveCamera(n,r,t,e);c.up.set(0,-1,0),c.lookAt(new o.Vector3(0,0,-1)),this.add(c),this.renderTarget=new o.WebGLRenderTargetCube(i,i,{format:o.RGBFormat,magFilter:o.LinearFilter,minFilter:o.LinearFilter}),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,n=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,a,i),i.activeCubeFace=1,t.render(e,s,i),i.activeCubeFace=2,t.render(e,u,i),i.activeCubeFace=3,t.render(e,l,i),i.activeCubeFace=4,t.render(e,h,i),i.texture.generateMipmaps=n,i.activeCubeFace=5,t.render(e,c,i),t.setRenderTarget(null)}},o.CubeCamera.prototype=Object.create(o.Object3D.prototype),o.CubeCamera.prototype.constructor=o.CubeCamera,o.OrthographicCamera=function(t,e,i,n,r,a){o.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},o.OrthographicCamera.prototype=Object.create(o.Camera.prototype),o.OrthographicCamera.prototype.constructor=o.OrthographicCamera,o.OrthographicCamera.prototype.updateProjectionMatrix=function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(i-t,i+t,n+e,n-e,this.near,this.far)},o.OrthographicCamera.prototype.copy=function(t){return o.Camera.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this},o.OrthographicCamera.prototype.toJSON=function(t){var e=o.Object3D.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,e},o.PerspectiveCamera=function(t,e,i,n){o.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},o.PerspectiveCamera.prototype=Object.create(o.Camera.prototype),o.PerspectiveCamera.prototype.constructor=o.PerspectiveCamera,o.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*o.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},o.PerspectiveCamera.prototype.setViewOffset=function(t,e,i,n,r,o){this.fullWidth=t,this.fullHeight=e,this.x=i,this.y=n,this.width=r,this.height=o,this.updateProjectionMatrix()},o.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var t=o.Math.radToDeg(2*Math.atan(Math.tan(.5*o.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var e=this.fullWidth/this.fullHeight,i=Math.tan(o.Math.degToRad(.5*t))*this.near,n=-i,r=e*n,a=e*i,s=Math.abs(a-r),u=Math.abs(i-n);this.projectionMatrix.makeFrustum(r+this.x*s/this.fullWidth,r+(this.x+this.width)*s/this.fullWidth,i-(this.y+this.height)*u/this.fullHeight,i-this.y*u/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(t,this.aspect,this.near,this.far)},o.PerspectiveCamera.prototype.copy=function(t){return o.Camera.prototype.copy.call(this,t),this.fov=t.fov,this.aspect=t.aspect,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this},o.PerspectiveCamera.prototype.toJSON=function(t){var e=o.Object3D.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.fov=this.fov,e.object.aspect=this.aspect,e.object.near=this.near,e.object.far=this.far,e},o.Light=function(t){o.Object3D.call(this),this.type="Light",this.color=new o.Color(t),this.receiveShadow=void 0},o.Light.prototype=Object.create(o.Object3D.prototype),o.Light.prototype.constructor=o.Light,Object.defineProperties(o.Light.prototype,{onlyShadow:{set:function(t){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(t){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow ) instead.")}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(t){this.shadow.darkness=t}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),o.Light.prototype.copy=function(t){return o.Object3D.prototype.copy.call(this,t),this.color.copy(t.color),this},o.Light.prototype.toJSON=function(t){var e=o.Object3D.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.intensity&&(e.object.intensity=this.intensity),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.exponent&&(e.object.exponent=this.exponent),e},o.LightShadow=function(t){this.camera=t,this.bias=0,this.darkness=1,this.mapSize=new o.Vector2(512,512),this.map=null,this.matrix=null},o.LightShadow.prototype={constructor:o.LightShadow,copy:function(t){this.camera=t.camera.clone(),this.bias=t.bias,this.darkness=t.darkness,this.mapSize.copy(t.mapSize)},clone:function(){return(new this.constructor).copy(this)}},o.AmbientLight=function(t){o.Light.call(this,t),this.type="AmbientLight",this.castShadow=void 0},o.AmbientLight.prototype=Object.create(o.Light.prototype),o.AmbientLight.prototype.constructor=o.AmbientLight,o.DirectionalLight=function(t,e){o.Light.call(this,t),this.type="DirectionalLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new o.Object3D,this.intensity=void 0!==e?e:1,this.shadow=new o.LightShadow(new o.OrthographicCamera(-500,500,500,-500,50,5e3))},o.DirectionalLight.prototype=Object.create(o.Light.prototype),o.DirectionalLight.prototype.constructor=o.DirectionalLight,o.DirectionalLight.prototype.copy=function(t){return o.Light.prototype.copy.call(this,t),this.intensity=t.intensity,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this},o.HemisphereLight=function(t,e,i){o.Light.call(this,t),this.type="HemisphereLight",this.castShadow=void 0,this.position.set(0,1,0),this.updateMatrix(),this.groundColor=new o.Color(e),this.intensity=void 0!==i?i:1},o.HemisphereLight.prototype=Object.create(o.Light.prototype),o.HemisphereLight.prototype.constructor=o.HemisphereLight,o.HemisphereLight.prototype.copy=function(t){return o.Light.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this.intensity=t.intensity,this},o.PointLight=function(t,e,i,n){o.Light.call(this,t),this.type="PointLight",this.intensity=void 0!==e?e:1,this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new o.LightShadow(new o.PerspectiveCamera(90,1,1,500))},o.PointLight.prototype=Object.create(o.Light.prototype),o.PointLight.prototype.constructor=o.PointLight,o.PointLight.prototype.copy=function(t){return o.Light.prototype.copy.call(this,t),this.intensity=t.intensity,this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this},o.SpotLight=function(t,e,i,n,r,a){o.Light.call(this,t),this.type="SpotLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new o.Object3D,this.intensity=void 0!==e?e:1,this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.exponent=void 0!==r?r:10,this.decay=void 0!==a?a:1,this.shadow=new o.LightShadow(new o.PerspectiveCamera(50,1,50,5e3))},o.SpotLight.prototype=Object.create(o.Light.prototype),o.SpotLight.prototype.constructor=o.SpotLight,o.SpotLight.prototype.copy=function(t){return o.Light.prototype.copy.call(this,t),this.intensity=t.intensity,this.distance=t.distance,this.angle=t.angle,this.exponent=t.exponent,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this},o.Cache={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){return this.enabled!==!1?this.files[t]:void 0},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},o.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},o.Loader.prototype={constructor:o.Loader,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t,e,i;return function(n,r,a){function s(t,i,n,s,l){var h,c=r+t,p=o.Loader.Handlers.get(c);null!==p?h=p.load(c):(e.setCrossOrigin(a),h=e.load(c)),void 0!==i&&(h.repeat.fromArray(i),1!==i[0]&&(h.wrapS=o.RepeatWrapping),1!==i[1]&&(h.wrapT=o.RepeatWrapping)),void 0!==n&&h.offset.fromArray(n),void 0!==s&&("repeat"===s[0]&&(h.wrapS=o.RepeatWrapping),"mirror"===s[0]&&(h.wrapS=o.MirroredRepeatWrapping),"repeat"===s[1]&&(h.wrapT=o.RepeatWrapping),"mirror"===s[1]&&(h.wrapT=o.MirroredRepeatWrapping)),void 0!==l&&(h.anisotropy=l);var d=o.Math.generateUUID();return u[d]=h,d}void 0===t&&(t=new o.Color),void 0===e&&(e=new o.TextureLoader),void 0===i&&(i=new o.MaterialLoader);var u={},l={uuid:o.Math.generateUUID(),type:"MeshLambertMaterial"};for(var h in n){var c=n[h];switch(h){case"DbgColor":l.color=c;break;case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=c;break;case"blending":l.blending=o[c];break;case"colorDiffuse":l.color=t.fromArray(c).getHex();break;case"colorSpecular":l.specular=t.fromArray(c).getHex();break;case"colorEmissive":l.emissive=t.fromArray(c).getHex();break;case"specularCoef":l.shininess=c;break;case"shading":"basic"===c.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===c.toLowerCase()&&(l.type="MeshPhongMaterial");break;case"mapDiffuse":l.map=s(c,n.mapDiffuseRepeat,n.mapDiffuseOffset,n.mapDiffuseWrap,n.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapLight":l.lightMap=s(c,n.mapLightRepeat,n.mapLightOffset,n.mapLightWrap,n.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(c,n.mapAORepeat,n.mapAOOffset,n.mapAOWrap,n.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(c,n.mapBumpRepeat,n.mapBumpOffset,n.mapBumpWrap,n.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=c;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(c,n.mapNormalRepeat,n.mapNormalOffset,n.mapNormalWrap,n.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[c,c];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(c,n.mapSpecularRepeat,n.mapSpecularOffset,n.mapSpecularWrap,n.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapAlpha":l.alphaMap=s(c,n.mapAlphaRepeat,n.mapAlphaOffset,n.mapAlphaWrap,n.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=o.BackSide;break;case"doubleSided":l.side=o.DoubleSide;break;case"transparency":console.warn("THREE.Loader: transparency has been renamed to opacity"),l.opacity=c;break;case"opacity":case"transparent":case"depthTest":case"depthWrite":case"transparent":case"visible":case"wireframe":l[h]=c;break;case"vertexColors":c===!0&&(l.vertexColors=o.VertexColors),"face"===c&&(l.vertexColors=o.FaceColors);break;default:console.error("Loader.createMaterial: Unsupported",h,c)}}return"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(u),i.parse(l)}}()},o.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;n>i;i+=2){var r=e[i],o=e[i+1];if(r.test(t))return o}return null}},o.XHRLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},o.XHRLoader.prototype={constructor:o.XHRLoader,load:function(t,e,i,n){var r=this,a=o.Cache.get(t);if(void 0!==a)return e&&setTimeout(function(){e(a)},0),a;var s=new XMLHttpRequest;return s.open("GET",t,!0),s.addEventListener("load",function(i){var n=i.target.response;o.Cache.add(t,n),e&&e(n),r.manager.itemEnd(t)},!1),void 0!==i&&s.addEventListener("progress",function(t){i(t)},!1),s.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.send(null),r.manager.itemStart(t),s},setResponseType:function(t){this.responseType=t},setCrossOrigin:function(t){this.crossOrigin=t},setWithCredentials:function(t){this.withCredentials=t}},o.ImageLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},o.ImageLoader.prototype={constructor:o.ImageLoader,load:function(t,e,i,n){var r=this,a=o.Cache.get(t);if(void 0!==a)return r.manager.itemStart(t),e?setTimeout(function(){e(a),r.manager.itemEnd(t)},0):r.manager.itemEnd(t),a;var s=document.createElement("img");return s.addEventListener("load",function(i){o.Cache.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),void 0!==i&&s.addEventListener("progress",function(t){i(t)},!1),s.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s},setCrossOrigin:function(t){this.crossOrigin=t}},o.JSONLoader=function(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:o.DefaultLoadingManager,this.withCredentials=!1},o.JSONLoader.prototype={constructor:o.JSONLoader,get statusDomElement(){return void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(t,e,i,n){var r=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:o.Loader.prototype.extractUrlBase(t),s=new o.XHRLoader(this.manager);s.setCrossOrigin(this.crossOrigin),s.setWithCredentials(this.withCredentials),s.load(t,function(i){var n=JSON.parse(i),o=n.metadata;if(void 0!==o){if("object"===o.type)return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===o.type)return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}var s=r.parse(n,a);e(s.geometry,s.materials)})},setCrossOrigin:function(t){this.crossOrigin=t},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function i(e){function i(t,e){return t&1<<e}var n,r,a,u,l,h,c,p,d,f,m,y,v,g,b,x,_,w,M,S,C,E,T,P,A,k,O,N=t.faces,D=t.vertices,L=t.normals,R=t.colors,I=0;if(void 0!==t.uvs){for(n=0;n<t.uvs.length;n++)t.uvs[n].length&&I++;for(n=0;I>n;n++)s.faceVertexUvs[n]=[]}for(u=0,l=D.length;l>u;)w=new o.Vector3,w.x=D[u++]*e,w.y=D[u++]*e,w.z=D[u++]*e,s.vertices.push(w);for(u=0,l=N.length;l>u;)if(f=N[u++],m=i(f,0),y=i(f,1),v=i(f,3),g=i(f,4),b=i(f,5),x=i(f,6),_=i(f,7),m){if(S=new o.Face3,S.a=N[u],S.b=N[u+1],S.c=N[u+3],C=new o.Face3,C.a=N[u+1],C.b=N[u+2],C.c=N[u+3],u+=4,y&&(d=N[u++],S.materialIndex=d,C.materialIndex=d),a=s.faces.length,v)for(n=0;I>n;n++)for(P=t.uvs[n],s.faceVertexUvs[n][a]=[],s.faceVertexUvs[n][a+1]=[],r=0;4>r;r++)p=N[u++],k=P[2*p],O=P[2*p+1],A=new o.Vector2(k,O),2!==r&&s.faceVertexUvs[n][a].push(A),0!==r&&s.faceVertexUvs[n][a+1].push(A);if(g&&(c=3*N[u++],S.normal.set(L[c++],L[c++],L[c]),C.normal.copy(S.normal)),b)for(n=0;4>n;n++)c=3*N[u++],T=new o.Vector3(L[c++],L[c++],L[c]),2!==n&&S.vertexNormals.push(T),0!==n&&C.vertexNormals.push(T);if(x&&(h=N[u++],E=R[h],S.color.setHex(E),C.color.setHex(E)),_)for(n=0;4>n;n++)h=N[u++],E=R[h],2!==n&&S.vertexColors.push(new o.Color(E)),0!==n&&C.vertexColors.push(new o.Color(E));s.faces.push(S),s.faces.push(C)}else{if(M=new o.Face3,M.a=N[u++],M.b=N[u++],M.c=N[u++],y&&(d=N[u++],M.materialIndex=d),a=s.faces.length,v)for(n=0;I>n;n++)for(P=t.uvs[n],s.faceVertexUvs[n][a]=[],r=0;3>r;r++)p=N[u++],k=P[2*p],O=P[2*p+1],A=new o.Vector2(k,O),s.faceVertexUvs[n][a].push(A);if(g&&(c=3*N[u++],M.normal.set(L[c++],L[c++],L[c])),b)for(n=0;3>n;n++)c=3*N[u++],T=new o.Vector3(L[c++],L[c++],L[c]),M.vertexNormals.push(T);if(x&&(h=N[u++],M.color.setHex(R[h])),_)for(n=0;3>n;n++)h=N[u++],M.vertexColors.push(new o.Color(R[h]));s.faces.push(M)}}function n(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,n=t.skinWeights.length;n>i;i+=e){var r=t.skinWeights[i],a=e>1?t.skinWeights[i+1]:0,u=e>2?t.skinWeights[i+2]:0,l=e>3?t.skinWeights[i+3]:0;s.skinWeights.push(new o.Vector4(r,a,u,l))}if(t.skinIndices)for(var i=0,n=t.skinIndices.length;n>i;i+=e){var h=t.skinIndices[i],c=e>1?t.skinIndices[i+1]:0,p=e>2?t.skinIndices[i+2]:0,d=e>3?t.skinIndices[i+3]:0;s.skinIndices.push(new o.Vector4(h,c,p,d))}s.bones=t.bones,s.bones&&s.bones.length>0&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match.")}function r(e){if(void 0!==t.morphTargets)for(var i=0,n=t.morphTargets.length;n>i;i++){s.morphTargets[i]={},s.morphTargets[i].name=t.morphTargets[i].name,s.morphTargets[i].vertices=[];for(var r=s.morphTargets[i].vertices,a=t.morphTargets[i].vertices,u=0,l=a.length;l>u;u+=3){var h=new o.Vector3;h.x=a[u]*e,h.y=a[u+1]*e,h.z=a[u+2]*e,r.push(h)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var c=s.faces,p=t.morphColors[0].colors,i=0,n=c.length;n>i;i++)c[i].color.fromArray(p,3*i)}}function a(){var e=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var n=0;n<i.length;n++){var r=o.AnimationClip.parseAnimation(i[n],s.bones);r&&e.push(r)}if(s.morphTargets){var a=o.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets,10);e=e.concat(a)}e.length>0&&(s.animations=e)}var s=new o.Geometry,u=void 0!==t.scale?1/t.scale:1;if(i(u),n(),r(u),a(),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:s};var l=o.Loader.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:s,materials:l}}},o.LoadingManager=function(t,e,i){var n=this,r=!1,o=0,a=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){a++,r===!1&&void 0!==n.onStart&&n.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==n.onProgress&&n.onProgress(t,o,a),o===a&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}},o.DefaultLoadingManager=new o.LoadingManager,o.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},o.BufferGeometryLoader.prototype={constructor:o.BufferGeometryLoader,load:function(t,e,i,n){var r=this,a=new o.XHRLoader(r.manager);
a.setCrossOrigin(this.crossOrigin),a.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=new o.BufferGeometry,i=t.data.index;if(void 0!==i){var n=new self[i.type](i.array);e.setIndex(new o.BufferAttribute(n,1))}var r=t.data.attributes;for(var a in r){var s=r[a],n=new self[s.type](s.array);e.addAttribute(a,new o.BufferAttribute(n,s.itemSize))}var u=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==u)for(var l=0,h=u.length;l!==h;++l){var c=u[l];e.addGroup(c.start,c.count)}var p=t.data.boundingSphere;if(void 0!==p){var d=new o.Vector3;void 0!==p.center&&d.fromArray(p.center),e.boundingSphere=new o.Sphere(d,p.radius)}return e}},o.MaterialLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this.textures={}},o.MaterialLoader.prototype={constructor:o.MaterialLoader,load:function(t,e,i,n){var r=this,a=new o.XHRLoader(r.manager);a.setCrossOrigin(this.crossOrigin),a.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setCrossOrigin:function(t){this.crossOrigin=t},setTextures:function(t){this.textures=t},getTexture:function(t){var e=this.textures;return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]},parse:function(t){var e=new o[t.type];if(e.uuid=t.uuid,void 0!==t.name&&(e.name=t.name),void 0!==t.color&&e.color.setHex(t.color),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.alphaTest&&(e.alphaTest=t.alphaTest),void 0!==t.depthTest&&(e.depthTest=t.depthTest),void 0!==t.depthWrite&&(e.depthWrite=t.depthWrite),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(e.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.size&&(e.size=t.size),void 0!==t.sizeAttenuation&&(e.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(e.map=this.getTexture(t.map)),void 0!==t.alphaMap&&(e.alphaMap=this.getTexture(t.alphaMap),e.transparent=!0),void 0!==t.bumpMap&&(e.bumpMap=this.getTexture(t.bumpMap)),void 0!==t.bumpScale&&(e.bumpScale=t.bumpScale),void 0!==t.normalMap&&(e.normalMap=this.getTexture(t.normalMap)),t.normalScale&&(e.normalScale=new o.Vector2(t.normalScale,t.normalScale)),void 0!==t.displacementMap&&(e.displacementMap=this.getTexture(t.displacementMap)),void 0!==t.displacementScale&&(e.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(e.displacementBias=t.displacementBias),void 0!==t.specularMap&&(e.specularMap=this.getTexture(t.specularMap)),void 0!==t.envMap&&(e.envMap=this.getTexture(t.envMap),e.combine=o.MultiplyOperation),t.reflectivity&&(e.reflectivity=t.reflectivity),void 0!==t.lightMap&&(e.lightMap=this.getTexture(t.lightMap)),void 0!==t.lightMapIntensity&&(e.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(e.aoMap=this.getTexture(t.aoMap)),void 0!==t.aoMapIntensity&&(e.aoMapIntensity=t.aoMapIntensity),void 0!==t.materials)for(var i=0,n=t.materials.length;n>i;i++)e.materials.push(this.parse(t.materials[i]));return e}},o.ObjectLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this.texturePath=""},o.ObjectLoader.prototype={constructor:o.ObjectLoader,load:function(t,e,i,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this,a=new o.XHRLoader(r.manager);a.setCrossOrigin(this.crossOrigin),a.load(t,function(t){r.parse(JSON.parse(t),e)},i,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseGeometries(t.geometries),n=this.parseImages(t.images,function(){void 0!==e&&e(a)}),r=this.parseTextures(t.textures,n),o=this.parseMaterials(t.materials,r),a=this.parseObject(t.object,i,o);return t.animations&&(a.animations=this.parseAnimations(t.animations)),(void 0===t.images||0===t.images.length)&&void 0!==e&&e(a),a},parseGeometries:function(t){var e={};if(void 0!==t)for(var i=new o.JSONLoader,n=new o.BufferGeometryLoader,r=0,a=t.length;a>r;r++){var s,u=t[r];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new o[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"CubeGeometry":s=new o.BoxGeometry(u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleBufferGeometry":s=new o.CircleBufferGeometry(u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CircleGeometry":s=new o.CircleGeometry(u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":s=new o.CylinderGeometry(u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":s=new o.SphereGeometry(u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"SphereBufferGeometry":s=new o.SphereBufferGeometry(u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":s=new o.DodecahedronGeometry(u.radius,u.detail);break;case"IcosahedronGeometry":s=new o.IcosahedronGeometry(u.radius,u.detail);break;case"OctahedronGeometry":s=new o.OctahedronGeometry(u.radius,u.detail);break;case"TetrahedronGeometry":s=new o.TetrahedronGeometry(u.radius,u.detail);break;case"RingGeometry":s=new o.RingGeometry(u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":s=new o.TorusGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":s=new o.TorusKnotGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.p,u.q,u.heightScale);break;case"BufferGeometry":s=n.parse(u);break;case"Geometry":s=i.parse(u.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),e[u.uuid]=s}return e},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new o.MaterialLoader;n.setTextures(e);for(var r=0,a=t.length;a>r;r++){var s=n.parse(t[r]);i[s.uuid]=s}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=o.AnimationClip.parse(t[i]);e.push(n)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),s.load(t,function(){n.manager.itemEnd(t)})}var n=this,r={};if(void 0!==t&&t.length>0){var a=new o.LoadingManager(e),s=new o.ImageLoader(a);s.setCrossOrigin(this.crossOrigin);for(var u=0,l=t.length;l>u;u++){var h=t[u],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:n.texturePath+h.url;r[h.uuid]=i(c)}}return r},parseTextures:function(t,e){function i(t){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),o[t])}var n={};if(void 0!==t)for(var r=0,a=t.length;a>r;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var u=new o.Texture(e[s.image]);u.needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=i(s.mapping)),void 0!==s.offset&&(u.offset=new o.Vector2(s.offset[0],s.offset[1])),void 0!==s.repeat&&(u.repeat=new o.Vector2(s.repeat[0],s.repeat[1])),void 0!==s.minFilter&&(u.minFilter=i(s.minFilter)),void 0!==s.magFilter&&(u.magFilter=i(s.magFilter)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),Array.isArray(s.wrap)&&(u.wrapS=i(s.wrap[0]),u.wrapT=i(s.wrap[1])),n[s.uuid]=u}return n},parseObject:function(){var t=new o.Matrix4;return function(e,i,n){function r(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),i[t]}function a(t){return void 0!==t?(void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]):void 0}var s;switch(e.type){case"Scene":s=new o.Scene;break;case"PerspectiveCamera":s=new o.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":s=new o.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new o.AmbientLight(e.color);break;case"DirectionalLight":s=new o.DirectionalLight(e.color,e.intensity);break;case"PointLight":s=new o.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new o.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent,e.decay);break;case"HemisphereLight":s=new o.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":s=new o.Mesh(r(e.geometry),a(e.material));break;case"LOD":s=new o.LOD;break;case"Line":s=new o.Line(r(e.geometry),a(e.material),e.mode);break;case"PointCloud":case"Points":s=new o.Points(r(e.geometry),a(e.material));break;case"Sprite":s=new o.Sprite(a(e.material));break;case"Group":s=new o.Group;break;default:s=new o.Object3D}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var u in e.children)s.add(this.parseObject(e.children[u],i,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var c=l[h],u=s.getObjectByProperty("uuid",c.object);void 0!==u&&s.addLevel(u,c.distance)}return s}}()},o.TextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},o.TextureLoader.prototype={constructor:o.TextureLoader,load:function(t,e,i,n){var r=new o.Texture,a=new o.ImageLoader(this.manager);return a.setCrossOrigin(this.crossOrigin),a.load(t,function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)},i,n),r},setCrossOrigin:function(t){this.crossOrigin=t}},o.CubeTextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},o.CubeTextureLoader.prototype={constructor:o.CubeTextureLoader,load:function(t,e,i,n){function r(i){s.load(t[i],function(t){a.images[i]=t,u++,6===u&&(a.needsUpdate=!0,e&&e(a))},void 0,n)}var a=new o.CubeTexture([]),s=new o.ImageLoader;s.setCrossOrigin(this.crossOrigin);for(var u=0,l=0;l<t.length;++l)r(l);return a},setCrossOrigin:function(t){this.crossOrigin=t}},o.DataTextureLoader=o.BinaryTextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this._parser=null},o.BinaryTextureLoader.prototype={constructor:o.BinaryTextureLoader,load:function(t,e,i,n){var r=this,a=new o.DataTexture,s=new o.XHRLoader(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setResponseType("arraybuffer"),s.load(t,function(t){var i=r._parser(t);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:o.ClampToEdgeWrapping,a.wrapT=void 0!==i.wrapT?i.wrapT:o.ClampToEdgeWrapping,a.magFilter=void 0!==i.magFilter?i.magFilter:o.LinearFilter,a.minFilter=void 0!==i.minFilter?i.minFilter:o.LinearMipMapLinearFilter,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps),1===i.mipmapCount&&(a.minFilter=o.LinearFilter),a.needsUpdate=!0,e&&e(a,i))},i,n),a},setCrossOrigin:function(t){this.crossOrigin=t}},o.CompressedTextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this._parser=null},o.CompressedTextureLoader.prototype={constructor:o.CompressedTextureLoader,load:function(t,e,i,n){var r=this,a=[],s=new o.CompressedTexture;s.image=a;var u=new o.XHRLoader(this.manager);if(u.setCrossOrigin(this.crossOrigin),u.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,h=function(h){u.load(t[h],function(t){var i=r._parser(t,!0);a[h]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(s.minFilter=o.LinearFilter),s.format=i.format,s.needsUpdate=!0,e&&e(s))},i,n)},c=0,p=t.length;p>c;++c)h(c);else u.load(t,function(t){var i=r._parser(t,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,u=0;n>u;u++){a[u]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)a[u].mipmaps.push(i.mipmaps[u*i.mipmapCount+l]),a[u].format=i.format,a[u].width=i.width,a[u].height=i.height}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=o.LinearFilter),s.format=i.format,s.needsUpdate=!0,e&&e(s)},i,n);return s},setCrossOrigin:function(t){this.crossOrigin=t}},o.Material=function(){Object.defineProperty(this,"id",{value:o.MaterialIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Material",this.side=o.FrontSide,this.opacity=1,this.transparent=!1,this.blending=o.NormalBlending,this.blendSrc=o.SrcAlphaFactor,this.blendDst=o.OneMinusSrcAlphaFactor,this.blendEquation=o.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=o.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},o.Material.prototype={constructor:o.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){var n=this[e];void 0!==n?n instanceof o.Color?n.set(i):n instanceof o.Vector3&&i instanceof o.Vector3?n.copy(i):"overdraw"===e?this[e]=Number(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};return e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),this.color instanceof o.Color&&(e.color=this.color.getHex()),this.emissive instanceof o.Color&&(e.emissive=this.emissive.getHex()),this.specular instanceof o.Color&&(e.specular=this.specular.getHex()),void 0!==this.shininess&&(e.shininess=this.shininess),this.map instanceof o.Texture&&(e.map=this.map.toJSON(t).uuid),this.alphaMap instanceof o.Texture&&(e.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap instanceof o.Texture&&(e.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap instanceof o.Texture&&(e.bumpMap=this.bumpMap.toJSON(t).uuid,e.bumpScale=this.bumpScale),this.normalMap instanceof o.Texture&&(e.normalMap=this.normalMap.toJSON(t).uuid,e.normalScale=this.normalScale),this.displacementMap instanceof o.Texture&&(e.displacementMap=this.displacementMap.toJSON(t).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias),this.specularMap instanceof o.Texture&&(e.specularMap=this.specularMap.toJSON(t).uuid),this.envMap instanceof o.Texture&&(e.envMap=this.envMap.toJSON(t).uuid,e.reflectivity=this.reflectivity),void 0!==this.size&&(e.size=this.size),void 0!==this.sizeAttenuation&&(e.sizeAttenuation=this.sizeAttenuation),void 0!==this.vertexColors&&this.vertexColors!==o.NoColors&&(e.vertexColors=this.vertexColors),void 0!==this.shading&&this.shading!==o.SmoothShading&&(e.shading=this.shading),void 0!==this.blending&&this.blending!==o.NormalBlending&&(e.blending=this.blending),void 0!==this.side&&this.side!==o.FrontSide&&(e.side=this.side),this.opacity<1&&(e.opacity=this.opacity),this.transparent===!0&&(e.transparent=this.transparent),this.alphaTest>0&&(e.alphaTest=this.alphaTest),this.wireframe===!0&&(e.wireframe=this.wireframe),this.wireframeLinewidth>1&&(e.wireframeLinewidth=this.wireframeLinewidth),e},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.side=t.side,this.opacity=t.opacity,this.transparent=t.transparent,this.blending=t.blending,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.overdraw=t.overdraw,this.visible=t.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set wrapAround(t){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new o.Color}},o.EventDispatcher.prototype.apply(o.Material.prototype),o.MaterialIdCount=0,o.LineBasicMaterial=function(t){o.Material.call(this),this.type="LineBasicMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=o.NoColors,this.fog=!0,this.setValues(t)},o.LineBasicMaterial.prototype=Object.create(o.Material.prototype),o.LineBasicMaterial.prototype.constructor=o.LineBasicMaterial,o.LineBasicMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.vertexColors=t.vertexColors,this.fog=t.fog,this},o.LineDashedMaterial=function(t){o.Material.call(this),this.type="LineDashedMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(t)},o.LineDashedMaterial.prototype=Object.create(o.Material.prototype),o.LineDashedMaterial.prototype.constructor=o.LineDashedMaterial,o.LineDashedMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this.vertexColors=t.vertexColors,this.fog=t.fog,this},o.MeshBasicMaterial=function(t){o.Material.call(this),this.type="MeshBasicMaterial",this.color=new o.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=o.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(t)},o.MeshBasicMaterial.prototype=Object.create(o.Material.prototype),o.MeshBasicMaterial.prototype.constructor=o.MeshBasicMaterial,o.MeshBasicMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},o.MeshLambertMaterial=function(t){o.Material.call(this),this.type="MeshLambertMaterial",this.color=new o.Color(16777215),this.emissive=new o.Color(0),this.map=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},o.MeshLambertMaterial.prototype=Object.create(o.Material.prototype),o.MeshLambertMaterial.prototype.constructor=o.MeshLambertMaterial,o.MeshLambertMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.emissive.copy(t.emissive),this.map=t.map,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},o.MeshPhongMaterial=function(t){o.Material.call(this),this.type="MeshPhongMaterial",this.color=new o.Color(16777215),this.emissive=new o.Color(0),this.specular=new o.Color(1118481),this.shininess=30,this.metal=!1,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=o.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},o.MeshPhongMaterial.prototype=Object.create(o.Material.prototype),o.MeshPhongMaterial.prototype.constructor=o.MeshPhongMaterial,o.MeshPhongMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.emissive.copy(t.emissive),this.specular.copy(t.specular),this.shininess=t.shininess,this.metal=t.metal,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissiveMap=t.emissiveMap,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},o.MeshDepthMaterial=function(t){o.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)},o.MeshDepthMaterial.prototype=Object.create(o.Material.prototype),o.MeshDepthMaterial.prototype.constructor=o.MeshDepthMaterial,o.MeshDepthMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},o.MeshNormalMaterial=function(t){o.Material.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},o.MeshNormalMaterial.prototype=Object.create(o.Material.prototype),o.MeshNormalMaterial.prototype.constructor=o.MeshNormalMaterial,o.MeshNormalMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},o.MultiMaterial=function(t){this.uuid=o.Math.generateUUID(),this.type="MultiMaterial",this.materials=t instanceof Array?t:[],this.visible=!0},o.MultiMaterial.prototype={constructor:o.MultiMaterial,toJSON:function(){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},e=0,i=this.materials.length;i>e;e++)t.materials.push(this.materials[e].toJSON());return t.visible=this.visible,t},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},o.MeshFaceMaterial=o.MultiMaterial,o.PointsMaterial=function(t){o.Material.call(this),this.type="PointsMaterial",this.color=new o.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=o.NoColors,this.fog=!0,this.setValues(t)},o.PointsMaterial.prototype=Object.create(o.Material.prototype),o.PointsMaterial.prototype.constructor=o.PointsMaterial,o.PointsMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.vertexColors=t.vertexColors,this.fog=t.fog,this},o.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(t)},o.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(t)},o.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(t)},o.ShaderMaterial=function(t){o.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=o.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.derivatives=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))},o.ShaderMaterial.prototype=Object.create(o.Material.prototype),o.ShaderMaterial.prototype.constructor=o.ShaderMaterial,o.ShaderMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=o.UniformsUtils.clone(t.uniforms),this.attributes=t.attributes,this.defines=t.defines,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.derivatives=t.derivatives,this},o.ShaderMaterial.prototype.toJSON=function(t){var e=o.Material.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.attributes=this.attributes,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},o.RawShaderMaterial=function(t){o.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},o.RawShaderMaterial.prototype=Object.create(o.ShaderMaterial.prototype),o.RawShaderMaterial.prototype.constructor=o.RawShaderMaterial,o.SpriteMaterial=function(t){o.Material.call(this),this.type="SpriteMaterial",this.color=new o.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(t)},o.SpriteMaterial.prototype=Object.create(o.Material.prototype),o.SpriteMaterial.prototype.constructor=o.SpriteMaterial,o.SpriteMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.fog=t.fog,this},o.Texture=function(t,e,i,n,r,a,s,u,l){Object.defineProperty(this,"id",{value:o.TextureIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==t?t:o.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:o.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:o.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:o.ClampToEdgeWrapping,this.magFilter=void 0!==r?r:o.LinearFilter,this.minFilter=void 0!==a?a:o.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:o.RGBAFormat,this.type=void 0!==u?u:o.UnsignedByteType,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.version=0,this.onUpdate=null},o.Texture.DEFAULT_IMAGE=void 0,o.Texture.DEFAULT_MAPPING=o.UVMapping,o.Texture.prototype={constructor:o.Texture,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this},toJSON:function(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=o.Math.generateUUID()),void 0===t.images[n.uuid]&&(t.images[n.uuid]={uuid:n.uuid,url:e(n)}),i.image=n.uuid}return t.textures[this.uuid]=i,i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===o.UVMapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case o.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case o.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case o.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case o.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case o.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case o.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},o.EventDispatcher.prototype.apply(o.Texture.prototype),o.TextureIdCount=0,o.CanvasTexture=function(t,e,i,n,r,a,s,u,l){o.Texture.call(this,t,e,i,n,r,a,s,u,l),this.needsUpdate=!0},o.CanvasTexture.prototype=Object.create(o.Texture.prototype),o.CanvasTexture.prototype.constructor=o.CanvasTexture,o.CubeTexture=function(t,e,i,n,r,a,s,u,l){e=void 0!==e?e:o.CubeReflectionMapping,o.Texture.call(this,t,e,i,n,r,a,s,u,l),this.images=t,this.flipY=!1},o.CubeTexture.prototype=Object.create(o.Texture.prototype),o.CubeTexture.prototype.constructor=o.CubeTexture,o.CubeTexture.prototype.copy=function(t){return o.Texture.prototype.copy.call(this,t),this.images=t.images,this},o.CompressedTexture=function(t,e,i,n,r,a,s,u,l,h,c){o.Texture.call(this,null,a,s,u,l,h,n,r,c),
this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1},o.CompressedTexture.prototype=Object.create(o.Texture.prototype),o.CompressedTexture.prototype.constructor=o.CompressedTexture,o.DataTexture=function(t,e,i,n,r,a,s,u,l,h,c){o.Texture.call(this,null,a,s,u,l,h,n,r,c),this.image={data:t,width:e,height:i},this.magFilter=void 0!==l?l:o.NearestFilter,this.minFilter=void 0!==h?h:o.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},o.DataTexture.prototype=Object.create(o.Texture.prototype),o.DataTexture.prototype.constructor=o.DataTexture,o.VideoTexture=function(t,e,i,n,r,a,s,u,l){function h(){requestAnimationFrame(h),t.readyState===t.HAVE_ENOUGH_DATA&&(c.needsUpdate=!0)}o.Texture.call(this,t,e,i,n,r,a,s,u,l),this.generateMipmaps=!1;var c=this;h()},o.VideoTexture.prototype=Object.create(o.Texture.prototype),o.VideoTexture.prototype.constructor=o.VideoTexture,o.Group=function(){o.Object3D.call(this),this.type="Group"},o.Group.prototype=Object.create(o.Object3D.prototype),o.Group.prototype.constructor=o.Group,o.Points=function(t,e){o.Object3D.call(this),this.type="Points",this.geometry=void 0!==t?t:new o.Geometry,this.material=void 0!==e?e:new o.PointsMaterial({color:16777215*Math.random()})},o.Points.prototype=Object.create(o.Object3D.prototype),o.Points.prototype.constructor=o.Points,o.Points.prototype.raycast=function(){var t=new o.Matrix4,e=new o.Ray;return function(i,n){function r(t,r){var o=e.distanceSqToPoint(t);if(h>o){var s=e.closestPointToPoint(t);s.applyMatrix4(a.matrixWorld);var u=i.ray.origin.distanceTo(s);if(u<i.near||u>i.far)return;n.push({distance:u,distanceToRay:Math.sqrt(o),point:s.clone(),index:r,face:null,object:a})}}var a=this,s=a.geometry,u=i.params.Points.threshold;if(t.getInverse(this.matrixWorld),e.copy(i.ray).applyMatrix4(t),null===s.boundingBox||e.isIntersectionBox(s.boundingBox)!==!1){var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),h=l*l,c=new o.Vector3;if(s instanceof o.BufferGeometry){var p=s.index,d=s.attributes,f=d.position.array;if(null!==p)for(var m=p.array,y=0,v=m.length;v>y;y++){var g=m[y];c.fromArray(f,3*g),r(c,g)}else for(var y=0,b=f.length/3;b>y;y++)c.fromArray(f,3*y),r(c,y)}else for(var x=s.vertices,y=0,b=x.length;b>y;y++)r(x[y],y)}}}(),o.Points.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},o.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new o.Points(t,e)},o.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new o.Points(t,e)},o.Line=function(t,e,i){return 1===i?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new o.LineSegments(t,e)):(o.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new o.Geometry,void(this.material=void 0!==e?e:new o.LineBasicMaterial({color:16777215*Math.random()})))},o.Line.prototype=Object.create(o.Object3D.prototype),o.Line.prototype.constructor=o.Line,o.Line.prototype.raycast=function(){var t=new o.Matrix4,e=new o.Ray,i=new o.Sphere;return function(n,r){var a=n.linePrecision,s=a*a,u=this.geometry;if(null===u.boundingSphere&&u.computeBoundingSphere(),i.copy(u.boundingSphere),i.applyMatrix4(this.matrixWorld),n.ray.isIntersectionSphere(i)!==!1){t.getInverse(this.matrixWorld),e.copy(n.ray).applyMatrix4(t);var l=new o.Vector3,h=new o.Vector3,c=new o.Vector3,p=new o.Vector3,d=this instanceof o.LineSegments?2:1;if(u instanceof o.BufferGeometry){var f=u.index,m=u.attributes;if(null!==f)for(var y=f.array,v=m.position.array,g=0,b=y.length-1;b>g;g+=d){var x=y[g],_=y[g+1];l.fromArray(v,3*x),h.fromArray(v,3*_);var w=e.distanceSqToSegment(l,h,p,c);if(!(w>s)){p.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(p);M<n.near||M>n.far||r.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else for(var v=m.position.array,g=0,b=v.length/3-1;b>g;g+=d){l.fromArray(v,3*g),h.fromArray(v,3*g+3);var w=e.distanceSqToSegment(l,h,p,c);if(!(w>s)){p.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(p);M<n.near||M>n.far||r.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}else if(u instanceof o.Geometry)for(var S=u.vertices,C=S.length,g=0;C-1>g;g+=d){var w=e.distanceSqToSegment(S[g],S[g+1],p,c);if(!(w>s)){p.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(p);M<n.near||M>n.far||r.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}}}(),o.Line.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},o.LineStrip=0,o.LinePieces=1,o.LineSegments=function(t,e){o.Line.call(this,t,e),this.type="LineSegments"},o.LineSegments.prototype=Object.create(o.Line.prototype),o.LineSegments.prototype.constructor=o.LineSegments,o.Mesh=function(t,e){o.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new o.Geometry,this.material=void 0!==e?e:new o.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},o.Mesh.prototype=Object.create(o.Object3D.prototype),o.Mesh.prototype.constructor=o.Mesh,o.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;e>t;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},o.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},o.Mesh.prototype.raycast=function(){function t(t,e,i,n,r,a,s){return o.Triangle.barycoordFromPoint(t,e,i,n,y),r.multiplyScalar(y.x),a.multiplyScalar(y.y),s.multiplyScalar(y.z),r.add(a).add(s),r.clone()}function e(t,e,i,n,r,a,s){var u,l=t.material;if(u=l.side===o.BackSide?i.intersectTriangle(a,r,n,!0,s):i.intersectTriangle(n,r,a,l.side!==o.DoubleSide,s),null===u)return null;g.copy(s),g.applyMatrix4(t.matrixWorld);var h=e.ray.origin.distanceTo(g);return h<e.near||h>e.far?null:{distance:h,point:g.clone(),object:t}}function i(i,n,r,a,h,c,p,y){s.fromArray(a,3*c),u.fromArray(a,3*p),l.fromArray(a,3*y);var g=e(i,n,r,s,u,l,v);return g&&(h&&(d.fromArray(h,2*c),f.fromArray(h,2*p),m.fromArray(h,2*y),g.uv=t(v,s,u,l,d,f,m)),g.face=new o.Face3(c,p,y,o.Triangle.normal(s,u,l)),g.faceIndex=c),g}var n=new o.Matrix4,r=new o.Ray,a=new o.Sphere,s=new o.Vector3,u=new o.Vector3,l=new o.Vector3,h=new o.Vector3,c=new o.Vector3,p=new o.Vector3,d=new o.Vector2,f=new o.Vector2,m=new o.Vector2,y=new o.Vector3,v=new o.Vector3,g=new o.Vector3;return function(y,g){var b=this.geometry,x=this.material;if(void 0!==x){null===b.boundingSphere&&b.computeBoundingSphere();var _=this.matrixWorld;if(a.copy(b.boundingSphere),a.applyMatrix4(_),y.ray.isIntersectionSphere(a)!==!1&&(n.getInverse(_),r.copy(y.ray).applyMatrix4(n),null===b.boundingBox||r.isIntersectionBox(b.boundingBox)!==!1)){var w,M;if(b instanceof o.BufferGeometry){var S,C,E,T=b.index,P=b.attributes,A=P.position.array;if(void 0!==P.uv&&(w=P.uv.array),null!==T)for(var k=T.array,O=0,N=k.length;N>O;O+=3)S=k[O],C=k[O+1],E=k[O+2],M=i(this,y,r,A,w,S,C,E),M&&(M.faceIndex=Math.floor(O/3),g.push(M));else for(var O=0,N=A.length;N>O;O+=9)S=O/3,C=S+1,E=S+2,M=i(this,y,r,A,w,S,C,E),M&&(M.index=S,g.push(M))}else if(b instanceof o.Geometry){var D,L,R,I=x instanceof o.MeshFaceMaterial,z=I===!0?x.materials:null,j=b.vertices,V=b.faces,B=b.faceVertexUvs[0];B.length>0&&(w=B);for(var U=0,F=V.length;F>U;U++){var G=V[U],H=I===!0?z[G.materialIndex]:x;if(void 0!==H){if(D=j[G.a],L=j[G.b],R=j[G.c],H.morphTargets===!0){var W=b.morphTargets,X=this.morphTargetInfluences;s.set(0,0,0),u.set(0,0,0),l.set(0,0,0);for(var q=0,Y=W.length;Y>q;q++){var K=X[q];if(0!==K){var Z=W[q].vertices;s.addScaledVector(h.subVectors(Z[G.a],D),K),u.addScaledVector(c.subVectors(Z[G.b],L),K),l.addScaledVector(p.subVectors(Z[G.c],R),K)}}s.add(D),u.add(L),l.add(R),D=s,L=u,R=l}if(M=e(this,y,r,D,L,R,v)){if(w){var J=w[U];d.copy(J[0]),f.copy(J[1]),m.copy(J[2]),M.uv=t(v,D,L,R,d,f,m)}M.face=G,M.faceIndex=U,g.push(M)}}}}}}}}(),o.Mesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},o.Bone=function(t){o.Object3D.call(this),this.type="Bone",this.skin=t},o.Bone.prototype=Object.create(o.Object3D.prototype),o.Bone.prototype.constructor=o.Bone,o.Bone.prototype.copy=function(t){return o.Object3D.prototype.copy.call(this,t),this.skin=t.skin,this},o.Skeleton=function(t,e,i){if(this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new o.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=o.Math.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new o.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,o.RGBAFormat,o.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var r=0,a=this.bones.length;a>r;r++)this.boneInverses.push(new o.Matrix4)}},o.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var t=0,e=this.bones.length;e>t;t++){var i=new o.Matrix4;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},o.Skeleton.prototype.pose=function(){for(var t,e=0,i=this.bones.length;i>e;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,i=this.bones.length;i>e;e++)t=this.bones[e],t&&(t.parent?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},o.Skeleton.prototype.update=function(){var t=new o.Matrix4;return function(){for(var e=0,i=this.bones.length;i>e;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(n,this.boneInverses[e]),t.flattenToArrayOffset(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),o.Skeleton.prototype.clone=function(){return new o.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)},o.SkinnedMesh=function(t,e,i){o.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o.Matrix4,this.bindMatrixInverse=new o.Matrix4;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,a,s=0,u=this.geometry.bones.length;u>s;++s)a=this.geometry.bones[s],r=new o.Bone(this),n.push(r),r.name=a.name,r.position.fromArray(a.pos),r.quaternion.fromArray(a.rotq),void 0!==a.scl&&r.scale.fromArray(a.scl);for(var s=0,u=this.geometry.bones.length;u>s;++s)a=this.geometry.bones[s],-1!==a.parent&&null!==a.parent?n[a.parent].add(n[s]):this.add(n[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new o.Skeleton(n,void 0,i),this.matrixWorld)},o.SkinnedMesh.prototype=Object.create(o.Mesh.prototype),o.SkinnedMesh.prototype.constructor=o.SkinnedMesh,o.SkinnedMesh.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},o.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},o.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof o.Geometry)for(var t=0;t<this.geometry.skinIndices.length;t++){var e=this.geometry.skinWeights[t],i=1/e.lengthManhattan();i!==1/0?e.multiplyScalar(i):e.set(1)}},o.SkinnedMesh.prototype.updateMatrixWorld=function(t){o.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},o.SkinnedMesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)},o.LOD=function(){o.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}})},o.LOD.prototype=Object.create(o.Object3D.prototype),o.LOD.prototype.constructor=o.LOD,o.LOD.prototype.addLevel=function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},o.LOD.prototype.getObjectForDistance=function(t){for(var e=this.levels,i=1,n=e.length;n>i&&!(t<e[i].distance);i++);return e[i-1].object},o.LOD.prototype.raycast=function(){var t=new o.Vector3;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),o.LOD.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3;return function(i){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);n[0].object.visible=!0;for(var o=1,a=n.length;a>o&&r>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;a>o;o++)n[o].object.visible=!1}}}(),o.LOD.prototype.copy=function(t){o.Object3D.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,n=e.length;n>i;i++){var r=e[i];this.addLevel(r.object.clone(),r.distance)}return this},o.LOD.prototype.toJSON=function(t){var e=o.Object3D.prototype.toJSON.call(this,t);e.object.levels=[];for(var i=this.levels,n=0,r=i.length;r>n;n++){var a=i[n];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e},o.Sprite=function(){var t=new Uint16Array([0,1,2,0,2,3]),e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),i=new Float32Array([0,0,1,0,1,1,0,1]),n=new o.BufferGeometry;return n.setIndex(new o.BufferAttribute(t,1)),n.addAttribute("position",new o.BufferAttribute(e,3)),n.addAttribute("uv",new o.BufferAttribute(i,2)),function(t){o.Object3D.call(this),this.type="Sprite",this.geometry=n,this.material=void 0!==t?t:new o.SpriteMaterial}}(),o.Sprite.prototype=Object.create(o.Object3D.prototype),o.Sprite.prototype.constructor=o.Sprite,o.Sprite.prototype.raycast=function(){var t=new o.Vector3;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(t),r=this.scale.x*this.scale.y;n>r||i.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),o.Sprite.prototype.clone=function(){return new this.constructor(this.material).copy(this)},o.Particle=o.Sprite,o.LensFlare=function(t,e,i,n,r){o.Object3D.call(this),this.lensFlares=[],this.positionScreen=new o.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,i,n,r)},o.LensFlare.prototype=Object.create(o.Object3D.prototype),o.LensFlare.prototype.constructor=o.LensFlare,o.LensFlare.prototype.add=function(t,e,i,n,r,a){void 0===e&&(e=-1),void 0===i&&(i=0),void 0===a&&(a=1),void 0===r&&(r=new o.Color(16777215)),void 0===n&&(n=o.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:e,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:r,blending:n})},o.LensFlare.prototype.updateLensFlares=function(){var t,e,i=this.lensFlares.length,n=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;i>t;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+n*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)},o.LensFlare.prototype.copy=function(t){o.Object3D.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,i=t.lensFlares.length;i>e;e++)this.lensFlares.push(t.lensFlares[e]);return this},o.Scene=function(){o.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},o.Scene.prototype=Object.create(o.Object3D.prototype),o.Scene.prototype.constructor=o.Scene,o.Scene.prototype.copy=function(t){return o.Object3D.prototype.copy.call(this,t),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},o.Fog=function(t,e,i){this.name="",this.color=new o.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3},o.Fog.prototype.clone=function(){return new o.Fog(this.color.getHex(),this.near,this.far)},o.FogExp2=function(t,e){this.name="",this.color=new o.Color(t),this.density=void 0!==e?e:25e-5},o.FogExp2.prototype.clone=function(){return new o.FogExp2(this.color.getHex(),this.density)},o.ShaderChunk={},o.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",o.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",o.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",o.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n	totalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n",o.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n\n#endif",o.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",o.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",o.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n",o.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif",o.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",o.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",o.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	vColor.xyz = color.xyz;\n\n#endif",o.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	float distance = dot( planeNormal, point - pointOnPlane );\n\n	return - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n	if ( decayExponent > 0.0 ) {\n\n	  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n	}\n\n	return 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\n	float fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\n	return 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\n	return ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n	vec3 halfDir = normalize( lightDir + viewDir );\n\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotLH = saturate( dot( lightDir, halfDir ) );\n\n	vec3 F = F_Schlick( specularColor, dotLH );\n\n	float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n	float D = D_BlinnPhong( shininess, dotNH );\n\n	return F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n	#ifdef GAMMA_INPUT\n\n		return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n	#ifdef GAMMA_OUTPUT\n\n		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n",o.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",o.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n",o.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n\n#endif\n",o.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n	emissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n	totalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n",o.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n	uniform sampler2D emissiveMap;\n\n#endif\n",o.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",o.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",o.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",o.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",o.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",o.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",o.ShaderChunk.hemilight_fragment="#if MAX_HEMI_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalAmbientLight += lightColor;\n\n	}\n\n#endif\n\n",o.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	totalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n",o.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n\n#endif",o.ShaderChunk.lights_lambert_pars_vertex="#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n",o.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n\n			float dotProduct = dot( normal, lightDir );\n\n			vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			float hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n",o.ShaderChunk.lights_phong_fragment="vec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lightPosition = pointLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n\n			float cosineTerm = saturate( dot( normal, lightDir ) );\n\n			totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n			vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n			totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * cosineTerm;\n\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n	}\n\n#endif\n",
o.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n",o.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\n#endif\n",o.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif\n",o.ShaderChunk.linear_to_gamma_fragment="\n	outgoingLight = linearToOutput( outgoingLight );\n",o.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",o.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n#endif\n",o.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",o.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",o.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif\n",o.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",o.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",o.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n",o.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",o.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",o.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n#endif\n",o.ShaderChunk.normal_phong_fragment="#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n",o.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",o.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",o.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	for ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		float texelSizeY =  1.0 / shadowMapSize[ i ].y;\n\n		float shadow = 0.0;\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n		bool isPointLight = shadowDarkness[ i ] < 0.0;\n\n		if ( isPointLight ) {\n\n			float realShadowDarkness = abs( shadowDarkness[ i ] );\n\n			vec3 lightToPosition = vShadowCoord[ i ].xyz;\n\n	#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n			vec3 bd3D = normalize( lightToPosition );\n			float dp = length( lightToPosition );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\n	#if defined( SHADOWMAP_TYPE_PCF )\n			const float Dr = 1.25;\n	#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			const float Dr = 2.25;\n	#endif\n\n			float os = Dr *  2.0 * texelSizeY;\n\n			const vec3 Gsd = vec3( - 1, 0, 1 );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			shadow *= realShadowDarkness * ( 1.0 / 21.0 );\n\n	#else \n			vec3 bd3D = normalize( lightToPosition );\n			float dp = length( lightToPosition );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			shadow *= realShadowDarkness;\n\n	#endif\n\n		} else {\n\n#endif \n			float texelSizeX =  1.0 / shadowMapSize[ i ].x;\n\n			vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\n			bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n			bool inFrustum = all( inFrustumVec );\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n			bool frustumTest = all( frustumTestVec );\n\n			if ( frustumTest ) {\n\n	#if defined( SHADOWMAP_TYPE_PCF )\n\n\n				/*\n					for ( float y = -1.25; y <= 1.25; y += 1.25 )\n						for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n							vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n							float fDepth = unpackDepth( rgbaDepth );\n							if ( fDepth < shadowCoord.z )\n								shadow += 1.0;\n					}\n					shadow /= 9.0;\n				*/\n\n				shadowCoord.z += shadowBias[ i ];\n\n				const float ShadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = texelSizeX;\n				float yPixelOffset = texelSizeY;\n\n				float dx0 = - 1.25 * xPixelOffset;\n				float dy0 = - 1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				float fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				shadow *= shadowDarkness[ i ];\n\n	#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\n				shadowCoord.z += shadowBias[ i ];\n\n				float xPixelOffset = texelSizeX;\n				float yPixelOffset = texelSizeY;\n\n				float dx0 = - 1.0 * xPixelOffset;\n				float dy0 = - 1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[ 0 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[ 0 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[ 0 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[ 1 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[ 1 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[ 1 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[ 2 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[ 2 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[ 2 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[ 0 ] = vec3( lessThan( depthKernel[ 0 ], shadowZ ) );\n				shadowKernel[ 0 ] *= vec3( 0.25 );\n\n				shadowKernel[ 1 ] = vec3( lessThan( depthKernel[ 1 ], shadowZ ) );\n				shadowKernel[ 1 ] *= vec3( 0.25 );\n\n				shadowKernel[ 2 ] = vec3( lessThan( depthKernel[ 2 ], shadowZ ) );\n				shadowKernel[ 2 ] *= vec3( 0.25 );\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[ i ].xy );\n\n				shadowKernel[ 0 ] = mix( shadowKernel[ 1 ], shadowKernel[ 0 ], fractionalCoord.x );\n				shadowKernel[ 1 ] = mix( shadowKernel[ 2 ], shadowKernel[ 1 ], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[ 0 ][ 1 ], shadowKernel[ 0 ][ 0 ], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[ 0 ][ 2 ], shadowKernel[ 0 ][ 1 ], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[ 1 ][ 1 ], shadowKernel[ 1 ][ 0 ], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[ 1 ][ 2 ], shadowKernel[ 1 ][ 1 ], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) ) * shadowDarkness[ i ];\n\n	#else \n				shadowCoord.z += shadowBias[ i ];\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n					shadow = shadowDarkness[ i ];\n\n	#endif\n\n			}\n\n#ifdef SHADOWMAP_DEBUG\n\n			if ( inFrustum ) {\n\n				if ( i == 0 ) {\n\n					outgoingLight *= vec3( 1.0, 0.5, 0.0 );\n\n				} else if ( i == 1 ) {\n\n					outgoingLight *= vec3( 0.0, 1.0, 0.8 );\n\n				} else {\n\n					outgoingLight *= vec3( 0.0, 0.5, 1.0 );\n\n				}\n\n			}\n\n#endif\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n		}\n\n#endif\n\n		shadowMask = shadowMask * vec3( 1.0 - shadow );\n\n	}\n\n#endif\n",o.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n	#if defined(POINT_LIGHT_SHADOWS)\n\n\n		void adjustShadowValue1K( const float testDepth, const vec4 textureData, const float bias, inout float shadowValue ) {\n\n			const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n			if ( testDepth >= dot( textureData, bitSh ) * 1000.0 + bias )\n				shadowValue += 1.0;\n\n		}\n\n\n		vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\n			vec3 absV = abs( v );\n\n\n			float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n			absV *= scaleToCube;\n\n\n			v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\n\n			vec2 planar = v.xy;\n\n			float almostATexel = 1.5 * texelSizeY;\n			float almostOne = 1.0 - almostATexel;\n\n			if ( absV.z >= almostOne ) {\n\n				if ( v.z > 0.0 )\n					planar.x = 4.0 - v.x;\n\n			} else if ( absV.x >= almostOne ) {\n\n				float signX = sign( v.x );\n				planar.x = v.z * signX + 2.0 * signX;\n\n			} else if ( absV.y >= almostOne ) {\n\n				float signY = sign( v.y );\n				planar.x = v.x + 2.0 * signY + 2.0;\n				planar.y = v.z * signY - 2.0;\n\n			}\n\n\n			return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n		}\n\n	#endif\n\n#endif\n",o.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n#endif",o.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",o.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",o.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",o.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",o.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n",o.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",o.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",o.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	varying vec2 vUv2;\n\n#endif",o.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n\n#endif",o.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	vUv2 = uv2;\n\n#endif",o.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n\n#endif",o.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",o.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",o.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n	#endif\n\n#endif\n",o.UniformsUtils={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r instanceof o.Color||r instanceof o.Vector2||r instanceof o.Vector3||r instanceof o.Vector4||r instanceof o.Matrix3||r instanceof o.Matrix4||r instanceof o.Texture?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},o.UniformsLib={common:{diffuse:{type:"c",value:new o.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new o.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new o.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new o.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},points:{psColor:{type:"c",value:new o.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new o.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new o.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},o.ShaderLib={basic:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.fog,o.UniformsLib.shadowmap]),vertexShader:[o.ShaderChunk.common,o.ShaderChunk.uv_pars_vertex,o.ShaderChunk.uv2_pars_vertex,o.ShaderChunk.envmap_pars_vertex,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.uv_vertex,o.ShaderChunk.uv2_vertex,o.ShaderChunk.color_vertex,o.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",o.ShaderChunk.beginnormal_vertex,o.ShaderChunk.morphnormal_vertex,o.ShaderChunk.skinnormal_vertex,o.ShaderChunk.defaultnormal_vertex,"	#endif",o.ShaderChunk.begin_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.project_vertex,o.ShaderChunk.logdepthbuf_vertex,o.ShaderChunk.worldpos_vertex,o.ShaderChunk.envmap_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",o.ShaderChunk.common,o.ShaderChunk.color_pars_fragment,o.ShaderChunk.uv_pars_fragment,o.ShaderChunk.uv2_pars_fragment,o.ShaderChunk.map_pars_fragment,o.ShaderChunk.alphamap_pars_fragment,o.ShaderChunk.aomap_pars_fragment,o.ShaderChunk.envmap_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.specularmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );","	vec3 totalAmbientLight = vec3( 1.0 );","	vec3 shadowMask = vec3( 1.0 );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.alphamap_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.specularmap_fragment,o.ShaderChunk.aomap_fragment,o.ShaderChunk.shadowmap_fragment,"	outgoingLight = diffuseColor.rgb * totalAmbientLight * shadowMask;",o.ShaderChunk.envmap_fragment,o.ShaderChunk.linear_to_gamma_fragment,o.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},lambert:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,o.UniformsLib.lights,o.UniformsLib.shadowmap,{emissive:{type:"c",value:new o.Color(0)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",o.ShaderChunk.common,o.ShaderChunk.uv_pars_vertex,o.ShaderChunk.uv2_pars_vertex,o.ShaderChunk.envmap_pars_vertex,o.ShaderChunk.lights_lambert_pars_vertex,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.uv_vertex,o.ShaderChunk.uv2_vertex,o.ShaderChunk.color_vertex,o.ShaderChunk.beginnormal_vertex,o.ShaderChunk.morphnormal_vertex,o.ShaderChunk.skinbase_vertex,o.ShaderChunk.skinnormal_vertex,o.ShaderChunk.defaultnormal_vertex,o.ShaderChunk.begin_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.project_vertex,o.ShaderChunk.logdepthbuf_vertex,o.ShaderChunk.worldpos_vertex,o.ShaderChunk.envmap_vertex,o.ShaderChunk.lights_lambert_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","uniform vec3 ambientLightColor;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",o.ShaderChunk.common,o.ShaderChunk.color_pars_fragment,o.ShaderChunk.uv_pars_fragment,o.ShaderChunk.uv2_pars_fragment,o.ShaderChunk.map_pars_fragment,o.ShaderChunk.alphamap_pars_fragment,o.ShaderChunk.envmap_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.specularmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );","	vec3 totalAmbientLight = ambientLightColor;","	vec3 shadowMask = vec3( 1.0 );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.alphamap_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.specularmap_fragment,o.ShaderChunk.shadowmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			outgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;","		else","			outgoingLight += diffuseColor.rgb * ( vLightBack * shadowMask + totalAmbientLight ) + emissive;","	#else","		outgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;","	#endif",o.ShaderChunk.envmap_fragment,o.ShaderChunk.linear_to_gamma_fragment,o.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},phong:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.lightmap,o.UniformsLib.emissivemap,o.UniformsLib.bumpmap,o.UniformsLib.normalmap,o.UniformsLib.displacementmap,o.UniformsLib.fog,o.UniformsLib.lights,o.UniformsLib.shadowmap,{emissive:{type:"c",value:new o.Color(0)},specular:{type:"c",value:new o.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",o.ShaderChunk.common,o.ShaderChunk.uv_pars_vertex,o.ShaderChunk.uv2_pars_vertex,o.ShaderChunk.displacementmap_pars_vertex,o.ShaderChunk.envmap_pars_vertex,o.ShaderChunk.lights_phong_pars_vertex,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.uv_vertex,o.ShaderChunk.uv2_vertex,o.ShaderChunk.color_vertex,o.ShaderChunk.beginnormal_vertex,o.ShaderChunk.morphnormal_vertex,o.ShaderChunk.skinbase_vertex,o.ShaderChunk.skinnormal_vertex,o.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",o.ShaderChunk.begin_vertex,o.ShaderChunk.displacementmap_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.project_vertex,o.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = - mvPosition.xyz;",o.ShaderChunk.worldpos_vertex,o.ShaderChunk.envmap_vertex,o.ShaderChunk.lights_phong_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",o.ShaderChunk.common,o.ShaderChunk.color_pars_fragment,o.ShaderChunk.uv_pars_fragment,o.ShaderChunk.uv2_pars_fragment,o.ShaderChunk.map_pars_fragment,o.ShaderChunk.alphamap_pars_fragment,o.ShaderChunk.aomap_pars_fragment,o.ShaderChunk.lightmap_pars_fragment,o.ShaderChunk.emissivemap_pars_fragment,o.ShaderChunk.envmap_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.lights_phong_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.bumpmap_pars_fragment,o.ShaderChunk.normalmap_pars_fragment,o.ShaderChunk.specularmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );","	vec3 totalAmbientLight = ambientLightColor;","	vec3 totalEmissiveLight = emissive;","	vec3 shadowMask = vec3( 1.0 );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.alphamap_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.specularmap_fragment,o.ShaderChunk.normal_phong_fragment,o.ShaderChunk.lightmap_fragment,o.ShaderChunk.hemilight_fragment,o.ShaderChunk.aomap_fragment,o.ShaderChunk.emissivemap_fragment,o.ShaderChunk.lights_phong_fragment,o.ShaderChunk.shadowmap_fragment,"totalDiffuseLight *= shadowMask;","totalSpecularLight *= shadowMask;","#ifdef METAL","	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;","#else","	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;","#endif",o.ShaderChunk.envmap_fragment,o.ShaderChunk.linear_to_gamma_fragment,o.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")
},points:{uniforms:o.UniformsUtils.merge([o.UniformsLib.points,o.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",o.ShaderChunk.common,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",o.ShaderChunk.logdepthbuf_vertex,o.ShaderChunk.worldpos_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",o.ShaderChunk.common,o.ShaderChunk.color_pars_fragment,o.ShaderChunk.map_particle_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( psColor, opacity );","	vec3 shadowMask = vec3( 1.0 );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_particle_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.shadowmap_fragment,"	outgoingLight = diffuseColor.rgb * shadowMask;",o.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},dashed:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",o.ShaderChunk.common,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",o.ShaderChunk.common,o.ShaderChunk.color_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.color_fragment,"	outgoingLight = diffuseColor.rgb;",o.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[o.ShaderChunk.common,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.begin_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.project_vertex,o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",o.ShaderChunk.common,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",o.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",o.ShaderChunk.common,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",o.ShaderChunk.begin_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.project_vertex,o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",o.ShaderChunk.common,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",o.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",o.ShaderChunk.common,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",o.ShaderChunk.common,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",o.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",o.ShaderChunk.common,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",o.ShaderChunk.common,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",o.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[o.ShaderChunk.common,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.skinbase_vertex,o.ShaderChunk.begin_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.project_vertex,o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[o.ShaderChunk.common,o.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",o.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new o.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",o.ShaderChunk.common,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,"void main() {",o.ShaderChunk.skinbase_vertex,o.ShaderChunk.begin_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.project_vertex,o.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;","}"].join("\n"),fragmentShader:["uniform vec3 lightPos;","varying vec4 vWorldPosition;",o.ShaderChunk.common,"vec4 pack1K ( float depth ) {","   depth /= 1000.0;","   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = fract( depth * bitSh );","	res -= res.xxyz * bitMsk;","	return res; ","}","float unpack1K ( vec4 color ) {","	const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","	return dot( color, bitSh ) * 1000.0;","}","void main () {","	gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );","}"].join("\n")}},o.WebGLRenderer=function(t){function e(t,e,i,n){at===!0&&(t*=n,e*=n,i*=n),Vt.clearColor(t,e,i,n)}function i(){Ht.init(),Vt.viewport(Ct,Et,Tt,Pt),e(ut.r,ut.g,ut.b,lt)}function n(){bt=null,Mt=null,wt="",_t=-1,Rt=!0,Ht.reset()}function r(t){t.preventDefault(),n(),i(),Wt.clear()}function a(t){var e=t.target;e.removeEventListener("dispose",a),l(e),zt.textures--}function s(t){var e=t.target;e.removeEventListener("dispose",s),h(e),zt.textures--}function u(t){var e=t.target;e.removeEventListener("dispose",u),c(e)}function l(t){var e=Wt.get(t);if(t.image&&e.__image__webglTextureCube)Vt.deleteTexture(e.__image__webglTextureCube);else{if(void 0===e.__webglInit)return;Vt.deleteTexture(e.__webglTexture)}Wt["delete"](t)}function h(t){var e=Wt.get(t),i=Wt.get(t.texture);if(t&&void 0!==i.__webglTexture){if(Vt.deleteTexture(i.__webglTexture),t instanceof o.WebGLRenderTargetCube)for(var n=0;6>n;n++)Vt.deleteFramebuffer(e.__webglFramebuffer[n]),Vt.deleteRenderbuffer(e.__webglRenderbuffer[n]);else Vt.deleteFramebuffer(e.__webglFramebuffer),Vt.deleteRenderbuffer(e.__webglRenderbuffer);Wt["delete"](t.texture),Wt["delete"](t)}}function c(t){p(t),Wt["delete"](t)}function p(t){var e=Wt.get(t).program;t.program=void 0,void 0!==e&&qt.releaseProgram(e)}function d(t,e,i,n){var r;if(i instanceof o.InstancedBufferGeometry&&(r=Ft.get("ANGLE_instanced_arrays"),null===r))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),Ht.initAttributes();var a=i.attributes,s=e.getAttributes(),u=t.defaultAttributeValues;for(var l in s){var h=s[l];if(h>=0){var c=a[l];if(void 0!==c){var p=c.itemSize,d=Xt.getAttributeBuffer(c);if(c instanceof o.InterleavedBufferAttribute){var f=c.data,m=f.stride,y=c.offset;f instanceof o.InstancedInterleavedBuffer?(Ht.enableAttributeAndDivisor(h,f.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=f.meshPerAttribute*f.count)):Ht.enableAttribute(h),Vt.bindBuffer(Vt.ARRAY_BUFFER,d),Vt.vertexAttribPointer(h,p,Vt.FLOAT,!1,m*f.array.BYTES_PER_ELEMENT,(n*m+y)*f.array.BYTES_PER_ELEMENT)}else c instanceof o.InstancedBufferAttribute?(Ht.enableAttributeAndDivisor(h,c.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=c.meshPerAttribute*c.count)):Ht.enableAttribute(h),Vt.bindBuffer(Vt.ARRAY_BUFFER,d),Vt.vertexAttribPointer(h,p,Vt.FLOAT,!1,0,n*p*4)}else if(void 0!==u){var v=u[l];if(void 0!==v)switch(v.length){case 2:Vt.vertexAttrib2fv(h,v);break;case 3:Vt.vertexAttrib3fv(h,v);break;case 4:Vt.vertexAttrib4fv(h,v);break;default:Vt.vertexAttrib1fv(h,v)}}}}Ht.disableUnusedAttributes()}function f(t,e){return e[0]-t[0]}function m(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function y(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function v(t,e,i,n,r){var o,a;i.transparent?(o=dt,a=++ft):(o=ct,a=++pt);var s=o[a];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=i,s.z=Dt.z,s.group=r):(s={id:t.id,object:t,geometry:e,material:i,z:Dt.z,group:r},o.push(s))}function g(t,e){if(t.visible!==!1){if(0!==(t.channels.mask&e.channels.mask))if(t instanceof o.Light)ht.push(t);else if(t instanceof o.Sprite)yt.push(t);else if(t instanceof o.LensFlare)vt.push(t);else if(t instanceof o.ImmediateRenderObject)gt.sortObjects===!0&&(Dt.setFromMatrixPosition(t.matrixWorld),Dt.applyProjection(Nt)),v(t,null,t.material,Dt.z,null);else if((t instanceof o.Mesh||t instanceof o.Line||t instanceof o.Points)&&(t instanceof o.SkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||Ot.intersectsObject(t)===!0)){var i=t.material;if(i.visible===!0){gt.sortObjects===!0&&(Dt.setFromMatrixPosition(t.matrixWorld),Dt.applyProjection(Nt));var n=Xt.update(t);if(i instanceof o.MeshFaceMaterial)for(var r=n.groups,a=i.materials,s=0,u=r.length;u>s;s++){var l=r[s],h=a[l.materialIndex];h.visible===!0&&v(t,n,h,Dt.z,l)}else v(t,n,i,Dt.z,null)}}for(var c=t.children,s=0,u=c.length;u>s;s++)g(c[s],e)}}function b(t,e,i,n,r){for(var a=0,s=t.length;s>a;a++){var u=t[a],l=u.object,h=u.geometry,c=void 0===r?u.material:r,p=u.group;if(l.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,l.matrixWorld),l.normalMatrix.getNormalMatrix(l.modelViewMatrix),l instanceof o.ImmediateRenderObject){_(c);var d=M(e,i,n,c,l);wt="",l.render(function(t){gt.renderBufferImmediate(t,d,c)})}else gt.renderBufferDirect(e,i,n,h,c,l,p)}}function x(t,e,i,n){var r=Wt.get(t),a=qt.getParameters(t,e,i,n),s=qt.getProgramCode(t,a),l=r.program,h=!0;if(void 0===l)t.addEventListener("dispose",u);else if(l.code!==s)p(t);else{if(void 0!==a.shaderID)return;h=!1}if(h){if(a.shaderID){var c=o.ShaderLib[a.shaderID];r.__webglShader={name:t.type,uniforms:o.UniformsUtils.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=r.__webglShader,l=qt.acquireProgram(t,a,s),r.program=l,t.program=l}var d=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<gt.maxMorphTargets;f++)d["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals)for(t.numSupportedMorphNormals=0,f=0;f<gt.maxMorphNormals;f++)d["morphNormal"+f]>=0&&t.numSupportedMorphNormals++;r.uniformsList=[];var m=r.program.getUniforms();for(var y in r.__webglShader.uniforms){var v=m[y];v&&r.uniformsList.push([r.__webglShader.uniforms[y],v])}}function _(t){w(t),t.transparent===!0?Ht.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha):Ht.setBlending(o.NoBlending),Ht.setDepthFunc(t.depthFunc),Ht.setDepthTest(t.depthTest),Ht.setDepthWrite(t.depthWrite),Ht.setColorWrite(t.colorWrite),Ht.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function w(t){t.side!==o.DoubleSide?Ht.enable(Vt.CULL_FACE):Ht.disable(Vt.CULL_FACE),Ht.setFlipSided(t.side===o.BackSide)}function M(t,e,i,n,r){St=0;var a=Wt.get(n);(n.needsUpdate||!a.program)&&(x(n,e,i,r),n.needsUpdate=!1);var s=!1,u=!1,l=!1,h=a.program,c=h.getUniforms(),p=a.__webglShader.uniforms;if(h.id!==bt&&(Vt.useProgram(h.program),bt=h.id,s=!0,u=!0,l=!0),n.id!==_t&&(-1===_t&&(l=!0),_t=n.id,u=!0),(s||t!==Mt)&&(Vt.uniformMatrix4fv(c.projectionMatrix,!1,t.projectionMatrix.elements),Gt.logarithmicDepthBuffer&&Vt.uniform1f(c.logDepthBufFC,2/(Math.log(t.far+1)/Math.LN2)),t!==Mt&&(Mt=t),(n instanceof o.ShaderMaterial||n instanceof o.MeshPhongMaterial||n.envMap)&&void 0!==c.cameraPosition&&(Dt.setFromMatrixPosition(t.matrixWorld),Vt.uniform3f(c.cameraPosition,Dt.x,Dt.y,Dt.z)),(n instanceof o.MeshPhongMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.MeshBasicMaterial||n instanceof o.ShaderMaterial||n.skinning)&&void 0!==c.viewMatrix&&Vt.uniformMatrix4fv(c.viewMatrix,!1,t.matrixWorldInverse.elements)),n.skinning)if(r.bindMatrix&&void 0!==c.bindMatrix&&Vt.uniformMatrix4fv(c.bindMatrix,!1,r.bindMatrix.elements),r.bindMatrixInverse&&void 0!==c.bindMatrixInverse&&Vt.uniformMatrix4fv(c.bindMatrixInverse,!1,r.bindMatrixInverse.elements),Gt.floatVertexTextures&&r.skeleton&&r.skeleton.useVertexTexture){if(void 0!==c.boneTexture){var d=L();Vt.uniform1i(c.boneTexture,d),gt.setTexture(r.skeleton.boneTexture,d)}void 0!==c.boneTextureWidth&&Vt.uniform1i(c.boneTextureWidth,r.skeleton.boneTextureWidth),void 0!==c.boneTextureHeight&&Vt.uniform1i(c.boneTextureHeight,r.skeleton.boneTextureHeight)}else r.skeleton&&r.skeleton.boneMatrices&&void 0!==c.boneGlobalMatrices&&Vt.uniformMatrix4fv(c.boneGlobalMatrices,!1,r.skeleton.boneMatrices);return u&&(i&&n.fog&&P(p,i),(n instanceof o.MeshPhongMaterial||n instanceof o.MeshLambertMaterial||n.lights)&&(Rt&&(l=!0,z(e,t),Rt=!1),l?(k(p,It),O(p,!0)):O(p,!1)),(n instanceof o.MeshBasicMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.MeshPhongMaterial)&&S(p,n),n instanceof o.LineBasicMaterial?C(p,n):n instanceof o.LineDashedMaterial?(C(p,n),E(p,n)):n instanceof o.PointsMaterial?T(p,n):n instanceof o.MeshPhongMaterial?A(p,n):n instanceof o.MeshDepthMaterial?(p.mNear.value=t.near,p.mFar.value=t.far,p.opacity.value=n.opacity):n instanceof o.MeshNormalMaterial&&(p.opacity.value=n.opacity),r.receiveShadow&&!n._shadowPass&&N(p,e,t),R(a.uniformsList)),D(c,r),void 0!==c.modelMatrix&&Vt.uniformMatrix4fv(c.modelMatrix,!1,r.matrixWorld.elements),h}function S(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&(t.emissive.value=e.emissive),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){i instanceof o.WebGLRenderTarget&&(i=i.texture);var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap instanceof o.WebGLRenderTargetCube?1:-1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function C(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function E(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function T(t,e){if(t.psColor.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size,t.scale.value=J.height/2,t.map.value=e.map,null!==e.map){var i=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function P(t,e){t.fogColor.value=e.color,e instanceof o.Fog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e instanceof o.FogExp2&&(t.fogDensity.value=e.density)}function A(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function k(t,e){t.ambientLightColor.value=e.ambient,t.directionalLightColor.value=e.directional.colors,t.directionalLightDirection.value=e.directional.positions,t.pointLightColor.value=e.point.colors,t.pointLightPosition.value=e.point.positions,t.pointLightDistance.value=e.point.distances,t.pointLightDecay.value=e.point.decays,t.spotLightColor.value=e.spot.colors,t.spotLightPosition.value=e.spot.positions,t.spotLightDistance.value=e.spot.distances,t.spotLightDirection.value=e.spot.directions,t.spotLightAngleCos.value=e.spot.anglesCos,t.spotLightExponent.value=e.spot.exponents,t.spotLightDecay.value=e.spot.decays,t.hemisphereLightSkyColor.value=e.hemi.skyColors,t.hemisphereLightGroundColor.value=e.hemi.groundColors,t.hemisphereLightDirection.value=e.hemi.positions}function O(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLightColor.needsUpdate=e,t.directionalLightDirection.needsUpdate=e,t.pointLightColor.needsUpdate=e,t.pointLightPosition.needsUpdate=e,t.pointLightDistance.needsUpdate=e,t.pointLightDecay.needsUpdate=e,t.spotLightColor.needsUpdate=e,t.spotLightPosition.needsUpdate=e,t.spotLightDistance.needsUpdate=e,t.spotLightDirection.needsUpdate=e,t.spotLightAngleCos.needsUpdate=e,t.spotLightExponent.needsUpdate=e,t.spotLightDecay.needsUpdate=e,t.hemisphereLightSkyColor.needsUpdate=e,t.hemisphereLightGroundColor.needsUpdate=e,t.hemisphereLightDirection.needsUpdate=e}function N(t,e,i){if(t.shadowMatrix)for(var n=0,r=0,a=e.length;a>r;r++){var s=e[r];if(s.castShadow===!0&&(s instanceof o.PointLight||s instanceof o.SpotLight||s instanceof o.DirectionalLight)){var u=s.shadow;s instanceof o.PointLight?(Dt.setFromMatrixPosition(s.matrixWorld).negate(),u.matrix.identity().setPosition(Dt),t.shadowDarkness.value[n]=-u.darkness):t.shadowDarkness.value[n]=u.darkness,t.shadowMatrix.value[n]=u.matrix,t.shadowMap.value[n]=u.map,t.shadowMapSize.value[n]=u.mapSize,t.shadowBias.value[n]=u.bias,n++}}}function D(t,e){Vt.uniformMatrix4fv(t.modelViewMatrix,!1,e.modelViewMatrix.elements),t.normalMatrix&&Vt.uniformMatrix3fv(t.normalMatrix,!1,e.normalMatrix.elements)}function L(){var t=St;return t>=Gt.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Gt.maxTextures),St+=1,t}function R(t){for(var e,i,n=0,r=t.length;r>n;n++){var a=t[n][0];if(a.needsUpdate!==!1){var s=a.type,u=a.value,l=t[n][1];switch(s){case"1i":Vt.uniform1i(l,u);break;case"1f":Vt.uniform1f(l,u);break;case"2f":Vt.uniform2f(l,u[0],u[1]);break;case"3f":Vt.uniform3f(l,u[0],u[1],u[2]);break;case"4f":Vt.uniform4f(l,u[0],u[1],u[2],u[3]);break;case"1iv":Vt.uniform1iv(l,u);break;case"3iv":Vt.uniform3iv(l,u);break;case"1fv":Vt.uniform1fv(l,u);break;case"2fv":Vt.uniform2fv(l,u);break;case"3fv":Vt.uniform3fv(l,u);break;case"4fv":Vt.uniform4fv(l,u);break;case"Matrix3fv":Vt.uniformMatrix3fv(l,!1,u);break;case"Matrix4fv":Vt.uniformMatrix4fv(l,!1,u);break;case"i":Vt.uniform1i(l,u);break;case"f":Vt.uniform1f(l,u);break;case"v2":Vt.uniform2f(l,u.x,u.y);break;case"v3":Vt.uniform3f(l,u.x,u.y,u.z);break;case"v4":Vt.uniform4f(l,u.x,u.y,u.z,u.w);break;case"c":Vt.uniform3f(l,u.r,u.g,u.b);break;case"iv1":Vt.uniform1iv(l,u);break;case"iv":Vt.uniform3iv(l,u);break;case"fv1":Vt.uniform1fv(l,u);break;case"fv":Vt.uniform3fv(l,u);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*u.length));for(var h=0,c=0,p=u.length;p>h;h++,c+=2)a._array[c+0]=u[h].x,a._array[c+1]=u[h].y;Vt.uniform2fv(l,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*u.length));for(var h=0,d=0,p=u.length;p>h;h++,d+=3)a._array[d+0]=u[h].x,a._array[d+1]=u[h].y,a._array[d+2]=u[h].z;Vt.uniform3fv(l,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*u.length));for(var h=0,f=0,p=u.length;p>h;h++,f+=4)a._array[f+0]=u[h].x,a._array[f+1]=u[h].y,a._array[f+2]=u[h].z,a._array[f+3]=u[h].w;Vt.uniform4fv(l,a._array);break;case"m3":Vt.uniformMatrix3fv(l,!1,u.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*u.length));for(var h=0,p=u.length;p>h;h++)u[h].flattenToArrayOffset(a._array,9*h);Vt.uniformMatrix3fv(l,!1,a._array);break;case"m4":Vt.uniformMatrix4fv(l,!1,u.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*u.length));for(var h=0,p=u.length;p>h;h++)u[h].flattenToArrayOffset(a._array,16*h);Vt.uniformMatrix4fv(l,!1,a._array);break;case"t":if(e=u,i=L(),Vt.uniform1i(l,i),!e)continue;e instanceof o.CubeTexture||Array.isArray(e.image)&&6===e.image.length?H(e,i):e instanceof o.WebGLRenderTargetCube?W(e.texture,i):e instanceof o.WebGLRenderTarget?gt.setTexture(e.texture,i):gt.setTexture(e,i);break;case"tv":void 0===a._array&&(a._array=[]);for(var h=0,p=a.value.length;p>h;h++)a._array[h]=L();Vt.uniform1iv(l,a._array);for(var h=0,p=a.value.length;p>h;h++)e=a.value[h],i=a._array[h],e&&(e instanceof o.CubeTexture||e.image instanceof Array&&6===e.image.length?H(e,i):e instanceof o.WebGLRenderTarget?gt.setTexture(e.texture,i):e instanceof o.WebGLRenderTargetCube?W(e.texture,i):gt.setTexture(e,i));break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+s)}}}}function I(t,e,i,n){t[e+0]=i.r*n,t[e+1]=i.g*n,t[e+2]=i.b*n}function z(t,e){var i,n,r,a,s,u,l,h,c=0,p=0,d=0,f=It,m=e.matrixWorldInverse,y=f.directional.colors,v=f.directional.positions,g=f.point.colors,b=f.point.positions,x=f.point.distances,_=f.point.decays,w=f.spot.colors,M=f.spot.positions,S=f.spot.distances,C=f.spot.directions,E=f.spot.anglesCos,T=f.spot.exponents,P=f.spot.decays,A=f.hemi.skyColors,k=f.hemi.groundColors,O=f.hemi.positions,N=0,D=0,L=0,R=0,z=0,j=0,V=0,B=0,U=0,F=0,G=0,H=0;for(i=0,n=t.length;n>i;i++)if(r=t[i],a=r.color,l=r.intensity,h=r.distance,r instanceof o.AmbientLight){if(!r.visible)continue;c+=a.r,p+=a.g,d+=a.b}else if(r instanceof o.DirectionalLight){if(z+=1,!r.visible)continue;Lt.setFromMatrixPosition(r.matrixWorld),Dt.setFromMatrixPosition(r.target.matrixWorld),Lt.sub(Dt),Lt.transformDirection(m),U=3*N,v[U+0]=Lt.x,v[U+1]=Lt.y,v[U+2]=Lt.z,I(y,U,a,l),N+=1}else if(r instanceof o.PointLight){if(j+=1,!r.visible)continue;F=3*D,I(g,F,a,l),Dt.setFromMatrixPosition(r.matrixWorld),Dt.applyMatrix4(m),b[F+0]=Dt.x,b[F+1]=Dt.y,b[F+2]=Dt.z,x[D]=h,_[D]=0===r.distance?0:r.decay,D+=1}else if(r instanceof o.SpotLight){if(V+=1,!r.visible)continue;G=3*L,I(w,G,a,l),Lt.setFromMatrixPosition(r.matrixWorld),Dt.copy(Lt).applyMatrix4(m),M[G+0]=Dt.x,M[G+1]=Dt.y,M[G+2]=Dt.z,S[L]=h,Dt.setFromMatrixPosition(r.target.matrixWorld),Lt.sub(Dt),Lt.transformDirection(m),C[G+0]=Lt.x,C[G+1]=Lt.y,C[G+2]=Lt.z,E[L]=Math.cos(r.angle),T[L]=r.exponent,P[L]=0===r.distance?0:r.decay,L+=1}else if(r instanceof o.HemisphereLight){if(B+=1,!r.visible)continue;Lt.setFromMatrixPosition(r.matrixWorld),Lt.transformDirection(m),H=3*R,O[H+0]=Lt.x,O[H+1]=Lt.y,O[H+2]=Lt.z,s=r.color,u=r.groundColor,I(A,H,s,l),I(k,H,u,l),R+=1}for(i=3*N,n=Math.max(y.length,3*z);n>i;i++)y[i]=0;for(i=3*D,n=Math.max(g.length,3*j);n>i;i++)g[i]=0;for(i=3*L,n=Math.max(w.length,3*V);n>i;i++)w[i]=0;for(i=3*R,n=Math.max(A.length,3*B);n>i;i++)A[i]=0;for(i=3*R,n=Math.max(k.length,3*B);n>i;i++)k[i]=0;f.directional.length=N,f.point.length=D,f.spot.length=L,f.hemi.length=R,f.ambient[0]=c,f.ambient[1]=p,f.ambient[2]=d}function j(t,e,i){var n;if(i?(Vt.texParameteri(t,Vt.TEXTURE_WRAP_S,Z(e.wrapS)),Vt.texParameteri(t,Vt.TEXTURE_WRAP_T,Z(e.wrapT)),Vt.texParameteri(t,Vt.TEXTURE_MAG_FILTER,Z(e.magFilter)),Vt.texParameteri(t,Vt.TEXTURE_MIN_FILTER,Z(e.minFilter))):(Vt.texParameteri(t,Vt.TEXTURE_WRAP_S,Vt.CLAMP_TO_EDGE),Vt.texParameteri(t,Vt.TEXTURE_WRAP_T,Vt.CLAMP_TO_EDGE),(e.wrapS!==o.ClampToEdgeWrapping||e.wrapT!==o.ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",e),Vt.texParameteri(t,Vt.TEXTURE_MAG_FILTER,K(e.magFilter)),Vt.texParameteri(t,Vt.TEXTURE_MIN_FILTER,K(e.minFilter)),e.minFilter!==o.NearestFilter&&e.minFilter!==o.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",e)),n=Ft.get("EXT_texture_filter_anisotropic")){if(e.type===o.FloatType&&null===Ft.get("OES_texture_float_linear"))return;if(e.type===o.HalfFloatType&&null===Ft.get("OES_texture_half_float_linear"))return;(e.anisotropy>1||Wt.get(e).__currentAnisotropy)&&(Vt.texParameterf(t,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,gt.getMaxAnisotropy())),Wt.get(e).__currentAnisotropy=e.anisotropy)}}function V(t,e,i){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",a),t.__webglTexture=Vt.createTexture(),zt.textures++),Ht.activeTexture(Vt.TEXTURE0+i),Ht.bindTexture(Vt.TEXTURE_2D,t.__webglTexture),Vt.pixelStorei(Vt.UNPACK_FLIP_Y_WEBGL,e.flipY),Vt.pixelStorei(Vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Vt.pixelStorei(Vt.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=B(e.image,Gt.maxTextureSize),F(e)&&U(e.image)===!1&&(e.image=G(e.image));var n=e.image,r=U(n),s=Z(e.format),u=Z(e.type);j(Vt.TEXTURE_2D,e,r);var l,h=e.mipmaps;if(e instanceof o.DataTexture)if(h.length>0&&r){for(var c=0,p=h.length;p>c;c++)l=h[c],Ht.texImage2D(Vt.TEXTURE_2D,c,s,l.width,l.height,0,s,u,l.data);e.generateMipmaps=!1}else Ht.texImage2D(Vt.TEXTURE_2D,0,s,n.width,n.height,0,s,u,n.data);else if(e instanceof o.CompressedTexture)for(var c=0,p=h.length;p>c;c++)l=h[c],e.format!==o.RGBAFormat&&e.format!==o.RGBFormat?Ht.getCompressedTextureFormats().indexOf(s)>-1?Ht.compressedTexImage2D(Vt.TEXTURE_2D,c,s,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ht.texImage2D(Vt.TEXTURE_2D,c,s,l.width,l.height,0,s,u,l.data);else if(h.length>0&&r){for(var c=0,p=h.length;p>c;c++)l=h[c],Ht.texImage2D(Vt.TEXTURE_2D,c,s,s,u,l);e.generateMipmaps=!1}else Ht.texImage2D(Vt.TEXTURE_2D,0,s,s,u,e.image);e.generateMipmaps&&r&&Vt.generateMipmap(Vt.TEXTURE_2D),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function B(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElement("canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);var r=n.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t),n}return t}function U(t){return o.Math.isPowerOfTwo(t.width)&&o.Math.isPowerOfTwo(t.height)}function F(t){return t.wrapS!==o.ClampToEdgeWrapping||t.wrapT!==o.ClampToEdgeWrapping?!0:t.minFilter!==o.NearestFilter&&t.minFilter!==o.LinearFilter?!0:!1}function G(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElement("canvas");e.width=o.Math.nearestPowerOfTwo(t.width),e.height=o.Math.nearestPowerOfTwo(t.height);var i=e.getContext("2d");return i.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function H(t,e){var i=Wt.get(t);if(6===t.image.length)if(t.version>0&&i.__version!==t.version){i.__image__webglTextureCube||(t.addEventListener("dispose",a),i.__image__webglTextureCube=Vt.createTexture(),zt.textures++),Ht.activeTexture(Vt.TEXTURE0+e),Ht.bindTexture(Vt.TEXTURE_CUBE_MAP,i.__image__webglTextureCube),Vt.pixelStorei(Vt.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var n=t instanceof o.CompressedTexture,r=t.image[0]instanceof o.DataTexture,s=[],u=0;6>u;u++)!gt.autoScaleCubemaps||n||r?s[u]=r?t.image[u].image:t.image[u]:s[u]=B(t.image[u],Gt.maxCubemapSize);var l=s[0],h=U(l),c=Z(t.format),p=Z(t.type);j(Vt.TEXTURE_CUBE_MAP,t,h);for(var u=0;6>u;u++)if(n)for(var d,f=s[u].mipmaps,m=0,y=f.length;y>m;m++)d=f[m],t.format!==o.RGBAFormat&&t.format!==o.RGBFormat?Ht.getCompressedTextureFormats().indexOf(c)>-1?Ht.compressedTexImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+u,m,c,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):Ht.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+u,m,c,d.width,d.height,0,c,p,d.data);else r?Ht.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,c,s[u].width,s[u].height,0,c,p,s[u].data):Ht.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,c,c,p,s[u]);t.generateMipmaps&&h&&Vt.generateMipmap(Vt.TEXTURE_CUBE_MAP),i.__version=t.version,t.onUpdate&&t.onUpdate(t)}else Ht.activeTexture(Vt.TEXTURE0+e),Ht.bindTexture(Vt.TEXTURE_CUBE_MAP,i.__image__webglTextureCube)}function W(t,e){Ht.activeTexture(Vt.TEXTURE0+e),Ht.bindTexture(Vt.TEXTURE_CUBE_MAP,Wt.get(t).__webglTexture)}function X(t,e,i){Vt.bindFramebuffer(Vt.FRAMEBUFFER,t),Vt.framebufferTexture2D(Vt.FRAMEBUFFER,Vt.COLOR_ATTACHMENT0,i,Wt.get(e.texture).__webglTexture,0)}function q(t,e){Vt.bindRenderbuffer(Vt.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(Vt.renderbufferStorage(Vt.RENDERBUFFER,Vt.DEPTH_COMPONENT16,e.width,e.height),Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_ATTACHMENT,Vt.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(Vt.renderbufferStorage(Vt.RENDERBUFFER,Vt.DEPTH_STENCIL,e.width,e.height),Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_STENCIL_ATTACHMENT,Vt.RENDERBUFFER,t)):Vt.renderbufferStorage(Vt.RENDERBUFFER,Vt.RGBA4,e.width,e.height)}function Y(t){var e=t instanceof o.WebGLRenderTargetCube?Vt.TEXTURE_CUBE_MAP:Vt.TEXTURE_2D,i=Wt.get(t.texture).__webglTexture;Ht.bindTexture(e,i),Vt.generateMipmap(e),Ht.bindTexture(e,null)}function K(t){return t===o.NearestFilter||t===o.NearestMipMapNearestFilter||t===o.NearestMipMapLinearFilter?Vt.NEAREST:Vt.LINEAR}function Z(t){var e;if(t===o.RepeatWrapping)return Vt.REPEAT;if(t===o.ClampToEdgeWrapping)return Vt.CLAMP_TO_EDGE;if(t===o.MirroredRepeatWrapping)return Vt.MIRRORED_REPEAT;if(t===o.NearestFilter)return Vt.NEAREST;
if(t===o.NearestMipMapNearestFilter)return Vt.NEAREST_MIPMAP_NEAREST;if(t===o.NearestMipMapLinearFilter)return Vt.NEAREST_MIPMAP_LINEAR;if(t===o.LinearFilter)return Vt.LINEAR;if(t===o.LinearMipMapNearestFilter)return Vt.LINEAR_MIPMAP_NEAREST;if(t===o.LinearMipMapLinearFilter)return Vt.LINEAR_MIPMAP_LINEAR;if(t===o.UnsignedByteType)return Vt.UNSIGNED_BYTE;if(t===o.UnsignedShort4444Type)return Vt.UNSIGNED_SHORT_4_4_4_4;if(t===o.UnsignedShort5551Type)return Vt.UNSIGNED_SHORT_5_5_5_1;if(t===o.UnsignedShort565Type)return Vt.UNSIGNED_SHORT_5_6_5;if(t===o.ByteType)return Vt.BYTE;if(t===o.ShortType)return Vt.SHORT;if(t===o.UnsignedShortType)return Vt.UNSIGNED_SHORT;if(t===o.IntType)return Vt.INT;if(t===o.UnsignedIntType)return Vt.UNSIGNED_INT;if(t===o.FloatType)return Vt.FLOAT;if(e=Ft.get("OES_texture_half_float"),null!==e&&t===o.HalfFloatType)return e.HALF_FLOAT_OES;if(t===o.AlphaFormat)return Vt.ALPHA;if(t===o.RGBFormat)return Vt.RGB;if(t===o.RGBAFormat)return Vt.RGBA;if(t===o.LuminanceFormat)return Vt.LUMINANCE;if(t===o.LuminanceAlphaFormat)return Vt.LUMINANCE_ALPHA;if(t===o.AddEquation)return Vt.FUNC_ADD;if(t===o.SubtractEquation)return Vt.FUNC_SUBTRACT;if(t===o.ReverseSubtractEquation)return Vt.FUNC_REVERSE_SUBTRACT;if(t===o.ZeroFactor)return Vt.ZERO;if(t===o.OneFactor)return Vt.ONE;if(t===o.SrcColorFactor)return Vt.SRC_COLOR;if(t===o.OneMinusSrcColorFactor)return Vt.ONE_MINUS_SRC_COLOR;if(t===o.SrcAlphaFactor)return Vt.SRC_ALPHA;if(t===o.OneMinusSrcAlphaFactor)return Vt.ONE_MINUS_SRC_ALPHA;if(t===o.DstAlphaFactor)return Vt.DST_ALPHA;if(t===o.OneMinusDstAlphaFactor)return Vt.ONE_MINUS_DST_ALPHA;if(t===o.DstColorFactor)return Vt.DST_COLOR;if(t===o.OneMinusDstColorFactor)return Vt.ONE_MINUS_DST_COLOR;if(t===o.SrcAlphaSaturateFactor)return Vt.SRC_ALPHA_SATURATE;if(e=Ft.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===o.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===o.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===o.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===o.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=Ft.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===o.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===o.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===o.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===o.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=Ft.get("EXT_blend_minmax"),null!==e){if(t===o.MinEquation)return e.MIN_EXT;if(t===o.MaxEquation)return e.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",o.REVISION),t=t||{};var J=void 0!==t.canvas?t.canvas:document.createElement("canvas"),Q=void 0!==t.context?t.context:null,$=J.width,tt=J.height,et=1,it=void 0!==t.alpha?t.alpha:!1,nt=void 0!==t.depth?t.depth:!0,rt=void 0!==t.stencil?t.stencil:!0,ot=void 0!==t.antialias?t.antialias:!1,at=void 0!==t.premultipliedAlpha?t.premultipliedAlpha:!0,st=void 0!==t.preserveDrawingBuffer?t.preserveDrawingBuffer:!1,ut=new o.Color(0),lt=0,ht=[],ct=[],pt=-1,dt=[],ft=-1,mt=new Float32Array(8),yt=[],vt=[];this.domElement=J,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var gt=this,bt=null,xt=null,_t=-1,wt="",Mt=null,St=0,Ct=0,Et=0,Tt=J.width,Pt=J.height,At=0,kt=0,Ot=new o.Frustum,Nt=new o.Matrix4,Dt=new o.Vector3,Lt=new o.Vector3,Rt=!0,It={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},zt={geometries:0,textures:0},jt={calls:0,vertices:0,faces:0,points:0};this.info={render:jt,memory:zt,programs:null};var Vt;try{var Bt={alpha:it,depth:nt,stencil:rt,antialias:ot,premultipliedAlpha:at,preserveDrawingBuffer:st};if(Vt=Q||J.getContext("webgl",Bt)||J.getContext("experimental-webgl",Bt),null===Vt)throw null!==J.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";J.addEventListener("webglcontextlost",r,!1)}catch(Ut){console.error("THREE.WebGLRenderer: "+Ut)}var Ft=new o.WebGLExtensions(Vt);Ft.get("OES_texture_float"),Ft.get("OES_texture_float_linear"),Ft.get("OES_texture_half_float"),Ft.get("OES_texture_half_float_linear"),Ft.get("OES_standard_derivatives"),Ft.get("ANGLE_instanced_arrays"),Ft.get("OES_element_index_uint")&&(o.BufferGeometry.MaxIndex=4294967296);var Gt=new o.WebGLCapabilities(Vt,Ft,t),Ht=new o.WebGLState(Vt,Ft,Z),Wt=new o.WebGLProperties,Xt=new o.WebGLObjects(Vt,Wt,this.info),qt=new o.WebGLPrograms(this,Gt);this.info.programs=qt.programs;var Yt=new o.WebGLBufferRenderer(Vt,Ft,jt),Kt=new o.WebGLIndexedBufferRenderer(Vt,Ft,jt);i(),this.context=Vt,this.capabilities=Gt,this.extensions=Ft,this.state=Ht;var Zt=new o.WebGLShadowMap(this,ht,Xt);this.shadowMap=Zt;var Jt=new o.SpritePlugin(this,yt),Qt=new o.LensFlarePlugin(this,vt);this.getContext=function(){return Vt},this.getContextAttributes=function(){return Vt.getContextAttributes()},this.forceContextLoss=function(){Ft.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){var t;return function(){if(void 0!==t)return t;var e=Ft.get("EXT_texture_filter_anisotropic");return t=null!==e?Vt.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return Gt.precision},this.getPixelRatio=function(){return et},this.setPixelRatio=function(t){void 0!==t&&(et=t)},this.getSize=function(){return{width:$,height:tt}},this.setSize=function(t,e,i){$=t,tt=e,J.width=t*et,J.height=e*et,i!==!1&&(J.style.width=t+"px",J.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){Ct=t*et,Et=e*et,Tt=i*et,Pt=n*et,Vt.viewport(Ct,Et,Tt,Pt)},this.getViewport=function(t){t.x=Ct/et,t.y=Et/et,t.z=Tt/et,t.w=Pt/et},this.setScissor=function(t,e,i,n){Vt.scissor(t*et,e*et,i*et,n*et)},this.enableScissorTest=function(t){Ht.setScissorTest(t)},this.getClearColor=function(){return ut},this.setClearColor=function(t,i){ut.set(t),lt=void 0!==i?i:1,e(ut.r,ut.g,ut.b,lt)},this.getClearAlpha=function(){return lt},this.setClearAlpha=function(t){lt=t,e(ut.r,ut.g,ut.b,lt)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=Vt.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=Vt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=Vt.STENCIL_BUFFER_BIT),Vt.clear(n)},this.clearColor=function(){Vt.clear(Vt.COLOR_BUFFER_BIT)},this.clearDepth=function(){Vt.clear(Vt.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Vt.clear(Vt.STENCIL_BUFFER_BIT)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=n,this.dispose=function(){J.removeEventListener("webglcontextlost",r,!1)},this.renderBufferImmediate=function(t,e,i){Ht.initAttributes();var n=Wt.get(t);t.hasPositions&&!n.position&&(n.position=Vt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=Vt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=Vt.createBuffer()),t.hasColors&&!n.color&&(n.color=Vt.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,n.position),Vt.bufferData(Vt.ARRAY_BUFFER,t.positionArray,Vt.DYNAMIC_DRAW),Ht.enableAttribute(r.position),Vt.vertexAttribPointer(r.position,3,Vt.FLOAT,!1,0,0)),t.hasNormals){if(Vt.bindBuffer(Vt.ARRAY_BUFFER,n.normal),"MeshPhongMaterial"!==i.type&&i.shading===o.FlatShading)for(var a=0,s=3*t.count;s>a;a+=9){var u=t.normalArray,l=(u[a+0]+u[a+3]+u[a+6])/3,h=(u[a+1]+u[a+4]+u[a+7])/3,c=(u[a+2]+u[a+5]+u[a+8])/3;u[a+0]=l,u[a+1]=h,u[a+2]=c,u[a+3]=l,u[a+4]=h,u[a+5]=c,u[a+6]=l,u[a+7]=h,u[a+8]=c}Vt.bufferData(Vt.ARRAY_BUFFER,t.normalArray,Vt.DYNAMIC_DRAW),Ht.enableAttribute(r.normal),Vt.vertexAttribPointer(r.normal,3,Vt.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,n.uv),Vt.bufferData(Vt.ARRAY_BUFFER,t.uvArray,Vt.DYNAMIC_DRAW),Ht.enableAttribute(r.uv),Vt.vertexAttribPointer(r.uv,2,Vt.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==o.NoColors&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,n.color),Vt.bufferData(Vt.ARRAY_BUFFER,t.colorArray,Vt.DYNAMIC_DRAW),Ht.enableAttribute(r.color),Vt.vertexAttribPointer(r.color,3,Vt.FLOAT,!1,0,0)),Ht.disableUnusedAttributes(),Vt.drawArrays(Vt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,r,a,s){_(r);var u=M(t,e,i,r,a),l=!1,h=n.id+"_"+u.id+"_"+r.wireframe;h!==wt&&(wt=h,l=!0);var c=a.morphTargetInfluences;if(void 0!==c){for(var p=[],m=0,y=c.length;y>m;m++){var v=c[m];p.push([v,m])}p.sort(f),p.length>8&&(p.length=8);for(var g=n.morphAttributes,m=0,y=p.length;y>m;m++){var v=p[m];if(mt[m]=v[0],0!==v[0]){var b=v[1];r.morphTargets===!0&&g.position&&n.addAttribute("morphTarget"+m,g.position[b]),r.morphNormals===!0&&g.normal&&n.addAttribute("morphNormal"+m,g.normal[b])}else r.morphTargets===!0&&n.removeAttribute("morphTarget"+m),r.morphNormals===!0&&n.removeAttribute("morphNormal"+m)}var x=u.getUniforms();null!==x.morphTargetInfluences&&Vt.uniform1fv(x.morphTargetInfluences,mt),l=!0}var b=n.index,w=n.attributes.position;r.wireframe===!0&&(b=Xt.getWireframeAttribute(n));var S;null!==b?(S=Kt,S.setIndex(b)):S=Yt,l&&(d(r,u,n),null!==b&&Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,Xt.getAttributeBuffer(b)));var C=0,E=1/0;null!==b?E=b.count:void 0!==w&&(E=w.count);var T=n.drawRange.start,P=n.drawRange.count,A=null!==s?s.start:0,k=null!==s?s.count:1/0,O=Math.max(C,T,A),N=Math.min(C+E,T+P,A+k)-1,D=Math.max(0,N-O+1);if(a instanceof o.Mesh)r.wireframe===!0?(Ht.setLineWidth(r.wireframeLinewidth*et),S.setMode(Vt.LINES)):S.setMode(Vt.TRIANGLES),n instanceof o.InstancedBufferGeometry&&n.maxInstancedCount>0?S.renderInstances(n):S.render(O,D);else if(a instanceof o.Line){var L=r.linewidth;void 0===L&&(L=1),Ht.setLineWidth(L*et),a instanceof o.LineSegments?S.setMode(Vt.LINES):S.setMode(Vt.LINE_STRIP),S.render(O,D)}else a instanceof o.Points&&(S.setMode(Vt.POINTS),S.render(O,D))},this.render=function(t,e,i,n){if(e instanceof o.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var r=t.fog;if(wt="",_t=-1,Mt=null,Rt=!0,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),Nt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Ot.setFromMatrix(Nt),ht.length=0,pt=-1,ft=-1,yt.length=0,vt.length=0,g(t,e),ct.length=pt+1,dt.length=ft+1,gt.sortObjects===!0&&(ct.sort(m),dt.sort(y)),Zt.render(t),jt.calls=0,jt.vertices=0,jt.faces=0,jt.points=0,this.setRenderTarget(i),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),t.overrideMaterial){var a=t.overrideMaterial;b(ct,e,ht,r,a),b(dt,e,ht,r,a)}else Ht.setBlending(o.NoBlending),b(ct,e,ht,r),b(dt,e,ht,r);if(Jt.render(t,e),Qt.render(t,e,At,kt),i){var s=i.texture,u=U(i);s.generateMipmaps&&u&&s.minFilter!==o.NearestFilter&&s.minFilter!==o.LinearFilter&&Y(i)}Ht.setDepthTest(!0),Ht.setDepthWrite(!0),Ht.setColorWrite(!0)},this.setFaceCulling=function(t,e){t===o.CullFaceNone?Ht.disable(Vt.CULL_FACE):(e===o.FrontFaceDirectionCW?Vt.frontFace(Vt.CW):Vt.frontFace(Vt.CCW),t===o.CullFaceBack?Vt.cullFace(Vt.BACK):t===o.CullFaceFront?Vt.cullFace(Vt.FRONT):Vt.cullFace(Vt.FRONT_AND_BACK),Ht.enable(Vt.CULL_FACE))},this.setTexture=function(t,e){var i=Wt.get(t);if(t.version>0&&i.__version!==t.version){var n=t.image;return void 0===n?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t):n.complete===!1?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t):void V(i,t,e)}Ht.activeTexture(Vt.TEXTURE0+e),Ht.bindTexture(Vt.TEXTURE_2D,i.__webglTexture)},this.setRenderTarget=function(t){var e=t instanceof o.WebGLRenderTargetCube;if(t&&void 0===Wt.get(t).__webglFramebuffer){var i=Wt.get(t),n=Wt.get(t.texture);void 0===t.depthBuffer&&(t.depthBuffer=!0),void 0===t.stencilBuffer&&(t.stencilBuffer=!0),t.addEventListener("dispose",s),n.__webglTexture=Vt.createTexture(),zt.textures++;var r=U(t),a=Z(t.texture.format),u=Z(t.texture.type);if(e){i.__webglFramebuffer=[],i.__webglRenderbuffer=[],Ht.bindTexture(Vt.TEXTURE_CUBE_MAP,n.__webglTexture),j(Vt.TEXTURE_CUBE_MAP,t.texture,r);for(var l=0;6>l;l++)i.__webglFramebuffer[l]=Vt.createFramebuffer(),i.__webglRenderbuffer[l]=Vt.createRenderbuffer(),Ht.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a,t.width,t.height,0,a,u,null),X(i.__webglFramebuffer[l],t,Vt.TEXTURE_CUBE_MAP_POSITIVE_X+l),q(i.__webglRenderbuffer[l],t);t.texture.generateMipmaps&&r&&Vt.generateMipmap(Vt.TEXTURE_CUBE_MAP)}else i.__webglFramebuffer=Vt.createFramebuffer(),t.shareDepthFrom?i.__webglRenderbuffer=t.shareDepthFrom.__webglRenderbuffer:i.__webglRenderbuffer=Vt.createRenderbuffer(),Ht.bindTexture(Vt.TEXTURE_2D,n.__webglTexture),j(Vt.TEXTURE_2D,t.texture,r),Ht.texImage2D(Vt.TEXTURE_2D,0,a,t.width,t.height,0,a,u,null),X(i.__webglFramebuffer,t,Vt.TEXTURE_2D),t.shareDepthFrom?t.depthBuffer&&!t.stencilBuffer?Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_ATTACHMENT,Vt.RENDERBUFFER,i.__webglRenderbuffer):t.depthBuffer&&t.stencilBuffer&&Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_STENCIL_ATTACHMENT,Vt.RENDERBUFFER,i.__webglRenderbuffer):q(i.__webglRenderbuffer,t),t.texture.generateMipmaps&&r&&Vt.generateMipmap(Vt.TEXTURE_2D);e?Ht.bindTexture(Vt.TEXTURE_CUBE_MAP,null):Ht.bindTexture(Vt.TEXTURE_2D,null),Vt.bindRenderbuffer(Vt.RENDERBUFFER,null),Vt.bindFramebuffer(Vt.FRAMEBUFFER,null)}var h,c,p,d,f;if(t){var i=Wt.get(t);h=e?i.__webglFramebuffer[t.activeCubeFace]:i.__webglFramebuffer,c=t.width,p=t.height,d=0,f=0}else h=null,c=Tt,p=Pt,d=Ct,f=Et;if(h!==xt&&(Vt.bindFramebuffer(Vt.FRAMEBUFFER,h),Vt.viewport(d,f,c,p),xt=h),e){var n=Wt.get(t.texture);Vt.framebufferTexture2D(Vt.FRAMEBUFFER,Vt.COLOR_ATTACHMENT0,Vt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,n.__webglTexture,0)}At=c,kt=p},this.readRenderTargetPixels=function(t,e,i,n,r,a){if(t instanceof o.WebGLRenderTarget==!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Wt.get(t).__webglFramebuffer;if(s){var u=!1;s!==xt&&(Vt.bindFramebuffer(Vt.FRAMEBUFFER,s),u=!0);try{var l=t.texture;if(l.format!==o.RGBAFormat&&Z(l.format)!==Vt.getParameter(Vt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l.type===o.UnsignedByteType||Z(l.type)===Vt.getParameter(Vt.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===o.FloatType&&Ft.get("WEBGL_color_buffer_float")||l.type===o.HalfFloatType&&Ft.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Vt.checkFramebufferStatus(Vt.FRAMEBUFFER)===Vt.FRAMEBUFFER_COMPLETE?Vt.readPixels(e,i,n,r,Z(l.format),Z(l.type),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&Vt.bindFramebuffer(Vt.FRAMEBUFFER,xt)}}},this.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),Ft.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),Ft.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),Ft.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),Ft.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),Ft.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),Ft.get("EXT_blend_minmax")},this.supportsVertexTextures=function(){return Gt.vertexTextures},this.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),Ft.get("ANGLE_instanced_arrays")},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Object.defineProperties(this,{shadowMapEnabled:{get:function(){return Zt.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),Zt.enabled=t}},shadowMapType:{get:function(){return Zt.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),Zt.type=t}},shadowMapCullFace:{get:function(){return Zt.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),Zt.cullFace=t}},shadowMapDebug:{get:function(){return Zt.debug},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug."),Zt.debug=t}}})},o.WebGLRenderTarget=function(t,e,i){this.uuid=o.Math.generateUUID(),this.width=t,this.height=e,i=i||{},void 0===i.minFilter&&(i.minFilter=o.LinearFilter),this.texture=new o.Texture(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy),this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.shareDepthFrom=void 0!==i.shareDepthFrom?i.shareDepthFrom:null},o.WebGLRenderTarget.prototype={constructor:o.WebGLRenderTarget,get wrapS(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set wrapS(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t},get wrapT(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set wrapT(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t},get magFilter(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set magFilter(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t},get minFilter(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set minFilter(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t},get anisotropy(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set anisotropy(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t},get offset(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set offset(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t},get repeat(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set repeat(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t},get format(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set format(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t},get type(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set type(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t},get generateMipmaps(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set generateMipmaps(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t},setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.dispose())},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.shareDepthFrom=t.shareDepthFrom,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.WebGLRenderTarget.prototype),o.WebGLRenderTargetCube=function(t,e,i){o.WebGLRenderTarget.call(this,t,e,i),this.activeCubeFace=0},o.WebGLRenderTargetCube.prototype=Object.create(o.WebGLRenderTarget.prototype),o.WebGLRenderTargetCube.prototype.constructor=o.WebGLRenderTargetCube,o.WebGLBufferRenderer=function(t,e,i){function n(t){s=t}function r(e,n){t.drawArrays(s,e,n),i.calls++,i.vertices+=n,s===t.TRIANGLES&&(i.faces+=n/3)}function a(t){var i=e.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var n=t.attributes.position;n instanceof o.InterleavedBufferAttribute?i.drawArraysInstancedANGLE(s,0,n.data.count,t.maxInstancedCount):i.drawArraysInstancedANGLE(s,0,n.count,t.maxInstancedCount)}var s;this.setMode=n,this.render=r,this.renderInstances=a},o.WebGLIndexedBufferRenderer=function(t,e,i){function n(t){s=t}function r(i){i.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(u=t.UNSIGNED_INT,l=4):(u=t.UNSIGNED_SHORT,l=2)}function o(e,n){t.drawElements(s,n,u,e*l),i.calls++,i.vertices+=n,s===t.TRIANGLES&&(i.faces+=n/3)}function a(t){var i=e.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var n=t.index;i.drawElementsInstancedANGLE(s,n.array.length,u,0,t.maxInstancedCount)}var s,u,l;this.setMode=n,this.setIndex=r,this.render=o,this.renderInstances=a},o.WebGLExtensions=function(t){var e={};this.get=function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n,n}},o.WebGLCapabilities=function(t,e,i){function n(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}this.getMaxPrecision=n,this.precision=void 0!==i.precision?i.precision:"highp",this.logarithmicDepthBuffer=void 0!==i.logarithmicDepthBuffer?i.logarithmicDepthBuffer:!1,this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxCubemapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=t.getParameter(t.MAX_VARYING_VECTORS),this.maxFragmentUniforms=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!e.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var r=n(this.precision);r!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",r,"instead."),this.precision=r),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!e.get("EXT_frag_depth"))},o.WebGLGeometries=function(t,e,i){function n(t){var e=t.geometry;if(void 0!==h[e.id])return h[e.id];e.addEventListener("dispose",r);var n;return e instanceof o.BufferGeometry?n=e:e instanceof o.Geometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new o.BufferGeometry).setFromObject(t)),n=e._bufferGeometry),h[e.id]=n,i.memory.geometries++,n}function r(t){var n=t.target,o=h[n.id];u(o.attributes),n.removeEventListener("dispose",r),delete h[n.id];var a=e.get(n);a.wireframe&&s(a.wireframe),i.memory.geometries--}function a(t){return t instanceof o.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function s(e){var i=a(e);void 0!==i&&(t.deleteBuffer(i),l(e))}function u(t){for(var e in t)s(t[e])}function l(t){t instanceof o.InterleavedBufferAttribute?e["delete"](t.data):e["delete"](t)}var h={};this.get=n},o.WebGLObjects=function(t,e,i){function n(e){var i=c.get(e);e.geometry instanceof o.Geometry&&i.updateFromObject(e);var n=i.index,a=i.attributes;null!==n&&r(n,t.ELEMENT_ARRAY_BUFFER);for(var s in a)r(a[s],t.ARRAY_BUFFER);var u=i.morphAttributes;for(var s in u)for(var l=u[s],h=0,p=l.length;p>h;h++)r(l[h],t.ARRAY_BUFFER);return i}function r(t,i){var n=t instanceof o.InterleavedBufferAttribute?t.data:t,r=e.get(n);void 0===r.__webglBuffer?a(r,n,i):r.version!==n.version&&s(r,n,i)}function a(e,i,n){e.__webglBuffer=t.createBuffer(),t.bindBuffer(n,e.__webglBuffer);var r=i.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(n,i.array,r),e.version=i.version}function s(e,i,n){t.bindBuffer(n,e.__webglBuffer),i.dynamic===!1||-1===i.updateRange.count?t.bufferSubData(n,0,i.array):0===i.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,i.updateRange.offset*i.array.BYTES_PER_ELEMENT,i.array.subarray(i.updateRange.offset,i.updateRange.offset+i.updateRange.count)),i.updateRange.count=0),e.version=i.version}function u(t){return t instanceof o.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function l(i){var n=e.get(i);if(void 0!==n.wireframe)return n.wireframe;var a=[],s=i.index,u=i.attributes,l=u.position;if(null!==s)for(var c={},p=s.array,d=0,f=p.length;f>d;d+=3){var m=p[d+0],y=p[d+1],v=p[d+2];h(c,m,y)&&a.push(m,y),h(c,y,v)&&a.push(y,v),h(c,v,m)&&a.push(v,m)}else for(var p=u.position.array,d=0,f=p.length/3-1;f>d;d+=3){var m=d+0,y=d+1,v=d+2;a.push(m,y,y,v,v,m)}var g=l.count>65535?Uint32Array:Uint16Array,b=new o.BufferAttribute(new g(a),1);return r(b,t.ELEMENT_ARRAY_BUFFER),n.wireframe=b,b}function h(t,e,i){if(e>i){var n=e;e=i,i=n}var r=t[e];return void 0===r?(t[e]=[i],!0):-1===r.indexOf(i)?(r.push(i),!0):!1}var c=new o.WebGLGeometries(t,e,i);this.getAttributeBuffer=u,this.getWireframeAttribute=l,this.update=n},o.WebGLProgram=function(){function t(t){var e=[];for(var i in t){var n=t[i];n!==!1&&e.push("#define "+i+" "+n)}return e.join("\n")}function e(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;r>o;o++){var a=t.getActiveUniform(e,o),s=a.name,u=t.getUniformLocation(e,s),l=s.lastIndexOf("[0]");-1!==l&&l===s.length-3&&(n[s.substr(0,l)]=u),n[s]=u}return n}function i(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;r>o;o++){var a=t.getActiveAttrib(e,o),s=a.name;n[s]=t.getAttribLocation(e,s)}return n}function n(t){return""!==t}var r=0;return function(a,s,u,l){var h=a.context,c=u.defines,p=u.__webglShader.vertexShader,d=u.__webglShader.fragmentShader,f="SHADOWMAP_TYPE_BASIC";l.shadowMapType===o.PCFShadowMap?f="SHADOWMAP_TYPE_PCF":l.shadowMapType===o.PCFSoftShadowMap&&(f="SHADOWMAP_TYPE_PCF_SOFT");var m="ENVMAP_TYPE_CUBE",y="ENVMAP_MODE_REFLECTION",v="ENVMAP_BLENDING_MULTIPLY";if(l.envMap){switch(u.envMap.mapping){case o.CubeReflectionMapping:case o.CubeRefractionMapping:m="ENVMAP_TYPE_CUBE";break;case o.EquirectangularReflectionMapping:case o.EquirectangularRefractionMapping:m="ENVMAP_TYPE_EQUIREC";break;case o.SphericalReflectionMapping:m="ENVMAP_TYPE_SPHERE"}switch(u.envMap.mapping){case o.CubeRefractionMapping:case o.EquirectangularRefractionMapping:y="ENVMAP_MODE_REFRACTION"}switch(u.combine){case o.MultiplyOperation:v="ENVMAP_BLENDING_MULTIPLY";break;case o.MixOperation:v="ENVMAP_BLENDING_MIX";break;case o.AddOperation:v="ENVMAP_BLENDING_ADD"}}var g,b,x=a.gammaFactor>0?a.gammaFactor:1,_=t(c),w=h.createProgram();u instanceof o.RawShaderMaterial?(g="",b=""):(g=["precision "+l.precision+" float;","precision "+l.precision+" int;","#define SHADER_NAME "+u.__webglShader.name,_,l.supportsVertexTextures?"#define VERTEX_TEXTURES":"",a.gammaInput?"#define GAMMA_INPUT":"",a.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+x,"#define MAX_DIR_LIGHTS "+l.maxDirLights,"#define MAX_POINT_LIGHTS "+l.maxPointLights,"#define MAX_SPOT_LIGHTS "+l.maxSpotLights,"#define MAX_HEMI_LIGHTS "+l.maxHemiLights,"#define MAX_SHADOWS "+l.maxShadows,"#define MAX_BONES "+l.maxBones,l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+y:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.displacementMap&&l.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.useVertexTexture?"#define BONE_TEXTURE":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&l.flatShading===!1?"#define USE_MORPHNORMALS":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+f:"",l.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",l.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(n).join("\n"),
b=[l.bumpMap||l.normalMap||l.flatShading||u.derivatives?"#extension GL_OES_standard_derivatives : enable":"",l.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"","precision "+l.precision+" float;","precision "+l.precision+" int;","#define SHADER_NAME "+u.__webglShader.name,_,"#define MAX_DIR_LIGHTS "+l.maxDirLights,"#define MAX_POINT_LIGHTS "+l.maxPointLights,"#define MAX_SPOT_LIGHTS "+l.maxSpotLights,"#define MAX_HEMI_LIGHTS "+l.maxHemiLights,"#define MAX_SHADOWS "+l.maxShadows,l.alphaTest?"#define ALPHATEST "+l.alphaTest:"",a.gammaInput?"#define GAMMA_INPUT":"",a.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+x,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+m:"",l.envMap?"#define "+y:"",l.envMap?"#define "+v:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.flatShading?"#define FLAT_SHADED":"",l.metal?"#define METAL":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+f:"",l.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",l.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(n).join("\n"));var M=g+p,S=b+d,C=o.WebGLShader(h,h.VERTEX_SHADER,M),E=o.WebGLShader(h,h.FRAGMENT_SHADER,S);h.attachShader(w,C),h.attachShader(w,E),void 0!==u.index0AttributeName?h.bindAttribLocation(w,0,u.index0AttributeName):l.morphTargets===!0&&h.bindAttribLocation(w,0,"position"),h.linkProgram(w);var T=h.getProgramInfoLog(w),P=h.getShaderInfoLog(C),A=h.getShaderInfoLog(E),k=!0,O=!0;h.getProgramParameter(w,h.LINK_STATUS)===!1?(k=!1,console.error("THREE.WebGLProgram: shader error: ",h.getError(),"gl.VALIDATE_STATUS",h.getProgramParameter(w,h.VALIDATE_STATUS),"gl.getProgramInfoLog",T,P,A)):""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):(""===P||""===A)&&(O=!1),O&&(this.diagnostics={runnable:k,material:u,programLog:T,vertexShader:{log:P,prefix:g},fragmentShader:{log:A,prefix:b}}),h.deleteShader(C),h.deleteShader(E);var N;this.getUniforms=function(){return void 0===N&&(N=e(h,w)),N};var D;return this.getAttributes=function(){return void 0===D&&(D=i(h,w)),D},this.destroy=function(){h.deleteProgram(w),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=r++,this.code=s,this.usedTimes=1,this.program=w,this.vertexShader=C,this.fragmentShader=E,this}}(),o.WebGLPrograms=function(t,e){function i(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var i=e.maxVertexUniforms,n=Math.floor((i-20)/4),r=n;return void 0!==t&&t instanceof o.SkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),r<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function n(t){for(var e=0,i=0,n=0,r=0,a=0,s=t.length;s>a;a++){var u=t[a];u.visible!==!1&&(u instanceof o.DirectionalLight&&e++,u instanceof o.PointLight&&i++,u instanceof o.SpotLight&&n++,u instanceof o.HemisphereLight&&r++)}return{directional:e,point:i,spot:n,hemi:r}}function r(t){for(var e=0,i=0,n=0,r=t.length;r>n;n++){var a=t[n];a.castShadow&&((a instanceof o.SpotLight||a instanceof o.DirectionalLight)&&e++,a instanceof o.PointLight&&(e++,i++))}return{maxShadows:e,pointLightShadows:i}}var a=[],s={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},u=["precision","supportsVertexTextures","map","envMap","envMapMode","lightMap","aoMap","emissiveMap","bumpMap","normalMap","displacementMap","specularMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","maxDirLights","maxPointLights","maxSpotLights","maxHemiLights","maxShadows","shadowMapEnabled","pointLightShadows","shadowMapType","shadowMapDebug","alphaTest","metal","doubleSided","flipSided"];this.getParameters=function(a,u,l,h){var c=s[a.type],p=n(u),d=r(u),f=i(h),m=t.getPrecision();null!==a.precision&&(m=e.getMaxPrecision(a.precision),m!==a.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",a.precision,"not supported, using",m,"instead."));var y={shaderID:c,precision:m,supportsVertexTextures:e.vertexTextures,map:!!a.map,envMap:!!a.envMap,envMapMode:a.envMap&&a.envMap.mapping,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,displacementMap:!!a.displacementMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,combine:a.combine,vertexColors:a.vertexColors,fog:l,useFog:a.fog,fogExp:l instanceof o.FogExp2,flatShading:a.shading===o.FlatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:a.skinning,maxBones:f,useVertexTexture:e.floatVertexTextures&&h&&h.skeleton&&h.skeleton.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,maxDirLights:p.directional,maxPointLights:p.point,maxSpotLights:p.spot,maxHemiLights:p.hemi,maxShadows:d.maxShadows,pointLightShadows:d.pointLightShadows,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&d.maxShadows>0,shadowMapType:t.shadowMap.type,shadowMapDebug:t.shadowMap.debug,alphaTest:a.alphaTest,metal:a.metal,doubleSided:a.side===o.DoubleSide,flipSided:a.side===o.BackSide};return y},this.getProgramCode=function(t,e){var i=[];if(e.shaderID?i.push(e.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var r=0;r<u.length;r++){var o=u[r];i.push(o),i.push(e[o])}return i.join()},this.acquireProgram=function(e,i,n){for(var r,s=0,u=a.length;u>s;s++){var l=a[s];if(l.code===n){r=l,++r.usedTimes;break}}return void 0===r&&(r=new o.WebGLProgram(t,n,e,i),a.push(r)),r},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},this.programs=a},o.WebGLProperties=function(){var t={};this.get=function(e){var i=e.uuid,n=t[i];return void 0===n&&(n={},t[i]=n),n},this["delete"]=function(e){delete t[e.uuid]},this.clear=function(){t={}}},o.WebGLShader=function(){function t(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}return function(e,i,n){var r=e.createShader(i);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",i===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),t(n)),r}}(),o.WebGLShadowMap=function(t,e,i){function n(t,e,i,n){var r=t.geometry,a=null,s=y,u=t.customDepthMaterial;if(i&&(s=v,u=t.customDistanceMaterial),u)a=u;else{var l=void 0!==r.morphTargets&&r.morphTargets.length>0&&e.morphTargets,h=t instanceof o.SkinnedMesh&&e.skinning,c=0;l&&(c|=d),h&&(c|=f),a=s[c]}return a.visible=e.visible,a.wireframe=e.wireframe,a.wireframeLinewidth=e.wireframeLinewidth,i&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(n),a}function r(t,e){if(t.visible!==!1){if((t instanceof o.Mesh||t instanceof o.Line||t instanceof o.Points)&&t.castShadow&&(t.frustumCulled===!1||u.intersectsObject(t)===!0)){var i=t.material;i.visible===!0&&(t.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),p.push(t))}for(var n=t.children,a=0,s=n.length;s>a;a++)r(n[a],e)}}for(var a=t.context,s=t.state,u=new o.Frustum,l=new o.Matrix4,h=(new o.Vector3,new o.Vector3,new o.Vector3),c=new o.Vector3,p=[],d=1,f=2,m=(d|f)+1,y=new Array(m),v=new Array(m),g=[new o.Vector3(1,0,0),new o.Vector3(-1,0,0),new o.Vector3(0,0,1),new o.Vector3(0,0,-1),new o.Vector3(0,1,0),new o.Vector3(0,-1,0)],b=[new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,0,1),new o.Vector3(0,0,-1)],x=[new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4],_=new o.Vector4,w=o.ShaderLib.depthRGBA,M=o.UniformsUtils.clone(w.uniforms),S=o.ShaderLib.distanceRGBA,C=o.UniformsUtils.clone(S.uniforms),E=0;E!==m;++E){var T=0!==(E&d),P=0!==(E&f),A=new o.ShaderMaterial({uniforms:M,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,morphTargets:T,skinning:P});A._shadowPass=!0,y[E]=A;var k=new o.ShaderMaterial({uniforms:C,vertexShader:S.vertexShader,fragmentShader:S.fragmentShader,morphTargets:T,skinning:P});k._shadowPass=!0,v[E]=k}var O=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=o.PCFShadowMap,this.cullFace=o.CullFaceFront,this.render=function(d){var f,m;if(O.enabled!==!1&&(O.autoUpdate!==!1||O.needsUpdate!==!1)){a.clearColor(1,1,1,1),s.disable(a.BLEND),s.enable(a.CULL_FACE),a.frontFace(a.CCW),a.cullFace(O.cullFace===o.CullFaceFront?a.FRONT:a.BACK),s.setDepthTest(!0),t.getViewport(_);for(var y=0,v=e.length;v>y;y++){var w=e[y];if(w.castShadow===!0){var M=w.shadow,S=M.camera,C=M.mapSize;if(w instanceof o.PointLight){f=6,m=!0;var E=C.x/4,T=C.y/2;x[0].set(2*E,T,E,T),x[1].set(0,T,E,T),x[2].set(3*E,T,E,T),x[3].set(E,T,E,T),x[4].set(3*E,0,E,T),x[5].set(E,0,E,T)}else f=1,m=!1;if(null===M.map){var P=o.LinearFilter;O.type===o.PCFSoftShadowMap&&(P=o.NearestFilter);var A={minFilter:P,magFilter:P,format:o.RGBAFormat};M.map=new o.WebGLRenderTarget(C.x,C.y,A),M.matrix=new o.Matrix4,w instanceof o.SpotLight&&(S.aspect=C.x/C.y),S.updateProjectionMatrix()}var k=M.map,N=M.matrix;c.setFromMatrixPosition(w.matrixWorld),S.position.copy(c),t.setRenderTarget(k),t.clear();for(var D=0;f>D;D++){if(m){h.copy(S.position),h.add(g[D]),S.up.copy(b[D]),S.lookAt(h);var L=x[D];t.setViewport(L.x,L.y,L.z,L.w)}else h.setFromMatrixPosition(w.target.matrixWorld),S.lookAt(h);S.updateMatrixWorld(),S.matrixWorldInverse.getInverse(S.matrixWorld),N.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),N.multiply(S.projectionMatrix),N.multiply(S.matrixWorldInverse),l.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),u.setFromMatrix(l),p.length=0,r(d,S);for(var R=0,I=p.length;I>R;R++){var z=p[R],j=i.update(z),V=z.material;if(V instanceof o.MeshFaceMaterial)for(var B=j.groups,U=V.materials,F=0,G=B.length;G>F;F++){var H=B[F],W=U[H.materialIndex];if(W.visible===!0){var X=n(z,W,m,c);t.renderBufferDirect(S,e,null,j,X,z,H)}}else{var X=n(z,V,m,c);t.renderBufferDirect(S,e,null,j,X,z,null)}}}t.resetGLState()}}t.setViewport(_.x,_.y,_.z,_.w);var q=t.getClearColor(),Y=t.getClearAlpha();t.setClearColor(q,Y),s.enable(a.BLEND),O.cullFace===o.CullFaceFront&&a.cullFace(a.BACK),t.resetGLState(),O.needsUpdate=!1}}},o.WebGLState=function(t,e,i){var n=this,r=new Uint8Array(16),a=new Uint8Array(16),s=new Uint8Array(16),u={},l=null,h=null,c=null,p=null,d=null,f=null,m=null,y=null,v=null,g=null,b=null,x=null,_=null,w=null,M=null,S=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),C=void 0,E={};this.init=function(){t.clearColor(0,0,0,1),t.clearDepth(1),t.clearStencil(0),this.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.frontFace(t.CCW),t.cullFace(t.BACK),this.enable(t.CULL_FACE),this.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var t=0,e=r.length;e>t;t++)r[t]=0},this.enableAttribute=function(i){if(r[i]=1,0===a[i]&&(t.enableVertexAttribArray(i),a[i]=1),0!==s[i]){var n=e.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(i,0),s[i]=0}},this.enableAttributeAndDivisor=function(e,i,n){r[e]=1,0===a[e]&&(t.enableVertexAttribArray(e),a[e]=1),s[e]!==i&&(n.vertexAttribDivisorANGLE(e,i),s[e]=i)},this.disableUnusedAttributes=function(){for(var e=0,i=a.length;i>e;e++)a[e]!==r[e]&&(t.disableVertexAttribArray(e),a[e]=0)},this.enable=function(e){u[e]!==!0&&(t.enable(e),u[e]=!0)},this.disable=function(e){u[e]!==!1&&(t.disable(e),u[e]=!1)},this.getCompressedTextureFormats=function(){if(null===l&&(l=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)l.push(i[n]);return l},this.setBlending=function(e,n,r,a,s,u,l){e!==h&&(e===o.NoBlending?this.disable(t.BLEND):e===o.AdditiveBlending?(this.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===o.SubtractiveBlending?(this.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===o.MultiplyBlending?(this.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):e===o.CustomBlending?this.enable(t.BLEND):(this.enable(t.BLEND),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),h=e),e===o.CustomBlending?(s=s||n,u=u||r,l=l||a,(n!==c||s!==f)&&(t.blendEquationSeparate(i(n),i(s)),c=n,f=s),(r!==p||a!==d||u!==m||l!==y)&&(t.blendFuncSeparate(i(r),i(a),i(u),i(l)),p=r,d=a,m=u,y=l)):(c=null,p=null,d=null,f=null,m=null,y=null)},this.setDepthFunc=function(e){if(v!==e){if(e)switch(e){case o.NeverDepth:t.depthFunc(t.NEVER);break;case o.AlwaysDepth:t.depthFunc(t.ALWAYS);break;case o.LessDepth:t.depthFunc(t.LESS);break;case o.LessEqualDepth:t.depthFunc(t.LEQUAL);break;case o.EqualDepth:t.depthFunc(t.EQUAL);break;case o.GreaterEqualDepth:t.depthFunc(t.GEQUAL);break;case o.GreaterDepth:t.depthFunc(t.GREATER);break;case o.NotEqualDepth:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);v=e}},this.setDepthTest=function(e){e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)},this.setDepthWrite=function(e){g!==e&&(t.depthMask(e),g=e)},this.setColorWrite=function(e){b!==e&&(t.colorMask(e,e,e,e),b=e)},this.setFlipSided=function(e){x!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),x=e)},this.setLineWidth=function(e){e!==_&&(t.lineWidth(e),_=e)},this.setPolygonOffset=function(e,i,n){e?this.enable(t.POLYGON_OFFSET_FILL):this.disable(t.POLYGON_OFFSET_FILL),!e||w===i&&M===n||(t.polygonOffset(i,n),w=i,M=n)},this.setScissorTest=function(e){e?this.enable(t.SCISSOR_TEST):this.disable(t.SCISSOR_TEST)},this.activeTexture=function(e){void 0===e&&(e=t.TEXTURE0+S-1),C!==e&&(t.activeTexture(e),C=e)},this.bindTexture=function(e,i){void 0===C&&n.activeTexture();var r=E[C];void 0===r&&(r={type:void 0,texture:void 0},E[C]=r),(r.type!==e||r.texture!==i)&&(t.bindTexture(e,i),r.type=e,r.texture=i)},this.compressedTexImage2D=function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(e)}},this.texImage2D=function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(e)}},this.reset=function(){for(var e=0;e<a.length;e++)1===a[e]&&(t.disableVertexAttribArray(e),a[e]=0);u={},l=null,h=null,g=null,b=null,x=null}},o.LensFlarePlugin=function(t,e){function i(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);r=d.createBuffer(),a=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,r),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),c=d.createTexture(),p=d.createTexture(),f.bindTexture(d.TEXTURE_2D,c),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),f.bindTexture(d.TEXTURE_2D,p),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),h=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var i;i=h?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},s=n(i),u={vertex:d.getAttribLocation(s,"position"),uv:d.getAttribLocation(s,"uv")},l={renderType:d.getUniformLocation(s,"renderType"),map:d.getUniformLocation(s,"map"),occlusionMap:d.getUniformLocation(s,"occlusionMap"),opacity:d.getUniformLocation(s,"opacity"),color:d.getUniformLocation(s,"color"),scale:d.getUniformLocation(s,"scale"),rotation:d.getUniformLocation(s,"rotation"),screenPosition:d.getUniformLocation(s,"screenPosition")}}function n(e){var i=d.createProgram(),n=d.createShader(d.FRAGMENT_SHADER),r=d.createShader(d.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return d.shaderSource(n,o+e.fragmentShader),d.shaderSource(r,o+e.vertexShader),d.compileShader(n),d.compileShader(r),d.attachShader(i,n),d.attachShader(i,r),d.linkProgram(i),i}var r,a,s,u,l,h,c,p,d=t.context,f=t.state;this.render=function(n,m,y,v){if(0!==e.length){var g=new o.Vector3,b=v/y,x=.5*y,_=.5*v,w=16/v,M=new o.Vector2(w*b,w),S=new o.Vector3(1,1,0),C=new o.Vector2(1,1);void 0===s&&i(),d.useProgram(s),f.initAttributes(),f.enableAttribute(u.vertex),f.enableAttribute(u.uv),f.disableUnusedAttributes(),d.uniform1i(l.occlusionMap,0),d.uniform1i(l.map,1),d.bindBuffer(d.ARRAY_BUFFER,r),d.vertexAttribPointer(u.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(u.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),f.disable(d.CULL_FACE),d.depthMask(!1);for(var E=0,T=e.length;T>E;E++){w=16/v,M.set(w*b,w);var P=e[E];if(g.set(P.matrixWorld.elements[12],P.matrixWorld.elements[13],P.matrixWorld.elements[14]),g.applyMatrix4(m.matrixWorldInverse),g.applyProjection(m.projectionMatrix),S.copy(g),C.x=S.x*x+x,C.y=S.y*_+_,h||C.x>0&&C.x<y&&C.y>0&&C.y<v){f.activeTexture(d.TEXTURE0),f.bindTexture(d.TEXTURE_2D,null),f.activeTexture(d.TEXTURE1),f.bindTexture(d.TEXTURE_2D,c),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,C.x-8,C.y-8,16,16,0),d.uniform1i(l.renderType,0),d.uniform2f(l.scale,M.x,M.y),d.uniform3f(l.screenPosition,S.x,S.y,S.z),f.disable(d.BLEND),f.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),f.activeTexture(d.TEXTURE0),f.bindTexture(d.TEXTURE_2D,p),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,C.x-8,C.y-8,16,16,0),d.uniform1i(l.renderType,1),f.disable(d.DEPTH_TEST),f.activeTexture(d.TEXTURE1),f.bindTexture(d.TEXTURE_2D,c),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),P.positionScreen.copy(S),P.customUpdateCallback?P.customUpdateCallback(P):P.updateLensFlares(),d.uniform1i(l.renderType,2),f.enable(d.BLEND);for(var A=0,k=P.lensFlares.length;k>A;A++){var O=P.lensFlares[A];O.opacity>.001&&O.scale>.001&&(S.x=O.x,S.y=O.y,S.z=O.z,w=O.size*O.scale/v,M.x=w*b,M.y=w,d.uniform3f(l.screenPosition,S.x,S.y,S.z),d.uniform2f(l.scale,M.x,M.y),d.uniform1f(l.rotation,O.rotation),d.uniform1f(l.opacity,O.opacity),d.uniform3f(l.color,O.color.r,O.color.g,O.color.b),f.setBlending(O.blending,O.blendEquation,O.blendSrc,O.blendDst),t.setTexture(O.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}f.enable(d.CULL_FACE),f.enable(d.DEPTH_TEST),d.depthMask(!0),t.resetGLState()}}},o.SpritePlugin=function(t,e){function i(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),u=n(),l={position:p.getAttribLocation(u,"position"),uv:p.getAttribLocation(u,"uv")},h={uvOffset:p.getUniformLocation(u,"uvOffset"),uvScale:p.getUniformLocation(u,"uvScale"),rotation:p.getUniformLocation(u,"rotation"),scale:p.getUniformLocation(u,"scale"),color:p.getUniformLocation(u,"color"),map:p.getUniformLocation(u,"map"),opacity:p.getUniformLocation(u,"opacity"),modelViewMatrix:p.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(u,"projectionMatrix"),fogType:p.getUniformLocation(u,"fogType"),fogDensity:p.getUniformLocation(u,"fogDensity"),fogNear:p.getUniformLocation(u,"fogNear"),fogFar:p.getUniformLocation(u,"fogFar"),fogColor:p.getUniformLocation(u,"fogColor"),alphaTest:p.getUniformLocation(u,"alphaTest")};var i=document.createElement("canvas");i.width=8,i.height=8;var r=i.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),c=new o.Texture(i),c.needsUpdate=!0}function n(){var e=p.createProgram(),i=p.createShader(p.VERTEX_SHADER),n=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(i),p.compileShader(n),p.attachShader(e,i),p.attachShader(e,n),p.linkProgram(e),e}function r(t,e){return t.z!==e.z?e.z-t.z:e.id-t.id}var a,s,u,l,h,c,p=t.context,d=t.state,f=new o.Vector3,m=new o.Quaternion,y=new o.Vector3;this.render=function(n,v){if(0!==e.length){void 0===u&&i(),p.useProgram(u),d.initAttributes(),d.enableAttribute(l.position),d.enableAttribute(l.uv),d.disableUnusedAttributes(),d.disable(p.CULL_FACE),d.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(l.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(l.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.uniformMatrix4fv(h.projectionMatrix,!1,v.projectionMatrix.elements),d.activeTexture(p.TEXTURE0),p.uniform1i(h.map,0);var g=0,b=0,x=n.fog;x?(p.uniform3f(h.fogColor,x.color.r,x.color.g,x.color.b),x instanceof o.Fog?(p.uniform1f(h.fogNear,x.near),p.uniform1f(h.fogFar,x.far),p.uniform1i(h.fogType,1),g=1,b=1):x instanceof o.FogExp2&&(p.uniform1f(h.fogDensity,x.density),p.uniform1i(h.fogType,2),g=2,b=2)):(p.uniform1i(h.fogType,0),g=0,b=0);for(var _=0,w=e.length;w>_;_++){var M=e[_];M.modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,M.matrixWorld),M.z=-M.modelViewMatrix.elements[14]}e.sort(r);for(var S=[],_=0,w=e.length;w>_;_++){var M=e[_],C=M.material;p.uniform1f(h.alphaTest,C.alphaTest),p.uniformMatrix4fv(h.modelViewMatrix,!1,M.modelViewMatrix.elements),M.matrixWorld.decompose(f,m,y),S[0]=y.x,S[1]=y.y;var E=0;n.fog&&C.fog&&(E=b),g!==E&&(p.uniform1i(h.fogType,E),g=E),null!==C.map?(p.uniform2f(h.uvOffset,C.map.offset.x,C.map.offset.y),p.uniform2f(h.uvScale,C.map.repeat.x,C.map.repeat.y)):(p.uniform2f(h.uvOffset,0,0),p.uniform2f(h.uvScale,1,1)),p.uniform1f(h.opacity,C.opacity),p.uniform3f(h.color,C.color.r,C.color.g,C.color.b),p.uniform1f(h.rotation,C.rotation),p.uniform2fv(h.scale,S),d.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),d.setDepthTest(C.depthTest),d.setDepthWrite(C.depthWrite),C.map&&C.map.image&&C.map.image.width?t.setTexture(C.map,0):t.setTexture(c,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}d.enable(p.CULL_FACE),t.resetGLState()}}},o.CurveUtils={tangentQuadraticBezier:function(t,e,i,n){return 2*(1-t)*(i-e)+2*t*(n-i)},tangentCubicBezier:function(t,e,i,n,r){return-3*e*(1-t)*(1-t)+3*i*(1-t)*(1-t)-6*t*i*(1-t)+6*t*n*(1-t)-3*t*t*n+3*t*t*r},tangentSpline:function(t,e,i,n,r){var o=6*t*t-6*t,a=3*t*t-4*t+1,s=-6*t*t+6*t,u=3*t*t-2*t;return o+a+s+u},interpolate:function(t,e,i,n,r){var o=.5*(i-t),a=.5*(n-e),s=r*r,u=r*s;return(2*e-2*i+o+a)*u+(-3*e+3*i-2*o-a)*s+o*r+e}},o.GeometryUtils={merge:function(t,e,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;e instanceof o.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},o.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture is being deprecated. Use THREE.TextureLoader() instead.");var r=new o.TextureLoader;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a},loadTextureCube:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube is being deprecated. Use THREE.CubeTextureLoader() instead.");var r=new o.CubeTextureLoader;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},o.SceneUtils={createMultiMaterialObject:function(t,e){for(var i=new o.Group,n=0,r=e.length;r>n;n++)i.add(new o.Mesh(t,e[n]));return i},detach:function(t,e,i){t.applyMatrix(e.matrixWorld),e.remove(t),i.add(t)},attach:function(t,e,i){var n=new o.Matrix4;n.getInverse(i.matrixWorld),t.applyMatrix(n),e.remove(t),i.add(t)}},o.ShapeUtils={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;e>r;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},triangulate:function(){function t(t,e,i,n,r,o){var a,s,u,l,h,c,p,d,f;if(s=t[o[e]].x,u=t[o[e]].y,l=t[o[i]].x,h=t[o[i]].y,c=t[o[n]].x,p=t[o[n]].y,Number.EPSILON>(l-s)*(p-u)-(h-u)*(c-s))return!1;var m,y,v,g,b,x,_,w,M,S,C,E,T,P,A;for(m=c-l,y=p-h,v=s-c,g=u-p,b=l-s,x=h-u,a=0;r>a;a++)if(d=t[o[a]].x,f=t[o[a]].y,!(d===s&&f===u||d===l&&f===h||d===c&&f===p)&&(_=d-s,w=f-u,M=d-l,S=f-h,C=d-c,E=f-p,A=m*S-y*M,T=b*w-x*_,P=v*E-g*C,A>=-Number.EPSILON&&P>=-Number.EPSILON&&T>=-Number.EPSILON))return!1;return!0}return function(e,i){var n=e.length;if(3>n)return null;var r,a,s,u=[],l=[],h=[];if(o.ShapeUtils.area(e)>0)for(a=0;n>a;a++)l[a]=a;else for(a=0;n>a;a++)l[a]=n-1-a;var c=n,p=2*c;for(a=c-1;c>2;){if(p--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),i?h:u;if(r=a,r>=c&&(r=0),a=r+1,a>=c&&(a=0),s=a+1,s>=c&&(s=0),t(e,r,a,s,c,l)){var d,f,m,y,v;for(d=l[r],f=l[a],m=l[s],u.push([e[d],e[f],e[m]]),h.push([l[r],l[a],l[s]]),y=a,v=a+1;c>v;y++,v++)l[y]=l[v];c--,p=2*c}}return i?h:u}}(),triangulateShape:function(t,e){function i(t,e,i){return t.x!==e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function n(t,e,n,r,o){var a=e.x-t.x,s=e.y-t.y,u=r.x-n.x,l=r.y-n.y,h=t.x-n.x,c=t.y-n.y,p=s*u-a*l,d=s*h-a*c;if(Math.abs(p)>Number.EPSILON){var f;if(p>0){if(0>d||d>p)return[];if(f=l*h-u*c,0>f||f>p)return[]}else{if(d>0||p>d)return[];if(f=l*h-u*c,f>0||p>f)return[]}if(0===f)return!o||0!==d&&d!==p?[t]:[];if(f===p)return!o||0!==d&&d!==p?[e]:[];if(0===d)return[n];if(d===p)return[r];var m=f/p;return[{x:t.x+m*a,y:t.y+m*s}]}if(0!==d||l*h!==u*c)return[];var y=0===a&&0===s,v=0===u&&0===l;if(y&&v)return t.x!==n.x||t.y!==n.y?[]:[t];if(y)return i(n,r,t)?[t]:[];if(v)return i(t,e,n)?[n]:[];var g,b,x,_,w,M,S,C;return 0!==a?(t.x<e.x?(g=t,
x=t.x,b=e,_=e.x):(g=e,x=e.x,b=t,_=t.x),n.x<r.x?(w=n,S=n.x,M=r,C=r.x):(w=r,S=r.x,M=n,C=n.x)):(t.y<e.y?(g=t,x=t.y,b=e,_=e.y):(g=e,x=e.y,b=t,_=t.y),n.y<r.y?(w=n,S=n.y,M=r,C=r.y):(w=r,S=r.y,M=n,C=n.y)),S>=x?S>_?[]:_===S?o?[]:[w]:C>=_?[w,b]:[w,M]:x>C?[]:x===C?o?[]:[g]:C>=_?[g,b]:[g,M]}function r(t,e,i,n){var r=e.x-t.x,o=e.y-t.y,a=i.x-t.x,s=i.y-t.y,u=n.x-t.x,l=n.y-t.y,h=r*s-o*a,c=r*l-o*u;if(Math.abs(h)>Number.EPSILON){var p=u*s-l*a;return h>0?c>=0&&p>=0:c>=0||p>=0}return c>0}function a(t,e){function i(t,e){var i=g.length-1,n=t-1;0>n&&(n=i);var o=t+1;o>i&&(o=0);var a=r(g[t],g[n],g[o],s[e]);if(!a)return!1;var u=s.length-1,l=e-1;0>l&&(l=u);var h=e+1;return h>u&&(h=0),a=r(s[e],s[l],s[h],g[t]),a?!0:!1}function o(t,e){var i,r,o;for(i=0;i<g.length;i++)if(r=i+1,r%=g.length,o=n(t,e,g[i],g[r],!0),o.length>0)return!0;return!1}function a(t,i){var r,o,a,s,u;for(r=0;r<b.length;r++)for(o=e[b[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,u=n(t,i,o[a],o[s],!0),u.length>0)return!0;return!1}for(var s,u,l,h,c,p,d,f,m,y,v,g=t.concat(),b=[],x=[],_=0,w=e.length;w>_;_++)b.push(_);for(var M=0,S=2*b.length;b.length>0;){if(S--,0>S){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(l=M;l<g.length;l++){h=g[l],u=-1;for(var _=0;_<b.length;_++)if(p=b[_],d=h.x+":"+h.y+":"+p,void 0===x[d]){s=e[p];for(var C=0;C<s.length;C++)if(c=s[C],i(l,C)&&!o(h,c)&&!a(h,c)){u=C,b.splice(_,1),f=g.slice(0,l+1),m=g.slice(l),y=s.slice(u),v=s.slice(0,u+1),g=f.concat(y).concat(v).concat(m),M=l;break}if(u>=0)break;x[d]=!0}if(u>=0)break}}return g}for(var s,u,l,h,c,p,d={},f=t.concat(),m=0,y=e.length;y>m;m++)Array.prototype.push.apply(f,e[m]);for(s=0,u=f.length;u>s;s++)c=f[s].x+":"+f[s].y,void 0!==d[c]&&console.warn("THREE.Shape: Duplicate point",c),d[c]=s;var v=a(t,e),g=o.ShapeUtils.triangulate(v,!1);for(s=0,u=g.length;u>s;s++)for(h=g[s],l=0;3>l;l++)c=h[l].x+":"+h[l].y,p=d[c],void 0!==p&&(h[l]=p);return g.concat()},isClockWise:function(t){return o.ShapeUtils.area(t)<0},b2:function(){function t(t,e){var i=1-t;return i*i*e}function e(t,e){return 2*(1-t)*t*e}function i(t,e){return t*t*e}return function(n,r,o,a){return t(n,r)+e(n,o)+i(n,a)}}(),b3:function(){function t(t,e){var i=1-t;return i*i*i*e}function e(t,e){var i=1-t;return 3*i*i*t*e}function i(t,e){var i=1-t;return 3*i*t*t*e}function n(t,e){return t*t*t*e}return function(r,o,a,s,u){return t(r,o)+e(r,a)+i(r,s)+n(r,u)}}()},o.Audio=function(t){o.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1},o.Audio.prototype=Object.create(o.Object3D.prototype),o.Audio.prototype.constructor=o.Audio,o.Audio.prototype.load=function(t){var e=this,i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(t){e.context.decodeAudioData(this.response,function(t){e.source.buffer=t,e.autoplay&&e.play()})},i.send(),this},o.Audio.prototype.play=function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");var t=this.context.createBufferSource();t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=t,this.connect()},o.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},o.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},o.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)},o.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)},o.Audio.prototype.setFilter=function(t){this.isPlaying===!0?(this.disconnect(),this.filter=t,this.connect()):this.filter=t},o.Audio.prototype.getFilter=function(){return this.filter},o.Audio.prototype.setPlaybackRate=function(t){this.playbackRate=t,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate)},o.Audio.prototype.getPlaybackRate=function(){return this.playbackRate},o.Audio.prototype.onEnded=function(){this.isPlaying=!1},o.Audio.prototype.setLoop=function(t){this.source.loop=t},o.Audio.prototype.getLoop=function(){return this.source.loop},o.Audio.prototype.setRefDistance=function(t){this.panner.refDistance=t},o.Audio.prototype.getRefDistance=function(){return this.panner.refDistance},o.Audio.prototype.setRolloffFactor=function(t){this.panner.rolloffFactor=t},o.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor},o.Audio.prototype.setVolume=function(t){this.gain.gain.value=t},o.Audio.prototype.getVolume=function(){return this.gain.gain.value},o.Audio.prototype.updateMatrixWorld=function(){var t=new o.Vector3;return function(e){o.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}(),o.AudioListener=function(){o.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},o.AudioListener.prototype=Object.create(o.Object3D.prototype),o.AudioListener.prototype.constructor=o.AudioListener,o.AudioListener.prototype.updateMatrixWorld=function(){var t=new o.Vector3,e=new o.Quaternion,i=new o.Vector3,n=new o.Vector3;return function(r){o.Object3D.prototype.updateMatrixWorld.call(this,r);var a=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,i),n.set(0,0,-1).applyQuaternion(e),a.setPosition(t.x,t.y,t.z),a.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z)}}(),o.Curve=function(){},o.Curve.prototype={constructor:o.Curve,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPoint(e/t));return i},getSpacedPoints:function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPointAt(e/t));return i},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),o=0;for(n.push(0),i=1;t>=i;i++)e=this.getPoint(i/t),o+=e.distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,o=n.length;i=e?e:t*n[o-1];for(var a,s=0,u=o-1;u>=s;)if(r=Math.floor(s+(u-s)/2),a=n[r]-i,0>a)s=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,n[r]===i){var l=r/(o-1);return l}var h=n[r],c=n[r+1],p=c-h,d=(i-h)/p,l=(r+d)/(o-1);return l},getTangent:function(t){var e=1e-4,i=t-e,n=t+e;0>i&&(i=0),n>1&&(n=1);var r=this.getPoint(i),o=this.getPoint(n),a=o.clone().sub(r);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)}},o.Curve.Utils=o.CurveUtils,o.Curve.create=function(t,e){return t.prototype=Object.create(o.Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},o.CurvePath=function(){this.curves=[],this.autoClose=!1},o.CurvePath.prototype=Object.create(o.Curve.prototype),o.CurvePath.prototype.constructor=o.CurvePath,o.CurvePath.prototype.add=function(t){this.curves.push(t)},o.CurvePath.prototype.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new o.LineCurve(e,t))},o.CurvePath.prototype.getPoint=function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,o=this.curves[n],a=1-r/o.getLength();return o.getPointAt(a)}n++}return null},o.CurvePath.prototype.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},o.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;n>i;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},o.CurvePath.prototype.createPointsGeometry=function(t){var e=this.getPoints(t,!0);return this.createGeometry(e)},o.CurvePath.prototype.createSpacedPointsGeometry=function(t){var e=this.getSpacedPoints(t,!0);return this.createGeometry(e)},o.CurvePath.prototype.createGeometry=function(t){for(var e=new o.Geometry,i=0,n=t.length;n>i;i++){var r=t[i];e.vertices.push(new o.Vector3(r.x,r.y,r.z||0))}return e},o.Path=function(t){o.CurvePath.call(this),this.actions=[],t&&this.fromPoints(t)},o.Path.prototype=Object.create(o.CurvePath.prototype),o.Path.prototype.constructor=o.Path,o.Path.prototype.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;i>e;e++)this.lineTo(t[e].x,t[e].y)},o.Path.prototype.moveTo=function(t,e){this.actions.push({action:"moveTo",args:[t,e]})},o.Path.prototype.lineTo=function(t,e){var i=this.actions[this.actions.length-1].args,n=i[i.length-2],r=i[i.length-1],a=new o.LineCurve(new o.Vector2(n,r),new o.Vector2(t,e));this.curves.push(a),this.actions.push({action:"lineTo",args:[t,e]})},o.Path.prototype.quadraticCurveTo=function(t,e,i,n){var r=this.actions[this.actions.length-1].args,a=r[r.length-2],s=r[r.length-1],u=new o.QuadraticBezierCurve(new o.Vector2(a,s),new o.Vector2(t,e),new o.Vector2(i,n));this.curves.push(u),this.actions.push({action:"quadraticCurveTo",args:[t,e,i,n]})},o.Path.prototype.bezierCurveTo=function(t,e,i,n,r,a){var s=this.actions[this.actions.length-1].args,u=s[s.length-2],l=s[s.length-1],h=new o.CubicBezierCurve(new o.Vector2(u,l),new o.Vector2(t,e),new o.Vector2(i,n),new o.Vector2(r,a));this.curves.push(h),this.actions.push({action:"bezierCurveTo",args:[t,e,i,n,r,a]})},o.Path.prototype.splineThru=function(t){var e=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,n=i[i.length-2],r=i[i.length-1],a=[new o.Vector2(n,r)];Array.prototype.push.apply(a,t);var s=new o.SplineCurve(a);this.curves.push(s),this.actions.push({action:"splineThru",args:e})},o.Path.prototype.arc=function(t,e,i,n,r,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],u=a[a.length-1];this.absarc(t+s,e+u,i,n,r,o)},o.Path.prototype.absarc=function(t,e,i,n,r,o){this.absellipse(t,e,i,i,n,r,o)},o.Path.prototype.ellipse=function(t,e,i,n,r,o,a,s){var u=this.actions[this.actions.length-1].args,l=u[u.length-2],h=u[u.length-1];this.absellipse(t+l,e+h,i,n,r,o,a,s)},o.Path.prototype.absellipse=function(t,e,i,n,r,a,s,u){var l=[t,e,i,n,r,a,s,u||0],h=new o.EllipseCurve(t,e,i,n,r,a,s,u);this.curves.push(h);var c=h.getPoint(1);l.push(c.x),l.push(c.y),this.actions.push({action:"ellipse",args:l})},o.Path.prototype.getSpacedPoints=function(t,e){t||(t=40);for(var i=[],n=0;t>n;n++)i.push(this.getPoint(n/t));return i},o.Path.prototype.getPoints=function(t,e){t=t||12;for(var i,n,r,a,s,u,l,h,c,p,d,f=o.ShapeUtils.b2,m=o.ShapeUtils.b3,y=[],v=0,g=this.actions.length;g>v;v++){var b=this.actions[v],x=b.action,_=b.args;switch(x){case"moveTo":y.push(new o.Vector2(_[0],_[1]));break;case"lineTo":y.push(new o.Vector2(_[0],_[1]));break;case"quadraticCurveTo":i=_[2],n=_[3],s=_[0],u=_[1],y.length>0?(c=y[y.length-1],l=c.x,h=c.y):(c=this.actions[v-1].args,l=c[c.length-2],h=c[c.length-1]);for(var w=1;t>=w;w++){var M=w/t;p=f(M,l,s,i),d=f(M,h,u,n),y.push(new o.Vector2(p,d))}break;case"bezierCurveTo":i=_[4],n=_[5],s=_[0],u=_[1],r=_[2],a=_[3],y.length>0?(c=y[y.length-1],l=c.x,h=c.y):(c=this.actions[v-1].args,l=c[c.length-2],h=c[c.length-1]);for(var w=1;t>=w;w++){var M=w/t;p=m(M,l,s,r,i),d=m(M,h,u,a,n),y.push(new o.Vector2(p,d))}break;case"splineThru":c=this.actions[v-1].args;var S=new o.Vector2(c[c.length-2],c[c.length-1]),C=[S],E=t*_[0].length;C=C.concat(_[0]);for(var T=new o.SplineCurve(C),w=1;E>=w;w++)y.push(T.getPointAt(w/E));break;case"arc":for(var P,A=_[0],k=_[1],O=_[2],N=_[3],D=_[4],L=!!_[5],R=D-N,I=2*t,w=1;I>=w;w++){var M=w/I;L||(M=1-M),P=N+M*R,p=A+O*Math.cos(P),d=k+O*Math.sin(P),y.push(new o.Vector2(p,d))}break;case"ellipse":var P,z,j,A=_[0],k=_[1],V=_[2],B=_[3],N=_[4],D=_[5],L=!!_[6],U=_[7],R=D-N,I=2*t;0!==U&&(z=Math.cos(U),j=Math.sin(U));for(var w=1;I>=w;w++){var M=w/I;if(L||(M=1-M),P=N+M*R,p=A+V*Math.cos(P),d=k+B*Math.sin(P),0!==U){var F=p,G=d;p=(F-A)*z-(G-k)*j+A,d=(F-A)*j+(G-k)*z+k}y.push(new o.Vector2(p,d))}}}var H=y[y.length-1];return Math.abs(H.x-y[0].x)<Number.EPSILON&&Math.abs(H.y-y[0].y)<Number.EPSILON&&y.splice(y.length-1,1),e&&y.push(y[0]),y},o.Path.prototype.toShapes=function(t,e){function i(t){for(var e=[],i=new o.Path,n=0,r=t.length;r>n;n++){var a=t[n],s=a.args,u=a.action;"moveTo"===u&&0!==i.actions.length&&(e.push(i),i=new o.Path),i[u].apply(i,s)}return 0!==i.actions.length&&e.push(i),e}function n(t){for(var e=[],i=0,n=t.length;n>i;i++){var r=t[i],a=new o.Shape;a.actions=r.actions,a.curves=r.curves,e.push(a)}return e}function r(t,e){for(var i=e.length,n=!1,r=i-1,o=0;i>o;r=o++){var a=e[r],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(a=e[o],u=-u,s=e[r],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var h=l*(t.x-a.x)-u*(t.y-a.y);if(0===h)return!0;if(0>h)continue;n=!n}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return n}var a=o.ShapeUtils.isClockWise,s=i(this.actions);if(0===s.length)return[];if(e===!0)return n(s);var u,l,h,c=[];if(1===s.length)return l=s[0],h=new o.Shape,h.actions=l.actions,h.curves=l.curves,c.push(h),c;var p=!a(s[0].getPoints());p=t?!p:p;var d,f=[],m=[],y=[],v=0;m[v]=void 0,y[v]=[];for(var g=0,b=s.length;b>g;g++)l=s[g],d=l.getPoints(),u=a(d),u=t?!u:u,u?(!p&&m[v]&&v++,m[v]={s:new o.Shape,p:d},m[v].s.actions=l.actions,m[v].s.curves=l.curves,p&&v++,y[v]=[]):y[v].push({h:l,p:d[0]});if(!m[0])return n(s);if(m.length>1){for(var x=!1,_=[],w=0,M=m.length;M>w;w++)f[w]=[];for(var w=0,M=m.length;M>w;w++)for(var S=y[w],C=0;C<S.length;C++){for(var E=S[C],T=!0,P=0;P<m.length;P++)r(E.p,m[P].p)&&(w!==P&&_.push({froms:w,tos:P,hole:C}),T?(T=!1,f[P].push(E)):x=!0);T&&f[w].push(E)}_.length>0&&(x||(y=f))}for(var A,g=0,k=m.length;k>g;g++){h=m[g].s,c.push(h),A=y[g];for(var O=0,N=A.length;N>O;O++)h.holes.push(A[O].h)}return c},o.Shape=function(){o.Path.apply(this,arguments),this.holes=[]},o.Shape.prototype=Object.create(o.Path.prototype),o.Shape.prototype.constructor=o.Shape,o.Shape.prototype.extrude=function(t){return new o.ExtrudeGeometry(this,t)},o.Shape.prototype.makeGeometry=function(t){return new o.ShapeGeometry(this,t)},o.Shape.prototype.getPointsHoles=function(t){for(var e=[],i=0,n=this.holes.length;n>i;i++)e[i]=this.holes[i].getPoints(t);return e},o.Shape.prototype.extractAllPoints=function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},o.Shape.prototype.extractPoints=function(t){return this.extractAllPoints(t)},o.Shape.Utils=o.ShapeUtils,o.LineCurve=function(t,e){this.v1=t,this.v2=e},o.LineCurve.prototype=Object.create(o.Curve.prototype),o.LineCurve.prototype.constructor=o.LineCurve,o.LineCurve.prototype.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},o.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},o.LineCurve.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},o.QuadraticBezierCurve=function(t,e,i){this.v0=t,this.v1=e,this.v2=i},o.QuadraticBezierCurve.prototype=Object.create(o.Curve.prototype),o.QuadraticBezierCurve.prototype.constructor=o.QuadraticBezierCurve,o.QuadraticBezierCurve.prototype.getPoint=function(t){var e=o.ShapeUtils.b2;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y))},o.QuadraticBezierCurve.prototype.getTangent=function(t){var e=o.CurveUtils.tangentQuadraticBezier;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y)).normalize()},o.CubicBezierCurve=function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},o.CubicBezierCurve.prototype=Object.create(o.Curve.prototype),o.CubicBezierCurve.prototype.constructor=o.CubicBezierCurve,o.CubicBezierCurve.prototype.getPoint=function(t){var e=o.ShapeUtils.b3;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},o.CubicBezierCurve.prototype.getTangent=function(t){var e=o.CurveUtils.tangentCubicBezier;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},o.SplineCurve=function(t){this.points=void 0==t?[]:t},o.SplineCurve.prototype=Object.create(o.Curve.prototype),o.SplineCurve.prototype.constructor=o.SplineCurve,o.SplineCurve.prototype.getPoint=function(t){var e=this.points,i=(e.length-1)*t,n=Math.floor(i),r=i-n,a=e[0===n?n:n-1],s=e[n],u=e[n>e.length-2?e.length-1:n+1],l=e[n>e.length-3?e.length-1:n+2],h=o.CurveUtils.interpolate;return new o.Vector2(h(a.x,s.x,u.x,l.x,r),h(a.y,s.y,u.y,l.y,r))},o.EllipseCurve=function(t,e,i,n,r,o,a,s){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0},o.EllipseCurve.prototype=Object.create(o.Curve.prototype),o.EllipseCurve.prototype.constructor=o.EllipseCurve,o.EllipseCurve.prototype.getPoint=function(t){var e=this.aEndAngle-this.aStartAngle;0>e&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI);var i;i=this.aClockwise===!0?this.aEndAngle+(1-t)*(2*Math.PI-e):this.aStartAngle+t*e;var n=this.aX+this.xRadius*Math.cos(i),r=this.aY+this.yRadius*Math.sin(i);if(0!==this.aRotation){var a=Math.cos(this.aRotation),s=Math.sin(this.aRotation),u=n,l=r;n=(u-this.aX)*a-(l-this.aY)*s+this.aX,r=(u-this.aX)*s+(l-this.aY)*a+this.aY}return new o.Vector2(n,r)},o.ArcCurve=function(t,e,i,n,r,a){o.EllipseCurve.call(this,t,e,i,i,n,r,a)},o.ArcCurve.prototype=Object.create(o.EllipseCurve.prototype),o.ArcCurve.prototype.constructor=o.ArcCurve,o.LineCurve3=o.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new o.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),o.QuadraticBezierCurve3=o.Curve.create(function(t,e,i){this.v0=t,this.v1=e,this.v2=i},function(t){var e=o.ShapeUtils.b2;return new o.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y),e(t,this.v0.z,this.v1.z,this.v2.z))}),o.CubicBezierCurve3=o.Curve.create(function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},function(t){var e=o.ShapeUtils.b3;return new o.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),o.SplineCurve3=o.Curve.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==t?[]:t},function(t){var e=this.points,i=(e.length-1)*t,n=Math.floor(i),r=i-n,a=e[0==n?n:n-1],s=e[n],u=e[n>e.length-2?e.length-1:n+1],l=e[n>e.length-3?e.length-1:n+2],h=o.CurveUtils.interpolate;return new o.Vector3(h(a.x,s.x,u.x,l.x,r),h(a.y,s.y,u.y,l.y,r),h(a.z,s.z,u.z,l.z,r))}),o.CatmullRomCurve3=function(){function t(){}var e=new o.Vector3,i=new t,n=new t,r=new t;return t.prototype.init=function(t,e,i,n){this.c0=t,this.c1=i,this.c2=-3*t+3*e-2*i-n,this.c3=2*t-2*e+i+n},t.prototype.initNonuniformCatmullRom=function(t,e,i,n,r,o,a){var s=(e-t)/r-(i-t)/(r+o)+(i-e)/o,u=(i-e)/o-(n-e)/(o+a)+(n-i)/a;s*=o,u*=o,this.init(e,i,s,u)},t.prototype.initCatmullRom=function(t,e,i,n,r){this.init(e,i,r*(i-t),r*(n-e))},t.prototype.calc=function(t){var e=t*t,i=e*t;return this.c0+this.c1*t+this.c2*e+this.c3*i},o.Curve.create(function(t){this.points=t||[]},function(t){var a,s,u,l,h=this.points;l=h.length,2>l&&console.log("duh, you need at least 2 points"),a=(l-1)*t,s=Math.floor(a),u=a-s,0===u&&s===l-1&&(s=l-2,u=1);var c,p,d,f;if(0===s?(e.subVectors(h[0],h[1]).add(h[0]),c=e):c=h[s-1],p=h[s],d=h[s+1],l>s+2?f=h[s+2]:(e.subVectors(h[l-1],h[l-2]).add(h[l-2]),f=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,y=Math.pow(c.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(d),m),g=Math.pow(d.distanceToSquared(f),m);1e-4>v&&(v=1),1e-4>y&&(y=v),1e-4>g&&(g=v),i.initNonuniformCatmullRom(c.x,p.x,d.x,f.x,y,v,g),n.initNonuniformCatmullRom(c.y,p.y,d.y,f.y,y,v,g),r.initNonuniformCatmullRom(c.z,p.z,d.z,f.z,y,v,g)}else if("catmullrom"===this.type){var b=void 0!==this.tension?this.tension:.5;i.initCatmullRom(c.x,p.x,d.x,f.x,b),n.initCatmullRom(c.y,p.y,d.y,f.y,b),r.initCatmullRom(c.z,p.z,d.z,f.z,b)}var x=new o.Vector3(i.calc(u),n.calc(u),r.calc(u));return x})}(),o.ClosedSplineCurve3=o.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points,i=(e.length-0)*t,n=Math.floor(i),r=i-n;n+=n>0?0:(Math.floor(Math.abs(n)/e.length)+1)*e.length;var a=e[(n-1)%e.length],s=e[n%e.length],u=e[(n+1)%e.length],l=e[(n+2)%e.length],h=o.CurveUtils.interpolate;return new o.Vector3(h(a.x,s.x,u.x,l.x,r),h(a.y,s.y,u.y,l.y,r),h(a.z,s.z,u.z,l.z,r))}),o.BoxGeometry=function(t,e,i,n,r,a){function s(t,e,i,n,r,a,s,l){var h,c,p,d=u.widthSegments,f=u.heightSegments,m=r/2,y=a/2,v=u.vertices.length;"x"===t&&"y"===e||"y"===t&&"x"===e?h="z":"x"===t&&"z"===e||"z"===t&&"x"===e?(h="y",f=u.depthSegments):("z"===t&&"y"===e||"y"===t&&"z"===e)&&(h="x",d=u.depthSegments);var g=d+1,b=f+1,x=r/d,_=a/f,w=new o.Vector3;for(w[h]=s>0?1:-1,p=0;b>p;p++)for(c=0;g>c;c++){var M=new o.Vector3;M[t]=(c*x-m)*i,M[e]=(p*_-y)*n,M[h]=s,u.vertices.push(M)}for(p=0;f>p;p++)for(c=0;d>c;c++){var S=c+g*p,C=c+g*(p+1),E=c+1+g*(p+1),T=c+1+g*p,P=new o.Vector2(c/d,1-p/f),A=new o.Vector2(c/d,1-(p+1)/f),k=new o.Vector2((c+1)/d,1-(p+1)/f),O=new o.Vector2((c+1)/d,1-p/f),N=new o.Face3(S+v,C+v,T+v);N.normal.copy(w),N.vertexNormals.push(w.clone(),w.clone(),w.clone()),N.materialIndex=l,u.faces.push(N),u.faceVertexUvs[0].push([P,A,O]),N=new o.Face3(C+v,E+v,T+v),N.normal.copy(w),N.vertexNormals.push(w.clone(),w.clone(),w.clone()),N.materialIndex=l,u.faces.push(N),u.faceVertexUvs[0].push([A.clone(),k,O.clone()])}}o.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.widthSegments=n||1,this.heightSegments=r||1,this.depthSegments=a||1;var u=this,l=t/2,h=e/2,c=i/2;s("z","y",-1,-1,i,e,l,0),s("z","y",1,-1,i,e,-l,1),s("x","z",1,1,t,i,h,2),s("x","z",1,-1,t,i,-h,3),s("x","y",1,-1,t,e,c,4),s("x","y",-1,-1,t,e,-c,5),this.mergeVertices()},o.BoxGeometry.prototype=Object.create(o.Geometry.prototype),o.BoxGeometry.prototype.constructor=o.BoxGeometry,o.BoxGeometry.prototype.clone=function(){var t=this.parameters;return new o.BoxGeometry(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)},o.CubeGeometry=o.BoxGeometry,o.CircleGeometry=function(t,e,i,n){o.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new o.CircleBufferGeometry(t,e,i,n))},o.CircleGeometry.prototype=Object.create(o.Geometry.prototype),o.CircleGeometry.prototype.constructor=o.CircleGeometry,o.CircleGeometry.prototype.clone=function(){var t=this.parameters;return new o.CircleGeometry(t.radius,t.segments,t.thetaStart,t.thetaLength)},o.CircleBufferGeometry=function(t,e,i,n){o.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||50,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r=e+2,a=new Float32Array(3*r),s=new Float32Array(3*r),u=new Float32Array(2*r);s[2]=1,u[0]=.5,u[1]=.5;for(var l=0,h=3,c=2;e>=l;l++,h+=3,c+=2){var p=i+l/e*n;a[h]=t*Math.cos(p),a[h+1]=t*Math.sin(p),s[h+2]=1,u[c]=(a[h]/t+1)/2,u[c+1]=(a[h+1]/t+1)/2}for(var d=[],h=1;e>=h;h++)d.push(h,h+1,0);this.setIndex(new o.BufferAttribute(new Uint16Array(d),1)),this.addAttribute("position",new o.BufferAttribute(a,3)),this.addAttribute("normal",new o.BufferAttribute(s,3)),this.addAttribute("uv",new o.BufferAttribute(u,2)),this.boundingSphere=new o.Sphere(new o.Vector3,t)},o.CircleBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.CircleBufferGeometry.prototype.constructor=o.CircleBufferGeometry,o.CircleBufferGeometry.prototype.clone=function(){var t=this.parameters;return new o.CircleBufferGeometry(t.radius,t.segments,t.thetaStart,t.thetaLength)},o.CylinderGeometry=function(t,e,i,n,r,a,s,u){o.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:u},t=void 0!==t?t:20,e=void 0!==e?e:20,i=void 0!==i?i:100,n=n||8,r=r||1,a=void 0!==a?a:!1,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var l,h,c=i/2,p=[],d=[];for(h=0;r>=h;h++){var f=[],m=[],y=h/r,v=y*(e-t)+t;for(l=0;n>=l;l++){var g=l/n,b=new o.Vector3;b.x=v*Math.sin(g*u+s),b.y=-y*i+c,b.z=v*Math.cos(g*u+s),this.vertices.push(b),f.push(this.vertices.length-1),m.push(new o.Vector2(g,1-y))}p.push(f),d.push(m)}var x,_,w=(e-t)/i;for(l=0;n>l;l++)for(0!==t?(x=this.vertices[p[0][l]].clone(),_=this.vertices[p[0][l+1]].clone()):(x=this.vertices[p[1][l]].clone(),_=this.vertices[p[1][l+1]].clone()),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*w).normalize(),_.setY(Math.sqrt(_.x*_.x+_.z*_.z)*w).normalize(),h=0;r>h;h++){var M=p[h][l],S=p[h+1][l],C=p[h+1][l+1],E=p[h][l+1],T=x.clone(),P=x.clone(),A=_.clone(),k=_.clone(),O=d[h][l].clone(),N=d[h+1][l].clone(),D=d[h+1][l+1].clone(),L=d[h][l+1].clone();this.faces.push(new o.Face3(M,S,E,[T,P,k])),this.faceVertexUvs[0].push([O,N,L]),this.faces.push(new o.Face3(S,C,E,[P.clone(),A,k.clone()])),this.faceVertexUvs[0].push([N.clone(),D,L.clone()])}if(a===!1&&t>0)for(this.vertices.push(new o.Vector3(0,c,0)),l=0;n>l;l++){var M=p[0][l],S=p[0][l+1],C=this.vertices.length-1,T=new o.Vector3(0,1,0),P=new o.Vector3(0,1,0),A=new o.Vector3(0,1,0),O=d[0][l].clone(),N=d[0][l+1].clone(),D=new o.Vector2(N.x,0);this.faces.push(new o.Face3(M,S,C,[T,P,A],void 0,1)),this.faceVertexUvs[0].push([O,N,D])}if(a===!1&&e>0)for(this.vertices.push(new o.Vector3(0,-c,0)),l=0;n>l;l++){var M=p[r][l+1],S=p[r][l],C=this.vertices.length-1,T=new o.Vector3(0,-1,0),P=new o.Vector3(0,-1,0),A=new o.Vector3(0,-1,0),O=d[r][l+1].clone(),N=d[r][l].clone(),D=new o.Vector2(N.x,1);this.faces.push(new o.Face3(M,S,C,[T,P,A],void 0,2)),this.faceVertexUvs[0].push([O,N,D])}this.computeFaceNormals()},o.CylinderGeometry.prototype=Object.create(o.Geometry.prototype),o.CylinderGeometry.prototype.constructor=o.CylinderGeometry,o.CylinderGeometry.prototype.clone=function(){var t=this.parameters;return new o.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)},o.EdgesGeometry=function(t,e){function i(t,e){return t-e}o.BufferGeometry.call(this),e=void 0!==e?e:1;var n,r=Math.cos(o.Math.degToRad(e)),a=[0,0],s={},u=["a","b","c"];t instanceof o.BufferGeometry?(n=new o.Geometry,n.fromBufferGeometry(t)):n=t.clone(),n.mergeVertices(),n.computeFaceNormals();for(var l=n.vertices,h=n.faces,c=0,p=h.length;p>c;c++)for(var d=h[c],f=0;3>f;f++){a[0]=d[u[f]],a[1]=d[u[(f+1)%3]],a.sort(i);var m=a.toString();void 0===s[m]?s[m]={vert1:a[0],vert2:a[1],face1:c,face2:void 0}:s[m].face2=c}var y=[];for(var m in s){var v=s[m];if(void 0===v.face2||h[v.face1].normal.dot(h[v.face2].normal)<=r){var g=l[v.vert1];y.push(g.x),y.push(g.y),y.push(g.z),g=l[v.vert2],y.push(g.x),y.push(g.y),y.push(g.z)}}this.addAttribute("position",new o.BufferAttribute(new Float32Array(y),3))},o.EdgesGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.EdgesGeometry.prototype.constructor=o.EdgesGeometry,o.ExtrudeGeometry=function(t,e){return"undefined"==typeof t?void(t=[]):(o.Geometry.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())},o.ExtrudeGeometry.prototype=Object.create(o.Geometry.prototype),o.ExtrudeGeometry.prototype.constructor=o.ExtrudeGeometry,o.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var i=t.length,n=0;i>n;n++){var r=t[n];this.addShape(r,e)}},o.ExtrudeGeometry.prototype.addShape=function(t,e){function i(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function n(t,e,i){var n,r,a=1,s=t.x-e.x,u=t.y-e.y,l=i.x-t.x,h=i.y-t.y,c=s*s+u*u,p=s*h-u*l;if(Math.abs(p)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(l*l+h*h),m=e.x-u/d,y=e.y+s/d,v=i.x-h/f,g=i.y+l/f,b=((v-m)*h-(g-y)*l)/(s*h-u*l);n=m+s*b-t.x,r=y+u*b-t.y;var x=n*n+r*r;if(2>=x)return new o.Vector2(n,r);a=Math.sqrt(x/2)}else{var _=!1;s>Number.EPSILON?l>Number.EPSILON&&(_=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(_=!0):Math.sign(u)===Math.sign(h)&&(_=!0),_?(n=-u,r=s,a=Math.sqrt(c)):(n=s,r=u,a=Math.sqrt(c/2))}return new o.Vector2(n/a,r/a)}function r(){if(x){var t=0,e=G*t;for(X=0;H>X;X++)F=R[X],l(F[2]+e,F[1]+e,F[0]+e);for(t=w+2*b,e=G*t,X=0;H>X;X++)F=R[X],l(F[0]+e,F[1]+e,F[2]+e)}else{for(X=0;H>X;X++)F=R[X],l(F[2],F[1],F[0]);for(X=0;H>X;X++)F=R[X],l(F[0]+G*w,F[1]+G*w,F[2]+G*w)}}function a(){var t=0;for(s(I,t),t+=I.length,T=0,P=D.length;P>T;T++)E=D[T],s(E,t),t+=E.length}function s(t,e){var i,n;for(X=t.length;--X>=0;){i=X,n=X-1,0>n&&(n=t.length-1);var r=0,o=w+2*b;for(r=0;o>r;r++){var a=G*r,s=G*(r+1),u=e+i+a,l=e+n+a,c=e+n+s,p=e+i+s;h(u,l,c,p,t,r,o,i,n)}}}function u(t,e,i){A.vertices.push(new o.Vector3(t,e,i))}function l(t,e,i){t+=k,e+=k,i+=k,A.faces.push(new o.Face3(t,e,i,null,null,0));var n=C.generateTopUV(A,t,e,i);A.faceVertexUvs[0].push(n)}function h(t,e,i,n,r,a,s,u,l){t+=k,e+=k,i+=k,n+=k,A.faces.push(new o.Face3(t,e,n,null,null,1)),A.faces.push(new o.Face3(e,i,n,null,null,1));var h=C.generateSideWallUV(A,t,e,i,n);A.faceVertexUvs[0].push([h[0],h[1],h[3]]),A.faceVertexUvs[0].push([h[1],h[2],h[3]])}var c,p,d,f,m,y=void 0!==e.amount?e.amount:100,v=void 0!==e.bevelThickness?e.bevelThickness:6,g=void 0!==e.bevelSize?e.bevelSize:v-2,b=void 0!==e.bevelSegments?e.bevelSegments:3,x=void 0!==e.bevelEnabled?e.bevelEnabled:!0,_=void 0!==e.curveSegments?e.curveSegments:12,w=void 0!==e.steps?e.steps:1,M=e.extrudePath,S=!1,C=void 0!==e.UVGenerator?e.UVGenerator:o.ExtrudeGeometry.WorldUVGenerator;M&&(c=M.getSpacedPoints(w),S=!0,x=!1,p=void 0!==e.frames?e.frames:new o.TubeGeometry.FrenetFrames(M,w,!1),d=new o.Vector3,f=new o.Vector3,m=new o.Vector3),x||(b=0,v=0,g=0);var E,T,P,A=this,k=this.vertices.length,O=t.extractPoints(_),N=O.shape,D=O.holes,L=!o.ShapeUtils.isClockWise(N);if(L){for(N=N.reverse(),T=0,P=D.length;P>T;T++)E=D[T],o.ShapeUtils.isClockWise(E)&&(D[T]=E.reverse());L=!1}var R=o.ShapeUtils.triangulateShape(N,D),I=N;for(T=0,P=D.length;P>T;T++)E=D[T],N=N.concat(E);for(var z,j,V,B,U,F,G=N.length,H=R.length,W=[],X=0,q=I.length,Y=q-1,K=X+1;q>X;X++,Y++,K++)Y===q&&(Y=0),K===q&&(K=0),W[X]=n(I[X],I[Y],I[K]);var Z,J=[],Q=W.concat();for(T=0,P=D.length;P>T;T++){for(E=D[T],Z=[],X=0,q=E.length,Y=q-1,K=X+1;q>X;X++,Y++,K++)Y===q&&(Y=0),K===q&&(K=0),Z[X]=n(E[X],E[Y],E[K]);J.push(Z),Q=Q.concat(Z)}for(z=0;b>z;z++){for(V=z/b,B=v*(1-V),j=g*Math.sin(V*Math.PI/2),X=0,q=I.length;q>X;X++)U=i(I[X],W[X],j),u(U.x,U.y,-B);for(T=0,P=D.length;P>T;T++)for(E=D[T],Z=J[T],X=0,q=E.length;q>X;X++)U=i(E[X],Z[X],j),u(U.x,U.y,-B)}for(j=g,X=0;G>X;X++)U=x?i(N[X],Q[X],j):N[X],S?(f.copy(p.normals[0]).multiplyScalar(U.x),d.copy(p.binormals[0]).multiplyScalar(U.y),m.copy(c[0]).add(f).add(d),u(m.x,m.y,m.z)):u(U.x,U.y,0);var $;for($=1;w>=$;$++)for(X=0;G>X;X++)U=x?i(N[X],Q[X],j):N[X],S?(f.copy(p.normals[$]).multiplyScalar(U.x),d.copy(p.binormals[$]).multiplyScalar(U.y),m.copy(c[$]).add(f).add(d),u(m.x,m.y,m.z)):u(U.x,U.y,y/w*$);for(z=b-1;z>=0;z--){for(V=z/b,B=v*(1-V),j=g*Math.sin(V*Math.PI/2),X=0,q=I.length;q>X;X++)U=i(I[X],W[X],j),u(U.x,U.y,y+B);for(T=0,P=D.length;P>T;T++)for(E=D[T],Z=J[T],X=0,q=E.length;q>X;X++)U=i(E[X],Z[X],j),S?u(U.x,U.y+c[w-1].y,c[w-1].x+B):u(U.x,U.y,y+B)}r(),a()},o.ExtrudeGeometry.WorldUVGenerator={
generateTopUV:function(t,e,i,n){var r=t.vertices,a=r[e],s=r[i],u=r[n];return[new o.Vector2(a.x,a.y),new o.Vector2(s.x,s.y),new o.Vector2(u.x,u.y)]},generateSideWallUV:function(t,e,i,n,r){var a=t.vertices,s=a[e],u=a[i],l=a[n],h=a[r];return Math.abs(s.y-u.y)<.01?[new o.Vector2(s.x,1-s.z),new o.Vector2(u.x,1-u.z),new o.Vector2(l.x,1-l.z),new o.Vector2(h.x,1-h.z)]:[new o.Vector2(s.y,1-s.z),new o.Vector2(u.y,1-u.z),new o.Vector2(l.y,1-l.z),new o.Vector2(h.y,1-h.z)]}},o.ShapeGeometry=function(t,e){o.Geometry.call(this),this.type="ShapeGeometry",Array.isArray(t)===!1&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},o.ShapeGeometry.prototype=Object.create(o.Geometry.prototype),o.ShapeGeometry.prototype.constructor=o.ShapeGeometry,o.ShapeGeometry.prototype.addShapeList=function(t,e){for(var i=0,n=t.length;n>i;i++)this.addShape(t[i],e);return this},o.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var i,n,r,a=void 0!==e.curveSegments?e.curveSegments:12,s=e.material,u=void 0===e.UVGenerator?o.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,l=this.vertices.length,h=t.extractPoints(a),c=h.shape,p=h.holes,d=!o.ShapeUtils.isClockWise(c);if(d){for(c=c.reverse(),i=0,n=p.length;n>i;i++)r=p[i],o.ShapeUtils.isClockWise(r)&&(p[i]=r.reverse());d=!1}var f=o.ShapeUtils.triangulateShape(c,p);for(i=0,n=p.length;n>i;i++)r=p[i],c=c.concat(r);var m,y,v=c.length,g=f.length;for(i=0;v>i;i++)m=c[i],this.vertices.push(new o.Vector3(m.x,m.y,0));for(i=0;g>i;i++){y=f[i];var b=y[0]+l,x=y[1]+l,_=y[2]+l;this.faces.push(new o.Face3(b,x,_,null,null,s)),this.faceVertexUvs[0].push(u.generateTopUV(this,b,x,_))}},o.LatheGeometry=function(t,e,i,n){o.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=e||12,i=i||0,n=n||2*Math.PI;for(var r=1/(t.length-1),a=1/e,s=0,u=e;u>=s;s++)for(var l=i+s*a*n,h=Math.cos(l),c=Math.sin(l),p=0,d=t.length;d>p;p++){var f=t[p],m=new o.Vector3;m.x=h*f.x-c*f.y,m.y=c*f.x+h*f.y,m.z=f.z,this.vertices.push(m)}for(var y=t.length,s=0,u=e;u>s;s++)for(var p=0,d=t.length-1;d>p;p++){var v=p+y*s,g=v,b=v+y,h=v+1+y,x=v+1,_=s*a,w=p*r,M=_+a,S=w+r;this.faces.push(new o.Face3(g,b,x)),this.faceVertexUvs[0].push([new o.Vector2(_,w),new o.Vector2(M,w),new o.Vector2(_,S)]),this.faces.push(new o.Face3(b,h,x)),this.faceVertexUvs[0].push([new o.Vector2(M,w),new o.Vector2(M,S),new o.Vector2(_,S)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},o.LatheGeometry.prototype=Object.create(o.Geometry.prototype),o.LatheGeometry.prototype.constructor=o.LatheGeometry,o.PlaneGeometry=function(t,e,i,n){o.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new o.PlaneBufferGeometry(t,e,i,n))},o.PlaneGeometry.prototype=Object.create(o.Geometry.prototype),o.PlaneGeometry.prototype.constructor=o.PlaneGeometry,o.PlaneGeometry.prototype.clone=function(){var t=this.parameters;return new o.PlaneGeometry(t.width,t.height,t.widthSegments,t.heightSegments)},o.PlaneBufferGeometry=function(t,e,i,n){o.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};for(var r=t/2,a=e/2,s=Math.floor(i)||1,u=Math.floor(n)||1,l=s+1,h=u+1,c=t/s,p=e/u,d=new Float32Array(l*h*3),f=new Float32Array(l*h*3),m=new Float32Array(l*h*2),y=0,v=0,g=0;h>g;g++)for(var b=g*p-a,x=0;l>x;x++){var _=x*c-r;d[y]=_,d[y+1]=-b,f[y+2]=1,m[v]=x/s,m[v+1]=1-g/u,y+=3,v+=2}y=0;for(var w=new(d.length/3>65535?Uint32Array:Uint16Array)(s*u*6),g=0;u>g;g++)for(var x=0;s>x;x++){var M=x+l*g,S=x+l*(g+1),C=x+1+l*(g+1),E=x+1+l*g;w[y]=M,w[y+1]=S,w[y+2]=E,w[y+3]=S,w[y+4]=C,w[y+5]=E,y+=6}this.setIndex(new o.BufferAttribute(w,1)),this.addAttribute("position",new o.BufferAttribute(d,3)),this.addAttribute("normal",new o.BufferAttribute(f,3)),this.addAttribute("uv",new o.BufferAttribute(m,2))},o.PlaneBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.PlaneBufferGeometry.prototype.constructor=o.PlaneBufferGeometry,o.PlaneBufferGeometry.prototype.clone=function(){var t=this.parameters;return new o.PlaneBufferGeometry(t.width,t.height,t.widthSegments,t.heightSegments)},o.RingGeometry=function(t,e,i,n,r,a){o.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},t=t||0,e=e||50,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8,n=void 0!==n?Math.max(1,n):8;var s,u,l=[],h=t,c=(e-t)/n;for(s=0;n+1>s;s++){for(u=0;i+1>u;u++){var p=new o.Vector3,d=r+u/i*a;p.x=h*Math.cos(d),p.y=h*Math.sin(d),this.vertices.push(p),l.push(new o.Vector2((p.x/e+1)/2,(p.y/e+1)/2))}h+=c}var f=new o.Vector3(0,0,1);for(s=0;n>s;s++){var m=s*(i+1);for(u=0;i>u;u++){var d=u+m,y=d,v=d+i+1,g=d+i+2;this.faces.push(new o.Face3(y,v,g,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[y].clone(),l[v].clone(),l[g].clone()]),y=d,v=d+i+2,g=d+1,this.faces.push(new o.Face3(y,v,g,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[y].clone(),l[v].clone(),l[g].clone()])}}this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,h)},o.RingGeometry.prototype=Object.create(o.Geometry.prototype),o.RingGeometry.prototype.constructor=o.RingGeometry,o.RingGeometry.prototype.clone=function(){var t=this.parameters;return new o.RingGeometry(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)},o.SphereGeometry=function(t,e,i,n,r,a,s){o.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new o.SphereBufferGeometry(t,e,i,n,r,a,s))},o.SphereGeometry.prototype=Object.create(o.Geometry.prototype),o.SphereGeometry.prototype.constructor=o.SphereGeometry,o.SphereGeometry.prototype.clone=function(){var t=this.parameters;return new o.SphereGeometry(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)},o.SphereBufferGeometry=function(t,e,i,n,r,a,s){o.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;for(var u=a+s,l=(e+1)*(i+1),h=new o.BufferAttribute(new Float32Array(3*l),3),c=new o.BufferAttribute(new Float32Array(3*l),3),p=new o.BufferAttribute(new Float32Array(2*l),2),d=0,f=[],m=new o.Vector3,y=0;i>=y;y++){for(var v=[],g=y/i,b=0;e>=b;b++){var x=b/e,_=-t*Math.cos(n+x*r)*Math.sin(a+g*s),w=t*Math.cos(a+g*s),M=t*Math.sin(n+x*r)*Math.sin(a+g*s);m.set(_,w,M).normalize(),h.setXYZ(d,_,w,M),c.setXYZ(d,m.x,m.y,m.z),p.setXY(d,x,1-g),v.push(d),d++}f.push(v)}for(var S=[],y=0;i>y;y++)for(var b=0;e>b;b++){var C=f[y][b+1],E=f[y][b],T=f[y+1][b],P=f[y+1][b+1];(0!==y||a>0)&&S.push(C,E,P),(y!==i-1||u<Math.PI)&&S.push(E,T,P)}this.setIndex(new(h.count>65535?o.Uint32Attribute:o.Uint16Attribute)(S,1)),this.addAttribute("position",h),this.addAttribute("normal",c),this.addAttribute("uv",p),this.boundingSphere=new o.Sphere(new o.Vector3,t)},o.SphereBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.SphereBufferGeometry.prototype.constructor=o.SphereBufferGeometry,o.SphereBufferGeometry.prototype.clone=function(){var t=this.parameters;return new o.SphereBufferGeometry(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)},o.TorusGeometry=function(t,e,i,n,r){o.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||100,e=e||40,i=i||8,n=n||6,r=r||2*Math.PI;for(var a=new o.Vector3,s=[],u=[],l=0;i>=l;l++)for(var h=0;n>=h;h++){var c=h/n*r,p=l/i*Math.PI*2;a.x=t*Math.cos(c),a.y=t*Math.sin(c);var d=new o.Vector3;d.x=(t+e*Math.cos(p))*Math.cos(c),d.y=(t+e*Math.cos(p))*Math.sin(c),d.z=e*Math.sin(p),this.vertices.push(d),s.push(new o.Vector2(h/n,l/i)),u.push(d.clone().sub(a).normalize())}for(var l=1;i>=l;l++)for(var h=1;n>=h;h++){var f=(n+1)*l+h-1,m=(n+1)*(l-1)+h-1,y=(n+1)*(l-1)+h,v=(n+1)*l+h,g=new o.Face3(f,m,v,[u[f].clone(),u[m].clone(),u[v].clone()]);this.faces.push(g),this.faceVertexUvs[0].push([s[f].clone(),s[m].clone(),s[v].clone()]),g=new o.Face3(m,y,v,[u[m].clone(),u[y].clone(),u[v].clone()]),this.faces.push(g),this.faceVertexUvs[0].push([s[m].clone(),s[y].clone(),s[v].clone()])}this.computeFaceNormals()},o.TorusGeometry.prototype=Object.create(o.Geometry.prototype),o.TorusGeometry.prototype.constructor=o.TorusGeometry,o.TorusGeometry.prototype.clone=function(){var t=this.parameters;return new o.TorusGeometry(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)},o.TorusKnotGeometry=function(t,e,i,n,r,a,s){function u(t,e,i,n,r){var a=Math.cos(t),s=Math.sin(t),u=e/i*t,l=Math.cos(u),h=n*(2+l)*.5*a,c=n*(2+l)*s*.5,p=r*n*Math.sin(u)*.5;return new o.Vector3(h,c,p)}o.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,p:r,q:a,heightScale:s},t=t||100,e=e||40,i=i||64,n=n||8,r=r||2,a=a||3,s=s||1;for(var l=new Array(i),h=new o.Vector3,c=new o.Vector3,p=new o.Vector3,d=0;i>d;++d){l[d]=new Array(n);var f=d/i*2*r*Math.PI,m=u(f,a,r,t,s),y=u(f+.01,a,r,t,s);h.subVectors(y,m),c.addVectors(y,m),p.crossVectors(h,c),c.crossVectors(p,h),p.normalize(),c.normalize();for(var v=0;n>v;++v){var g=v/n*2*Math.PI,b=-e*Math.cos(g),x=e*Math.sin(g),_=new o.Vector3;_.x=m.x+b*c.x+x*p.x,_.y=m.y+b*c.y+x*p.y,_.z=m.z+b*c.z+x*p.z,l[d][v]=this.vertices.push(_)-1}}for(var d=0;i>d;++d)for(var v=0;n>v;++v){var w=(d+1)%i,M=(v+1)%n,S=l[d][v],C=l[w][v],E=l[w][M],T=l[d][M],P=new o.Vector2(d/i,v/n),A=new o.Vector2((d+1)/i,v/n),k=new o.Vector2((d+1)/i,(v+1)/n),O=new o.Vector2(d/i,(v+1)/n);this.faces.push(new o.Face3(S,C,T)),this.faceVertexUvs[0].push([P,A,O]),this.faces.push(new o.Face3(C,E,T)),this.faceVertexUvs[0].push([A.clone(),k,O.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},o.TorusKnotGeometry.prototype=Object.create(o.Geometry.prototype),o.TorusKnotGeometry.prototype.constructor=o.TorusKnotGeometry,o.TorusKnotGeometry.prototype.clone=function(){var t=this.parameters;return new o.TorusKnotGeometry(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.p,t.q,t.heightScale)},o.TubeGeometry=function(t,e,i,n,r,a){function s(t,e,i){return k.vertices.push(new o.Vector3(t,e,i))-1}o.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:i,radialSegments:n,closed:r,taper:a},e=e||64,i=i||1,n=n||8,r=r||!1,a=a||o.TubeGeometry.NoTaper;var u,l,h,c,p,d,f,m,y,v,g,b,x,_,w,M,S,C,E,T,P,A=[],k=this,O=e+1,N=new o.Vector3,D=new o.TubeGeometry.FrenetFrames(t,e,r),L=D.tangents,R=D.normals,I=D.binormals;for(this.tangents=L,this.normals=R,this.binormals=I,v=0;O>v;v++)for(A[v]=[],c=v/(O-1),y=t.getPointAt(c),u=L[v],l=R[v],h=I[v],d=i*a(c),g=0;n>g;g++)p=g/n*2*Math.PI,f=-d*Math.cos(p),m=d*Math.sin(p),N.copy(y),N.x+=f*l.x+m*h.x,N.y+=f*l.y+m*h.y,N.z+=f*l.z+m*h.z,A[v][g]=s(N.x,N.y,N.z);for(v=0;e>v;v++)for(g=0;n>g;g++)b=r?(v+1)%e:v+1,x=(g+1)%n,_=A[v][g],w=A[b][g],M=A[b][x],S=A[v][x],C=new o.Vector2(v/e,g/n),E=new o.Vector2((v+1)/e,g/n),T=new o.Vector2((v+1)/e,(g+1)/n),P=new o.Vector2(v/e,(g+1)/n),this.faces.push(new o.Face3(_,w,S)),this.faceVertexUvs[0].push([C,E,P]),this.faces.push(new o.Face3(w,M,S)),this.faceVertexUvs[0].push([E.clone(),T,P.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.TubeGeometry.prototype=Object.create(o.Geometry.prototype),o.TubeGeometry.prototype.constructor=o.TubeGeometry,o.TubeGeometry.prototype.clone=function(){return new this.constructor(this.parameters.path,this.parameters.segments,this.parameters.radius,this.parameters.radialSegments,this.parameters.closed,this.parameters.taper)},o.TubeGeometry.NoTaper=function(t){return 1},o.TubeGeometry.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},o.TubeGeometry.FrenetFrames=function(t,e,i){function n(){f[0]=new o.Vector3,m[0]=new o.Vector3,a=Number.MAX_VALUE,s=Math.abs(d[0].x),u=Math.abs(d[0].y),l=Math.abs(d[0].z),a>=s&&(a=s,p.set(1,0,0)),a>=u&&(a=u,p.set(0,1,0)),a>=l&&p.set(0,0,1),y.crossVectors(d[0],p).normalize(),f[0].crossVectors(d[0],y),m[0].crossVectors(d[0],f[0])}var r,a,s,u,l,h,c,p=new o.Vector3,d=[],f=[],m=[],y=new o.Vector3,v=new o.Matrix4,g=e+1;for(this.tangents=d,this.normals=f,this.binormals=m,h=0;g>h;h++)c=h/(g-1),d[h]=t.getTangentAt(c),d[h].normalize();for(n(),h=1;g>h;h++)f[h]=f[h-1].clone(),m[h]=m[h-1].clone(),y.crossVectors(d[h-1],d[h]),y.length()>Number.EPSILON&&(y.normalize(),r=Math.acos(o.Math.clamp(d[h-1].dot(d[h]),-1,1)),f[h].applyMatrix4(v.makeRotationAxis(y,r))),m[h].crossVectors(d[h],f[h]);if(i)for(r=Math.acos(o.Math.clamp(f[0].dot(f[g-1]),-1,1)),r/=g-1,d[0].dot(y.crossVectors(f[0],f[g-1]))>0&&(r=-r),h=1;g>h;h++)f[h].applyMatrix4(v.makeRotationAxis(d[h],r*h)),m[h].crossVectors(d[h],f[h])},o.PolyhedronGeometry=function(t,e,i,n){function r(t){var e=t.normalize().clone();e.index=c.vertices.push(e)-1;var i=u(t)/2/Math.PI+.5,n=l(t)/Math.PI+.5;return e.uv=new o.Vector2(i,1-n),e}function a(t,e,i,n){var r=new o.Face3(t.index,e.index,i.index,[t.clone(),e.clone(),i.clone()],void 0,n);c.faces.push(r),x.copy(t).add(e).add(i).divideScalar(3);var a=u(x);c.faceVertexUvs[0].push([h(t.uv,t,a),h(e.uv,e,a),h(i.uv,i,a)])}function s(t,e){for(var i=Math.pow(2,e),n=r(c.vertices[t.a]),o=r(c.vertices[t.b]),s=r(c.vertices[t.c]),u=[],l=t.materialIndex,h=0;i>=h;h++){u[h]=[];for(var p=r(n.clone().lerp(s,h/i)),d=r(o.clone().lerp(s,h/i)),f=i-h,m=0;f>=m;m++)0===m&&h===i?u[h][m]=p:u[h][m]=r(p.clone().lerp(d,m/f))}for(var h=0;i>h;h++)for(var m=0;2*(i-h)-1>m;m++){var y=Math.floor(m/2);m%2===0?a(u[h][y+1],u[h+1][y],u[h][y],l):a(u[h][y+1],u[h+1][y+1],u[h+1][y],l)}}function u(t){return Math.atan2(t.z,-t.x)}function l(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function h(t,e,i){return 0>i&&1===t.x&&(t=new o.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new o.Vector2(i/2/Math.PI+.5,t.y)),t.clone()}o.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},i=i||1,n=n||0;for(var c=this,p=0,d=t.length;d>p;p+=3)r(new o.Vector3(t[p],t[p+1],t[p+2]));for(var f=this.vertices,m=[],p=0,y=0,d=e.length;d>p;p+=3,y++){var v=f[e[p]],g=f[e[p+1]],b=f[e[p+2]];m[y]=new o.Face3(v.index,g.index,b.index,[v.clone(),g.clone(),b.clone()],void 0,y)}for(var x=new o.Vector3,p=0,d=m.length;d>p;p++)s(m[p],n);for(var p=0,d=this.faceVertexUvs[0].length;d>p;p++){var _=this.faceVertexUvs[0][p],w=_[0].x,M=_[1].x,S=_[2].x,C=Math.max(w,M,S),E=Math.min(w,M,S);C>.9&&.1>E&&(.2>w&&(_[0].x+=1),.2>M&&(_[1].x+=1),.2>S&&(_[2].x+=1))}for(var p=0,d=this.vertices.length;d>p;p++)this.vertices[p].multiplyScalar(i);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,i)},o.PolyhedronGeometry.prototype=Object.create(o.Geometry.prototype),o.PolyhedronGeometry.prototype.constructor=o.PolyhedronGeometry,o.PolyhedronGeometry.prototype.clone=function(){var t=this.parameters;return new o.PolyhedronGeometry(t.vertices,t.indices,t.radius,t.detail)},o.DodecahedronGeometry=function(t,e){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];o.PolyhedronGeometry.call(this,r,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}},o.DodecahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.DodecahedronGeometry.prototype.constructor=o.DodecahedronGeometry,o.DodecahedronGeometry.prototype.clone=function(){var t=this.parameters;return new o.DodecahedronGeometry(t.radius,t.detail)},o.IcosahedronGeometry=function(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];o.PolyhedronGeometry.call(this,n,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},o.IcosahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.IcosahedronGeometry.prototype.constructor=o.IcosahedronGeometry,o.IcosahedronGeometry.prototype.clone=function(){var t=this.parameters;return new o.IcosahedronGeometry(t.radius,t.detail)},o.OctahedronGeometry=function(t,e){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];o.PolyhedronGeometry.call(this,i,n,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},o.OctahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.OctahedronGeometry.prototype.constructor=o.OctahedronGeometry,o.OctahedronGeometry.prototype.clone=function(){var t=this.parameters;return new o.OctahedronGeometry(t.radius,t.detail)},o.TetrahedronGeometry=function(t,e){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];o.PolyhedronGeometry.call(this,i,n,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},o.TetrahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.TetrahedronGeometry.prototype.constructor=o.TetrahedronGeometry,o.TetrahedronGeometry.prototype.clone=function(){var t=this.parameters;return new o.TetrahedronGeometry(t.radius,t.detail)},o.ParametricGeometry=function(t,e,i){o.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,a,s,u,l=this.vertices,h=this.faces,c=this.faceVertexUvs[0],p=e+1;for(n=0;i>=n;n++)for(u=n/i,r=0;e>=r;r++)s=r/e,a=t(s,u),l.push(a);var d,f,m,y,v,g,b,x;for(n=0;i>n;n++)for(r=0;e>r;r++)d=n*p+r,f=n*p+r+1,m=(n+1)*p+r+1,y=(n+1)*p+r,v=new o.Vector2(r/e,n/i),g=new o.Vector2((r+1)/e,n/i),b=new o.Vector2((r+1)/e,(n+1)/i),x=new o.Vector2(r/e,(n+1)/i),h.push(new o.Face3(d,f,y)),c.push([v,g,x]),h.push(new o.Face3(f,m,y)),c.push([g.clone(),b,x.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.ParametricGeometry.prototype=Object.create(o.Geometry.prototype),o.ParametricGeometry.prototype.constructor=o.ParametricGeometry,o.WireframeGeometry=function(t){function e(t,e){return t-e}o.BufferGeometry.call(this);var i=[0,0],n={},r=["a","b","c"];if(t instanceof o.Geometry){for(var a=t.vertices,s=t.faces,u=0,l=new Uint32Array(6*s.length),h=0,c=s.length;c>h;h++)for(var p=s[h],d=0;3>d;d++){i[0]=p[r[d]],i[1]=p[r[(d+1)%3]],i.sort(e);var f=i.toString();void 0===n[f]&&(l[2*u]=i[0],l[2*u+1]=i[1],n[f]=!0,u++)}for(var m=new Float32Array(2*u*3),h=0,c=u;c>h;h++)for(var d=0;2>d;d++){var y=a[l[2*h+d]],v=6*h+3*d;m[v+0]=y.x,m[v+1]=y.y,m[v+2]=y.z}this.addAttribute("position",new o.BufferAttribute(m,3))}else if(t instanceof o.BufferGeometry)if(null!==t.index){var g=t.index.array,a=t.attributes.position,b=t.drawcalls,u=0;0===b.length&&t.addGroup(0,g.length);for(var l=new Uint32Array(2*g.length),x=0,_=b.length;_>x;++x)for(var w=b[x],M=w.start,S=w.count,h=M,C=M+S;C>h;h+=3)for(var d=0;3>d;d++){i[0]=g[h+d],i[1]=g[h+(d+1)%3],i.sort(e);var f=i.toString();void 0===n[f]&&(l[2*u]=i[0],l[2*u+1]=i[1],n[f]=!0,u++)}for(var m=new Float32Array(2*u*3),h=0,c=u;c>h;h++)for(var d=0;2>d;d++){var v=6*h+3*d,E=l[2*h+d];m[v+0]=a.getX(E),m[v+1]=a.getY(E),m[v+2]=a.getZ(E)}this.addAttribute("position",new o.BufferAttribute(m,3))}else{for(var a=t.attributes.position.array,u=a.length/3,T=u/3,m=new Float32Array(2*u*3),h=0,c=T;c>h;h++)for(var d=0;3>d;d++){var v=18*h+6*d,P=9*h+3*d;m[v+0]=a[P],m[v+1]=a[P+1],m[v+2]=a[P+2];var E=9*h+3*((d+1)%3);m[v+3]=a[E],m[v+4]=a[E+1],m[v+5]=a[E+2]}this.addAttribute("position",new o.BufferAttribute(m,3))}},o.WireframeGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.WireframeGeometry.prototype.constructor=o.WireframeGeometry,o.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new o.BufferGeometry;n.addAttribute("position",new o.BufferAttribute(e,3)),n.addAttribute("color",new o.BufferAttribute(i,3));var r=new o.LineBasicMaterial({vertexColors:o.VertexColors});o.LineSegments.call(this,n,r)},o.AxisHelper.prototype=Object.create(o.LineSegments.prototype),o.AxisHelper.prototype.constructor=o.AxisHelper,o.ArrowHelper=function(){var t=new o.Geometry;t.vertices.push(new o.Vector3(0,0,0),new o.Vector3(0,1,0));var e=new o.CylinderGeometry(0,.5,1,5,1);return e.translate(0,-.5,0),function(i,n,r,a,s,u){o.Object3D.call(this),void 0===a&&(a=16776960),void 0===r&&(r=1),void 0===s&&(s=.2*r),void 0===u&&(u=.2*s),this.position.copy(n),r>s&&(this.line=new o.Line(t,new o.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line)),this.cone=new o.Mesh(e,new o.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(r,s,u)}}(),o.ArrowHelper.prototype=Object.create(o.Object3D.prototype),o.ArrowHelper.prototype.constructor=o.ArrowHelper,o.ArrowHelper.prototype.setDirection=function(){var t,e=new o.Vector3;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),o.ArrowHelper.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),t>e&&(this.line.scale.set(1,t-e,1),this.line.updateMatrix()),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},o.ArrowHelper.prototype.setColor=function(t){void 0!==this.line&&this.line.material.color.set(t),this.cone.material.color.set(t)},o.BoxHelper=function(t){var e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new o.BufferGeometry;n.setIndex(new o.BufferAttribute(e,1)),n.addAttribute("position",new o.BufferAttribute(i,3)),o.LineSegments.call(this,n,new o.LineBasicMaterial({color:16776960})),void 0!==t&&this.update(t)},o.BoxHelper.prototype=Object.create(o.LineSegments.prototype),o.BoxHelper.prototype.constructor=o.BoxHelper,o.BoxHelper.prototype.update=function(){var t=new o.Box3;return function(e){if(t.setFromObject(e),!t.empty()){var i=t.min,n=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=i.x,o[4]=n.y,o[5]=n.z,o[6]=i.x,o[7]=i.y,o[8]=n.z,o[9]=n.x,o[10]=i.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=i.z,o[15]=i.x,o[16]=n.y,o[17]=i.z,o[18]=i.x,o[19]=i.y,o[20]=i.z,o[21]=n.x,o[22]=i.y,o[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),o.BoundingBoxHelper=function(t,e){var i=void 0!==e?e:8947848;this.object=t,this.box=new o.Box3,o.Mesh.call(this,new o.BoxGeometry(1,1,1),new o.MeshBasicMaterial({color:i,wireframe:!0}))},o.BoundingBoxHelper.prototype=Object.create(o.Mesh.prototype),o.BoundingBoxHelper.prototype.constructor=o.BoundingBoxHelper,o.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},o.CameraHelper=function(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){n.vertices.push(new o.Vector3),n.colors.push(new o.Color(e)),void 0===a[t]&&(a[t]=[]),a[t].push(n.vertices.length-1)}var n=new o.Geometry,r=new o.LineBasicMaterial({color:16777215,vertexColors:o.FaceColors}),a={},s=16755200,u=16711680,l=43775,h=16777215,c=3355443;e("n1","n2",s),e("n2","n4",s),e("n4","n3",s),e("n3","n1",s),e("f1","f2",s),e("f2","f4",s),e("f4","f3",s),e("f3","f1",s),e("n1","f1",s),e("n2","f2",s),e("n3","f3",s),e("n4","f4",s),e("p","n1",u),e("p","n2",u),e("p","n3",u),e("p","n4",u),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",h),e("p","c",c),e("cn1","cn2",c),e("cn3","cn4",c),e("cf1","cf2",c),e("cf3","cf4",c),o.LineSegments.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},o.CameraHelper.prototype=Object.create(o.LineSegments.prototype),o.CameraHelper.prototype.constructor=o.CameraHelper,o.CameraHelper.prototype.update=function(){function t(t,o,a,s){n.set(o,a,s).unproject(r);var u=i[t];if(void 0!==u)for(var l=0,h=u.length;h>l;l++)e.vertices[u[l]].copy(n)}var e,i,n=new o.Vector3,r=new o.Camera;return function(){e=this.geometry,i=this.pointMap;var n=1,o=1;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-n,-o,-1),t("n2",n,-o,-1),t("n3",-n,o,-1),t("n4",n,o,-1),t("f1",-n,-o,1),t("f2",n,-o,1),t("f3",-n,o,1),t("f4",n,o,1),t("u1",.7*n,1.1*o,-1),t("u2",.7*-n,1.1*o,-1),t("u3",0,2*o,-1),t("cf1",-n,0,1),t("cf2",n,0,1),t("cf3",0,-o,1),t("cf4",0,o,1),t("cn1",-n,0,-1),t("cn2",n,0,-1),t("cn3",0,-o,-1),t("cn4",0,o,-1),e.verticesNeedUpdate=!0}}(),o.DirectionalLightHelper=function(t,e){o.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,e=e||1;var i=new o.Geometry;i.vertices.push(new o.Vector3(-e,e,0),new o.Vector3(e,e,0),new o.Vector3(e,-e,0),new o.Vector3(-e,-e,0),new o.Vector3(-e,e,0));var n=new o.LineBasicMaterial({fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new o.Line(i,n),this.add(this.lightPlane),i=new o.Geometry,i.vertices.push(new o.Vector3,new o.Vector3),n=new o.LineBasicMaterial({fog:!1}),n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new o.Line(i,n),this.add(this.targetLine),this.update()},o.DirectionalLightHelper.prototype=Object.create(o.Object3D.prototype),o.DirectionalLightHelper.prototype.constructor=o.DirectionalLightHelper,o.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},o.DirectionalLightHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3,i=new o.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),o.EdgesHelper=function(t,e,i){var n=void 0!==e?e:16777215;o.LineSegments.call(this,new o.EdgesGeometry(t.geometry,i),new o.LineBasicMaterial({color:n})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},o.EdgesHelper.prototype=Object.create(o.LineSegments.prototype),o.EdgesHelper.prototype.constructor=o.EdgesHelper,o.FaceNormalsHelper=function(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16776960,a=void 0!==n?n:1,s=0,u=this.object.geometry;u instanceof o.Geometry?s=u.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new o.BufferGeometry,h=new o.Float32Attribute(2*s*3,3);l.addAttribute("position",h),o.LineSegments.call(this,l,new o.LineBasicMaterial({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},o.FaceNormalsHelper.prototype=Object.create(o.LineSegments.prototype),o.FaceNormalsHelper.prototype.constructor=o.FaceNormalsHelper,o.FaceNormalsHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3,i=new o.Matrix3;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,h=s.length;h>l;l++){var c=s[l],p=c.normal;t.copy(a[c.a]).add(a[c.b]).add(a[c.c]).divideScalar(3).applyMatrix4(n),e.copy(p).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),r.setXYZ(u,t.x,t.y,t.z),u+=1,r.setXYZ(u,e.x,e.y,e.z),u+=1}return r.needsUpdate=!0,this}}(),o.GridHelper=function(t,e){var i=new o.Geometry,n=new o.LineBasicMaterial({vertexColors:o.VertexColors});this.color1=new o.Color(4473924),this.color2=new o.Color(8947848);for(var r=-t;t>=r;r+=e){i.vertices.push(new o.Vector3(-t,0,r),new o.Vector3(t,0,r),new o.Vector3(r,0,-t),new o.Vector3(r,0,t));var a=0===r?this.color1:this.color2;i.colors.push(a,a,a,a)}o.LineSegments.call(this,i,n)},o.GridHelper.prototype=Object.create(o.LineSegments.prototype),o.GridHelper.prototype.constructor=o.GridHelper,o.GridHelper.prototype.setColors=function(t,e){this.color1.set(t),this.color2.set(e),this.geometry.colorsNeedUpdate=!0},o.HemisphereLightHelper=function(t,e){o.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new o.Color,new o.Color];var i=new o.SphereGeometry(e,4,2);i.rotateX(-Math.PI/2);for(var n=0,r=8;r>n;n++)i.faces[n].color=this.colors[4>n?0:1];var a=new o.MeshBasicMaterial({vertexColors:o.FaceColors,wireframe:!0});this.lightSphere=new o.Mesh(i,a),this.add(this.lightSphere),this.update()},o.HemisphereLightHelper.prototype=Object.create(o.Object3D.prototype),o.HemisphereLightHelper.prototype.constructor=o.HemisphereLightHelper,o.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},o.HemisphereLightHelper.prototype.update=function(){var t=new o.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),o.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var i=new o.SphereGeometry(e,4,2),n=new o.MeshBasicMaterial({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),o.Mesh.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},o.PointLightHelper.prototype=Object.create(o.Mesh.prototype),o.PointLightHelper.prototype.constructor=o.PointLightHelper,o.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},o.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},o.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new o.Geometry,i=0;i<this.bones.length;i++){var n=this.bones[i];n.parent instanceof o.Bone&&(e.vertices.push(new o.Vector3),e.vertices.push(new o.Vector3),e.colors.push(new o.Color(0,0,1)),e.colors.push(new o.Color(0,1,0)))}e.dynamic=!0;var r=new o.LineBasicMaterial({vertexColors:o.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});o.LineSegments.call(this,e,r),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},o.SkeletonHelper.prototype=Object.create(o.LineSegments.prototype),o.SkeletonHelper.prototype.constructor=o.SkeletonHelper,o.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof o.Bone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,this.getBoneList(t.children[i]));return e},o.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new o.Matrix4).getInverse(this.root.matrixWorld),i=new o.Matrix4,n=0,r=0;r<this.bones.length;r++){var a=this.bones[r];a.parent instanceof o.Bone&&(i.multiplyMatrices(e,a.matrixWorld),t.vertices[n].setFromMatrixPosition(i),i.multiplyMatrices(e,a.parent.matrixWorld),t.vertices[n+1].setFromMatrixPosition(i),n+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},o.SpotLightHelper=function(t){o.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var e=new o.CylinderGeometry(0,1,1,8,1,!0);e.translate(0,-.5,0),e.rotateX(-Math.PI/2);var i=new o.MeshBasicMaterial({wireframe:!0,
fog:!1});this.cone=new o.Mesh(e,i),this.add(this.cone),this.update()},o.SpotLightHelper.prototype=Object.create(o.Object3D.prototype),o.SpotLightHelper.prototype.constructor=o.SpotLightHelper,o.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},o.SpotLightHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3;return function(){var i=this.light.distance?this.light.distance:1e4,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),o.VertexNormalsHelper=function(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16711680,a=void 0!==n?n:1,s=0,u=this.object.geometry;u instanceof o.Geometry?s=3*u.faces.length:u instanceof o.BufferGeometry&&(s=u.attributes.normal.count);var l=new o.BufferGeometry,h=new o.Float32Attribute(2*s*3,3);l.addAttribute("position",h),o.LineSegments.call(this,l,new o.LineBasicMaterial({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},o.VertexNormalsHelper.prototype=Object.create(o.LineSegments.prototype),o.VertexNormalsHelper.prototype.constructor=o.VertexNormalsHelper,o.VertexNormalsHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3,i=new o.Matrix3;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;if(s instanceof o.Geometry)for(var u=s.vertices,l=s.faces,h=0,c=0,p=l.length;p>c;c++)for(var d=l[c],f=0,m=d.vertexNormals.length;m>f;f++){var y=u[d[n[f]]],v=d.vertexNormals[f];t.copy(y).applyMatrix4(r),e.copy(v).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),a.setXYZ(h,t.x,t.y,t.z),h+=1,a.setXYZ(h,e.x,e.y,e.z),h+=1}else if(s instanceof o.BufferGeometry)for(var g=s.attributes.position,b=s.attributes.normal,h=0,f=0,m=g.count;m>f;f++)t.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(r),e.set(b.getX(f),b.getY(f),b.getZ(f)),e.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),a.setXYZ(h,t.x,t.y,t.z),h+=1,a.setXYZ(h,e.x,e.y,e.z),h+=1;return a.needsUpdate=!0,this}}(),o.WireframeHelper=function(t,e){var i=void 0!==e?e:16777215;o.LineSegments.call(this,new o.WireframeGeometry(t.geometry),new o.LineBasicMaterial({color:i})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},o.WireframeHelper.prototype=Object.create(o.LineSegments.prototype),o.WireframeHelper.prototype.constructor=o.WireframeHelper,o.ImmediateRenderObject=function(t){o.Object3D.call(this),this.material=t,this.render=function(t){}},o.ImmediateRenderObject.prototype=Object.create(o.Object3D.prototype),o.ImmediateRenderObject.prototype.constructor=o.ImmediateRenderObject,o.MorphBlendMesh=function(t,e){o.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,n="__default",r=0,a=i-1,s=i/1;this.createAnimation(n,r,a,s),this.setAnimationWeight(n,1)},o.MorphBlendMesh.prototype=Object.create(o.Mesh.prototype),o.MorphBlendMesh.prototype.constructor=o.MorphBlendMesh,o.MorphBlendMesh.prototype.createAnimation=function(t,e,i,n){var r={start:e,end:i,length:i-e+1,fps:n,duration:(i-e)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=r,this.animationsList.push(r)},o.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,i=/([a-z]+)_?(\d+)/,n={},r=this.geometry,o=0,a=r.morphTargets.length;a>o;o++){var s=r.morphTargets[o],u=s.name.match(i);if(u&&u.length>1){var l=u[1];n[l]||(n[l]={start:1/0,end:-(1/0)});var h=n[l];o<h.start&&(h.start=o),o>h.end&&(h.end=o),e||(e=l)}}for(var l in n){var h=n[l];this.createAnimation(l,h.start,h.end,t)}this.firstAnimation=e},o.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},o.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},o.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var i=this.animationsMap[t];i&&(i.fps=e,i.duration=(i.end-i.start)/i.fps)},o.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var i=this.animationsMap[t];i&&(i.duration=e,i.fps=(i.end-i.start)/i.duration)},o.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var i=this.animationsMap[t];i&&(i.weight=e)},o.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var i=this.animationsMap[t];i&&(i.time=e)},o.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0,i=this.animationsMap[t];return i&&(e=i.time),e},o.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1,i=this.animationsMap[t];return i&&(e=i.duration),e},o.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},o.MorphBlendMesh.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},o.MorphBlendMesh.prototype.update=function(t){for(var e=0,i=this.animationsList.length;i>e;e++){var n=this.animationsList[e];if(n.active){var r=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var a=n.start+o.Math.clamp(Math.floor(n.time/r),0,n.length-1),s=n.weight;a!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*s,this.morphTargetInfluences[a]=0,n.lastFrame=n.currentFrame,n.currentFrame=a);var u=n.time%r/r;n.directionBackwards&&(u=1-u),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=u*s,this.morphTargetInfluences[n.lastFrame]=(1-u)*s):this.morphTargetInfluences[n.currentFrame]=s}}}},[795,298,297],[796,300,296,307],function(t,e,i){"use strict";function n(t){function e(e,i,n,r,o,a){if(r=r||w,a=a||n,null==i[n]){var s=b[o];return e?new Error("Required "+s+" `"+a+"` was not specified in "+("`"+r+"`.")):null}return t(i,n,r,o,a)}var i=e.bind(null,!1);return i.isRequired=e.bind(null,!0),i}function r(t){function e(e,i,n,r,o){var a=e[i],s=m(a);if(s!==t){var u=b[r],l=y(a);return new Error("Invalid "+u+" `"+o+"` of type "+("`"+l+"` supplied to `"+n+"`, expected ")+("`"+t+"`."))}return null}return n(e)}function o(){return n(x.thatReturns(null))}function a(t){function e(e,i,n,r,o){var a=e[i];if(!Array.isArray(a)){var s=b[r],u=m(a);return new Error("Invalid "+s+" `"+o+"` of type "+("`"+u+"` supplied to `"+n+"`, expected an array."))}for(var l=0;l<a.length;l++){var h=t(a,l,n,r,o+"["+l+"]");if(h instanceof Error)return h}return null}return n(e)}function s(){function t(t,e,i,n,r){if(!g.isValidElement(t[e])){var o=b[n];return new Error("Invalid "+o+" `"+r+"` supplied to "+("`"+i+"`, expected a single ReactElement."))}return null}return n(t)}function u(t){function e(e,i,n,r,o){if(!(e[i]instanceof t)){var a=b[r],s=t.name||w,u=v(e[i]);return new Error("Invalid "+a+" `"+o+"` of type "+("`"+u+"` supplied to `"+n+"`, expected ")+("instance of `"+s+"`."))}return null}return n(e)}function l(t){function e(e,i,n,r,o){for(var a=e[i],s=0;s<t.length;s++)if(a===t[s])return null;var u=b[r],l=JSON.stringify(t);return new Error("Invalid "+u+" `"+o+"` of value `"+a+"` "+("supplied to `"+n+"`, expected one of "+l+"."))}return n(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function h(t){function e(e,i,n,r,o){var a=e[i],s=m(a);if("object"!==s){var u=b[r];return new Error("Invalid "+u+" `"+o+"` of type "+("`"+s+"` supplied to `"+n+"`, expected an object."))}for(var l in a)if(a.hasOwnProperty(l)){var h=t(a,l,n,r,o+"."+l);if(h instanceof Error)return h}return null}return n(e)}function c(t){function e(e,i,n,r,o){for(var a=0;a<t.length;a++){var s=t[a];if(null==s(e,i,n,r,o))return null}var u=b[r];return new Error("Invalid "+u+" `"+o+"` supplied to "+("`"+n+"`."))}return n(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function p(){function t(t,e,i,n,r){if(!f(t[e])){var o=b[n];return new Error("Invalid "+o+" `"+r+"` supplied to "+("`"+i+"`, expected a ReactNode."))}return null}return n(t)}function d(t){function e(e,i,n,r,o){var a=e[i],s=m(a);if("object"!==s){var u=b[r];return new Error("Invalid "+u+" `"+o+"` of type `"+s+"` "+("supplied to `"+n+"`, expected `object`."))}for(var l in t){var h=t[l];if(h){var c=h(a,l,n,r,o+"."+l);if(c)return c}}return null}return n(e)}function f(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(f);if(null===t||g.isValidElement(t))return!0;var e=_(t);if(!e)return!1;var i,n=e.call(t);if(e!==t.entries){for(;!(i=n.next()).done;)if(!f(i.value))return!1}else for(;!(i=n.next()).done;){var r=i.value;if(r&&!f(r[1]))return!1}return!0;default:return!1}}function m(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function y(t){var e=m(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function v(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var g=i(16),b=i(57),x=i(31),_=i(128),w="<<anonymous>>",M={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:o(),arrayOf:a,element:s(),instanceOf:u,node:p(),objectOf:h,oneOf:l,oneOfType:c,shape:d};t.exports=M},function(t,e,i){"use strict";t.exports=i(465)},function(t,e,i){"use strict";var n=function(t,e,i,n,r,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,o,a,s],h=0;u=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return l[h++]}))}throw u.framesToPop=1,u}};t.exports=n},function(t,e){"use strict";function i(t,e){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var i=Object(t),n=Object.prototype.hasOwnProperty,r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o){var a=Object(o);for(var s in a)n.call(a,s)&&(i[s]=a[s])}}return i}t.exports=i},function(t,e,i){"use strict";function n(t,e,i,n,r,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,o,a,s],h=0;u=new Error(e.replace(/%s/g,function(){return l[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}t.exports=n},[835,31],[794,105],function(t,e){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=n},function(t,e,i){"use strict";var n=i(3)["default"],r=i(1)["default"],o=i(13)["default"],a=(i(63)["default"],i(2)["default"]);Object.defineProperty(e,"__esModule",{value:!0});var s=i(11),u=a(s),l=i(109),h=(a(l),i(67)),c=(a(h),i(57)),p=(a(c),i(56)),d=a(p),f=i(780),m=a(f),y=i(7),v=a(y),g=m["default"].EventEmitter,b=function(){function t(e){r(this,t),this.react3RendererInstance=e,this.propUpdates={},this.propDeletes={},this._initialOnly={},this._updateInitial=[],this._simpleProperties=[],this.propTypes={},this._hasName=!1}return n(t,[{key:"hasEvent",value:function(t){this._hasEvents=!0,this.hasProp(t,{type:v["default"].func,updateInitial:!0,update:function(e,i){e.userData._eventCallbacks[t]=i},"default":null})}},{key:"removeProp",value:function(t){(0,u["default"])(this.propTypes.hasOwnProperty(t),"The property %s has not been defined",t);var e=this._simpleProperties.indexOf(t);-1!==e&&this._simpleProperties.splice(e,1),delete this.propTypes[t],delete this.propDeletes[t],delete this.propUpdates[t];var i=this._updateInitial.indexOf(t);-1!==i&&this._updateInitial.splice(i,1),delete this._initialOnly[t]}},{key:"hasProp",value:function(t,e){var i=this;if((0,u["default"])(e.hasOwnProperty("type"),"The information should include a `type` property"),(0,u["default"])(!this.propTypes.hasOwnProperty(t)||e.override,"The property %s has already been defined",t),e.override){var n=this._simpleProperties.indexOf(t);-1!==n&&this._simpleProperties.splice(n,1)}this.propTypes[t]=e.type,e.hasOwnProperty("simple")?(this.registerSimpleProperties([t]),e.hasOwnProperty("default")&&(this.propDeletes[t]=function(n){i.propUpdates[t](n,e["default"],!0)})):(e.hasOwnProperty("update")&&(this.propUpdates[t]=e.update),e.hasOwnProperty("default")&&((0,u["default"])(e.hasOwnProperty("update"),"The information should include a `update` property if it has a`default` property"),this.propDeletes[t]=function(t){e.update(t,e["default"],!0)}),e.hasOwnProperty("remove")&&((0,u["default"])(!e.hasOwnProperty("default"),"The information should not include both of `default` and `remove` properties"),this.propDeletes[t]=function(t){e.update(t,e["default"])}),e.hasOwnProperty("updateInitial")&&((0,u["default"])(e.hasOwnProperty("update"),"The information should include a `update` property if it has a`updateInitial` property"),-1===this._updateInitial.indexOf(t)&&this._updateInitial.push(t)),e.initialOnly&&(0,u["default"])(e.hasOwnProperty("updateInitial"),"The information should include a `updateInitial` property if it has an `initialOnly` property"),this._initialOnly[t]=e.initialOnly)}},{key:"hasName",value:function(){var t=this;this._hasName=!0,this.hasProp("name",{type:v["default"].string,update:function(e,i){t._updateName(e,i)},"default":""})}},{key:"_updateName",value:function(t,e){var i=t.name;t.name=e,t.userData.events.emit("rename",{oldName:i,nextName:e});var n=t.userData.markup;n._rootInstance&&n._rootInstance.objectRenamed(t,i,e)}},{key:"placeRemountTrigger",value:function(t,e){t.userData._triggerRemount=e}},{key:"applyInitialProps",value:function(t,e){var i=this,n=new g;this._hasName&&e.name&&(t.name=e.name),this._hasEvents&&(t.userData._eventCallbacks={}),n.on("resource.added",function(e){var i=t.userData.markup.childrenMarkup,n=o({},e,{distance:e.distance+1});i.forEach(function(t){return t.threeObject.userData.events.emit("resource.added",n)})}),n.on("resource.removed",function(e){var i=t.userData.markup.childrenMarkup,n=o({},e,{distance:e.distance+1});i.forEach(function(t){return t.threeObject.userData.events.emit("resource.removed",n)})}),t.userData.events=n,t.userData._descriptor=this,this._updateInitial.forEach(function(n){e.hasOwnProperty(n)?i.propUpdates[n](t,e[n],!0):i.propUpdates[n](t,void 0,!1)}),this._simpleProperties.forEach(function(i){e.hasOwnProperty(i)&&(t[i]=e[i])})}},{key:"construct",value:function(t){(0,u["default"])(!1,"Missing constructor!")}},{key:"addChildren",value:function(t,e){(0,u["default"])(!1,"Cannot add children to "+this.constructor.name+"!")}},{key:"addChild",value:function(t,e,i){(0,u["default"])(!1,"Cannot add child to "+this.constructor.name+"!")}},{key:"moveChild",value:function(){(0,u["default"])(!1,"Cannot move children in "+this.constructor.name+"!")}},{key:"removeChild",value:function(t,e){(0,u["default"])(!1,"Cannot remove children in "+this.constructor.name+"!")}},{key:"setParent",value:function(t,e){var i=e.userData.markup;i&&i._rootInstance&&i._rootInstance.objectMounted(t)}},{key:"componentWillUnmount",value:function(t){}},{key:"unmount",value:function(t){var e=t.userData.markup;e._rootInstance&&e._rootInstance.objectRemoved(t),this._hasEvents&&delete t.userData._eventCallbacks,t.userData.events.emit("dispose",{object:t}),t.userData.events.removeAllListeners()}},{key:"removedFromParent",value:function(t){delete t.userData.events}},{key:"deleteProperty",value:function(t,e){this.propDeletes[e]&&this.propDeletes[e](t)}},{key:"updateProperty",value:function(t,e,i){this._initialOnly[e]?this.triggerRemount(t):this.propUpdates[e]?this.propUpdates[e](t,i,!0):((0,d["default"])(!1,"updating prop "+e+" ( "+i+" ) for "+this.constructor.name),this.triggerRemount(t))}},{key:"highlight",value:function(t){}},{key:"hideHighlight",value:function(t){}},{key:"useSimpleUpdates",value:function(t){for(var e=0;e<t.length;++e){var i=t[e];this.propUpdates[i]=this._updateSimple.bind(this,i)}}},{key:"_updateSimple",value:function(t,e,i){e[t]=i}},{key:"registerSimpleProperties",value:function(t){var e=this;t.forEach(function(t){-1===e._simpleProperties.indexOf(t)&&e._simpleProperties.push(t)}),this.useSimpleUpdates(t)}},{key:"getBoundingBoxes",value:function(t){return[]}},{key:"triggerRemount",value:function(t){t.userData._triggerRemount(),delete t.userData._triggerRemount}},{key:"beginPropertyUpdates",value:function(t){}},{key:"completePropertyUpdates",value:function(t){}},{key:"beginChildUpdates",value:function(t){}},{key:"completeChildUpdates",value:function(t){}}]),t}();e["default"]=b,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(22),r=i(10),o=(i(88),"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103),a={key:!0,ref:!0,__self:!0,__source:!0},s=function(t,e,i,n,r,a,s){var u={$$typeof:o,type:t,key:e,ref:i,props:s,_owner:a};return u};s.createElement=function(t,e,i){var r,o={},u=null,l=null,h=null,c=null;if(null!=e){l=void 0===e.ref?null:e.ref,u=void 0===e.key?null:""+e.key,h=void 0===e.__self?null:e.__self,c=void 0===e.__source?null:e.__source;for(r in e)e.hasOwnProperty(r)&&!a.hasOwnProperty(r)&&(o[r]=e[r])}var p=arguments.length-2;if(1===p)o.children=i;else if(p>1){for(var d=Array(p),f=0;p>f;f++)d[f]=arguments[f+2];o.children=d}if(t&&t.defaultProps){var m=t.defaultProps;for(r in m)"undefined"==typeof o[r]&&(o[r]=m[r])}return s(t,u,l,h,c,n.current,o)},s.createFactory=function(t){var e=s.createElement.bind(null,t);return e.type=t,e},s.cloneAndReplaceKey=function(t,e){var i=s(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return i},s.cloneAndReplaceProps=function(t,e){var i=s(t.type,t.key,t.ref,t._self,t._source,t._owner,e);return i},s.cloneElement=function(t,e,i){var o,u=r({},t.props),l=t.key,h=t.ref,c=t._self,p=t._source,d=t._owner;if(null!=e){void 0!==e.ref&&(h=e.ref,d=n.current),void 0!==e.key&&(l=""+e.key);for(o in e)e.hasOwnProperty(o)&&!a.hasOwnProperty(o)&&(u[o]=e[o])}var f=arguments.length-2;if(1===f)u.children=i;else if(f>1){for(var m=Array(f),y=0;f>y;y++)m[y]=arguments[y+2];u.children=m}return s(t.type,l,h,c,p,d,u)},s.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o},t.exports=s},function(t,e,i){"use strict";function n(t,e){for(var i=Math.min(t.length,e.length),n=0;i>n;n++)if(t.charAt(n)!==e.charAt(n))return n;return t.length===e.length?-1:i}function r(t){return t?t.nodeType===F?t.documentElement:t.firstChild:null}function o(t){var e=r(t);return e&&Z.getID(e)}function a(t){var e=s(t);if(e)if(B.hasOwnProperty(e)){var i=B[e];i!==t&&(c(i,e)?I(!1):void 0,B[e]=t)}else B[e]=t;return e}function s(t){return t&&t.getAttribute&&t.getAttribute(V)||""}function u(t,e){var i=s(t);i!==e&&delete B[i],t.setAttribute(V,e),B[e]=t}function l(t){return B.hasOwnProperty(t)&&c(B[t],t)||(B[t]=Z.findReactNodeByID(t)),B[t]}function h(t){var e=E.get(t)._rootNodeID;return S.isNullComponentID(e)?null:(B.hasOwnProperty(e)&&c(B[e],e)||(B[e]=Z.findReactNodeByID(e)),B[e])}function c(t,e){if(t){s(t)!==e?I(!1):void 0;var i=Z.findReactContainerForID(e);if(i&&L(i,t))return!0}return!1}function p(t){delete B[t]}function d(t){var e=B[t];return e&&c(e,t)?void(Y=e):!1}function f(t){Y=null,C.traverseAncestors(t,d);var e=Y;return Y=null,e}function m(t,e,i,n,r,o){w.useCreateElement&&(o=N({},o),i.nodeType===F?o[H]=i:o[H]=i.ownerDocument);var a=A.mountComponent(t,e,n,o);t._renderedComponent._topLevelWrapper=t,Z._mountImageIntoNode(a,i,r,n)}function y(t,e,i,n,r){var o=O.ReactReconcileTransaction.getPooled(n);o.perform(m,null,t,e,i,o,n,r),O.ReactReconcileTransaction.release(o)}function v(t,e){for(A.unmountComponent(t),e.nodeType===F&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function g(t){var e=o(t);return e?e!==C.getReactRootIDFromNodeID(e):!1}function b(t){for(;t&&t.parentNode!==t;t=t.parentNode)if(1===t.nodeType){var e=s(t);if(e){var i,n=C.getReactRootIDFromNodeID(e),r=t;do if(i=s(r),r=r.parentNode,null==r)return null;while(i!==n);if(r===X[n])return t}}return null}var x=i(47),_=i(84),w=(i(22),i(199)),M=i(16),S=i(122),C=i(48),E=i(49),T=i(207),P=i(23),A=i(30),k=i(68),O=i(18),N=i(10),D=i(70),L=i(221),R=i(129),I=i(9),z=i(90),j=i(91),V=(i(132),i(12),x.ID_ATTRIBUTE_NAME),B={},U=1,F=9,G=11,H="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),W={},X={},q=[],Y=null,K=function(){};K.prototype.isReactComponent={},K.prototype.render=function(){return this.props};var Z={TopLevelWrapper:K,_instancesByReactRootID:W,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,i,n){return Z.scrollMonitor(i,function(){k.enqueueElementInternal(t,e),n&&k.enqueueCallbackInternal(t,n)}),t},_registerComponent:function(t,e){!e||e.nodeType!==U&&e.nodeType!==F&&e.nodeType!==G?I(!1):void 0,_.ensureScrollValueMonitoring();var i=Z.registerContainer(e);return W[i]=t,i},_renderNewRootComponent:function(t,e,i,n){var r=R(t,null),o=Z._registerComponent(r,e);return O.batchedUpdates(y,r,o,e,i,n),r},renderSubtreeIntoContainer:function(t,e,i,n){return null==t||null==t._reactInternalInstance?I(!1):void 0,Z._renderSubtreeIntoContainer(t,e,i,n)},_renderSubtreeIntoContainer:function(t,e,i,n){M.isValidElement(e)?void 0:I(!1);var a=new M(K,null,null,null,null,null,e),u=W[o(i)];if(u){var l=u._currentElement,h=l.props;if(j(h,e)){var c=u._renderedComponent.getPublicInstance(),p=n&&function(){n.call(c)};return Z._updateRootComponent(u,a,i,p),c}Z.unmountComponentAtNode(i)}var d=r(i),f=d&&!!s(d),m=g(i),y=f&&!u&&!m,v=Z._renderNewRootComponent(a,i,y,null!=t?t._reactInternalInstance._processChildContext(t._reactInternalInstance._context):D)._renderedComponent.getPublicInstance();return n&&n.call(v),v},render:function(t,e,i){return Z._renderSubtreeIntoContainer(null,t,e,i)},registerContainer:function(t){var e=o(t);return e&&(e=C.getReactRootIDFromNodeID(e)),e||(e=C.createReactRootID()),X[e]=t,e},unmountComponentAtNode:function(t){!t||t.nodeType!==U&&t.nodeType!==F&&t.nodeType!==G?I(!1):void 0;var e=o(t),i=W[e];if(!i){var n=(g(t),s(t));n&&n===C.getReactRootIDFromNodeID(n);return!1}return O.batchedUpdates(v,i,t),delete W[e],delete X[e],!0},findReactContainerForID:function(t){var e=C.getReactRootIDFromNodeID(t),i=X[e];return i},findReactNodeByID:function(t){var e=Z.findReactContainerForID(t);return Z.findComponentRoot(e,t)},getFirstReactDOM:function(t){return b(t)},findComponentRoot:function(t,e){var i=q,n=0,r=f(e)||t;for(i[0]=r.firstChild,i.length=1;n<i.length;){for(var o,a=i[n++];a;){var s=Z.getID(a);s?e===s?o=a:C.isAncestorIDOf(s,e)&&(i.length=n=0,i.push(a.firstChild)):i.push(a.firstChild),a=a.nextSibling}if(o)return i.length=0,o}i.length=0,I(!1)},_mountImageIntoNode:function(t,e,i,o){if(!e||e.nodeType!==U&&e.nodeType!==F&&e.nodeType!==G?I(!1):void 0,i){var a=r(e);if(T.canReuseMarkup(t,a))return;var s=a.getAttribute(T.CHECKSUM_ATTR_NAME);a.removeAttribute(T.CHECKSUM_ATTR_NAME);var u=a.outerHTML;a.setAttribute(T.CHECKSUM_ATTR_NAME,s);var l=t,h=n(l,u);" (client) "+l.substring(h-20,h+20)+"\n (server) "+u.substring(h-20,h+20);e.nodeType===F?I(!1):void 0}if(e.nodeType===F?I(!1):void 0,o.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(t)}else z(e,t)},ownerDocumentContextKey:H,getReactRootID:o,getID:a,setID:u,getNode:l,getNodeFromInstance:h,isValid:c,purgeID:p};P.measureMethods(Z,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=Z},function(t,e,i){"use strict";function n(){E.ReactReconcileTransaction&&x?void 0:y(!1)}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=h.getPooled(),this.reconcileTransaction=E.ReactReconcileTransaction.getPooled(!1)}function o(t,e,i,r,o,a){n(),x.batchedUpdates(t,e,i,r,o,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==v.length?y(!1):void 0,v.sort(a);for(var i=0;e>i;i++){var n=v[i],r=n._pendingCallbacks;if(n._pendingCallbacks=null,d.performUpdateIfNecessary(n,t.reconcileTransaction),r)for(var o=0;o<r.length;o++)t.callbackQueue.enqueue(r[o],n.getPublicInstance())}}function u(t){return n(),x.isBatchingUpdates?void v.push(t):void x.batchedUpdates(u,t)}function l(t,e){x.isBatchingUpdates?void 0:y(!1),g.enqueue(t,e),b=!0}var h=i(114),c=i(39),p=i(23),d=i(30),f=i(87),m=i(10),y=i(9),v=[],g=h.getPooled(),b=!1,x=null,_={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),S()):v.length=0}},w={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},M=[_,w];m(r.prototype,f.Mixin,{getTransactionWrappers:function(){return M},destructor:function(){this.dirtyComponentsLength=null,h.release(this.callbackQueue),this.callbackQueue=null,E.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,i){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,i)}}),c.addPoolingTo(r);var S=function(){for(;v.length||b;){if(v.length){var t=r.getPooled();t.perform(s,null,t),r.release(t)}if(b){b=!1;var e=g;g=h.getPooled(),e.notifyAll(),h.release(e)}}};S=p.measure("ReactUpdates","flushBatchedUpdates",S);var C={injectReconcileTransaction:function(t){t?void 0:y(!1),E.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:y(!1),"function"!=typeof t.batchedUpdates?y(!1):void 0,"boolean"!=typeof t.isBatchingUpdates?y(!1):void 0,x=t}},E={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:S,injection:C,asap:l};t.exports=E},function(t,e){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(15),p=u(c),d=i(11),f=u(d),m=i(64),y=u(m),v=i(7),g=u(v),b=function(t){function e(t){a(this,i),n(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,t),this.hasProp("dynamic",{type:g["default"].bool,update:function(t,e){t.dynamic=!!e},"default":!1}),this.hasName()}r(e,t),o(e,[{key:"setParent",value:function(t,e){(0,f["default"])(e instanceof h["default"].Mesh||e instanceof h["default"].Points||e instanceof h["default"].Line,"Parent is not a mesh"),(0,f["default"])(void 0===e.geometry,"Parent already has a geometry"),n(Object.getPrototypeOf(i.prototype),"setParent",this).call(this,t,e),e.geometry=t}},{key:"applyInitialProps",value:function(t,e){t.userData=s({},t.userData),e.hasOwnProperty("dynamic")&&(t.dynamic=!!e.dynamic),t.userData._remountAfterPropsUpdate=!1,n(Object.getPrototypeOf(i.prototype),"applyInitialProps",this).call(this,t,e)}},{key:"unmount",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;(e instanceof h["default"].Mesh||e instanceof h["default"].Points)&&e.geometry===t&&(e.geometry=void 0),t.dispose(),n(Object.getPrototypeOf(i.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){var t=new h["default"].Box3;return t.setFromObject(e),[t]}})}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject,i=new h["default"].Box3;return i.setFromObject(e),[i]}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}}]);var i=e;return e=(0,y["default"])(e)||e}(p["default"]);e["default"]=b,t.exports=e["default"]},function(t,e){"use strict";var i={current:null};t.exports=i},function(t,e,i){"use strict";function n(t,e,i){return i}var r={enableMeasure:!1,storedMeasure:n,measureMethods:function(t,e,i){},measure:function(t,e,i){return i},injection:{injectMeasure:function(t){r.storedMeasure=t}}};t.exports=r},function(t,e){"use strict";e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.__esModule=!0},function(t,e,i){"use strict";var n=i(608)["default"];e["default"]=n||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},e.__esModule=!0},function(t,e,i){"use strict";var n=i(609)["default"],r=i(612)["default"];e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=n(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r?r(t,e):t.__proto__=e)},e.__esModule=!0},19,function(t,e,i){"use strict";function n(t,e,i){t.splice(i,0,t.splice(e,1)[0])}var r=i(5)["default"],o=i(6)["default"],a=i(3)["default"],s=i(1)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(15),p=u(c),d=i(11),f=(u(d),i(7)),m=u(f),y=function(t){function e(t){function i(t){return function(e,i){e[t].copy(i)}}var n=this;s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasName(),this.hasProp("position",{type:m["default"].instanceOf(h["default"].Vector3),update:function(t,e){t.position.copy(e),t.userData._lookAt&&t.lookAt(t.userData._lookAt)},"default":new h["default"].Vector3}),this.hasProp("rotation",{type:m["default"].instanceOf(h["default"].Euler),update:function(t,e){t.rotation.copy(e)},"default":new h["default"].Euler}),this.hasProp("quaternion",{type:m["default"].instanceOf(h["default"].Quaternion),update:i("quaternion"),"default":new h["default"].Quaternion}),this.hasProp("scale",{type:m["default"].instanceOf(h["default"].Vector3),update:i("scale"),"default":new h["default"].Vector3(1,1,1)}),this.hasProp("lookAt",{type:m["default"].instanceOf(h["default"].Vector3),update:function(t,e){t.userData._lookAt=e,e&&t.lookAt(e)},"default":void 0}),["frustumCulled","visible"].forEach(function(t){n.hasProp(t,{type:m["default"].bool,simple:!0,"default":!0})}),this.hasProp("renderOrder",{type:m["default"].number,simple:!0}),this.hasProp("castShadow",{type:m["default"].bool,simple:!0,"default":!1}),this.hasProp("receiveShadow",{type:m["default"].bool,updateInitial:!0,update:function(t,e){t.receiveShadow=e,t.material&&(t.material.needsUpdate=!0)},"default":!1})}return o(e,t),a(e,[{key:"construct",value:function(){return new h["default"].Object3D}},{key:"applyInitialProps",value:function(t,i){r(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),i.position&&t.position.copy(i.position),i.scale&&t.scale.copy(i.scale),i.rotation&&t.rotation.copy(i.rotation),i.quaternion&&t.quaternion.copy(i.quaternion),i.lookAt&&(t.userData._lookAt=i.lookAt,t.lookAt(i.lookAt))}},{key:"addChildren",value:function(t,e){e.forEach(function(e){t.add(e)})}},{key:"addChild",value:function(t,e,i){t.add(e),this.moveChild(t,e,i,t.children.length-1)}},{key:"removeChild",value:function(t,e){t.remove(e)}},{key:"moveChild",value:function(t,e,i,r){n(t.children,t.children.indexOf(e),i)}},{key:"highlight",value:function(t){
var e=this;t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){return e.getBoundingBoxes(t)}})}},{key:"getBoundingBoxes",value:function(t){var e=new h["default"].Box3;return e.setFromObject(t),[e]}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}}]),e}(p["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(15),p=u(c),d=i(11),f=u(d),m=i(64),y=u(m),v=i(55),g=u(v),b=i(7),x=u(b),_=function(t){function e(t){var e=this;a(this,i),n(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,t),this._invalidChild=function(t){return e.invalidChildInternal(t)},this.hasProp("slot",{type:x["default"].string,updateInitial:!0,update:function(t,e,i){i?t.userData._materialSlot=e:t.userData._materialSlot="material"},"default":"material"}),this.hasProp("transparent",{type:x["default"].bool,simple:!0}),this.hasProp("alphaTest",{type:x["default"].number,updateInitial:!0,update:function(t,e){t.alphaTest=e,t.needsUpdate=!0}}),this.hasProp("side",{type:x["default"].oneOf([h["default"].FrontSide,h["default"].BackSide,h["default"].DoubleSide]),updateInitial:!0,update:function(t,e){t.side=e},"default":void 0}),this.hasProp("opacity",{type:x["default"].number,simple:!0}),this.hasProp("visible",{type:x["default"].bool,simple:!0,"default":!0}),this._colors=[]}r(e,t),o(e,[{key:"getMaterialDescription",value:function(t){var e={};return this._colors.forEach(function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),t.hasOwnProperty("side")&&(e.side=t.side),e}},{key:"hasColor",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"color":arguments[0],e=arguments.length<=1||void 0===arguments[1]?16777215:arguments[1];this._colors.push(t),this.hasProp(t,{type:x["default"].oneOfType([x["default"].instanceOf(h["default"].Color),x["default"].number,x["default"].string]),update:function(e,i){e[t].set(i)},"default":e})}},{key:"hasWireframe",value:function(){this.hasProp("wireframe",{type:x["default"].bool,simple:!0,"default":!1}),this.hasProp("wireframeLinewidth",{type:x["default"].number,simple:!0,"default":1})}},{key:"construct",value:function(){return new h["default"].Material({})}},{key:"applyInitialProps",value:function(t,e){t.userData=s({},t.userData),n(Object.getPrototypeOf(i.prototype),"applyInitialProps",this).call(this,t,e)}},{key:"setParent",value:function(t,e){(0,f["default"])(e instanceof h["default"].Mesh||e instanceof h["default"].Points||e instanceof h["default"].Line,"Parent is not a mesh"),(0,f["default"])(void 0===e[t.userData._materialSlot]||null===e[t.userData._materialSlot],"Parent already has a "+t.userData._materialSlot+" defined"),n(Object.getPrototypeOf(i.prototype),"setParent",this).call(this,t,e),e[t.userData._materialSlot]=t}},{key:"unmount",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;if(e instanceof h["default"].Mesh||e instanceof h["default"].Points){var r=t.userData._materialSlot;e[r]===t&&(e[r]=void 0)}t.dispose(),n(Object.getPrototypeOf(i.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){var t=new h["default"].Box3;return t.setFromObject(e),[t]}})}},{key:"getBoundingBoxes",value:function(t){var e=new h["default"].Box3;return e.setFromObject(t.userData.markup.parentMarkup.threeObject),[e]}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}},{key:"addChildren",value:function(t,e){(0,f["default"])(0===e.filter(this._invalidChild).length,"Mesh children can only be materials or geometries!")}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"moveChild",value:function(){}},{key:"removeChild",value:function(){}},{key:"invalidChildInternal",value:function(t){var e=!(t instanceof h["default"].Texture||t instanceof g["default"]);return e}}]);var i=e;return e=(0,y["default"])(e)||e}(p["default"]);e["default"]=_,t.exports=e["default"]},function(t,e,i){"use strict";function n(){r.attachRefs(this,this._currentElement)}var r=i(483),o={mountComponent:function(t,e,i,r){var o=t.mountComponent(e,i,r);return t._currentElement&&null!=t._currentElement.ref&&i.getReactMountReady().enqueue(n,t),o},unmountComponent:function(t){r.detachRefs(t,t._currentElement),t.unmountComponent()},receiveComponent:function(t,e,i,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=r.shouldUpdateRefs(a,e);s&&r.detachRefs(t,a),t.receiveComponent(e,i,o),s&&t._currentElement&&null!=t._currentElement.ref&&i.getReactMountReady().enqueue(n,t)}},performUpdateIfNecessary:function(t,e){t.performUpdateIfNecessary(e)}};t.exports=o},function(t,e){"use strict";function i(t){return function(){return t}}function n(){}n.thatReturns=i,n.thatReturnsFalse=i(!1),n.thatReturnsTrue=i(!0),n.thatReturnsNull=i(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},t.exports=n},function(t,e,i){"use strict";var n=i(615)["default"];e.__esModule=!0;var r=i(603);e.SquashClickEventMixin=n(r);var o=i(602);e.ExpandedStateHandlerMixin=n(o)},function(t,e,i){function n(t){var e=t.getDefaultProps;e&&(t.defaultProps=e(),delete t.getDefaultProps)}function r(t){function e(t){var e=t.state||{};s(e,i.call(t)),t.state=e}var i=t.getInitialState,n=t.componentWillMount;i&&(n?t.componentWillMount=function(){e(this),n.call(this)}:t.componentWillMount=function(){e(this)},delete t.getInitialState)}function o(t,e){n(e),r(e);var i={},s={};Object.keys(e).forEach(function(t){"mixins"!==t&&"statics"!==t&&("function"==typeof e[t]?i[t]=e[t]:s[t]=e[t])}),u(t.prototype,i);var l=function(t,e,i){if(!t)return e;if(!e)return t;var n={};return Object.keys(t).forEach(function(i){e[i]||(n[i]=t[i])}),Object.keys(e).forEach(function(i){t[i]?n[i]=function(){return e[i].apply(this,arguments)&&t[i].apply(this,arguments)}:n[i]=e[i]}),n};return a({childContextTypes:l,contextTypes:l,propTypes:a.MANY_MERGED_LOOSE,defaultProps:a.MANY_MERGED_LOOSE})(t,s),e.statics&&Object.getOwnPropertyNames(e.statics).forEach(function(i){var n=t[i],r=e.statics[i];if(void 0!==n&&void 0!==r)throw new TypeError("Cannot mixin statics because statics."+i+" and Component."+i+" are defined.");t[i]=void 0!==n?n:r}),e.mixins&&e.mixins.reverse().forEach(o.bind(null,t)),t}var a=i(649),s=i(648),u=a({componentDidMount:a.MANY,componentWillMount:a.MANY,componentWillReceiveProps:a.MANY,shouldComponentUpdate:a.ONCE,componentWillUpdate:a.MANY,componentDidUpdate:a.MANY,componentWillUnmount:a.MANY,getChildContext:a.MANY_MERGED});t.exports=function(){var t=u;return t.onClass=function(t,e){return o(t,e)},t.decorate=function(e){return function(i){return t.onClass(i,e)}},t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.BOX="box",n=e.SPHERE="sphere",r=e.CYLINDER="cylinder",o=e.JOINT_DISTANCE="jointDistance",a=e.JOINT_BALL_AND_SOCKET="jointBall",s=e.JOINT_HINGE="jointHinge",u=e.JOINT_WHEEL="jointWheel",l=e.JOINT_SLIDER="jointSlider",h=e.JOINT_PRISMATIC="jointPrismatic",c=e.BRUTE=1,p=e.SWEEP=2,d=e.TREE=3,f=(e.BROADPHASES=[c,p,d],e.SPAWN="SPAWN"),m=e.SETUP="SETUP",y=e.LOOP="LOOP",v=e.TERMINATE="TERMINATE",g=e.BODIES=[i,n,r],b=e.JOINTS=[o,a,s,u,l,h];e.OBJECTS=[].concat(g,b),e.ACTIONS=[f,m,y,v]},function(t,e,i){"use strict";var n=i(3)["default"],r=i(1)["default"],o=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s=o(a),u=function(){function t(){r(this,t),this.uuid=s["default"].Math.generateUUID(),this.userData={}}return n(t,[{key:"performAction",value:function(t){}}]),t}();e["default"]=u,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(93),r=n({bubbled:null,captured:null}),o=n({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:r};t.exports=a},function(t,e){var i=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=i)},37,function(t,e,i){"use strict";var n=i(9),r=function(t){var e=this;if(e.instancePool.length){var i=e.instancePool.pop();return e.call(i,t),i}return new e(t)},o=function(t,e){var i=this;if(i.instancePool.length){var n=i.instancePool.pop();return i.call(n,t,e),n}return new i(t,e)},a=function(t,e,i){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e,i),r}return new n(t,e,i)},s=function(t,e,i,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,t,e,i,n),o}return new r(t,e,i,n)},u=function(t,e,i,n,r){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,t,e,i,n,r),a}return new o(t,e,i,n,r)},l=function(t){var e=this;t instanceof e?void 0:n(!1),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},h=10,c=r,p=function(t,e){var i=t;return i.instancePool=[],i.getPooled=e||c,i.poolSize||(i.poolSize=h),i.release=l,i},d={addPoolingTo:p,oneArgumentPooler:r,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:u};t.exports=d},function(t,e){"use strict";var i=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=i},[825,235,237,95],37,19,function(t,e){function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=n.PropTypes.shape({x:n.PropTypes.number,y:n.PropTypes.number,z:n.PropTypes.number}),o=n.PropTypes.shape({x:n.PropTypes.number,y:n.PropTypes.number,z:n.PropTypes.number,w:n.PropTypes.number}),a=n.PropTypes.shape({pos:r,qua:o}),s=n.PropTypes.shape({G:n.PropTypes.number,iterations:n.PropTypes.number,timestep:n.PropTypes.number,broadphase:n.PropTypes.oneOf([1,2,3])}),u=n.PropTypes.shape({width:n.PropTypes.number,height:n.PropTypes.number,depth:n.PropTypes.number,radius:n.PropTypes.number,radiusTop:n.PropTypes.number,radiusBottom:n.PropTypes.number}),l={vec3:r,vec4:o,pose:a,worldSettings:s,dim:u};e["default"]=l},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(15),c=s(h),p=i(11),d=s(p),f=i(184),m=s(f),y=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"setParent",value:function(t,i){(0,d["default"])(i instanceof l["default"].Path||i instanceof m["default"],"Shape action commands (%s) can only be added to shapes, paths or holes.",this.constructor.name),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}}]),e}(c["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){return(t&e)===e}var r=i(9),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=o,i=t.Properties||{},a=t.DOMAttributeNamespaces||{},u=t.DOMAttributeNames||{},l=t.DOMPropertyNames||{},h=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var c in i){s.properties.hasOwnProperty(c)?r(!1):void 0;var p=c.toLowerCase(),d=i[c],f={attributeName:p,attributeNamespace:null,propertyName:c,mutationMethod:null,mustUseAttribute:n(d,e.MUST_USE_ATTRIBUTE),mustUseProperty:n(d,e.MUST_USE_PROPERTY),hasSideEffects:n(d,e.HAS_SIDE_EFFECTS),hasBooleanValue:n(d,e.HAS_BOOLEAN_VALUE),hasNumericValue:n(d,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:n(d,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:n(d,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.mustUseAttribute&&f.mustUseProperty?r(!1):void 0,!f.mustUseProperty&&f.hasSideEffects?r(!1):void 0,f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:r(!1),u.hasOwnProperty(c)){var m=u[c];f.attributeName=m}a.hasOwnProperty(c)&&(f.attributeNamespace=a[c]),l.hasOwnProperty(c)&&(f.propertyName=l[c]),h.hasOwnProperty(c)&&(f.mutationMethod=h[c]),s.properties[c]=f}}},a={},s={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var i=s._isCustomAttributeFunctions[e];if(i(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var i,n=a[t];return n||(a[t]=n={}),e in n||(i=document.createElement(t),n[e]=i[e]),n[e]},injection:o};t.exports=s},function(t,e,i){"use strict";function n(t){return d+t.toString(36)}function r(t,e){return t.charAt(e)===d||e===t.length}function o(t){return""===t||t.charAt(0)===d&&t.charAt(t.length-1)!==d}function a(t,e){return 0===e.indexOf(t)&&r(e,t.length)}function s(t){return t?t.substr(0,t.lastIndexOf(d)):""}function u(t,e){if(o(t)&&o(e)?void 0:p(!1),a(t,e)?void 0:p(!1),t===e)return t;var i,n=t.length+f;for(i=n;i<e.length&&!r(e,i);i++);return e.substr(0,i)}function l(t,e){var i=Math.min(t.length,e.length);if(0===i)return"";for(var n=0,a=0;i>=a;a++)if(r(t,a)&&r(e,a))n=a;else if(t.charAt(a)!==e.charAt(a))break;var s=t.substr(0,n);return o(s)?void 0:p(!1),s}function h(t,e,i,n,r,o){t=t||"",e=e||"",t===e?p(!1):void 0;var l=a(e,t);l||a(t,e)?void 0:p(!1);for(var h=0,c=l?s:u,d=t;;d=c(d,e)){var f;if(r&&d===t||o&&d===e||(f=i(d,l,n)),f===!1||d===e)break;h++<m?void 0:p(!1)}}var c=i(213),p=i(9),d=".",f=d.length,m=1e4,y={createReactRootID:function(){return n(c.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===d&&t.length>1){var e=t.indexOf(d,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,i,n,r){var o=l(t,e);o!==t&&h(t,o,i,n,!1,!0),o!==e&&h(o,e,i,r,!0,!1)},traverseTwoPhase:function(t,e,i){t&&(h("",t,e,i,!0,!1),h(t,"",e,i,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,i){t&&(h("",t,e,i,!0,!0),h(t,"",e,i,!0,!0))},traverseAncestors:function(t,e,i){h("",t,e,i,!0,!1)},getFirstCommonAncestorID:l,_getNextDescendantID:u,isAncestorIDOf:a,SEPARATOR:d};t.exports=y},function(t,e){"use strict";var i={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=i},function(t,e,i){"use strict";function n(t,e,i,n){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=i,this.target=n,this.currentTarget=n;var r=this.constructor.Interface;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s?this[o]=s(i):this[o]=i[o]}var u=null!=i.defaultPrevented?i.defaultPrevented:i.returnValue===!1;u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse}var r=i(39),o=i(10),a=i(31),s=(i(12),{type:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null});o(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=s,n.augmentClass=function(t,e){var i=this,n=Object.create(i.prototype);o(n,t.prototype),t.prototype=n,t.prototype.constructor=t,t.Interface=o({},i.Interface,e),t.augmentClass=i.augmentClass,r.addPoolingTo(t,r.fourArgumentPooler)},r.addPoolingTo(n,r.fourArgumentPooler),t.exports=n},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},t.exports=e["default"]},function(t,e){function i(t){return!!t&&"object"==typeof t}t.exports=i},function(t,e,i){function n(t){return r(t)?t:Object(t)}var r=i(44);t.exports=n},function(t,e,i){var n=i(101),r=i(72),o=i(52),a="[object Array]",s=Object.prototype,u=s.toString,l=n(Array,"isArray"),h=l||function(t){return o(t)&&r(t.length)&&u.call(t)==a};t.exports=h},function(t,e,i){"use strict";var n=i(1)["default"],r=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),a=r(o),s=function u(t){n(this,u),this.uuid=a["default"].Math.generateUUID(),this.resourceId=t,this.userData={}};e["default"]=s,t.exports=e["default"]},[835,453],function(t,e,i){"use strict";var n={};t.exports=n},[811,95,37,136],[825,636,640,147],function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=i(261),o=n(r),a=i(778),s=n(a),u=i(777),l=n(u),h=i(776),c=n(h),p=i(262),d=n(p);e.createStore=o["default"],e.combineReducers=s["default"],e.bindActionCreators=l["default"],e.applyMiddleware=c["default"],e.compose=d["default"]},function(t,e,i){"use strict";function n(t){return{type:s.SPAWN,payload:t}}function r(t){return{type:s.SETUP,payload:t}}function o(t){return{type:s.LOOP,payload:t}}function a(t){return{type:s.TERMINATE,payload:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.spawn=n,e.setup=r,e.loop=o,e.terminate=a;var s=i(34)},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.store=void 0;var l=i(8),h=r(l),c=i(60),p=i(100),d=i(283),f=i(156),m=r(f),y=i(287),v=n(y),g=i(288),b=n(g),x=(0,c.combineReducers)(v),_=(0,c.compose)((0,d.taskEnhancer)(b),m["default"].instrument(),(0,p.persistState)(window.location.href.match(/[?&]debug_session=([^&]+)\b/)))(c.createStore),w=e.store=_(x),M=function(t){var e=function(e){function i(){return o(this,i),a(this,Object.getPrototypeOf(i).apply(this,arguments))}return s(i,e),u(i,[{key:"getChildContext",value:function(){return{store:w}}},{key:"render",value:function(){return h["default"].createElement(t,this.props)}}]),i}(l.Component);return e.childContextTypes={store:l.PropTypes.any},e};e["default"]=M},[788,313],function(t,e,i){"use strict";function n(t){var e=function(e){function i(t){s(this,i),r(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,t),this.isResource=!0,this.hasProp("resourceId",{type:y["default"].string,updateInitial:!0,initialOnly:!0,update:function(t,e,i){i&&(t.userData._resourceId=e,t.userData._hasReferences||(t.userData._hasReferences=!0,t.userData._references=[]))},"default":""})}return o(i,e),a(i,null,[{key:"displayName",value:""+(t.displayName||t.name),enumerable:!0}]),a(i,[{key:"applyInitialProps",value:function(t,e){r(Object.getPrototypeOf(i.prototype),"applyInitialProps",this).call(this,t,e)}},{key:"setParent",value:function(t,e){e instanceof h["default"]?((0,p["default"])(!!t.userData._resourceId),f["default"].prototype.setParent.call(this,t,e)):r(Object.getPrototypeOf(i.prototype),"setParent",this).call(this,t,e)}},{key:"highlight",value:function(t){return t.userData._resourceId?void t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){return t.userData._references.reduce(function(t,e){var i=e.userData._descriptor.getBoundingBoxes(e);return(0,p["default"])(i.length>0),t.concat(i)},[])}}):r(Object.getPrototypeOf(i.prototype),"highlight",this).call(this,t)}},{key:"hideHighlight",value:function(t){return t.userData._resourceId?void t.userData.events.emit("hideHighlight"):r(Object.getPrototypeOf(i.prototype),"hideHighlight",this).call(this,t)}}]),i}(t);return e}var r=i(5)["default"],o=i(6)["default"],a=i(3)["default"],s=i(1)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(110),h=u(l),c=i(11),p=u(c),d=i(15),f=u(d),m=i(7),y=u(m);e["default"]=n,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(194),r=i(462),o=i(204),a=i(215),s=i(217),u=i(9),l=(i(12),{}),h=null,c=function(t,e){t&&(r.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},p=function(t){return c(t,!0)},d=function(t){return c(t,!1)},f=null,m={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(t){f=t},getInstanceHandle:function(){return f},injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},eventNameDispatchConfigs:n.eventNameDispatchConfigs,registrationNameModules:n.registrationNameModules,putListener:function(t,e,i){"function"!=typeof i?u(!1):void 0;var r=l[e]||(l[e]={});r[t]=i;var o=n.registrationNameModules[e];o&&o.didPutListener&&o.didPutListener(t,e,i)},getListener:function(t,e){var i=l[e];return i&&i[t]},deleteListener:function(t,e){var i=n.registrationNameModules[e];i&&i.willDeleteListener&&i.willDeleteListener(t,e);var r=l[e];r&&delete r[t]},deleteAllListeners:function(t){for(var e in l)if(l[e][t]){var i=n.registrationNameModules[e];i&&i.willDeleteListener&&i.willDeleteListener(t,e),delete l[e][t]}},extractEvents:function(t,e,i,r,o){for(var s,u=n.plugins,l=0;l<u.length;l++){var h=u[l];if(h){var c=h.extractEvents(t,e,i,r,o);c&&(s=a(s,c))}}return s},enqueueEvents:function(t){t&&(h=a(h,t))},processEventQueue:function(t){var e=h;h=null,t?s(e,p):s(e,d),h?u(!1):void 0,o.rethrowCaughtError()},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=m},function(t,e,i){"use strict";function n(t,e,i){var n=e.dispatchConfig.phasedRegistrationNames[i];return g(t,n)}function r(t,e,i){var r=e?v.bubbled:v.captured,o=n(t,i,r);o&&(i._dispatchListeners=m(i._dispatchListeners,o),i._dispatchIDs=m(i._dispatchIDs,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,r,t)}function a(t){t&&t.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(t.dispatchMarker,r,t)}function s(t,e,i){if(i&&i.dispatchConfig.registrationName){var n=i.dispatchConfig.registrationName,r=g(t,n);r&&(i._dispatchListeners=m(i._dispatchListeners,r),i._dispatchIDs=m(i._dispatchIDs,t))}}function u(t){t&&t.dispatchConfig.registrationName&&s(t.dispatchMarker,null,t)}function l(t){y(t,o)}function h(t){y(t,a)}function c(t,e,i,n){f.injection.getInstanceHandle().traverseEnterLeave(i,n,s,t,e)}function p(t){y(t,u)}var d=i(36),f=i(65),m=(i(12),i(215)),y=i(217),v=d.PropagationPhases,g=f.getListener,b={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:h,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:c};t.exports=b},function(t,e,i){"use strict";var n=i(93),r=n({prop:null,context:null,childContext:null});t.exports=r},function(t,e,i){"use strict";function n(t){s.enqueueUpdate(t)}function r(t,e){var i=a.get(t);return i?i:null}var o=(i(22),i(16)),a=i(49),s=i(18),u=i(10),l=i(9),h=(i(12),{isMounted:function(t){var e=a.get(t);return e?!!e._renderedComponent:!1},enqueueCallback:function(t,e){"function"!=typeof e?l(!1):void 0;var i=r(t);return i?(i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],void n(i)):null},enqueueCallbackInternal:function(t,e){"function"!=typeof e?l(!1):void 0,t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],n(t)},enqueueForceUpdate:function(t){var e=r(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,n(e))},enqueueReplaceState:function(t,e){var i=r(t,"replaceState");i&&(i._pendingStateQueue=[e],i._pendingReplaceState=!0,n(i))},enqueueSetState:function(t,e){var i=r(t,"setState");if(i){var o=i._pendingStateQueue||(i._pendingStateQueue=[]);o.push(e),n(i)}},enqueueSetProps:function(t,e){var i=r(t,"setProps");i&&h.enqueueSetPropsInternal(i,e)},enqueueSetPropsInternal:function(t,e){var i=t._topLevelWrapper;i?void 0:l(!1);var r=i._pendingElement||i._currentElement,a=r.props,s=u({},a.props,e);i._pendingElement=o.cloneAndReplaceProps(r,o.cloneAndReplaceProps(a,s)),n(i)},enqueueReplaceProps:function(t,e){var i=r(t,"replaceProps");i&&h.enqueueReplacePropsInternal(i,e)},enqueueReplacePropsInternal:function(t,e){var i=t._topLevelWrapper;i?void 0:l(!1);var r=i._pendingElement||i._currentElement,a=r.props;i._pendingElement=o.cloneAndReplaceProps(r,o.cloneAndReplaceProps(a,e)),n(i)},enqueueElementInternal:function(t,e){t._pendingElement=e,n(t)}});t.exports=h},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(50),o=i(127),a={view:function(t){if(t.view)return t.view;var e=o(t);if(null!=e&&e.window===e)return e;var i=e.ownerDocument;return i?i.defaultView||i.parentWindow:window},detail:function(t){return t.detail||0}};r.augmentClass(n,a),t.exports=n},function(t,e,i){"use strict";var n={};t.exports=n},[811,147,42,242],function(t,e){function i(t){return"number"==typeof t&&t>-1&&t%1==0&&n>=t}var n=9007199254740991;t.exports=i},[811,75,38,166],function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},[818,73,38,74],[823,170,167],function(t,e,i){"use strict";t.exports=i(198)},function(t,e,i){"use strict";function n(t){T["default"].unmountComponent(t)}function r(t){return t&&t[ut["default"]]||""}function o(t){return t?t.userData&&t.userData.markup&&t.userData.markup.childrenMarkup[0]||null:null}function a(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}var s=i(5)["default"],u=i(6)["default"],l=i(1)["default"],h=i(3)["default"],c=i(63)["default"],p=i(105)["default"],d=(i(299)["default"],i(2)["default"]);Object.defineProperty(e,"__esModule",{value:!0});var f=i(4),m=d(f),y=i(121),v=d(y),g=i(16),b=d(g),x=i(49),_=d(x),w=i(122),M=d(w),S=i(48),C=d(S),E=i(30),T=d(E),P=i(18),A=d(P),k=i(22),O=d(k),N=i(68),D=d(N),L=i(85),R=d(L),I=i(205),z=d(I),j=i(212),V=d(j),B=i(120),U=d(B),F=i(92),G=d(F),H=i(91),W=d(H),X=i(191),q=d(X),Y=i(11),K=d(Y),Z=i(56),J=(d(Z),i(109)),Q=d(J),$=i(452),tt=d($),et=i(382),it=d(et),nt=i(381),rt=d(nt),ot=i(182),at=d(ot),st=i(190),ut=d(st),lt=C["default"].SEPARATOR,ht=function(t){function e(){l(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return u(e,t),h(e,[{key:"render",value:function(){return this.props}}],[{key:"isReactClass",value:{},enumerable:!0},{key:"displayName",value:"TopLevelWrapper",enumerable:!0}]),e}(R["default"]),ct=function(){function t(){var e=this;if(l(this,t),this.findDeepestCachedAncestorImpl=function(t){var i=e.markupCache[t];return i&&e.isValid(i,t)?void(e.deepestContainerSoFar=i.threeObject):!1},this.instantiateChild=function(t,i,n){var r=void 0===t[n];null!==i&&r&&(t[n]=e.instantiateReactComponent(i,null))},this.findNodeHandle=function(t){var i=e.getMarkup(t._rootNodeID);return e._highlightCache=i,e._highlightElement},this.nativeTagToRootNodeID=function(){return null},this.mountRootComponent=function(t,i,n,r,o,a){var s=T["default"].mountComponent(t,i,r,a);t._renderedComponent._topLevelWrapper=t,e._mountRootImage(s,n,o,r)},this.batchedMountRootComponent=function(t,i,n,r,o){var a=A["default"].ReactReconcileTransaction.getPooled();a.perform(e.mountRootComponent,null,t,i,n,a,r,o),A["default"].ReactReconcileTransaction.release(a)},this._instancesByReactRootID={},this.containersByReactRootID={},this.findComponentRootReusableArray=[],this.markupCache={},this.deepestContainerSoFar=null,this.nextMountID=1,this.nextReactRootIndex=0,this.threeElementDescriptors=new rt["default"](this).descriptors,this._highlightElement=document.createElement("div"),this._highlightCache=null,"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&(this._agent=null,this._onHideHighlightFromInspector=function(){if(e._highlightCache&&e._highlightCache.threeObject.userData.react3internalComponent){var t=e._highlightCache.threeObject.userData.react3internalComponent;t.hideHighlight(),e._highlightCache=null}},this._onHighlightFromInspector=function(t){if(t.node===e._highlightElement&&e._highlightCache&&e._highlightCache.threeObject.userData.react3internalComponent){var i=e._highlightCache.threeObject.userData.react3internalComponent;i.highlightComponent()}},this._hookAgent=function(t){e._agent=t,t.on("highlight",e._onHighlightFromInspector),t.on("hideHighlight",e._onHideHighlightFromInspector)},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject)){this._devToolsRendererDefinition={CurrentOwner:O["default"],InstanceHandles:C["default"],Mount:this,Reconciler:T["default"],TextComponent:it["default"]};var i=function(t){e._reactDevtoolsRendererId=t.id,e._rendererListenerCleanup(),delete e._rendererListenerCleanup};if(this._rendererListenerCleanup=__REACT_DEVTOOLS_GLOBAL_HOOK__.sub("renderer",i),__REACT_DEVTOOLS_GLOBAL_HOOK__.inject(this._devToolsRendererDefinition),"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent&&__REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent){var n=__REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent;this._hookAgent(n)}else this._devtoolsCallbackCleanup=__REACT_DEVTOOLS_GLOBAL_HOOK__.sub("react-devtools",function(t){e._devtoolsCallbackCleanup(),e._hookAgent(t)})}}return h(t,[{key:"updateChildren",value:function(t,e,i,n){if(!e&&!t)return null;if(e)for(var r=c(e),o=0;o<r.length;++o){var a=r[o],s=t&&t[a],u=s&&s._currentElement,l=e[a];null!==s&&void 0!==s&&(0,W["default"])(u,l)?(T["default"].receiveComponent(s,l,i,n),s._forceRemountOfComponent?(T["default"].unmountComponent(s,a),e[a]=this.instantiateReactComponent(l,null)):e[a]=s):(s&&T["default"].unmountComponent(s,a),
e[a]=this.instantiateReactComponent(l,null))}if(t)for(var h=c(t),o=0;o<h.length;++o){var a=h[o];e&&e.hasOwnProperty(a)||T["default"].unmountComponent(t[a])}return e}},{key:"getMarkupFromInstance",value:function(t){var e=_["default"].get(t)._rootNodeID;return M["default"].isNullComponentID(e)?null:(this.markupCache.hasOwnProperty(e)&&this.isValid(this.markupCache[e],e)||(this.markupCache[e]=this.findMarkupByID(e)),this.markupCache[e])}},{key:"getElementDescriptor",value:function(t){return this.threeElementDescriptors[t]}}],[{key:"findTHREEObject",value:function(t){if(null===t)return null;if(t instanceof m["default"].Object3D||t instanceof HTMLCanvasElement)return t;if(_["default"].has(t)){var e=_["default"].get(t);return e._react3RendererInstance.getMarkupFromInstance(t).threeObject}null!==t.render&&"function"==typeof t.render&&(0,K["default"])(!1),(0,K["default"])(!1)}},{key:"eventDispatcher",value:new tt["default"],enumerable:!0}]),h(t,[{key:"findDeepestCachedAncestor",value:function(t){this.deepestContainerSoFar=null,C["default"].traverseAncestors(t,this.findDeepestCachedAncestorImpl);var e=this.deepestContainerSoFar;return this.deepestContainerSoFar=null,e}},{key:"instantiateChildren",value:function(t){if(null===t)return null;var e={};return(0,G["default"])(t,this.instantiateChild,e),e}},{key:"containsChild",value:function(t,e){for(var i=t.userData.markup.childrenMarkup,n=0;n<i.length;n++)if(i[n]===e)return!0;return!1}},{key:"isValid",value:function(t,e){if(t){r(t)!==e&&(0,K["default"])(!1);var i=this.findContainerForID(e);if(i&&this.containsChild(i,t))return!0}return!1}},{key:"findContainerForID",value:function(t){var e=C["default"].getReactRootIDFromNodeID(t),i=this.containersByReactRootID[e];return i}},{key:"getMarkup",value:function(t){return this.markupCache.hasOwnProperty(t)&&this.isValid(this.markupCache[t],t)||(this.markupCache[t]=this.findMarkupByID(t)),this.markupCache[t]}},{key:"findMarkupByID",value:function(t){var e=this.findContainerForID(t);return this.findComponentRoot(e,t)}},{key:"findComponentRoot",value:function(t,e){var i=this.findComponentRootReusableArray,n=0,r=this.findDeepestCachedAncestor(e)||t;for(i[0]=r.userData.markup.childrenMarkup[0],i.length=1;n<i.length;){for(var o=i[n++],a=void 0;o;){var s=this.getID(o);s?e===s?a=o:C["default"].isAncestorIDOf(s,e)&&(i.length=n=0,i.push(o.childrenMarkup[0])):((0,K["default"])(!1),i.push(o.childrenMarkup[0]));var u=o&&o.parentMarkup,l=u&&u.childrenMarkup;if(l){var h=l.indexOf(o);(0,K["default"])(-1!==h,"Could not find child markup`s index in parent"),o=l.length>h&&l[h+1]||null}else o=null}if(a)return i.length=0,a}i.length=0,(0,K["default"])(!1)}},{key:"_mountRootImage",value:function(t,e){e.userData||((0,K["default"])(e instanceof HTMLCanvasElement,"The root container can only be a THREE.js object (with an userData property) or HTMLCanvasElement."),e.userData={_createdByReact3:!0});var i={threeObject:e,parentMarkup:null,childrenMarkup:[t],toJSON:function(){return"---MARKUP---"}};p(e.userData,{object3D:e,toJSON:function(){return"---USERDATA---"},markup:i}),t.parentMarkup=i;var n=this.threeElementDescriptors[t.elementType];n.setParent(t.threeObject,i.threeObject);var r=t.threeObject;(0,K["default"])(r instanceof Q["default"],"Invalid root component type found"),r.mountedIntoRoot()}},{key:"render",value:function(t,e,i){return this._renderSubtreeIntoContainer(null,t,e,i)}},{key:"_renderSubtreeIntoContainer",value:function(t,e,i,n){b["default"].isValidElement(e)||(0,K["default"])(!1);var a=new b["default"](ht,null,null,null,null,null,e),s=this._instancesByReactRootID[this.getReactRootID(i)];if(s){var u=s._currentElement,l=u.props;if((0,W["default"])(l,e))return this._updateRootComponent(s,a,i,n)._renderedComponent.getPublicInstance();this.unmountComponentAtNode(i)}var h=o(i),c=h&&r(h),p=c&&!s,d=void 0;return d=null===t?this._renderNewRootComponent(a,i,p,q["default"])._renderedComponent.getPublicInstance():this._renderNewRootComponent(a,i,p,t._reactInternalInstance._processChildContext(t._reactInternalInstance._context))._renderedComponent.getPublicInstance(),n&&n.call(d),d}},{key:"dispose",value:function(){for(var t=c(this.containersByReactRootID),e=0;e<t.length;++e)this.unmountComponentAtNode(this.containersByReactRootID[t[e]]);delete this._instancesByReactRootID,delete this.containersByReactRootID,delete this.findComponentRootReusableArray,delete this.markupCache,delete this.deepestContainerSoFar,delete this._highlightElement,this.nextMountID=1,this.nextReactRootIndex=0,"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&(this._devtoolsCallbackCleanup&&(this._devtoolsCallbackCleanup(),delete this._devtoolsCallbackCleanup),this._rendererListenerCleanup&&(this._rendererListenerCleanup(),delete this._rendererListenerCleanup),this._devToolsRendererDefinition&&(this._agent&&(this._agent.onUnmounted(this._devToolsRendererDefinition),this._agent.removeListener("highlight",this._onHighlightFromInspector),this._agent.removeListener("hideHighlight",this._onHideHighlightFromInspector)),this._reactDevtoolsRendererId&&(delete __REACT_DEVTOOLS_GLOBAL_HOOK__._renderers[this._reactDevtoolsRendererId],delete this._reactDevtoolsRendererId),delete this._devToolsRendererDefinition,delete this._agent),delete this._onHighlightFromInspector,delete this._onHideHighlightFromInspector,delete this._hookAgent)}},{key:"_updateRootComponent",value:function(t,e,i,n){return D["default"].enqueueElementInternal(t,e),n&&D["default"].enqueueCallbackInternal(t,n),t}},{key:"unmountComponentAtNode",value:function(t){var e=this.getReactRootID(t),i=this._instancesByReactRootID[e];return i?(A["default"].batchedUpdates(n,i,t),delete this._instancesByReactRootID[e],delete this.containersByReactRootID[e],t&&t.userData&&t.userData._createdByReact3&&delete t.userData,!0):!1}},{key:"getReactRootID",value:function(t){var e=o(t);return e&&this.getID(e)}},{key:"instantiateReactComponent",value:function(t){var e=void 0,i=t;if(null===i||i===!1)i=new v["default"](this.instantiateReactComponent);else if("object"==typeof i){var n=i;if((!n||"function"!=typeof n.type&&"string"!=typeof n.type)&&(0,K["default"])(!1),"string"==typeof n.type)e=new it["default"](n,this);else if(a(n.type)){var r=n.type;e=new r(n),console.log("internal component type")}else e=new at["default"](this)}else"string"==typeof i||"number"==typeof i?(0,K["default"])(!1):(0,K["default"])(!1);return e.construct(i),e._mountIndex=0,e._mountImage=null,e}},{key:"_renderNewRootComponent",value:function(t,e,i,n){var r=this.instantiateReactComponent(t),o=this._registerComponent(r,e);return A["default"].ReactReconcileTransaction||(z["default"].Updates.injectReconcileTransaction(V["default"]),z["default"].Updates.injectBatchingStrategy(U["default"])),A["default"].batchedUpdates(this.batchedMountRootComponent,r,o,e,i,n),r}},{key:"_registerComponent",value:function(t,e){var i=this.registerContainer(e);return this._instancesByReactRootID[i]=t,i}},{key:"registerContainer",value:function(t){var e=this.getReactRootID(t);return e&&(e=C["default"].getReactRootIDFromNodeID(e)),e||(e=""+lt+this.createReactRootID()),this.containersByReactRootID[e]=t,e}},{key:"createReactRootID",value:function(){return this.nextReactRootIndex++}},{key:"getID",value:function(t){var e=r(t);if(e){var i=this.markupCache[e];i?i!==t&&(this.isValid(i,e)&&(0,K["default"])(!1),this.markupCache[e]=t):this.markupCache[e]=t}return e}}]),t}();e["default"]=ct,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(3)["default"],r=i(1)["default"],o=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s=o(a),u=function(){function t(){r(this,t),this.userData={},this.name=null,this.value=null,this.type=null,this.uuid=s["default"].Math.generateUUID()}return n(t,[{key:"setValue",value:function(t){this.value=t,this.userData.events.emit("valueChanged",t)}}]),t}();e["default"]=u,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(1)["default"],a=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),u=(a(s),i(21)),l=a(u),h=i(7),c=a(h),p=function(t){function e(t){var i=this;o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["radius","detail"].forEach(function(t){i.hasProp(t,{type:c["default"].number.isRequired,update:i.triggerRemount,"default":void 0})})}return r(e,t),e}(l["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(28),c=s(h),p=i(7),d=s(p),f=i(56),m=(s(f),function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._hasColor=!1,this.hasProp("updatesRefreshAllMaterials",{type:d["default"].bool,updateInitial:!0,update:function(t,e){t.userData._updatesRefreshAllMaterials=e},"default":!1}),this.hasProp("shadowBias",{type:d["default"].number,simple:!0,"default":0}),this.hasProp("shadowDarkness",{type:d["default"].number,simple:!0,"default":.5}),["shadowMapWidth","shadowMapHeight"].forEach(function(t){i.hasProp(t,{type:d["default"].number,updateInitial:!0,update:function(e,i,n){n&&(e[t]=i)},"default":512})}),this.hasProp("shadowCameraNear",{type:d["default"].number,updateInitial:!0,update:function(t,e,i){i&&(t.shadow.camera.near=e)},"default":50}),this.hasProp("shadowCameraFar",{type:d["default"].number,updateInitial:!0,update:function(t,e,i){i&&(t.shadow.camera.far=e)},"default":5e3}),this.hasProp("castShadow",{override:!0,type:d["default"].bool,update:this.triggerRemount,"default":!1})}return r(e,t),o(e,[{key:"hasColor",value:function(){this._hasColor=!0,this.hasProp("color",{type:d["default"].oneOfType([d["default"].instanceOf(l["default"].Color),d["default"].number,d["default"].string]),update:function(t,e){t.color.set(e)},"default":16777215})}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),i.hasOwnProperty("castShadow")&&(t.castShadow=i.castShadow)}},{key:"unmount",value:function(t){this.updateAllMaterials(t),n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"setParent",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i),this.updateAllMaterials(t)}},{key:"updateAllMaterials",value:function(t){var e=t.userData.markup._rootInstance;if(e&&!e._willUnmount){e.allMaterialsNeedUpdate()}}}],[{key:"getDynamicWarningMessage",value:function(t,e){return"<"+t+"/> has been updated which triggered a refresh of all materials.\n  This is a potentially expensive operation.\n  This can happen when you add or remove a light, or add or remove any component\n  before any lights without keys e.g.\n  <object3d>\n    {/* new or removed component here */}\n    <ambientLight/>\n  </object3d>, or update some properties of lights.\n  If you would like to add components you should either add the components after the lights (recommended), e.g.\n  <object3d>\n    <ambientLight/>\n    {/* new or removed component here */}\n  </object3d>, or add a 'key' property to the lights e.g.\n  <object3d>\n    {/* new or removed component here */}\n    <ambientLight key=\"light\"/>\n  </object3d>.\n  If you have modified a light's properties e.g. toggled castShadow, the materials need to be rebuilt as well.\n  To acknowledge and remove this message, please add the property 'updatesRefreshAllMaterials'\n    to <"+t+"/> inside the render() of "+(e&&e.getName()||"a component")+".\n  For more information, visit https://github.com/mrdoob/threejs/wiki/Updates ."}}]),e}(c["default"]));e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(15),l=s(u),h=i(11),c=s(h),p=i(55),d=s(p),f=i(79),m=(s(f),i(7)),y=s(m),v=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._addedIntoRoot=function(t){for(var e=t.userData.markup.parentMarkup,n=0;e;){var r=e.threeObject.userData._resources;if(r){var o=t.resourceId,a=r.resourceMap[o];a&&i._addResource(t,{id:o,distance:n,resource:a})}n++,e=e.threeObject.userData.markup.parentMarkup}i._updateResource(t)},this.hasProp("resourceId",{type:y["default"].string.isRequired,update:this.triggerRemount,"default":""})}return r(e,t),o(e,[{key:"construct",value:function(t){return(0,c["default"])(t.hasOwnProperty("resourceId"),'A resource type must have a property named "resourceId"!'),new d["default"](t.resourceId)}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.userData.resourceMap=[],t.userData._eventCleanupQueue=[],t.userData._chosenResource=void 0,t.userData._debug=i.debug||!1,t.userData.events.once("addedIntoRoot",this._addedIntoRoot)}},{key:"unmount",value:function(t){t.userData._eventCleanupQueue.forEach(function(t){t()}),delete t.userData._eventCleanupQueue,delete t.userData.resourceMap,this.updateChosenResource(t,null),n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"updateChosenResource",value:function(t,e){var i=t.userData._chosenResource;i!==e&&(t.userData._chosenResource=e,this.resourceUpdated(t,e,i))}},{key:"setParent",value:function(t,i){var r=i[t.userData._propertySlot];(0,c["default"])(void 0===r||null===r,"Parent already has a "+t.userData._propertySlot+" defined"),(0,c["default"])(0===t.userData._eventCleanupQueue.length,"Changing parents?"),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i);var o=i.userData.markup,a=this._onResourceAdded.bind(this,t),s=this._onResourceRemoved.bind(this,t),u=o.threeObject.userData.events;u.on("resource.added",a),u.on("resource.removed",s),t.userData._eventCleanupQueue.push(function(){u.removeListener("resource.added",a),u.removeListener("resource.removed",s)})}},{key:"_onResourceAdded",value:function(t,e){t.resourceId===e.id&&(this._addResource(t,e),this._updateResource(t))}},{key:"_addResource",value:function(t,e){var i=t.userData.resourceMap,n=void 0;for(n=0;n<i.length;++n){if(i[n].distance===e.distance)return void(i[n].resource!==e.resource&&(i[n].resource=e.resource));if(i[n].distance>e.distance)break}i.splice(n,0,{distance:e.distance,resource:e.resource})}},{key:"_onResourceRemoved",value:function(t,e){if(t.resourceId===e.id){for(var i=t.userData.resourceMap,n=0;n<i.length;++n)if(i[n].distance===e.distance)return void(i[n].resource===e.resource&&(i.splice(n,1),this._updateResource(t)));(0,c["default"])(!1,"This resource was not in this map?")}}},{key:"applyToSlot",value:function(t,e,i){var n=t.userData._propertySlot;e[n]=i}},{key:"resourceUpdated",value:function(t,e,i){var n=t.userData.markup.parentMarkup&&t.userData.markup.parentMarkup.threeObject||void 0;if(n&&(this.applyToSlot(t,n,e),null===e||e.userData._references.push(n),i)){var r=i.userData._references.indexOf(n);(0,c["default"])(-1!==r,"Bad reference count for resource"),i.userData._references.splice(r,1)}}},{key:"_updateResource",value:function(t){var e=t.userData.resourceMap,i=null;e.length>0&&(i=e[0].resource),this.updateChosenResource(t,i)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]),e}(l["default"]);e["default"]=v,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return Object.prototype.hasOwnProperty.call(t,y)||(t[y]=f++,p[t[y]]={}),p[t[y]]}var r=i(36),o=i(65),a=i(194),s=i(479),u=i(23),l=i(214),h=i(10),c=i(130),p={},d=!1,f=0,m={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},y="_reactListenersID"+String(Math.random()).slice(2),v=h({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=t}},setEnabled:function(t){v.ReactEventListener&&v.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var i=e,o=n(i),s=a.registrationNameDependencies[t],u=r.topLevelTypes,l=0;l<s.length;l++){var h=s[l];o.hasOwnProperty(h)&&o[h]||(h===u.topWheel?c("wheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",i):c("mousewheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",i):v.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",i):h===u.topScroll?c("scroll",!0)?v.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",i):v.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):h===u.topFocus||h===u.topBlur?(c("focus",!0)?(v.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",i),v.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",i)):c("focusin")&&(v.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",i),v.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",i)),o[u.topBlur]=!0,o[u.topFocus]=!0):m.hasOwnProperty(h)&&v.ReactEventListener.trapBubbledEvent(h,m[h],i),o[h]=!0)}},trapBubbledEvent:function(t,e,i){return v.ReactEventListener.trapBubbledEvent(t,e,i)},trapCapturedEvent:function(t,e,i){return v.ReactEventListener.trapCapturedEvent(t,e,i)},ensureScrollValueMonitoring:function(){if(!d){var t=l.refreshScrollValues;v.ReactEventListener.monitorScrollValue(t),d=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});u.measureMethods(v,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),t.exports=v},function(t,e,i){"use strict";function n(t,e,i){this.props=t,this.context=e,this.refs=o,this.updater=i||r}var r=i(211),o=(i(88),i(70)),a=i(9);i(12);n.prototype.isReactComponent={},n.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?a(!1):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e)},n.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t)};t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(69),o=i(214),a=i(126),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};r.augmentClass(n,s),t.exports=n},function(t,e,i){"use strict";var n=i(9),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,i,r,o,a,s,u){this.isInTransaction()?n(!1):void 0;var l,h;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),h=t.call(e,i,r,o,a,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return h},initializeAll:function(t){for(var e=this.transactionWrappers,i=t;i<e.length;i++){var n=e[i];try{this.wrapperInitData[i]=o.OBSERVED_ERROR,this.wrapperInitData[i]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[i]===o.OBSERVED_ERROR)try{this.initializeAll(i+1)}catch(r){}}}},closeAll:function(t){this.isInTransaction()?void 0:n(!1);for(var e=this.transactionWrappers,i=t;i<e.length;i++){var r,a=e[i],s=this.wrapperInitData[i];try{r=!0,s!==o.OBSERVED_ERROR&&a.close&&a.close.call(this,s),r=!1}finally{if(r)try{this.closeAll(i+1)}catch(u){}}}this.wrapperInitData.length=0}},o={Mixin:r,OBSERVED_ERROR:{}};t.exports=o},function(t,e,i){"use strict";var n=!1;t.exports=n},function(t,e){"use strict";function i(t){return r[t]}function n(t){return(""+t).replace(o,i)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=n},function(t,e,i){"use strict";var n=i(14),r=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,a=function(t,e){t.innerHTML=e};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(a=function(t,e){MSApp.execUnsafeLocalFunction(function(){t.innerHTML=e})}),n.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(a=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),r.test(e)||"<"===e[0]&&o.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var i=t.firstChild;1===i.data.length?t.removeChild(i):i.deleteData(0,1)}else t.innerHTML=e})}t.exports=a},function(t,e){"use strict";function i(t,e){var i=null===t||t===!1,n=null===e||e===!1;if(i||n)return i===n;var r=typeof t,o=typeof e;return"string"===r||"number"===r?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}t.exports=i},function(t,e,i){"use strict";function n(t){return m[t]}function r(t,e){return t&&null!=t.key?a(t.key):e.toString(36)}function o(t){return(""+t).replace(y,n)}function a(t){return"$"+o(t)}function s(t,e,i,n){var o=typeof t;if(("undefined"===o||"boolean"===o)&&(t=null),null===t||"string"===o||"number"===o||l.isValidElement(t))return i(n,t,""===e?d+r(t,0):e),1;var u,h,m=0,y=""===e?d:e+f;if(Array.isArray(t))for(var v=0;v<t.length;v++)u=t[v],h=y+r(u,v),m+=s(u,h,i,n);else{var g=c(t);if(g){var b,x=g.call(t);if(g!==t.entries)for(var _=0;!(b=x.next()).done;)u=b.value,h=y+r(u,_++),m+=s(u,h,i,n);else for(;!(b=x.next()).done;){var w=b.value;w&&(u=w[1],h=y+a(w[0])+f+r(u,0),m+=s(u,h,i,n))}}else if("object"===o){String(t);p(!1)}}return m}function u(t,e,i){return null==t?0:s(t,"",e,i)}var l=(i(22),i(16)),h=i(48),c=i(128),p=i(9),d=(i(12),h.SEPARATOR),f=":",m={"=":"=0",".":"=1",":":"=2"},y=/[=.:]/g;t.exports=u},function(t,e,i){"use strict";var n=i(9),r=function(t){var e,i={};t instanceof Object&&!Array.isArray(t)?void 0:n(!1);for(e in t)t.hasOwnProperty(e)&&(i[e]=e);return i};t.exports=r},74,75,[823,231,137],[824,137],function(t,e,i){"use strict";var n=i(20)["default"];e.__esModule=!0;var r=i(8),o=n(r),a=i(604),s=n(a),u=i(599),l=n(u),h=i(592),c=n(h),p=i(596),d=n(p),f=i(600),m=n(f),y=i(598),v=n(y),g=i(593),b=n(g),x=i(597),_=n(x),w=i(594),M=n(w),S=i(601),C=n(S),E=i(595),T=n(E);e["default"]=function(t,e,i,n,r,a){var u=arguments.length<=6||void 0===arguments[6]?!1:arguments[6],h=s["default"](e);return"Object"===h?o["default"].createElement(l["default"],{data:e,previousData:i,theme:n,initialExpanded:u,keyName:t,key:t,styles:r,getItemString:a}):"Array"===h?o["default"].createElement(c["default"],{data:e,previousData:i,theme:n,initialExpanded:u,keyName:t,key:t,styles:r,getItemString:a}):"Iterable"===h?o["default"].createElement(d["default"],{data:e,previousData:i,theme:n,initialExpanded:u,keyName:t,key:t,styles:r,getItemString:a}):"String"===h?o["default"].createElement(m["default"],{keyName:t,previousValue:i,theme:n,value:e,key:t,styles:r}):"Number"===h?o["default"].createElement(v["default"],{keyName:t,previousValue:i,theme:n,value:e,key:t,styles:r}):"Boolean"===h?o["default"].createElement(b["default"],{keyName:t,previousValue:i,theme:n,value:e,key:t,styles:r}):"Date"===h?o["default"].createElement(M["default"],{keyName:t,previousValue:i,theme:n,value:e,key:t,styles:r}):"Null"===h?o["default"].createElement(_["default"],{keyName:t,previousValue:i,theme:n,value:e,key:t,styles:r}):"Undefined"===h?o["default"].createElement(C["default"],{keyName:t,previousValue:i,theme:n,value:e,key:t,styles:r}):"Function"===h?o["default"].createElement(T["default"],{keyName:t,previousValue:i,theme:n,value:e,key:t,styles:r}):!1},t.exports=e["default"]},function(t,e){t.exports={}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(251);Object.defineProperty(e,"instrument",{enumerable:!0,get:function(){return n["default"]}}),Object.defineProperty(e,"ActionCreators",{enumerable:!0,get:function(){return n.ActionCreators}}),Object.defineProperty(e,"ActionTypes",{enumerable:!0,get:function(){return n.ActionTypes}});var r=i(692);Object.defineProperty(e,"persistState",{enumerable:!0,get:function(){return r["default"]}});var o=i(691);Object.defineProperty(e,"createDevTools",{enumerable:!0,get:function(){return o["default"]}})},function(t,e,i){function n(t,e){var i=null==t?void 0:t[e];return r(i)?i:void 0}var r=i(726);t.exports=n},function(t,e,i){function n(t){return null!=t&&o(r(t))}var r=i(721),o=i(72);t.exports=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.WorldMesh=e.JointMesh=e.BodyMesh=void 0;var r=i(270),o=n(r),a=i(271),s=n(a),u=i(272),l=n(u);e.BodyMesh=o["default"],e.JointMesh=s["default"],e.WorldMesh=l["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=e.Root=e.Namespace=e.Worker=e.Provide=void 0;var r=i(62),o=n(r),a=i(282),s=n(a),u=i(279),l=n(u),h=i(280),c=n(h),p=i(281),d=n(p);e.Provide=o["default"],e.Worker=s["default"],e.Namespace=l["default"],e.Root=c["default"],e.Transform=d["default"]},[783,308],function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},[824,167],function(t,e,i){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&a(g(t))}function o(t,e){return t="number"==typeof t||d.test(t)?+t:-1,e=null==e?v:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function s(t){for(var e=l(t),i=e.length,n=i&&t.length,r=!!n&&a(n)&&(p(t)||c(t)),s=-1,u=[];++s<i;){var h=e[s];(r&&o(h,n)||m.call(t,h))&&u.push(h)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(p(t)||c(t))&&e||0;for(var i=t.constructor,n=-1,r="function"==typeof i&&i.prototype===t,s=Array(e),l=e>0;++n<e;)s[n]=n+"";for(var h in t)l&&o(h,e)||"constructor"==h&&(r||!m.call(t,h))||s.push(h);return s}var h=i(342),c=i(343),p=i(344),d=/^\d+$/,f=Object.prototype,m=f.hasOwnProperty,y=h(Object,"keys"),v=9007199254740991,g=n("length"),b=y?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r(t)?s(t):u(t)?y(t):[]}:s;t.exports=b},function(t,e,i){"use strict";var n=i(3)["default"],r=i(1)["default"],o=i(13)["default"],a=i(63)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(11),c=s(h),p=i(56),d=(s(p),i(185)),f=s(d),m=i(181),y=s(m),v=i(110),g=s(v),b=i(18),x=s(b),_=i(189),w=s(_),M=i(79),S=(s(M),["gammaInput","gammaOutput"]),C=function(){function t(e,i){var n=this;r(this,t),this._callOnAnimate=function(){n._onAnimate&&x["default"].batchedUpdates(n._onAnimate)},this._render=function(){for(var t=0;t<n._modules.length;++t)n._modules[t].update();if(n._renderRequest=requestAnimationFrame(n._render),n.userData.events.emit("animate"),n._scene&&n._mounted&&n._renderer){var e=null;if(n._mainCameraName){var i=n._objectsByName[n._mainCameraName];if(i&&i.count>0){var r=i.values;e=r[a(r)[0]]}}e?("camera"!==n._lastRenderMode&&(n._renderer.autoClear=!0,n._renderer.setViewport(0,0,n._parameters.width,n._parameters.height),n._lastRenderMode="camera"),w["default"].current=e,n.userData.events.emit("preRender"),n._renderScene(e),w["default"].current=null):n._viewports.length>0&&("viewport"!==n._lastRenderMode&&(n._renderer.autoClear=!1,n._lastRenderMode="viewport"),n._renderer.clear(),n._viewports.forEach(function(t){var e=null;if(t.cameraName){var i=n._objectsByName[t.cameraName];if(i&&i.count>0){var r=i.values;e=r[a(r)[0]]}}e&&(t.onBeforeRender&&x["default"].batchedUpdates(t.onBeforeRender),n._renderer.setViewport(t.x,t.y,t.width,t.height),w["default"].current=e,n.userData.events.emit("preRender"),n._renderScene(e),w["default"].current=null)}))}};var s=e.mainCamera,u=e.onAnimate,h=e.onRecreateCanvas;this._parameters=o({},e),this._rendererInstance=i,this._mounted=!1,this._willUnmount=!1,this._scene=null,this._mainCameraName=s,this._viewports=[],this._modules=[],this._resourceContainers=[],this._recreateCanvasCallback=h,this._canvas=null,this._onAnimate=u,this._objectsByUUID={},this._materials=[],this._geometries=[],this._textures=[],this._objectsByName={},this._lastRenderMode=null,this._renderRequest=requestAnimationFrame(this._render),this.uuid=l["default"].Math.generateUUID(),this.userData={},"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&(this._highlightScene=new l["default"].Scene,this._highlightGeometry=new l["default"].BoxGeometry(1,1,1),this._highlightMaterial=new l["default"].MeshBasicMaterial({color:255,transparent:!0,opacity:.4}),this._highlightObjectId=null,this._getHighlightBoundingBox=null,this._hideHighlight=function(){n._highlightObjectId=null,n._getHighlightBoundingBox=null},this._objectHighlighted=function(t){var e=t.uuid,i=t.boundingBoxFunc,r=void 0;n._highlightObjectId&&(r=n._objectsByUUID[n._highlightObjectId],r.userData.events.removeListener("hideHighlight",n._hideHighlight)),n._highlightObjectId=e,n._getHighlightBoundingBox=i,r=n._objectsByUUID[e],r.userData.events.once("hideHighlight",n._hideHighlight)})}return n(t,[{key:"_createRenderer",value:function(){if(this._canvas){var t=this._parameters;this._renderer=new l["default"].WebGLRenderer({canvas:this._canvas,antialias:t.antialias});var e=this._renderer;t.hasOwnProperty("pixelRatio")&&e.setPixelRatio(t.pixelRatio),t.hasOwnProperty("sortObjects")&&(e.sortObjects=t.sortObjects),t.hasOwnProperty("clearColor")&&e.setClearColor(t.clearColor),t.hasOwnProperty("shadowMapEnabled")&&(e.shadowMap.enabled=t.shadowMapEnabled),t.hasOwnProperty("shadowMapType")&&(e.shadowMap.type=t.shadowMapType),t.hasOwnProperty("shadowMapCullFace")&&(e.shadowMap.cullFace=t.shadowMapCullFace),t.hasOwnProperty("shadowMapDebug")&&(e.shadowMap.debug=t.shadowMapDebug),S.forEach(function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e.setSize(t.width,t.height)}}},{key:"initialize",value:function(){this.userData.events.on("animate",this._callOnAnimate)}},{key:"getObjectsByName",value:function(t){var e=this._objectsByName[t],i=void 0;return e?!function(){var t=e.values;i=a(t).map(function(e){return t[e]})}():i=[],
i}},{key:"addAnimateListener",value:function(t){this.userData.events.on("animate",t)}},{key:"removeAnimateListener",value:function(t){this.userData.events.removeListener("animate",t)}},{key:"addBeforeRenderListener",value:function(t){this.userData.events.on("preRender",t)}},{key:"removeBeforeRenderListener",value:function(t){this.userData.events.removeListener("preRender",t)}},{key:"addChildren",value:function(t){for(var e=0;e<t.length;++e){var i=t[e];i instanceof l["default"].Scene?this.setScene(i):i instanceof f["default"]?this.addViewport(i):i instanceof y["default"]?this.addModule(i):i instanceof g["default"]?this.addResourceContainer(i):(0,c["default"])(!1,"The react3 component should only contain <viewport/>s or <scene/>s or <resources/>.")}}},{key:"removeChild",value:function(t){t instanceof l["default"].Scene?this._scene===t&&this.setScene(null):t instanceof f["default"]?this.removeViewport(t):t instanceof y["default"]?this.removeModule(t):t instanceof g["default"]?this.removeResourceContainer(t):(0,c["default"])(!1,"The react3 component should only contain <viewport/>s or <scene/>s, <module/>s or <resources/>.")}},{key:"_renderScene",value:function(t){if(this._renderer.render(this._scene,t),"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&null!==this._highlightObjectId){var e=this._getHighlightBoundingBox(),i=this._highlightScene,n=i.children.length-e.length;if(n>0)for(var r=0;n>r;r++)i.remove(i.children[0]);else if(0>n)for(var r=0;-n>r;r++)i.add(new l["default"].Mesh(this._highlightGeometry,this._highlightMaterial));for(var r=0;r<e.length;++r){var o=e[r],a=o.min.clone().add(o.max).multiplyScalar(.5),s=o.max.clone().sub(o.min),u=i.children[r];u.position.copy(a),u.scale.copy(s)}var h=this._renderer.autoClear;this._renderer.autoClear=!1,this._renderer.render(i,t),this._renderer.autoClear=h}}},{key:"setScene",value:function(t){this._scene=t}},{key:"addViewport",value:function(t){this._viewports.push(t)}},{key:"removeViewport",value:function(t){var e=this._viewports.indexOf(t);this._viewports.splice(e,1)}},{key:"addResourceContainer",value:function(t){this._resourceContainers.push(t)}},{key:"removeResourceContainer",value:function(t){var e=this._resourceContainers.indexOf(t);this._resourceContainers.splice(e,1)}},{key:"addModule",value:function(t){this._modules.push(t)}},{key:"removeModule",value:function(t){var e=this._modules.indexOf(t);this._modules.splice(e,1)}},{key:"updateWidth",value:function(t){this._parameters.width=t,this._renderer&&this._renderer.setSize(this._parameters.width,this._parameters.height)}},{key:"updateOnRecreateCanvas",value:function(t,e){this._recreateCanvasCallback=e}},{key:"updateHeight",value:function(t){this._parameters.height=t,this._renderer&&this._renderer.setSize(this._parameters.width,this._parameters.height)}},{key:"updatePixelRatio",value:function(t){this._parameters.pixelRatio=t,this._renderer&&(this._renderer.setPixelRatio(t),this._renderer.setSize(this._parameters.width,this._parameters.height))}},{key:"updateSortObjects",value:function(t){this._parameters.sortObjects=t,this._renderer&&(this._renderer.sortObjects=t)}},{key:"updateAntialias",value:function(t){this._parameters.antialias=t,this._renderer&&this.refreshRenderer()}},{key:"updateShadowMapEnabled",value:function(t){this._parameters.shadowMapEnabled=t,this._renderer&&(this._renderer.shadowMap.enabled=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapType",value:function(t){this._parameters.shadowMapType=t,this._renderer&&(this._renderer.shadowMap.type=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapCullFace",value:function(t){this._parameters.shadowMapCullFace=t,this._renderer&&(this._renderer.shadowMap.cullFace=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapDebug",value:function(t){this._parameters.shadowMapDebug=t,this._renderer&&(this._renderer.shadowMap.debug=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateCanvas",value:function(t){if(this._canvas=t,this._renderer){this.disposeResourcesAndRenderer();var e=this._renderer.extensions.get("WEBGL_lose_context");e&&e.loseContext()}this._createRenderer()}},{key:"updateGammaInput",value:function(t){this._parameters.gammaInput=t,this._renderer&&(this._renderer.gammaInput=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateGammaOutput",value:function(t){this._parameters.gammaOutput=t,this._renderer&&(this._renderer.gammaOutput=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateContext",value:function(t){this._parameters.context=t}},{key:"updateMainCamera",value:function(t){this._parameters.mainCamera=t,this._mainCameraName=t}},{key:"updateOnAnimate",value:function(t){this._parameters.onAnimate=t,this._onAnimate=t}},{key:"updateClearColor",value:function(t){this._parameters.clearColor=t,this._renderer&&this._renderer.setClearColor(t)}},{key:"refreshRenderer",value:function(){var t=this;this.disposeResourcesAndRenderer();var e=this._renderer.extensions.get("WEBGL_lose_context");delete this._renderer,e&&this._canvas?(this._canvas.addEventListener("webglcontextlost",function(){t._recreateCanvasCallback()},!1),e.loseContext()):this._recreateCanvasCallback()}},{key:"disposeResourcesAndRenderer",value:function(){for(var t=0;t<this._materials.length;++t){var e=this._materials[t];e.dispose()}for(var t=0;t<this._geometries.length;++t){var i=this._geometries[t];i.dispose()}for(var t=0;t<this._textures.length;++t){var n=this._textures[t];n.dispose()}this._renderer.dispose()}},{key:"willUnmount",value:function(){this._willUnmount=!0}},{key:"unmount",value:function(){if(this._mounted=!1,cancelAnimationFrame(this._renderRequest),this.userData.events.removeListener("animate",this._callOnAnimate),this.userData.events.removeAllListeners(),delete this._rendererInstance,this._renderer){var t=this._renderer.extensions.get("WEBGL_lose_context");t&&t.loseContext(),this.disposeResourcesAndRenderer(),delete this._renderer}delete this._parameters,(0,c["default"])(0===a(this._objectsByUUID).length,"Failed to cleanup some child objects for React3DInstance"),delete this._objectsByUUID,delete this._viewports,delete this._scene,"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&(delete this._highlightScene,delete this._highlightObjectId,delete this._getHighlightBoundingBox)}},{key:"objectMounted",value:function(t){(0,c["default"])(!this._objectsByUUID[t.uuid],"There already is an object with this uuid in the react 3d instance."),this._objectsByUUID[t.uuid]=t,t.userData.markup._rootInstance=this,this._addObjectWithName(t.name,t),"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&t.userData.events.on("highlight",this._objectHighlighted),t.userData.events.emit("addedIntoRoot",t);var e=t,i=e.userData.markup.childrenMarkup;t instanceof l["default"].Material&&this._materials.push(t),(t instanceof l["default"].Geometry||t instanceof l["default"].BufferGeometry)&&this._geometries.push(t),t instanceof l["default"].Texture&&this._textures.push(t);for(var n=0;n<i.length;++n){var r=i[n];this.objectMounted(r.threeObject)}}},{key:"allMaterialsNeedUpdate",value:function(t){this._materials.forEach(function(e){t?e.dispose():e.needsUpdate=!0})}},{key:"objectRenamed",value:function(t,e,i){this._removeObjectWithName(e,t),this._addObjectWithName(i,t)}},{key:"_addObjectWithName",value:function(t,e){this._objectsByName[t]||(this._objectsByName[t]={count:0,values:{}}),this._objectsByName[t].values[e.uuid]=e,this._objectsByName[t].count++}},{key:"_removeObjectWithName",value:function(t,e){(0,c["default"])(this._objectsByName[t]&&this._objectsByName[t].values[e.uuid]===e,"The object's name changed somehow?'"),delete this._objectsByName[t].values[e.uuid],this._objectsByName[t].count--,0===this._objectsByName[t].count&&delete this._objectsByName[t]}},{key:"objectRemoved",value:function(t){(0,c["default"])(this._objectsByUUID[t.uuid]===t,"The removed object does not belong here!?"),"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&(this._highlightObjectId===t.uuid&&(this._highlightObjectId=null),t.userData.events.removeListener("highlight",this._objectHighlighted),t.userData.events.removeListener("hideHighlight",this._hideHighlight)),delete this._objectsByUUID[t.uuid],t instanceof l["default"].Material&&this._materials.splice(this._materials.indexOf(t),1),(t instanceof l["default"].Geometry||t instanceof l["default"].BufferGeometry)&&this._geometries.splice(this._geometries.indexOf(t),1),t instanceof l["default"].Texture&&this._textures.splice(this._textures.indexOf(t),1),this._removeObjectWithName(t.name,t),delete t.userData.markup._rootInstance}},{key:"mountedIntoRoot",value:function(){this._mounted=!0,this.objectMounted(this)}}]),t}();e["default"]=C,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(1)["default"],a=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),u=a(s),l=function(t){function e(){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.visible=!1,this.resourceMap={},this.resourceIds=[]}return r(e,t),e}(u["default"].Object3D);e["default"]=l,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(1)["default"],r=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),a=r(o),s=function u(){n(this,u),this.userData={},this.uniforms={},this.uuid=a["default"].Math.generateUUID()};e["default"]=s,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(21),h=u(l),c=i(7),p=(u(c),function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments),this.updateCacheAndReplace=function(t,e,i){e.userData._propsCache[t]=i,e.userData._wantPropertyOverwrite=!0}}return r(e,t),o(e,[{key:"beginPropertyUpdates",value:function(t){n(Object.getPrototypeOf(e.prototype),"beginPropertyUpdates",this).call(this,t),t.userData._wantPropertyOverwrite=!1}},{key:"completePropertyUpdates",value:function(t){n(Object.getPrototypeOf(e.prototype),"completePropertyUpdates",this).call(this,t),t.userData._wantPropertyOverwrite&&(t.userData._wantPropertyOverwrite=!1,t.copy(this.construct(t.userData._propsCache)))}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.userData._propsCache=s({},i)}}]),e}(h["default"]));e["default"]=p,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(28),c=s(h),p=i(55),d=s(p),f=i(11),m=s(f),y=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments),this._invalidChild=function(t){var e=!(t instanceof l["default"].Material||t instanceof d["default"]||t instanceof l["default"].Geometry||t instanceof l["default"].BufferGeometry);return e}}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.hasOwnProperty("geometry")?t.geometry:void 0,i=t.hasOwnProperty("material")?t.material:void 0,n=new l["default"].Mesh(e,i);return e||(n.geometry.dispose(),n.geometry=void 0),i||(n.material.dispose(),n.material=void 0),n}},{key:"addChildren",value:function(t,e){(0,m["default"])(0===e.filter(this._invalidChild).length,!1)}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"moveChild",value:function(){}}]),e}(c["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";function n(){this._callbacks=null,this._contexts=null}var r=i(39),o=i(10),a=i(9);o(n.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length?a(!1):void 0,this._callbacks=null,this._contexts=null;for(var i=0;i<t.length;i++)t[i].call(e[i]);t.length=0,e.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},function(t,e,i){"use strict";function n(t){return h.hasOwnProperty(t)?!0:l.hasOwnProperty(t)?!1:u.test(t)?(h[t]=!0,!0):(l[t]=!0,!1)}function r(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&1>e||t.hasOverloadedBooleanValue&&e===!1}var o=i(47),a=i(23),s=i(505),u=(i(12),/^[a-zA-Z_][\w\.\-]*$/),l={},h={},c={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+s(t)},setAttributeForID:function(t,e){t.setAttribute(o.ID_ATTRIBUTE_NAME,e)},createMarkupForProperty:function(t,e){var i=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(i){if(r(i,e))return"";var n=i.attributeName;return i.hasBooleanValue||i.hasOverloadedBooleanValue&&e===!0?n+'=""':n+"="+s(e)}return o.isCustomAttribute(t)?null==e?"":t+"="+s(e):null},createMarkupForCustomAttribute:function(t,e){return n(t)&&null!=e?t+"="+s(e):""},setValueForProperty:function(t,e,i){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){var a=n.mutationMethod;if(a)a(t,i);else if(r(n,i))this.deleteValueForProperty(t,e);else if(n.mustUseAttribute){var s=n.attributeName,u=n.attributeNamespace;u?t.setAttributeNS(u,s,""+i):n.hasBooleanValue||n.hasOverloadedBooleanValue&&i===!0?t.setAttribute(s,""):t.setAttribute(s,""+i)}else{var l=n.propertyName;n.hasSideEffects&&""+t[l]==""+i||(t[l]=i)}}else o.isCustomAttribute(e)&&c.setValueForAttribute(t,e,i)},setValueForAttribute:function(t,e,i){n(e)&&(null==i?t.removeAttribute(e):t.setAttribute(e,""+i))},deleteValueForProperty:function(t,e){var i=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(i){var n=i.mutationMethod;if(n)n(t,void 0);else if(i.mustUseAttribute)t.removeAttribute(i.attributeName);else{var r=i.propertyName,a=o.getDefaultValueForProperty(t.nodeName,r);i.hasSideEffects&&""+t[r]===a||(t[r]=a)}}else o.isCustomAttribute(e)&&t.removeAttribute(e)}};a.measureMethods(c,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),t.exports=c},function(t,e,i){"use strict";function n(t){null!=t.checkedLink&&null!=t.valueLink?l(!1):void 0}function r(t){n(t),null!=t.value||null!=t.onChange?l(!1):void 0}function o(t){n(t),null!=t.checked||null!=t.onChange?l(!1):void 0}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=i(7),u=i(67),l=i(9),h=(i(12),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),c={value:function(t,e,i){return!t[e]||h[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,i){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:s.func},p={},d={checkPropTypes:function(t,e,i){for(var n in c){if(c.hasOwnProperty(n))var r=c[n](e,n,t,u.prop);if(r instanceof Error&&!(r.message in p)){p[r.message]=!0;a(i)}}},getValue:function(t){return t.valueLink?(r(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(r(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=d},function(t,e,i){"use strict";var n=i(119),r=i(17),o={processChildrenUpdates:n.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:n.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(t){r.purgeID(t)}};t.exports=o},function(t,e,i){"use strict";var n=i(9),r=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){r?n(!1):void 0,o.unmountIDFromEnvironment=t.unmountIDFromEnvironment,o.replaceNodeWithMarkupByID=t.replaceNodeWithMarkupByID,o.processChildrenUpdates=t.processChildrenUpdates,r=!0}}};t.exports=o},function(t,e,i){"use strict";var n=i(193),r=i(115),o=i(17),a=i(23),s=i(9),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:function(t,e,i){var n=o.getNode(t);u.hasOwnProperty(e)?s(!1):void 0,null!=i?r.setValueForProperty(n,e,i):r.deleteValueForProperty(n,e)},dangerouslyReplaceNodeWithMarkupByID:function(t,e){var i=o.getNode(t);n.dangerouslyReplaceNodeWithMarkup(i,e)},dangerouslyProcessChildrenUpdates:function(t,e){for(var i=0;i<t.length;i++)t[i].parentNode=o.getNode(t[i].parentID);n.processUpdates(t,e)}};a.measureMethods(l,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=l},function(t,e,i){"use strict";function n(){this.reinitializeTransaction()}var r=i(18),o=i(87),a=i(10),s=i(31),u={initialize:s,close:function(){p.isBatchingUpdates=!1}},l={initialize:s,close:r.flushBatchedUpdates.bind(r)},h=[l,u];a(n.prototype,o.Mixin,{getTransactionWrappers:function(){return h}});var c=new n,p={isBatchingUpdates:!1,batchedUpdates:function(t,e,i,n,r,o){var a=p.isBatchingUpdates;p.isBatchingUpdates=!0,a?t(e,i,n,r,o):c.perform(t,null,e,i,n,r,o)}};t.exports=p},function(t,e,i){"use strict";var n,r=i(16),o=i(122),a=i(30),s=i(10),u={injectEmptyComponent:function(t){n=r.createElement(t)}},l=function(t){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=t(n)};s(l.prototype,{construct:function(t){},mountComponent:function(t,e,i){return o.registerNullComponentID(t),this._rootNodeID=t,a.mountComponent(this._renderedComponent,t,e,i)},receiveComponent:function(){},unmountComponent:function(t,e,i){a.unmountComponent(this._renderedComponent),o.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),l.injection=u,t.exports=l},function(t,e){"use strict";function i(t){return!!o[t]}function n(t){o[t]=!0}function r(t){delete o[t]}var o={},a={isNullComponentID:i,registerNullComponentID:n,deregisterNullComponentID:r};t.exports=a},function(t,e){"use strict";t.exports="0.14.3"},function(t,e,i){"use strict";function n(t){return null==t?null:1===t.nodeType?t:r.has(t)?o.getNodeFromInstance(t):(null!=t.render&&"function"==typeof t.render?a(!1):void 0,void a(!1))}var r=(i(22),i(49)),o=i(17),a=i(9);i(12);t.exports=n},function(t,e){"use strict";function i(t){var e,i=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===i&&(e=13)):e=i,e>=32||13===e?e:0}t.exports=i},function(t,e){"use strict";function i(t){var e=this,i=e.nativeEvent;if(i.getModifierState)return i.getModifierState(t);var n=r[t];return n?!!i[n]:!1}function n(t){return i}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=n},function(t,e){"use strict";function i(t){var e=t.target||t.srcElement||window;return 3===e.nodeType?e.parentNode:e}t.exports=i},function(t,e){"use strict";function i(t){var e=t&&(n&&t[n]||t[r]);return"function"==typeof e?e:void 0}var n="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";t.exports=i},function(t,e,i){"use strict";function n(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function r(t){var e;if(null===t||t===!1)e=new a(r);else if("object"==typeof t){var i=t;!i||"function"!=typeof i.type&&"string"!=typeof i.type?l(!1):void 0,e="string"==typeof i.type?s.createInternalComponent(i):n(i.type)?new i.type(i):new h}else"string"==typeof t||"number"==typeof t?e=s.createInstanceForText(t):l(!1);return e.construct(t),e._mountIndex=0,e._mountImage=null,e}var o=i(197),a=i(121),s=i(210),u=i(10),l=i(9),h=(i(12),function(){});u(h.prototype,o.Mixin,{_instantiateReactComponent:r}),t.exports=r},function(t,e,i){"use strict";function n(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var i="on"+t,n=i in document;if(!n){var a=document.createElement("div");a.setAttribute(i,"return;"),n="function"==typeof a[i]}return!n&&r&&"wheel"===t&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var r,o=i(14);o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=n},function(t,e,i){"use strict";var n=i(14),r=i(89),o=i(90),a=function(t,e){t.textContent=e};n.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){o(t,r(e))})),t.exports=a},function(t,e,i){"use strict";var n=(i(10),i(31)),r=(i(12),n);t.exports=r},function(t,e){"use strict";function i(t,e){if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var o=n.bind(e),a=0;a<i.length;a++)if(!o(i[a])||t[i[a]]!==e[i[a]])return!1;return!0}var n=Object.prototype.hasOwnProperty;t.exports=i},[807,232],function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},[808,552],function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},[813,19,142,230],99,[818,58,37,94],function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},[821,19,138,41],function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l={base:{display:"inline-block",marginLeft:0,marginTop:8,marginRight:5,"float":"left",transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTopWidth:5,borderTopStyle:"solid",WebkitTransform:"rotateZ(-90deg)",MozTransform:"rotateZ(-90deg)",transform:"rotateZ(-90deg)"},open:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},h=function(t){function e(){r(this,e),t.apply(this,arguments)}return n(e,t),e.prototype.render=function(){var t=o({},l.base,{borderTopColor:this.props.theme.base0D});return this.props.open&&(t=o({},t,l.open)),t=o({},t,this.props.style),u["default"].createElement("div",{style:t,onClick:this.props.onClick})},e}(u["default"].Component);e["default"]=h,t.exports=e["default"]},137,74,75,[813,43,246,627],106,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){return!(0,a["default"])(this.props,t)||!(0,a["default"])(this.state,e)}e.__esModule=!0,e["default"]=r;var o=i(650),a=n(o);t.exports=e["default"]},function(t,e,i){function n(t){return o(t)&&r(t)&&s.call(t,"callee")&&!u.call(t,"callee")}var r=i(102),o=i(52),a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable;t.exports=n},function(t,e,i){var n=i(101),r=i(102),o=i(44),a=i(724),s=n(Object,"keys"),u=s?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r(t)?a(t):o(t)?s(t):[]}:a;t.exports=u},function(t,e){function i(t){return t}t.exports=i},function(t,e){"use strict";function i(t,e,i){if(!e(t))throw new Error(i)}function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},o[0],this)}function r(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)}Object.defineProperty(e,"__esModule",{value:!0}),e.check=i,e.remove=r;var o=[n].map(regeneratorRuntime.mark),a=(e.TASK=Symbol("TASK"),e.kTrue=function(){return!0},e.noop=function(){},n.constructor),s=e.is={undef:function(t){return null===t||void 0===t},func:function(t){return"function"==typeof t},array:Array.isArray,promise:function(t){return t&&"function"==typeof t.then},generator:function(t){return s.func(t)&&t.constructor===a},iterator:function(t){return t&&"function"==typeof t.next},"throw":function(t){return t&&"function"==typeof t["throw"]}}},function(t,e){"use strict";function i(t,e){return new Promise(function(i,n){t.onmessage=function(t){i(t.data)},t.postMessage(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),a=i(100),s=i(523),u=n(s),l=i(590),h=(n(l),i(734)),c=n(h);e["default"]=(0,a.createDevTools)(o["default"].createElement(u["default"],{defaultSize:.135,defaultPosition:"bottom",toggleVisibilityKey:"H",changePositionKey:"Q"},o["default"].createElement(c["default"],{theme:"solarized"})))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.App=e.ThreeApp=e.DevTools=void 0;var r=i(156),o=n(r),a=i(269),s=n(a),u=i(268),l=n(u);e.DevTools=o["default"],e.ThreeApp=s["default"],e.App=l["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.JointGeometry=e.BodyGeometry=void 0;var r=i(273),o=n(r),a=i(274),s=n(a);e.BodyGeometry=o["default"],e.JointGeometry=s["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=(n(r),i(60)),a=i(104),s=i(103),u=i(295),l=i(34),h=(0,o.compose)(a.Provide,a.Root,a.Namespace,(0,a.Worker)(u.OimoCmd),a.Transform)(s.WorldMesh);h.propTypes={G:r.PropTypes.number,iterations:r.PropTypes.number,timestep:r.PropTypes.number,broadphase:r.PropTypes.oneOf([l.BRUTE,l.SWEEP,l.TREE])},h.defaultProps={G:10,iterations:8,timestep:1/60,broadphase:l.SWEEP},e["default"]=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.World=e.Joint=e.Body=void 0;var r=i(277),o=n(r),a=i(278),s=n(a),u=i(159),l=n(u);e.Body=o["default"],e.Joint=s["default"],e.World=l["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),a=i(4),s=n(a),u=function(t){return t._reactInternalInstance},l=function(t){return t instanceof s["default"].Object3D},h=function(t){return!(!t||1!==t.nodeType||!t.tagName)},c=function d(t,e){if(!t||!t.getPublicInstance)return[];var i=t.getPublicInstance(),n=e(i)?[i]:[],r=t._currentElement;if(l(i)||h(i)){var a,s=t._renderedChildren;for(a in s)s.hasOwnProperty(a)&&(n=n.concat(d(s[a],e)))}else o["default"].isValidElement(r)&&"function"==typeof r.type&&(n=n.concat(d(t._renderedComponent,e)));return n},p={getComponentOf:function(t){return void 0!==t?t._reactInternalInstance._currentElement.type:void 0},getOwnerOf:function(t){return t._reactInternalInstance._currentElement._owner._instance},isCompositeComponent:function(t){return l(t)||h(t)?!1:null!=t&&"function"==typeof t.render&&"function"==typeof t.setState},findAllInRenderedTree:function(t,e){return t?c(u(t),e):[]}};e["default"]=p},function(t,e){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};Object.defineProperty(e,"__esModule",{value:!0});var n=e.Vec3={add:function(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}},scale:function(t,e){return{x:e*t.x,y:e*t.y,z:e*t.z}}},r=e.Quat={scale:function(t,e){return{x:e*t.x,y:e*t.y,z:e*t.z,w:e*t.w}},mult:function(t,e){return{x:t.x*e.w+t.w*e.x+t.y*e.z-t.z*e.y,y:t.y*e.w+t.w*e.y+t.z*e.x-t.x*e.z,z:t.z*e.w+t.w*e.z+t.x*e.y-t.y*e.x,w:t.w*e.w-t.x*e.x-t.y*e.y-t.z*e.z}},conjugate:function(t){return{x:-x,y:-y,z:-z,w:w}},toEuler:function(t){var e=t.x,i=t.y,n=t.z,r=t.w;return{x:Math.atan2(2*(e*i+n*r),1-2*(i*i+n*n)),y:Math.asin(2*(e*n-r*i)),z:Math.atan2(2*(e*r+i*n),1-2*(n*n+r*r))}}},o=e.Pose={translate:n.add,rotate3:function(t,e){var n=i({},t,{w:1});return r.mult(r.mult(e,n),r.conjugate(e))}};e["default"]={Vec3:n,Quat:r,Pose:o}},[785,310],[807,106],135,[808,317],137,[809,74],138,[814,165],142,[822,75],function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},[825,172,173,75],function(t,e,i){function n(t,e){return a(t,e,s)}function r(t){return function(e,i,r){var a={};return i=o(i,r,3),n(e,function(e,n,r){var o=i(e,n,r);n=t?o:n,e=t?e:o,a[n]=e}),a}}var o=i(336),a=i(341),s=i(108),u=r();t.exports=u},function(t,e){function i(t){return!!t&&"object"==typeof t}function n(t,e){var i=null==t?void 0:t[e];return s(i)?i:void 0}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function o(t){return a(t)&&f.call(t)==l}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:o(t)?m.test(p.call(t)):i(t)&&h.test(t)}var u="[object Array]",l="[object Function]",h=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,d=c.hasOwnProperty,f=c.toString,m=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=n(Array,"isArray"),v=9007199254740991,g=y||function(t){return i(t)&&r(t.length)&&f.call(t)==u};t.exports=g},[834,359,360],function(t,e,i){var n=i(362),r=i(365),o=i(366),a=i(367),s=i(372),u=s(function(t,e){return null==t?{}:"function"==typeof e[0]?a(t,r(e[0],e[1],3)):o(t,n(e))});t.exports=u},function(t,e,i){"use strict";var n=i(374),r=i(375);t.exports={Provider:n,connect:r}},function(t,e,i){"use strict";var n=i(8),r=n.PropTypes,o=r.shape({subscribe:r.func.isRequired,dispatch:r.func.isRequired,getState:r.func.isRequired});t.exports=o},function(t,e,i){"use strict";var n=i(3)["default"],r=i(1)["default"],o=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s=o(a),u=function(){function t(){r(this,t),this.userData={},this.uuid=s["default"].Math.generateUUID()}return n(t,[{key:"setup",value:function(t){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),t}();e["default"]=u,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(1)["default"],r=i(13)["default"],o=i(5)["default"],a=i(6)["default"],s=i(3)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(197),h=u(l),c=i(16),p=u(c),d=i(22),f=(u(d),i(30)),m=u(f),y=i(11),v=u(y),g=i(49),b=u(g),x=i(191),_=u(x),w=i(56),M=(u(w),i(68)),S=u(M),C=i(85),E=u(C),T=function k(){n(this,k)};T.prototype=r({},T.prototype,h["default"].Mixin);var P=function(t){function e(){n(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),s(e,[{key:"render",value:function(){var t=b["default"].get(this)._currentElement.type;return t(this.props,this.context,this.updater)}}]),e}(E["default"]),A=function(t){function e(t){n(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._react3RendererInstance=t}return a(e,t),s(e,[{key:"construct",value:function(t){o(Object.getPrototypeOf(e.prototype),"construct",this).call(this,t),this._threeObject=null}},{key:"unmountComponent",value:function(){o(Object.getPrototypeOf(e.prototype),"unmountComponent",this).call(this)}},{key:"_updateRenderedComponent",value:function(t,i){o(Object.getPrototypeOf(e.prototype),"_updateRenderedComponent",this).call(this,t,i),this._threeObject=this._renderedComponent._threeObject}},{key:"_instantiateReactComponent",value:function(t){return this._react3RendererInstance.instantiateReactComponent(t)}},{key:"mountComponent",value:function(t,e,i){this._context=i,this._mountOrder=this._react3RendererInstance.nextMountID++,this._rootNodeID=t;var n=this._processProps(this._currentElement.props),r=this._processContext(i),o=this._currentElement.type,a=void 0,s=void 0,u="prototype"in o;
if(u){a=new o(n,r,S["default"])}(!u||null===a||a===!1||p["default"].isValidElement(a))&&(s=a,a=new P(o));a.props=n,a.context=r,a.refs=_["default"],a.updater=S["default"],this._instance=a,b["default"].set(a,this);var l=a.state;void 0===l&&(a.state=l=null),("object"!=typeof l||Array.isArray(l))&&(0,v["default"])(!1),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,a.componentWillMount&&(a.componentWillMount(),this._pendingStateQueue&&(a.state=this._processPendingState(a.props,a.context))),void 0===s&&(s=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(s);var h=m["default"].mountComponent(this._renderedComponent,t,e,this._processChildContext(i));return this._threeObject=this._renderedComponent._threeObject,a.componentDidMount&&e.getReactMountReady().enqueue(a.componentDidMount,a),h}},{key:"attachRef",value:function(t,e){var i=this.getPublicInstance(),n=i.refs===_["default"]?i.refs={}:i.refs;n[t]=e.getPublicInstance()}}]),e}(T);e["default"]=A,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(1)["default"],a=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var s=i(55),u=a(s),l=function(t){function e(t){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return r(e,t),e}(u["default"]);e["default"]=l,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(35),c=s(h),p=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=new l["default"].Path}return r(e,t),o(e,[{key:"performAction",value:function(t){t.holes.push(this.path)}}]),e}(c["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(1)["default"],r=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),a=r(o),s=function u(t){n(this,u),this.userData={},this.uuid=a["default"].Math.generateUUID(),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.cameraName=t.cameraName,this.onBeforeRender=t.onBeforeRender};e["default"]=s,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(15),p=u(c),d=i(11),f=u(d),m=i(64),y=(u(m),i(7)),v=u(y),g=i(35),b=u(g),x=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._invalidChild=function(t){var e=!(t instanceof b["default"]);return e},this.hasProp("points",{type:v["default"].arrayOf(v["default"].instanceOf(h["default"].Vector2)),update:this.triggerRemount,"default":[]})}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){return t.userData=s({},t.userData),t.uuid=h["default"].Math.generateUUID(),n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i)}},{key:"addChildren",value:function(t,e){var i=this;(0,f["default"])(0===e.filter(this._invalidChild).length,!1),e.forEach(function(e){i.performChildAction(t,e)})}},{key:"performChildAction",value:function(t,e){e.performAction(t)}},{key:"addChild",value:function(t,e,i){this.triggerRemount(t)}},{key:"moveChild",value:function(t){this.triggerRemount(t)}},{key:"removeChild",value:function(t,e){this.triggerRemount(t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}}]),e}(p["default"]);e["default"]=x,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(28),l=s(u),h=i(4),c=(s(h),function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i)}},{key:"setParent",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i)}},{key:"unmount",value:function(t){n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"beginPropertyUpdates",value:function(t){n(Object.getPrototypeOf(e.prototype),"beginPropertyUpdates",this).call(this,t),t.userData._needsProjectionMatrixUpdate=!1}},{key:"completePropertyUpdates",value:function(t){n(Object.getPrototypeOf(e.prototype),"completePropertyUpdates",this).call(this,t),t.userData._needsProjectionMatrixUpdate&&(t.userData._needsProjectionMatrixUpdate=!1,t.updateProjectionMatrix(),t.userData.events.emit("updateProjectionMatrix"))}}]),e}(l["default"]));e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(83),l=s(u),h=i(4),c=s(h),p=i(11),d=s(p),f=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.userData._propertySlot="geometry"}},{key:"setParent",value:function(t,i){(0,d["default"])(i instanceof c["default"].Mesh||i instanceof c["default"].Points||i instanceof c["default"].Line,"Parent is not a mesh"),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(3)["default"],r=i(1)["default"],o=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s=(o(a),function(){function t(){r(this,t)}return n(t,null,[{key:"current",value:null,enumerable:!0}]),t}());e["default"]=s,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]="data-reactid",t.exports=e["default"]},70,function(t,e){"use strict";function i(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(n).forEach(function(t){r.forEach(function(e){n[i(e,t)]=n[t]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:n,shorthandPropertyExpansions:o};t.exports=a},function(t,e,i){"use strict";function n(t,e,i){var n=i>=t.childNodes.length?null:t.childNodes.item(i);t.insertBefore(e,n)}var r=i(459),o=i(209),a=i(23),s=i(90),u=i(131),l=i(9),h={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,updateTextContent:u,processUpdates:function(t,e){for(var i,a=null,h=null,c=0;c<t.length;c++)if(i=t[c],i.type===o.MOVE_EXISTING||i.type===o.REMOVE_NODE){var p=i.fromIndex,d=i.parentNode.childNodes[p],f=i.parentID;d?void 0:l(!1),a=a||{},a[f]=a[f]||[],a[f][p]=d,h=h||[],h.push(d)}var m;if(m=e.length&&"string"==typeof e[0]?r.dangerouslyRenderMarkup(e):e,h)for(var y=0;y<h.length;y++)h[y].parentNode.removeChild(h[y]);for(var v=0;v<t.length;v++)switch(i=t[v],i.type){case o.INSERT_MARKUP:n(i.parentNode,m[i.markupIndex],i.toIndex);break;case o.MOVE_EXISTING:n(i.parentNode,a[i.parentID][i.fromIndex],i.toIndex);break;case o.SET_MARKUP:s(i.parentNode,i.content);break;case o.TEXT_CONTENT:u(i.parentNode,i.content);break;case o.REMOVE_NODE:}}};a.measureMethods(h,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),t.exports=h},function(t,e,i){"use strict";function n(){if(s)for(var t in u){var e=u[t],i=s.indexOf(t);if(i>-1?void 0:a(!1),!l.plugins[i]){e.extractEvents?void 0:a(!1),l.plugins[i]=e;var n=e.eventTypes;for(var o in n)r(n[o],e,o)?void 0:a(!1)}}}function r(t,e,i){l.eventNameDispatchConfigs.hasOwnProperty(i)?a(!1):void 0,l.eventNameDispatchConfigs[i]=t;var n=t.phasedRegistrationNames;if(n){for(var r in n)if(n.hasOwnProperty(r)){var s=n[r];o(s,e,i)}return!0}return t.registrationName?(o(t.registrationName,e,i),!0):!1}function o(t,e,i){l.registrationNameModules[t]?a(!1):void 0,l.registrationNameModules[t]=e,l.registrationNameDependencies[t]=e.eventTypes[i].dependencies}var a=i(9),s=null,u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){s?a(!1):void 0,s=Array.prototype.slice.call(t),n()},injectEventPluginsByName:function(t){var e=!1;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];u.hasOwnProperty(i)&&u[i]===r||(u[i]?a(!1):void 0,u[i]=r,e=!0)}e&&n()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return l.registrationNameModules[e.registrationName]||null;for(var i in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(i)){var n=l.registrationNameModules[e.phasedRegistrationNames[i]];if(n)return n}return null},_resetEventPlugins:function(){s=null;for(var t in u)u.hasOwnProperty(t)&&delete u[t];l.plugins.length=0;var e=l.eventNameDispatchConfigs;for(var i in e)e.hasOwnProperty(i)&&delete e[i];var n=l.registrationNameModules;for(var r in n)n.hasOwnProperty(r)&&delete n[r]}};t.exports=l},function(t,e,i){"use strict";function n(t){return(""+t).replace(x,"//")}function r(t,e){this.func=t,this.context=e,this.count=0}function o(t,e,i){var n=t.func,r=t.context;n.call(r,e,t.count++)}function a(t,e,i){if(null==t)return t;var n=r.getPooled(e,i);v(t,o,n),r.release(n)}function s(t,e,i,n){this.result=t,this.keyPrefix=e,this.func=i,this.context=n,this.count=0}function u(t,e,i){var r=t.result,o=t.keyPrefix,a=t.func,s=t.context,u=a.call(s,e,t.count++);Array.isArray(u)?l(u,r,i,y.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,o+(u!==e?n(u.key||"")+"/":"")+i)),r.push(u))}function l(t,e,i,r,o){var a="";null!=i&&(a=n(i)+"/");var l=s.getPooled(e,a,r,o);v(t,u,l),s.release(l)}function h(t,e,i){if(null==t)return t;var n=[];return l(t,n,null,e,i),n}function c(t,e,i){return null}function p(t,e){return v(t,c,null)}function d(t){var e=[];return l(t,e,null,y.thatReturnsArgument),e}var f=i(39),m=i(16),y=i(31),v=i(92),g=f.twoArgumentPooler,b=f.fourArgumentPooler,x=/\/(?!\/)/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(r,g),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(s,b);var _={forEach:a,map:h,mapIntoWithKeyPrefixInternal:l,count:p,toArray:d};t.exports=_},function(t,e,i){"use strict";function n(t,e){var i=w.hasOwnProperty(e)?w[e]:null;S.hasOwnProperty(e)&&(i!==x.OVERRIDE_BASE?y(!1):void 0),t.hasOwnProperty(e)&&(i!==x.DEFINE_MANY&&i!==x.DEFINE_MANY_MERGED?y(!1):void 0)}function r(t,e){if(e){"function"==typeof e?y(!1):void 0,p.isValidElement(e)?y(!1):void 0;var i=t.prototype;e.hasOwnProperty(b)&&M.mixins(t,e.mixins);for(var r in e)if(e.hasOwnProperty(r)&&r!==b){var o=e[r];if(n(i,r),M.hasOwnProperty(r))M[r](t,o);else{var a=w.hasOwnProperty(r),l=i.hasOwnProperty(r),h="function"==typeof o,c=h&&!a&&!l&&e.autobind!==!1;if(c)i.__reactAutoBindMap||(i.__reactAutoBindMap={}),i.__reactAutoBindMap[r]=o,i[r]=o;else if(l){var d=w[r];!a||d!==x.DEFINE_MANY_MERGED&&d!==x.DEFINE_MANY?y(!1):void 0,d===x.DEFINE_MANY_MERGED?i[r]=s(i[r],o):d===x.DEFINE_MANY&&(i[r]=u(i[r],o))}else i[r]=o}}}}function o(t,e){if(e)for(var i in e){var n=e[i];if(e.hasOwnProperty(i)){var r=i in M;r?y(!1):void 0;var o=i in t;o?y(!1):void 0,t[i]=n}}}function a(t,e){t&&e&&"object"==typeof t&&"object"==typeof e?void 0:y(!1);for(var i in e)e.hasOwnProperty(i)&&(void 0!==t[i]?y(!1):void 0,t[i]=e[i]);return t}function s(t,e){return function(){var i=t.apply(this,arguments),n=e.apply(this,arguments);if(null==i)return n;if(null==n)return i;var r={};return a(r,i),a(r,n),r}}function u(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function l(t,e){var i=e.bind(t);return i}function h(t){for(var e in t.__reactAutoBindMap)if(t.__reactAutoBindMap.hasOwnProperty(e)){var i=t.__reactAutoBindMap[e];t[e]=l(t,i)}}var c=i(85),p=i(16),d=(i(67),i(57),i(211)),f=i(10),m=i(70),y=i(9),v=i(93),g=i(40),b=(i(12),g({mixins:null})),x=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),_=[],w={mixins:x.DEFINE_MANY,statics:x.DEFINE_MANY,propTypes:x.DEFINE_MANY,contextTypes:x.DEFINE_MANY,childContextTypes:x.DEFINE_MANY,getDefaultProps:x.DEFINE_MANY_MERGED,getInitialState:x.DEFINE_MANY_MERGED,getChildContext:x.DEFINE_MANY_MERGED,render:x.DEFINE_ONCE,componentWillMount:x.DEFINE_MANY,componentDidMount:x.DEFINE_MANY,componentWillReceiveProps:x.DEFINE_MANY,shouldComponentUpdate:x.DEFINE_ONCE,componentWillUpdate:x.DEFINE_MANY,componentDidUpdate:x.DEFINE_MANY,componentWillUnmount:x.DEFINE_MANY,updateComponent:x.OVERRIDE_BASE},M={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var i=0;i<e.length;i++)r(t,e[i])},childContextTypes:function(t,e){t.childContextTypes=f({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=f({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=s(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=f({},t.propTypes,e)},statics:function(t,e){o(t,e)},autobind:function(){}},S={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(t,e){this.updater.enqueueSetProps(this,t),e&&this.updater.enqueueCallback(this,e)},replaceProps:function(t,e){this.updater.enqueueReplaceProps(this,t),e&&this.updater.enqueueCallback(this,e)}},C=function(){};f(C.prototype,c.prototype,S);var E={createClass:function(t){var e=function(t,e,i){this.__reactAutoBindMap&&h(this),this.props=t,this.context=e,this.refs=m,this.updater=i||d,this.state=null;var n=this.getInitialState?this.getInitialState():null;"object"!=typeof n||Array.isArray(n)?y(!1):void 0,this.state=n};e.prototype=new C,e.prototype.constructor=e,_.forEach(r.bind(null,e)),r(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render?void 0:y(!1);for(var i in w)e.prototype[i]||(e.prototype[i]=null);return e},injection:{injectMixin:function(t){_.push(t)}}};t.exports=E},function(t,e,i){"use strict";function n(t){var e=t._currentElement._owner||null;if(e){var i=e.getName();if(i)return" Check the render method of `"+i+"`."}return""}function r(t){}var o=i(118),a=i(22),s=i(16),u=i(49),l=i(23),h=i(67),c=(i(57),i(30)),p=i(68),d=i(10),f=i(70),m=i(9),y=i(91);i(12);r.prototype.render=function(){var t=u.get(this)._currentElement.type;return t(this.props,this.context,this.updater)};var v=1,g={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(t,e,i){this._context=i,this._mountOrder=v++,this._rootNodeID=t;var n,o,a=this._processProps(this._currentElement.props),l=this._processContext(i),h=this._currentElement.type,d="prototype"in h;d&&(n=new h(a,l,p)),(!d||null===n||n===!1||s.isValidElement(n))&&(o=n,n=new r(h)),n.props=a,n.context=l,n.refs=f,n.updater=p,this._instance=n,u.set(n,this);var y=n.state;void 0===y&&(n.state=y=null),"object"!=typeof y||Array.isArray(y)?m(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,n.componentWillMount&&(n.componentWillMount(),this._pendingStateQueue&&(n.state=this._processPendingState(n.props,n.context))),void 0===o&&(o=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(o);var g=c.mountComponent(this._renderedComponent,t,e,this._processChildContext(i));return n.componentDidMount&&e.getReactMountReady().enqueue(n.componentDidMount,n),g},unmountComponent:function(){var t=this._instance;t.componentWillUnmount&&t.componentWillUnmount(),c.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,u.remove(t)},_maskContext:function(t){var e=null,i=this._currentElement.type,n=i.contextTypes;if(!n)return f;e={};for(var r in n)e[r]=t[r];return e},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e=this._currentElement.type,i=this._instance,n=i.getChildContext&&i.getChildContext();if(n){"object"!=typeof e.childContextTypes?m(!1):void 0;for(var r in n)r in e.childContextTypes?void 0:m(!1);return d({},t,n)}return t},_processProps:function(t){return t},_checkPropTypes:function(t,e,i){var r=this.getName();for(var o in t)if(t.hasOwnProperty(o)){var a;try{"function"!=typeof t[o]?m(!1):void 0,a=t[o](e,o,r,i)}catch(s){a=s}if(a instanceof Error){n(this);i===h.prop}}},receiveComponent:function(t,e,i){var n=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(e,n,t,r,i)},performUpdateIfNecessary:function(t){null!=this._pendingElement&&c.receiveComponent(this,this._pendingElement||this._currentElement,t,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(t,e,i,n,r){var o,a=this._instance,s=this._context===r?a.context:this._processContext(r);e===i?o=i.props:(o=this._processProps(i.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(o,s));var u=this._processPendingState(o,s),l=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(o,u,s);l?(this._pendingForceUpdate=!1,this._performComponentUpdate(i,o,u,s,t,r)):(this._currentElement=i,this._context=r,a.props=o,a.state=u,a.context=s)},_processPendingState:function(t,e){var i=this._instance,n=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!n)return i.state;if(r&&1===n.length)return n[0];for(var o=d({},r?n[0]:i.state),a=r?1:0;a<n.length;a++){var s=n[a];d(o,"function"==typeof s?s.call(i,o,t,e):s)}return o},_performComponentUpdate:function(t,e,i,n,r,o){var a,s,u,l=this._instance,h=Boolean(l.componentDidUpdate);h&&(a=l.props,s=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(e,i,n),this._currentElement=t,this._context=o,l.props=e,l.state=i,l.context=n,this._updateRenderedComponent(r,o),h&&r.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,u),l)},_updateRenderedComponent:function(t,e){var i=this._renderedComponent,n=i._currentElement,r=this._renderValidatedComponent();if(y(n,r))c.receiveComponent(i,r,t,this._processChildContext(e));else{var o=this._rootNodeID,a=i._rootNodeID;c.unmountComponent(i),this._renderedComponent=this._instantiateReactComponent(r);var s=c.mountComponent(this._renderedComponent,o,t,this._processChildContext(e));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(t,e){o.replaceNodeWithMarkupByID(t,e)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,e=t.render();return e},_renderValidatedComponent:function(){var t;a.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=null}return null===t||t===!1||s.isValidElement(t)?void 0:m(!1),t},attachRef:function(t,e){var i=this.getPublicInstance();null==i?m(!1):void 0;var n=e.getPublicInstance(),r=i.refs===f?i.refs={}:i.refs;r[t]=n},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return t instanceof r?null:t},_instantiateReactComponent:null};l.measureMethods(g,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var b={Mixin:g};t.exports=b},function(t,e,i){"use strict";var n=i(22),r=i(201),o=i(202),a=i(48),s=i(17),u=i(23),l=i(30),h=i(18),c=i(123),p=i(124),d=i(506);i(12);o.inject();var f=u.measure("React","render",s.render),m={findDOMNode:p,render:f,unmountComponentAtNode:s.unmountComponentAtNode,version:c,unstable_batchedUpdates:h.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:n,InstanceHandles:a,Mount:s,Reconciler:l,TextComponent:r});t.exports=m},function(t,e){"use strict";var i={useCreateElement:!1};t.exports=i},function(t,e,i){"use strict";function n(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=a.getValue(t);null!=e&&r(this,t,e)}}function r(t,e,i){var n,r,o=s.getNode(t._rootNodeID).options;if(e){for(n={},r=0;r<i.length;r++)n[""+i[r]]=!0;for(r=0;r<o.length;r++){var a=n.hasOwnProperty(o[r].value);o[r].selected!==a&&(o[r].selected=a)}}else{for(n=""+i,r=0;r<o.length;r++)if(o[r].value===n)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}function o(t){var e=this._currentElement.props,i=a.executeOnChange(e,t);return this._wrapperState.pendingUpdate=!0,u.asap(n,this),i}var a=i(116),s=i(17),u=i(18),l=i(10),h=(i(12),"__ReactDOMSelect_value$"+Math.random().toString(36).slice(2)),c={valueContextKey:h,getNativeProps:function(t,e,i){return l({},e,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var i=a.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=i?i:e.defaultValue,onChange:o.bind(t),wasMultiple:Boolean(e.multiple)}},processChildContext:function(t,e,i){var n=l({},i);return n[h]=t._wrapperState.initialValue,n},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var i=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var n=a.getValue(e);null!=n?(t._wrapperState.pendingUpdate=!1,r(t,Boolean(e.multiple),n)):i!==Boolean(e.multiple)&&(null!=e.defaultValue?r(t,Boolean(e.multiple),e.defaultValue):r(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=c},function(t,e,i){"use strict";var n=i(193),r=i(115),o=i(117),a=i(17),s=i(10),u=i(89),l=i(131),h=(i(132),function(t){});s(h.prototype,{construct:function(t){this._currentElement=t,this._stringText=""+t,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(t,e,i){if(this._rootNodeID=t,e.useCreateElement){var n=i[a.ownerDocumentContextKey],o=n.createElement("span");return r.setAttributeForID(o,t),a.getID(o),l(o,this._stringText),o}var s=u(this._stringText);return e.renderToStaticMarkup?s:"<span "+r.createMarkupForID(t)+">"+s+"</span>"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var i=""+t;if(i!==this._stringText){this._stringText=i;var r=a.getNode(this._rootNodeID);n.updateTextContent(r,i)}}},unmountComponent:function(){o.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=h},function(t,e,i){"use strict";function n(){if(!C){C=!0,v.EventEmitter.injectReactEventListener(y),v.EventPluginHub.injectEventPluginOrder(s),v.EventPluginHub.injectInstanceHandle(g),v.EventPluginHub.injectMount(b),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:M,EnterLeaveEventPlugin:u,ChangeEventPlugin:o,SelectEventPlugin:_,BeforeInputEventPlugin:r}),v.NativeComponent.injectGenericComponentClass(f),v.NativeComponent.injectTextComponentClass(m),v.Class.injectMixin(c),v.DOMProperty.injectDOMPropertyConfig(h),v.DOMProperty.injectDOMPropertyConfig(S),v.EmptyComponent.injectEmptyComponent("noscript"),v.Updates.injectReconcileTransaction(x),v.Updates.injectBatchingStrategy(d),v.RootIndex.injectCreateReactRootIndex(l.canUseDOM?a.createReactRootIndex:w.createReactRootIndex),v.Component.injectEnvironment(p)}}var r=i(455),o=i(457),a=i(458),s=i(460),u=i(461),l=i(14),h=i(464),c=i(466),p=i(117),d=i(120),f=i(470),m=i(201),y=i(480),v=i(205),g=i(48),b=i(17),x=i(212),_=i(488),w=i(489),M=i(490),S=i(487),C=!1;t.exports={inject:n}},function(t,e,i){"use strict";function n(){if(c.current){var t=c.current.getName();if(t)return" Check the render method of `"+t+"`."}return""}function r(t,e){if(t._store&&!t._store.validated&&null==t.key){t._store.validated=!0;o("uniqueKey",t,e)}}function o(t,e,i){var r=n();if(!r){var o="string"==typeof i?i:i.displayName||i.name;o&&(r=" Check the top-level render call using <"+o+">.")}var a=f[t]||(f[t]={});if(a[r])return null;a[r]=!0;var s={parentOrOwner:r,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return e&&e._owner&&e._owner!==c.current&&(s.childOwner=" It was passed a child from "+e._owner.getName()+"."),s}function a(t,e){if("object"==typeof t)if(Array.isArray(t))for(var i=0;i<t.length;i++){var n=t[i];l.isValidElement(n)&&r(n,e)}else if(l.isValidElement(t))t._store&&(t._store.validated=!0);else if(t){var o=p(t);if(o&&o!==t.entries)for(var a,s=o.call(t);!(a=s.next()).done;)l.isValidElement(a.value)&&r(a.value,e)}}function s(t,e,i,r){for(var o in e)if(e.hasOwnProperty(o)){var a;try{"function"!=typeof e[o]?d(!1):void 0,a=e[o](i,o,t,r)}catch(s){a=s}if(a instanceof Error&&!(a.message in m)){m[a.message]=!0;n()}}}function u(t){var e=t.type;if("function"==typeof e){var i=e.displayName||e.name;e.propTypes&&s(i,e.propTypes,t.props,h.prop),"function"==typeof e.getDefaultProps}}var l=i(16),h=i(67),c=(i(57),i(22)),p=(i(88),i(128)),d=i(9),f=(i(12),{}),m={},y={createElement:function(t,e,i){var n="string"==typeof t||"function"==typeof t,r=l.createElement.apply(this,arguments);if(null==r)return r;if(n)for(var o=2;o<arguments.length;o++)a(arguments[o],t);return u(r),r},createFactory:function(t){var e=y.createElement.bind(null,t);return e.type=t,e},cloneElement:function(t,e,i){for(var n=l.cloneElement.apply(this,arguments),r=2;r<arguments.length;r++)a(arguments[r],n.type);return u(n),n}};t.exports=y},function(t,e,i){"use strict";function n(t,e,i,n){try{return e(i,n)}catch(o){return void(null===r&&(r=o))}}var r=null,o={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(r){var t=r;throw r=null,t}}};t.exports=o},function(t,e,i){"use strict";var n=i(47),r=i(65),o=i(118),a=i(196),s=i(121),u=i(84),l=i(210),h=i(23),c=i(213),p=i(18),d={Component:o.injection,Class:a.injection,DOMProperty:n.injection,EmptyComponent:s.injection,EventPluginHub:r.injection,EventEmitter:u.injection,NativeComponent:l.injection,Perf:h.injection,RootIndex:c.injection,Updates:p.injection};t.exports=d},function(t,e,i){"use strict";function n(t){return o(document.documentElement,t)}var r=i(474),o=i(221),a=i(222),s=i(223),u={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=s(),i=t.focusedElem,r=t.selectionRange;e!==i&&n(i)&&(u.hasSelectionCapabilities(i)&&u.setSelection(i,r),a(i))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var i=document.selection.createRange();i.parentElement()===t&&(e={start:-i.moveStart("character",-t.value.length),end:-i.moveEnd("character",-t.value.length)})}else e=r.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var i=e.start,n=e.end;if("undefined"==typeof n&&(n=i),"selectionStart"in t)t.selectionStart=i,t.selectionEnd=Math.min(n,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",i),o.moveEnd("character",n-i),o.select()}else r.setOffsets(t,e)}};t.exports=u},function(t,e,i){"use strict";var n=i(499),r=/\/?>/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=n(t);return t.replace(r," "+o.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var i=e.getAttribute(o.CHECKSUM_ATTR_NAME);i=i&&parseInt(i,10);var r=n(t);return r===i}};t.exports=o},function(t,e,i){"use strict";function n(t,e,i){y.push({parentID:t,parentNode:null,type:c.INSERT_MARKUP,markupIndex:v.push(e)-1,content:null,fromIndex:null,toIndex:i})}function r(t,e,i){y.push({parentID:t,parentNode:null,type:c.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:e,toIndex:i})}function o(t,e){y.push({parentID:t,parentNode:null,type:c.REMOVE_NODE,markupIndex:null,content:null,fromIndex:e,toIndex:null})}function a(t,e){y.push({parentID:t,parentNode:null,type:c.SET_MARKUP,markupIndex:null,content:e,fromIndex:null,toIndex:null})}function s(t,e){y.push({parentID:t,parentNode:null,type:c.TEXT_CONTENT,markupIndex:null,content:e,fromIndex:null,toIndex:null})}function u(){y.length&&(h.processChildrenUpdates(y,v),l())}function l(){y.length=0,v.length=0}var h=i(118),c=i(209),p=(i(22),i(30)),d=i(467),f=i(216),m=0,y=[],v=[],g={Mixin:{_reconcilerInstantiateChildren:function(t,e,i){return d.instantiateChildren(t,e,i)},_reconcilerUpdateChildren:function(t,e,i,n){var r;return r=f(e),d.updateChildren(t,r,i,n)},mountChildren:function(t,e,i){var n=this._reconcilerInstantiateChildren(t,e,i);this._renderedChildren=n;var r=[],o=0;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],u=this._rootNodeID+a,l=p.mountComponent(s,u,e,i);s._mountIndex=o++,r.push(l)}return r},updateTextContent:function(t){m++;var e=!0;try{var i=this._renderedChildren;d.unmountChildren(i);for(var n in i)i.hasOwnProperty(n)&&this._unmountChild(i[n]);this.setTextContent(t),e=!1}finally{m--,m||(e?l():u())}},updateMarkup:function(t){m++;var e=!0;try{var i=this._renderedChildren;d.unmountChildren(i);for(var n in i)i.hasOwnProperty(n)&&this._unmountChildByName(i[n],n);this.setMarkup(t),e=!1}finally{m--,m||(e?l():u())}},updateChildren:function(t,e,i){m++;var n=!0;try{this._updateChildren(t,e,i),n=!1}finally{m--,m||(n?l():u())}},_updateChildren:function(t,e,i){var n=this._renderedChildren,r=this._reconcilerUpdateChildren(n,t,e,i);if(this._renderedChildren=r,r||n){var o,a=0,s=0;for(o in r)if(r.hasOwnProperty(o)){var u=n&&n[o],l=r[o];u===l?(this.moveChild(u,s,a),a=Math.max(u._mountIndex,a),u._mountIndex=s):(u&&(a=Math.max(u._mountIndex,a),this._unmountChild(u)),this._mountChildByNameAtIndex(l,o,s,e,i)),s++}for(o in n)!n.hasOwnProperty(o)||r&&r.hasOwnProperty(o)||this._unmountChild(n[o])}},unmountChildren:function(){var t=this._renderedChildren;d.unmountChildren(t),this._renderedChildren=null;
},moveChild:function(t,e,i){t._mountIndex<i&&r(this._rootNodeID,t._mountIndex,e)},createChild:function(t,e){n(this._rootNodeID,e,t._mountIndex)},removeChild:function(t){o(this._rootNodeID,t._mountIndex)},setTextContent:function(t){s(this._rootNodeID,t)},setMarkup:function(t){a(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,e,i,n,r){var o=this._rootNodeID+e,a=p.mountComponent(t,o,n,r);t._mountIndex=i,this.createChild(t,a)},_unmountChild:function(t){this.removeChild(t),t._mountIndex=null}}};t.exports=g},function(t,e,i){"use strict";var n=i(93),r=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=r},function(t,e,i){"use strict";function n(t){if("function"==typeof t.type)return t.type;var e=t.type,i=c[e];return null==i&&(c[e]=i=l(e)),i}function r(t){return h?void 0:u(!1),new h(t.type,t.props)}function o(t){return new p(t)}function a(t){return t instanceof p}var s=i(10),u=i(9),l=null,h=null,c={},p=null,d={injectGenericComponentClass:function(t){h=t},injectTextComponentClass:function(t){p=t},injectComponentClasses:function(t){s(c,t)}},f={getComponentClassForElement:n,createInternalComponent:r,createInstanceForText:o,isTextComponent:a,injection:d};t.exports=f},function(t,e,i){"use strict";function n(t,e){}var r=(i(12),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){n(t,"forceUpdate")},enqueueReplaceState:function(t,e){n(t,"replaceState")},enqueueSetState:function(t,e){n(t,"setState")},enqueueSetProps:function(t,e){n(t,"setProps")},enqueueReplaceProps:function(t,e){n(t,"replaceProps")}});t.exports=r},function(t,e,i){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.useCreateElement=!t&&s.useCreateElement}var r=i(114),o=i(39),a=i(84),s=i(199),u=i(206),l=i(87),h=i(10),c={initialize:u.getSelectionInformation,close:u.restoreSelection},p={initialize:function(){var t=a.isEnabled();return a.setEnabled(!1),t},close:function(t){a.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[c,p,d],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null}};h(n.prototype,l.Mixin,m),o.addPoolingTo(n),t.exports=n},function(t,e){"use strict";var i={injectCreateReactRootIndex:function(t){n.createReactRootIndex=t}},n={createReactRootIndex:null,injection:i};t.exports=n},function(t,e){"use strict";var i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){i.currentScrollLeft=t.x,i.currentScrollTop=t.y}};t.exports=i},function(t,e,i){"use strict";function n(t,e){if(null==e?r(!1):void 0,null==t)return e;var i=Array.isArray(t),n=Array.isArray(e);return i&&n?(t.push.apply(t,e),t):i?(t.push(e),t):n?[t].concat(e):[t,e]}var r=i(9);t.exports=n},function(t,e,i){"use strict";function n(t,e,i){var n=t,r=void 0===n[i];r&&null!=e&&(n[i]=e)}function r(t){if(null==t)return t;var e={};return o(t,n,e),e}var o=i(92);i(12);t.exports=r},function(t,e){"use strict";var i=function(t,e,i){Array.isArray(t)?t.forEach(e,i):t&&e.call(i,t)};t.exports=i},function(t,e,i){"use strict";function n(){return!o&&r.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var r=i(14),o=null;t.exports=n},function(t,e){"use strict";function i(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&n[t.type]||"textarea"===e)}var n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=i},function(t,e,i){"use strict";var n=i(31),r={listen:function(t,e,i){return t.addEventListener?(t.addEventListener(e,i,!1),{remove:function(){t.removeEventListener(e,i,!1)}}):t.attachEvent?(t.attachEvent("on"+e,i),{remove:function(){t.detachEvent("on"+e,i)}}):void 0},capture:function(t,e,i){return t.addEventListener?(t.addEventListener(e,i,!0),{remove:function(){t.removeEventListener(e,i,!0)}}):{remove:n}},registerDefault:function(){}};t.exports=r},function(t,e,i){"use strict";function n(t,e){var i=!0;t:for(;i;){var n=t,o=e;if(i=!1,n&&o){if(n===o)return!0;if(r(n))return!1;if(r(o)){t=n,e=o.parentNode,i=!0;continue t}return n.contains?n.contains(o):n.compareDocumentPosition?!!(16&n.compareDocumentPosition(o)):!1}return!1}}var r=i(516);t.exports=n},function(t,e){"use strict";function i(t){try{t.focus()}catch(e){}}t.exports=i},function(t,e){"use strict";function i(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=i},function(t,e,i){"use strict";function n(t){return a?void 0:o(!1),p.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?p[t]:null}var r=i(14),o=i(9),a=r.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],h=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:h,th:h},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(t){p[t]=c,s[t]=!0}),t.exports=n},function(t,e){"use strict";function i(){return{type:o}}function n(){return{type:a}}function r(t){return{type:s,size:t}}e.__esModule=!0,e.toggleVisibility=i,e.changePosition=n,e.changeSize=r;var o=e.TOGGLE_VISIBILITY="@@redux-devtools-log-monitor/TOGGLE_VISIBILITY",a=e.CHANGE_POSITION="@@redux-devtools-log-monitor/CHANGE_POSITION",s=e.CHANGE_SIZE="@@redux-devtools-log-monitor/CHANGE_SIZE"},function(t,e){"use strict";e.__esModule=!0;e.POSITIONS=["left","top","right","bottom"]},[788,549],[794,526],[797,539],[809,94],[814,135],106,function(t,e){t.exports=!0},[819,139],[822,95],function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},173,function(t,e){"use strict";function i(t){return{type:n,scrollTop:t}}e.__esModule=!0,e.updateScrollTop=i;var n=e.UPDATE_SCROLL_TOP="@@redux-devtools-log-monitor/UPDATE_SCROLL_TOP"},function(t,e,i){"use strict";var n=i(26)["default"],r=i(614)["default"],o=i(24)["default"],a=i(25)["default"],s=i(20)["default"];e.__esModule=!0;var u=i(8),l=s(u),h=i(98),c=s(h),p=i(605),d=s(p),f={tree:{border:0,padding:0,marginTop:8,marginBottom:8,marginLeft:2,marginRight:0,fontSize:"0.90em",listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none"}},m=function(){return{}},y=function(t){function e(i){o(this,e),t.call(this,i)}return n(e,t),r(e,null,[{key:"propTypes",value:{data:l["default"].PropTypes.oneOfType([l["default"].PropTypes.array,l["default"].PropTypes.object]).isRequired},enumerable:!0},{key:"defaultProps",value:{expandRoot:!0,theme:d["default"],getArrowStyle:m,getListStyle:m,getItemStringStyle:m,getLabelStyle:m,getValueStyle:m,getItemString:function(t,e,i,n){return l["default"].createElement("span",null,i," ",n)}},enumerable:!0}]),e.prototype.render=function(){var t=this.props.keyName||"root",e={getArrowStyle:this.props.getArrowStyle,getListStyle:this.props.getListStyle,getItemStringStyle:this.props.getItemStringStyle,getLabelStyle:this.props.getLabelStyle,getValueStyle:this.props.getValueStyle},i=this.props,n=i.data,r=i.previousData,o=i.theme,s=i.getItemString,u=i.expandRoot,h=c["default"](t,n,r,o,e,s,u);return l["default"].createElement("ul",{style:a({},f.tree,this.props.style)},h)},e}(l["default"].Component);e["default"]=y,t.exports=e["default"]},[807,149],135,[808,624],138,[814,241],[838,631,71,634,148,243,99,629,247,43,59],142,[821,43,243,59],[824,145],[841,637,245],function(t,e,i){i(643);var n=i(99);n.NodeList=n.HTMLCollection=n.Array},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function o(t,e,i,n){if(n)return{state:i,error:"Interrupted by an error up the chain"};var o=i,a=void 0;try{o=t(i,e)}catch(s){a=s.toString(),"object"===("undefined"==typeof window?"undefined":r(window))&&"undefined"!=typeof window.chrome?setTimeout(function(){throw s}):console.error(s.stack||s)}return{state:o,error:a}}function a(t,e,i,n,r,a,s){if(e>=t.length&&t.length===a.length)return t;for(var u=t.slice(0,e),l=e;l<a.length;l++){var h=a[l],c=r[h].action,p=u[l-1],d=p?p.state:n,f=p?p.error:void 0,m=s.indexOf(h)>-1,y=m?p:o(i,c,d,f);u.push(y)}return u}function s(t){return y.performAction(t)}function u(t,e,i){var n={monitorState:i(void 0,{}),nextActionId:1,actionsById:{0:s(v)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[]};return function(){var r=arguments.length<=0||void 0===arguments[0]?n:arguments[0],o=arguments[1],u=r.monitorState,l=r.actionsById,h=r.nextActionId,c=r.stagedActionIds,p=r.skippedActionIds,d=r.committedState,y=r.currentStateIndex,g=r.computedStates,b=0;switch(o.type){case m.RESET:l={0:s(v)},h=1,c=[0],p=[],d=e,y=0,g=[];break;case m.COMMIT:l={0:s(v)},h=1,c=[0],p=[],d=g[y].state,y=0,g=[];break;case m.ROLLBACK:l={0:s(v)},h=1,c=[0],p=[],y=0,g=[];break;case m.TOGGLE_ACTION:var x=function(){var t=o.id,e=p.indexOf(t);return p=-1===e?[t].concat(p):p.filter(function(e){return e!==t}),b=c.indexOf(t),"break"}();if("break"===x)break;case m.JUMP_TO_STATE:y=o.index,b=1/0;break;case m.SWEEP:c=(0,f["default"])(c,p),p=[],y=Math.min(y,c.length-1);break;case m.PERFORM_ACTION:y===c.length-1&&y++;var _=h++;l[_]=o,c=[].concat(c,[_]),b=c.length-1;break;case m.IMPORT_STATE:var w=o.nextLiftedState;u=w.monitorState,l=w.actionsById,h=w.nextActionId,c=w.stagedActionIds,p=w.skippedActionIds,d=w.committedState,y=w.currentStateIndex,g=w.computedStates;break;case"@@redux/INIT":b=0;break;default:b=1/0}return g=a(g,b,t,d,l,c,p),u=i(u,o),{monitorState:u,actionsById:l,nextActionId:h,stagedActionIds:c,skippedActionIds:p,committedState:d,currentStateIndex:y,computedStates:g}}}function l(t){var e=t.computedStates,i=t.currentStateIndex,n=e[i].state;return n}function h(t,e){var i=void 0;return p({},t,{liftedStore:t,dispatch:function(e){return t.dispatch(s(e)),e},getState:function(){var e=l(t.getState());return void 0!==e&&(i=e),i},replaceReducer:function(i){t.replaceReducer(e(i))}})}function c(){var t=arguments.length<=0||void 0===arguments[0]?function(){return null}:arguments[0];return function(e){return function(i,n){function r(e){return u(e,n,t)}var o=e(r(i));return h(o,r)}}}var p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0,e.ActionCreators=e.ActionTypes=void 0,e["default"]=c;var d=i(693),f=n(d),m=e.ActionTypes={PERFORM_ACTION:"PERFORM_ACTION",RESET:"RESET",ROLLBACK:"ROLLBACK",COMMIT:"COMMIT",SWEEP:"SWEEP",TOGGLE_ACTION:"TOGGLE_ACTION",JUMP_TO_STATE:"JUMP_TO_STATE",IMPORT_STATE:"IMPORT_STATE"},y=e.ActionCreators={performAction:function(t){return{type:m.PERFORM_ACTION,action:t,timestamp:Date.now()}},reset:function(){return{type:m.RESET,timestamp:Date.now()}},rollback:function(){return{type:m.ROLLBACK,timestamp:Date.now()}},commit:function(){return{type:m.COMMIT,timestamp:Date.now()}},sweep:function(){return{type:m.SWEEP}},toggleAction:function(t){return{type:m.TOGGLE_ACTION,id:t}},jumpToState:function(t){return{type:m.JUMP_TO_STATE,index:t}},importState:function(t){return{type:m.IMPORT_STATE,nextLiftedState:t}}},v={type:"@@INIT"}},function(t,e,i){function n(t,e,i){if(null!=t){void 0!==i&&i in r(t)&&(e=[i]);for(var n=0,o=e.length;null!=t&&o>n;)t=t[e[n++]];return n&&n==o?t:void 0}}var r=i(53);t.exports=n},function(t,e,i){function n(t,e,i,s,u,l){return t===e?!0:null==t||null==e||!o(t)&&!a(e)?t!==t&&e!==e:r(t,e,n,i,s,u,l)}var r=i(705),o=i(44),a=i(52);t.exports=n},function(t,e){function i(t){return function(e){return null==e?void 0:e[t]}}t.exports=i},function(t,e){function i(t,e){return t="number"==typeof t||n.test(t)?+t:-1,e=null==e?r:e,t>-1&&t%1==0&&e>t}var n=/^\d+$/,r=9007199254740991;t.exports=i},function(t,e,i){function n(t,e){var i=typeof t;if("string"==i&&s.test(t)||"number"==i)return!0;if(r(t))return!1;var n=!a.test(t);return n||null!=e&&t in o(e)}var r=i(54),o=i(53),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=n},function(t,e,i){function n(t){return t===t&&!r(t)}var r=i(44);t.exports=n},function(t,e,i){function n(t){if(o(t))return t;var e=[];return r(t).replace(a,function(t,i,n,r){e.push(n?r.replace(s,"$1"):i||t)}),e}var r=i(711),o=i(54),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.join=e.fork=e.cps=e.call=e.race=e.put=e.take=void 0;var r=i(260);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return r.take}}),Object.defineProperty(e,"put",{enumerable:!0,get:function(){return r.put}}),Object.defineProperty(e,"race",{enumerable:!0,get:function(){return r.race}}),Object.defineProperty(e,"call",{enumerable:!0,get:function(){return r.call}}),Object.defineProperty(e,"cps",{enumerable:!0,get:function(){return r.cps}}),Object.defineProperty(e,"fork",{enumerable:!0,get:function(){return r.fork}}),Object.defineProperty(e,"join",{enumerable:!0,get:function(){return r.join}});var o=i(154),a=i(732),s=n(a);e["default"]=function(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];return function(t){function i(t){return a.push(t),function(){return(0,o.remove)(a,t)}}var n=t.getState,r=t.dispatch,a=[];return e.forEach(function(t){(0,s["default"])(t(n),i,r,t.name)}),function(t){return function(e){var i=t(e);return a.forEach(function(t){return t(e)}),i}}}}},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){return("*"===t?C.wildcard:p.is.array(t)?C.array:p.is.func(t)?C.predicate:C["default"])(t)}function o(t){return S(v,p.is.undef(t)?"*":t)}function a(t){return S(g,t)}function s(t){return S(b,t)}function u(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;e>n;n++)i[n-1]=arguments[n];return(0,p.check)(t,p.is.func,d),S(x,{fn:t,args:i})}function l(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;e>n;n++)i[n-1]=arguments[n];return(0,p.check)(t,p.is.func,f),S(_,{fn:t,args:i})}function h(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;e>n;n++)i[n-1]=arguments[n];return S(w,{task:t,args:i})}function c(t){if(!t[p.TASK])throw new Error(m);return S(M,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.as=e.JOIN_ARG_ERROR=e.FORK_ARG_ERROR=e.CPS_FUNCTION_ARG_ERROR=e.CALL_FUNCTION_ARG_ERROR=void 0,e.matcher=r,e.take=o,e.put=a,e.race=s,e.call=u,e.cps=l,e.fork=h,e.join=c;var p=i(154),d=e.CALL_FUNCTION_ARG_ERROR="io.call first argument must be a function",f=e.CPS_FUNCTION_ARG_ERROR="io.cps first argument must be a function",m=(e.FORK_ARG_ERROR="io.fork first argument must be a generator function or an iterator",e.JOIN_ARG_ERROR="io.join argument must be a valid task (a result of io.fork)"),y=Symbol("IO"),v="TAKE",g="PUT",b="RACE",x="CALL",_="CPS",w="FORK",M="JOIN",S=function(t,e){var i;return i={},n(i,y,!0),n(i,t,e),i},C={wildcard:function(){return p.kTrue},"default":function(t){return function(e){return e.type===t}},array:function(t){return function(e){return t.some(function(t){return t===e.type})}},predicate:function(t){return function(e){return t(e)}}};e.as={take:function(t){return t&&t[y]&&t[v]},put:function(t){return t&&t[y]&&t[g]},race:function(t){return t&&t[y]&&t[b]},call:function(t){return t&&t[y]&&t[x]},cps:function(t){return t&&t[y]&&t[_]},fork:function(t){return t&&t[y]&&t[w]},join:function(t){return t&&t[y]&&t[M]}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){function i(){return l}function n(t){h.push(t);var e=!0;return function(){if(e){e=!1;var i=h.indexOf(t);h.splice(i,1)}}}function r(t){if(!a["default"](t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,l=u(l,t)}finally{c=!1}return h.slice().forEach(function(t){return t()}),t}function o(t){u=t,r({type:s.INIT})}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var u=t,l=e,h=[],c=!1;return r({type:s.INIT}),{dispatch:r,subscribe:n,getState:i,replaceReducer:o}}e.__esModule=!0,e["default"]=r;var o=i(263),a=n(o),s={INIT:"@@redux/INIT"};e.ActionTypes=s},function(t,e){"use strict";function i(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];return function(t){return e.reduceRight(function(t,e){return e(t)},t)}}e.__esModule=!0,e["default"]=i,t.exports=e["default"]},function(t,e){"use strict";function i(t){if(!t||"object"!=typeof t)return!1;var e="function"==typeof t.constructor?Object.getPrototypeOf(t):Object.prototype;if(null===e)return!0;var i=e.constructor;return"function"==typeof i&&i instanceof i&&n(i)===r}e.__esModule=!0,e["default"]=i;var n=function(t){return Function.prototype.toString.call(t)},r=n(Object);t.exports=e["default"]},function(t,e){"use strict";function i(t,e){return Object.keys(t).reduce(function(i,n){return i[n]=e(t[n],n),i},{})}e.__esModule=!0,e["default"]=i,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=i(8),o=n(r),a=i(78),s=n(a),u=i(373),l=n(u),h=i(157);window.perf=l["default"],l["default"].start(),s["default"].render(o["default"].createElement(h.App,null),document.getElementById("root")),window.onkeydown=function(){l["default"].stop();var t=l["default"].getLastMeasurements();l["default"].printInclusive(t),l["default"].printExclusive(t),l["default"].printWasted(t)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(r,o){try{var a=e[r](o),s=a.value}catch(u){return void i(u)}a.done?t(s):Promise.resolve(s).then(function(t){n("next",t)},function(t){n("throw",t)})}n("next")})}}function o(t,e){var i=t.type,n=e,r=(0,l["default"])(t.payload,function(t,i){return i.startsWith(e)});return{type:i,meta:n,payload:r}}var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var u=i(178),l=n(u),h=i(175),c=n(h),p=i(155),d=n(p),f=function(){var t=r(regeneratorRuntime.mark(function e(t,i){var n,r,u,l,h,p,f,m,y,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values((0,c["default"])(t,function(t,e){return(0,d["default"])(t,o(i,e))})));case 2:for(n=e.sent,r=i.type,u=n.map(function(t){return t.meta}),l={},h=!0,p=!1,f=void 0,e.prev=9,m=n[Symbol.iterator]();!(h=(y=m.next()).done);h=!0)if(v=y.value,"object"===s(v.payload))for(g in v.payload)l[g]=a({},l[g],v.payload[g]);e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](9),p=!0,f=e.t0;case 17:e.prev=17,e.prev=18,!h&&m["return"]&&m["return"]();case 20:if(e.prev=20,!p){e.next=23;break}throw f;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",{type:r,meta:u,payload:l});case 26:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return function(e,i){return t.apply(this,arguments)}}();e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.broadcast=e.message=void 0;var r=i(155),o=n(r),a=i(266),s=n(a);e.message=o["default"],e.broadcast=s["default"]},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=i(8),h=r(l),c=i(62),p=i(276),d=i(160),f=i(34),m=n(f),y=i(157),v=function(t){function e(){var t,i,n,r;o(this,e);for(var s=arguments.length,u=Array(s),l=0;s>l;l++)u[l]=arguments[l];return i=n=a(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),n.state={boxes:null},n.types=[m.CYLINDER,m.SPHERE,m.BOX],r=i,a(n,r)}return s(e,t),u(e,[{key:"_randomBodies",value:function(t){for(var e=[],i=0;t>i;i++)e.push({key:"body"+i,name:"body"+i,type:this.types[Math.floor(3*Math.random())],pos:{x:500*Math.random()-250,y:100*Math.random()-200,z:200*Math.random()-100},dim:{width:20,height:20,depth:20,radius:15}});return e.map(function(t){return h["default"].createElement(d.Body,t)})}},{key:"componentWillMount",value:function(){this.setState({bodies:this._randomBodies(100)})}},{key:"render",value:function(){return h["default"].createElement("div",{id:"App"},h["default"].createElement(y.DevTools,{store:c.store}),h["default"].createElement(y.ThreeApp,null,h["default"].createElement(d.World,{name:"Paradim",G:10},this.state.bodies,h["default"].createElement(p.RoofWithPendulum,{name:"thing",pos:{x:250}}))))}}]),e}(l.Component);e["default"]=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=i(8),l=n(u),h=i(383),c=n(h),p=i(78),d=n(p),f=i(4),m=n(f),y=i(62),v=i(61),g=i(294),b=function(t){function e(){var t,i,n,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;s>l;l++)u[l]=arguments[l];return i=n=o(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),n.state={mainCameraPosition:new m["default"].Vector3(0,0,1e3),width:window.innerWidth,height:window.innerHeight},n._onAnimate=function(){y.store.dispatch((0,v.loop)()),n.controls.update()},a=i,o(n,a)}return a(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this;window.addEventListener("resize",function(){return t.setState({width:window.innerWidth,height:window.innerHeight})});var e=new g.TrackballControls(this.refs.mainCamera,d["default"].findDOMNode(this.refs.react3));e.rotateSpeed=1,e.zoomSpeed=1.2,e.panSpeed=.8,e.noZoom=!1,e.noPan=!1,e.staticMoving=!0,e.dynamicDampingFactor=.3,e.addEventListener("change",function(){return t.setState({mainCameraPosition:t.refs.mainCamera.position})}),this.controls=e}},{key:"componentWillUnmount",value:function(){this.controls.dispose(),delete this.controls}},{key:"render",value:function(){var t=this.state,e=t.mainCameraPosition,i=t.width,n=t.height;return l["default"].createElement(c["default"],{ref:"react3",mainCamera:"camera",width:i,height:n,onAnimate:this._onAnimate},l["default"].createElement("scene",null,l["default"].createElement("perspectiveCamera",{ref:"mainCamera",name:"camera",fov:75,aspect:innerWidth/innerHeight,near:10,far:1e5,position:e}),this.props.children))}}]),e}(u.Component);e["default"]=b},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),a=i(45),s=(n(a),i(158)),u=function(t){var e=t.type,i=t.dim,n=t.name,r=t.dynamic,a=t.visible;return o["default"].createElement("mesh",{name:n,visible:a},o["default"].createElement(s.BodyGeometry,{type:e,dim:i,dynamic:r}),o["default"].createElement("meshNormalMaterial",{wireframe:!r}))};u.propTypes={type:r.PropTypes.any.isRequired,dim:r.PropTypes.any.isRequired,name:r.PropTypes.string.isRequired,dynamic:r.PropTypes.bool,visible:r.PropTypes.bool},u.defaultProps={dynamic:!0,visible:!1},e["default"]=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),a=i(45),s=n(a),u=i(158),l=function(t){var e=t.type,i=t.anchors,n=t.name,r=t.visible;return o["default"].createElement("line",{name:n,visible:r},o["default"].createElement(u.JointGeometry,{type:e,vertices:i}),o["default"].createElement("lineBasicMaterial",{color:16776960}))};l.propTypes={type:r.PropTypes.any.isRequired,anchors:r.PropTypes.arrayOf(s["default"].vec3).isRequired,name:r.PropTypes.string.isRequired,visible:r.PropTypes.bool},l.defaultProps={visible:!1},e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),a=function(t){var e=t.children;return o["default"].createElement("object3D",null,e)};a.propTypes={children:r.PropTypes.any},e["default"]=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),a=i(45),s=n(a),u=i(34),l=function(t){var e=t.type,i=t.dim,n=t.dynamic;switch(e){case u.BOX:return o["default"].createElement("boxGeometry",{width:i.width,height:i.height,depth:i.depth,dynamic:n});case u.SPHERE:return o["default"].createElement("sphereGeometry",{radius:i.radius,dynamic:n});case u.CYLINDER:return o["default"].createElement("cylinderGeometry",{height:i.height,radiusTop:i.radius,radiusBottom:i.radius,dynamic:n});default:return}};l.propTypes={type:r.PropTypes.oneOf([u.BOX,u.SPHERE,u.CYLINDER]).isRequired,dim:s["default"].dim.isRequired,dynamic:r.PropTypes.bool.isRequired},e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),a=i(45),s=n(a),u=i(4),l=n(u),h=i(34),c=function(t){var e=t.type,i=t.vertices;switch(e){case h.JOINT_DISTANCE:return o["default"].createElement("geometry",{vertices:[new l["default"].Vector3(i[0].x,i[0].y,i[0].z),new l["default"].Vector3(i[1].x,i[1].y,i[1].z)]});default:return}};c.propTypes={type:r.PropTypes.oneOf([h.JOINT_DISTANCE]).isRequired,vertices:r.PropTypes.arrayOf(s["default"].vec3).isRequired},e["default"]=c},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),a=r(o),s=i(45),u=(r(s),i(160)),l=i(34),h=n(l),c=function(t){return a["default"].createElement(u.Body,t,a["default"].createElement(u.Body,{pos:{x:-250},name:"pei"},a["default"].createElement(u.Body,{name:"caixa",type:h.BOX,pos:{x:0,y:-20,z:0},dim:{width:20,height:20,depth:20}})),a["default"].createElement(u.Body,{name:"roof",type:h.BOX,pos:{y:0},dim:{width:500,height:10,depth:300},dynamic:!1}),a["default"].createElement(u.Body,{name:"bola",type:h.SPHERE,pos:{x:300,y:-400,z:0},dim:{radius:20}}),a["default"].createElement(u.Joint,{name:"string",type:h.JOINT_DISTANCE,bodies:["roof","bola"],anchors:[{x:0,y:0,z:0},{x:0,y:20,z:0}],axis:[{x:0,y:1,z:0},{x:0,y:1,z:0}],limits:[500,550],stiffness:.2,damping:1.5}))};e["default"]=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.RoofWithPendulum=void 0;var r=i(275),o=n(r);e.RoofWithPendulum=o["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=(n(r),i(60)),a=i(104),s=i(103),u=(0,o.compose)(a.Namespace,a.Transform)(s.BodyMesh);u.propTypes={density:r.PropTypes.number,friction:r.PropTypes.number,restituition:r.PropTypes.number},u.defaultProps={density:1,friction:.4,restitution:.2},e["default"]=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=(n(r),i(60)),a=i(104),s=i(103),u=(0,o.compose)(a.Namespace,a.Transform)(s.JointMesh);u.propTypes={bodies:r.PropTypes.arrayOf(r.PropTypes.string).isRequired,distance:r.PropTypes.number,damping:r.PropTypes.number,stiffness:r.PropTypes.number,maxForce:r.PropTypes.number},u.defaultProps={distance:0,damping:.8,stiffness:.5,maxForce:1e16},e["default"]=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(-1!==t.indexOf(","))throw new Error("name can't have any commas!");return e?[e,t].join(","):t}function u(t){return t.substring(0,t.lastIndexOf(","))}var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueUnion=s,e.getParent=u;var h=i(8),c=n(h),p=function(t){var e=function(e){function i(){return r(this,i),o(this,Object.getPrototypeOf(i).apply(this,arguments))}return a(i,e),l(i,[{key:"getChildContext",value:function(){return{id:s(this.props.name,this.context.id)}}},{key:"render",value:function(){return c["default"].createElement(t,this.props)}}]),i}(h.Component);return e.propTypes={name:h.PropTypes.string.isRequired},e.contextTypes={id:h.PropTypes.string.isRequired},e.childContextTypes={id:h.PropTypes.string},e};e["default"]=p},function(t,e,i){"use strict";
function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=i(8),h=n(l),c=i(179),p=i(61),d=function(t){var e=function(e){function i(){return o(this,i),a(this,Object.getPrototypeOf(i).apply(this,arguments))}return s(i,e),u(i,[{key:"getChildContext",value:function(){var t=this.props.state;return{id:"@root",state:t}}},{key:"componentDidMount",value:function(){var t=this.props.dispatch,e=this.refs.obj3D;t((0,p.setup)({"@root":e}))}},{key:"render",value:function(){var e=this.props,i=(e.state,e.dispatch,r(e,["state","dispatch"]));return h["default"].createElement("object3D",{ref:"obj3D",name:"@root"},h["default"].createElement(t,i))}}]),i}(l.Component);return e.propTypes={state:l.PropTypes.any.isRequired},e.childContextTypes={id:l.PropTypes.string,state:l.PropTypes.any},(0,c.connect)(function(t){return{state:t.ViewReducer}})(e)};e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var h=i(8),c=n(h),p=i(45),d=n(p),f=(i(62),i(61),i(4)),m=n(f),y=function(t){var e=function(e){function i(){return o(this,i),a(this,Object.getPrototypeOf(i).apply(this,arguments))}return s(i,e),l(i,[{key:"render",value:function(){var e=this.context,i=e.id,n=e.state,o=n[i]||this.props,a=o.pos,s=o.qua,l=o.children,h=r(o,["pos","qua","children"]);return c["default"].createElement("object3D",{position:new m["default"].Vector3(a.x,a.y,a.z),quaternion:new m["default"].Quaternion(s.x,s.y,s.z,s.w),ref:function(t){t&&(t.userData.rack=h)},name:i},l||c["default"].createElement(t,u({},this.props,n[i])))}}]),i}(h.Component);return e.contextTypes={id:h.PropTypes.string.isRequired,state:h.PropTypes.any.isRequired},e.propTypes={pos:d["default"].vec3,qua:d["default"].vec4,children:h.PropTypes.any},e.defaultProps={pos:{x:0,y:0,z:0},qua:{x:0,y:0,z:0,w:1}},e};e["default"]=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=i(8),h=n(l),c=i(62),p=i(61),d=function(t){return function(e){var i=function(i){function n(){return o(this,n),a(this,Object.getPrototypeOf(n).apply(this,arguments))}return s(n,i),u(n,[{key:"componentWillMount",value:function(){var e=this.context.id;c.store.dispatch((0,p.spawn)(r({},e,t)))}},{key:"componentWillUnmount",value:function(){var t=this.context.id;c.store.dispatch((0,p.terminate)(t))}},{key:"render",value:function(){return h["default"].createElement(e,this.props)}}]),n}(l.Component);return i.contextTypes={id:l.PropTypes.string.isRequired},i}};e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.taskEnhancer=void 0;var r=i(284),o=n(r);e.taskEnhancer=o["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e,i){var n=(0,m.createStore)(i),o=function(e){t.dispatch(e),n.dispatch(u())},a=v["default"].apply(void 0,r(e))(f({},t,{dispatch:o}))(function(){}),l=function(t){n.dispatch(s(t)),a(n.getState())};return f({},t,{dispatch:l})}function a(t){return function(e){return function(i,n){var r=e(i,n),a=l(h),s=o(r,Object.values(t),a);return s}}}function s(t){return{type:g,payload:t}}function u(){return{type:b}}function l(){var t=arguments.length<=0||void 0===arguments[0]?function(t,e){return t.concat(e)}:arguments[0];return function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],i=arguments[1],n=i.type,r=i.payload;switch(n){case g:return t(e,r);case b:return e.slice(1);default:return e}}}function h(t,e){var i=t.length?t[t.length-1]:void 0;return i&&i.type===e.type?t.slice(0,-1).concat(c(i,e)):t.concat(e)}function c(t,e){var i=t.type,n=p(t.meta,e.meta),r=p(t.payload,e.payload);return n?{type:i,meta:n,payload:r}:{type:i,payload:r}}function p(t,e){return"undefined"==typeof t?void 0:t.prototype===Array?t.concat(e.payload):"object"===("undefined"==typeof t?"undefined":d(t))?f({},t,e):[t,e]}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a;var m=i(60),y=i(259),v=n(y),g="QUEUE",b="DEQUEUE"},function(t,e,i){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?a:arguments[0],e=arguments[1],i=e.type,n=e.payload;switch(i){case o.SETUP:case o.LOOP:var s={};for(var u in n)s[u]=r({},t[u],n[u]);return r({},t,s);default:return t}}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(34),a={};e["default"]=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(){var t=arguments.length<=0||void 0===arguments[0]?l:arguments[0],e=arguments[1],i=e.type,n=e.payload;switch(i){case a.SPAWN:return o({},t,n);case a.TERMINATE:return(0,u["default"])(t,n);default:return t}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=i(34),s=i(345),u=n(s),l={};e["default"]=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.WorkReducer=e.ViewReducer=void 0;var r=i(285),o=n(r),a=i(286),s=n(a);e.ViewReducer=o["default"],e.WorkReducer=s["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.worker=void 0;var r=i(289),o=n(r);e.worker=o["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function o(t){var e,i,n,r,o,s,u,l,c;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e={};case 1:return f.next=4,(0,p.take)();case 4:i=f.sent,n=!0,r=!1,o=void 0,f.prev=8,s=i[Symbol.iterator]();case 10:if(n=(u=s.next()).done){f.next=31;break}return l=u.value,f.next=14,(0,p.call)(a,l,t);case 14:if(c=f.sent,!e.meta||!e.meta.length){f.next=18;break}return f.next=18,(0,p.put)(e);case 18:if(f.t0=c,f.t0){f.next=23;break}return f.next=22,(0,p.fork)({});case 22:f.t0=f.sent;case 23:return f.t1=f.t0,f.next=26,(0,p.join)(f.t1);case 26:e=f.sent,l.type===d.LOOP&&(e.payload=h(e.payload));case 28:n=!0,f.next=10;break;case 31:f.next=37;break;case 33:f.prev=33,f.t2=f["catch"](8),r=!0,o=f.t2;case 37:f.prev=37,f.prev=38,!n&&s["return"]&&s["return"]();case 40:if(f.prev=40,!r){f.next=43;break}throw o;case 43:return f.finish(40);case 44:return f.finish(37);case 45:f.next=1;break;case 47:case"end":return f.stop()}},M[0],this,[[8,33,37,45],[38,,40,44]])}function a(t,e){var i,n,r,o=t.type,a=t.payload;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e(),n=i.WorkReducer,r=i.ViewReducer,o===d.SETUP&&(S=c({},S,a)),t.t0=o,t.next=t.t0===d.SPAWN?7:t.t0===d.SETUP?10:t.t0===d.LOOP?13:t.t0===d.TERMINATE?16:19;break;case 7:return t.next=9,(0,p.call)(s,a);case 9:return t.abrupt("return",t.sent);case 10:return t.next=12,(0,p.fork)(m.broadcast,n,(0,f.setup)(l(a)));case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,(0,p.fork)(m.broadcast,n,(0,f.loop)(r));case 15:return t.abrupt("return",t.sent);case 16:return t.next=18,(0,p.call)(u,(0,x["default"])(n,a));case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}},M[1],this)}function s(t){var e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,p.call)(w["default"],t,function(t){return t()});case 2:return e=i.sent,i.next=5,(0,p.put)((0,f.spawn)(e));case 5:case"end":return i.stop()}},M[2],this)}function u(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.call)(function(){return Object.values(t).forEach(function(t){return t.terminate()})});case 2:return e.next=4,(0,p.put)((0,f.terminate)(Object.keys(t)));case 4:case"end":return e.stop()}},M[3],this)}function l(t){var e=t["@root"],i={};return e.traverse(function(t){if("@root"!==t.name&&t.name.startsWith("@root")){var e=t.userData.rack,n=e.name,o=r(e,["name"]),a=t.getObjectByName(n);if(a)var s=a.geometry.dynamic,u=a.visible;var l=new g["default"].Vector3;l.setFromMatrixPosition(t.matrixWorld);var h=new g["default"].Quaternion;h.setFromRotationMatrix(t.matrixWorld);var p=y.Vec3.scale(l,1),d=y.Quat.scale(h,1);i[t.name]=c({},o,{visible:u,dynamic:s,pos:p,qua:d})}}),i}function h(t){return(0,w["default"])(t,function(t,e){t.pos||(t.pos={x:0,y:0,z:0},t.qua={x:0,y:0,z:0,w:1});var i=S["@root"].getObjectByName(e),n=new g["default"].Vector3(t.pos.x,t.pos.y,t.pos.z),r=new g["default"].Quaternion(t.qua.x,t.qua.y,t.qua.z,t.qua.w);i.traverseAncestors(function(t){t!==i&&(n=t.position.clone().negate().add(n),r=t.quaternion.conjugate().clone().multiply(r))});var o=y.Vec3.scale(n,1),a=y.Quat.scale(r,1);return c({},t,{pos:o,qua:a})})}var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};Object.defineProperty(e,"__esModule",{value:!0});var p=i(259),d=i(34),f=i(61),m=i(267),y=i(162),v=i(4),g=n(v),b=i(178),x=n(b),_=i(175),w=n(_),M=[o,a,s,u].map(regeneratorRuntime.mark),S={};e["default"]=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.wrap=e.isClassComponent=e.wrapDisplayName=void 0;var o=i(8),a=n(o),s=e.wrapDisplayName=function(t,e){var i="";return i="string"==typeof t?t:t.displayName||t.name||"Component",e+"("+i+")"},u=e.isClassComponent=function(t){return Boolean(t&&t.prototype&&"object"===r(t.prototype.isReactComponent))},l=e.wrap=function(t){return u(t)?function(e){return a["default"].createElement(t,e)}:function(e){return t(e)}},h={wrapDisplayName:s,isClassComponent:u,wrap:l};e["default"]=h},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n={REVISION:"1.2",nextID:0,proxyID:0,BR_NULL:0,BR_BRUTE_FORCE:1,BR_SWEEP_AND_PRUNE:2,BR_BOUNDING_VOLUME_TREE:3,BODY_NULL:0,BODY_DYNAMIC:1,BODY_STATIC:2,SHAPE_NULL:0,SHAPE_SPHERE:1,SHAPE_BOX:2,SHAPE_CYLINDER:3,JOINT_NULL:0,JOINT_DISTANCE:1,JOINT_BALL_AND_SOCKET:2,JOINT_HINGE:3,JOINT_WHEEL:4,JOINT_SLIDER:5,JOINT_PRISMATIC:6,WORLD_SCALE:100,INV_SCALE:.01,AABB_PROX:.005,sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,lerp:function(t,e,i){return t+(e-t)*i},rand:function(t,e){return n.lerp(t,e,n.random())},randInt:function(t,e,i){return 1*n.lerp(t,e,n.random()).toFixed(i||0)},"int":function(t){return~~t},fix:function(t,e){return t.toFixed(e||3,10)},clamp:function(t,e,i){return n.max(e,n.min(i,t))},degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,CustomError:null,Error:function(t,e){null==n.CustomError?console.error(t,e):n.CustomError.innerHTML+=t+" - "+e+"<br>"}};i||(i="undefined"!=typeof Float32Array?Float32Array:Array),function(t){var e,i=["now","webkitNow","msNow","mozNow"];if(t.performance)for(var r=0;r<i.length;++r){var o=i[r];if(t.performance[o]){e=function(){return t.performance[o]()};break}}e||(e=Date.now),n.now=e}(self),n.World=function(t,e,i,r){switch(this.timeStep=t||.01666,this.numIterations=i||8,e||2){case 1:this.broadPhase=new n.BruteForceBroadPhase;break;case 2:default:this.broadPhase=new n.SAPBroadPhase;break;case 3:this.broadPhase=new n.DBVTBroadPhase}this.performance=null,this.isNoStat=r||!1,this.isNoStat||(this.performance=new n.Performance(this)),this.enableRandomizer=!0,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new n.Vec3(0,-9.80665,0);var o=4;this.detectors=[],this.detectors.length=o;for(var a=o;a--;)this.detectors[a]=[],this.detectors[a].length=o;this.detectors[n.SHAPE_SPHERE][n.SHAPE_SPHERE]=new n.SphereSphereCollisionDetector,this.detectors[n.SHAPE_SPHERE][n.SHAPE_BOX]=new n.SphereBoxCollisionDetector(!1),this.detectors[n.SHAPE_BOX][n.SHAPE_SPHERE]=new n.SphereBoxCollisionDetector(!0),this.detectors[n.SHAPE_BOX][n.SHAPE_BOX]=new n.BoxBoxCollisionDetector,this.detectors[n.SHAPE_CYLINDER][n.SHAPE_CYLINDER]=new n.CylinderCylinderCollisionDetector,this.detectors[n.SHAPE_CYLINDER][n.SHAPE_BOX]=new n.BoxCylinderCollisionDetector(!0),this.detectors[n.SHAPE_BOX][n.SHAPE_CYLINDER]=new n.BoxCylinderCollisionDetector(!1),this.detectors[n.SHAPE_CYLINDER][n.SHAPE_SPHERE]=new n.SphereCylinderCollisionDetector(!0),this.detectors[n.SHAPE_SPHERE][n.SHAPE_CYLINDER]=new n.SphereCylinderCollisionDetector(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.maxIslandRigidBodies=64,this.islandRigidBodies=[],this.islandRigidBodies.length=this.maxIslandRigidBodies,this.islandStack=[],this.islandStack.length=this.maxIslandRigidBodies,this.maxIslandConstraints=128,this.islandConstraints=[],this.islandConstraints.length=this.maxIslandConstraints},n.World.prototype={constructor:n.World,clear:function(){for(this.randX=65535;null!==this.joints;)this.removeJoint(this.joints);for(;null!==this.contacts;)this.removeContact(this.contacts);for(;null!==this.rigidBodies;)this.removeRigidBody(this.rigidBodies);n.nextID=0,n.proxyID=0},addRigidBody:function(t){t.parent&&n.Error("World","It is not possible to be added to more than one world one of the rigid body"),t.parent=this,t.awake();for(var e=t.shapes;null!==e;e=e.next)this.addShape(e);null!==this.rigidBodies&&((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var e=t;if(e.parent===this){e.awake();for(var i=e.jointLink;null!=i;){var n=i.joint;i=i.next,this.removeJoint(n)}for(var r=t.shapes;null!==r;r=r.next)this.removeShape(r);var o=e.prev,a=e.next;null!==o&&(o.next=a),null!==a&&(a.prev=o),this.rigidBodies==e&&(this.rigidBodies=a),e.prev=null,e.next=null,e.parent=null,this.numRigidBodies--}},getByName:function(t){for(var e=null,i=this.rigidBodies;null!==i;)" "!==i.name&&i.name===t&&(e=i),i=i.next;for(var n=this.joints;null!==n;)""!==n.name&&n.name===t&&(e=n),n=n.next;return e},addShape:function(t){t.parent&&t.parent.parent||n.Error("World","It is not possible to be added alone to shape world"),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&&n.Error("World","It is not possible to be added to more than one world one of the joint"),null!=this.joints&&((this.joints.prev=t).next=this.joints),this.joints=t,t.parent=this,this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var e=t,i=e.prev,n=e.next;null!==i&&(i.next=n),null!==n&&(n.prev=i),this.joints==e&&(this.joints=n),e.prev=null,e.next=null,this.numJoints--,e.awake(),e.detach(),e.parent=null},worldscale:function(t){n.WORLD_SCALE=t||100,n.INV_SCALE=1/n.WORLD_SCALE},step:function(){var t,e,i,r,o=this.isNoStat?!1:!0;o&&(t=n.now());for(var a=this.rigidBodies;null!==a;)a.addedToIsland=!1,a.sleeping&&(a.linearVelocity.testZero()||a.angularVelocity.testZero()||a.position.testDiff(a.sleepPosition)||a.orientation.testDiff(a.sleepOrientation))&&a.awake(),a=a.next;o&&(e=n.now()),this.broadPhase.detectPairs();for(var s=this.broadPhase.pairs,u=this.broadPhase.numPairs,l=u;l--;){var h,c,p=s[l];p.shape1.id<p.shape2.id?(h=p.shape1,c=p.shape2):(h=p.shape2,c=p.shape1);var d;d=h.numContacts<c.numContacts?h.contactLink:c.contactLink;for(var f=!1;d;){var m=d.contact;if(m.shape1==h&&m.shape2==c){m.persisting=!0,f=!0;break}d=d.next}f||this.addContact(h,c)}for(o&&(i=n.now(),this.performance.broadPhaseTime=i-e),this.numContactPoints=0,m=this.contacts;null!==m;)if(m.persisting||!m.shape1.aabb.intersectTest(m.shape2.aabb)){var y=m.body1,v=m.body2;(y.isDynamic&&!y.sleeping||v.isDynamic&&!v.sleeping)&&m.updateManifold(),this.numContactPoints+=m.manifold.numPoints,m.persisting=!1,m.constraint.addedToIsland=!1,m=m.next}else{var g=m.next;this.removeContact(m),m=g}o&&(r=n.now(),this.performance.narrowPhaseTime=r-i);var b,x,_=1/this.timeStep;for(b=this.joints;null!==b;b=b.next)b.addedToIsland=!1;this.maxIslandRigidBodies<this.numRigidBodies&&(this.maxIslandRigidBodies=this.numRigidBodies<<1,this.islandRigidBodies=[],this.islandStack=[],this.islandRigidBodies.length=this.maxIslandRigidBodies,this.islandStack.length=this.maxIslandRigidBodies);var w=this.numJoints+this.numContacts;this.maxIslandConstraints<w&&(this.maxIslandConstraints=w<<1,this.islandConstraints=[],this.islandConstraints.length=this.maxIslandConstraints),e=n.now(),this.numIslands=0;for(var M=this.rigidBodies;null!==M;M=M.next)if(!(M.addedToIsland||M.isStatic||M.sleeping))if(M.isLonely())M.isDynamic&&M.linearVelocity.addTime(this.gravity,this.timeStep),this.calSleep(M)?(M.sleepTime+=this.timeStep,M.sleepTime>.5?M.sleep():M.updatePosition(this.timeStep)):(M.sleepTime=0,M.updatePosition(this.timeStep)),this.numIslands++;else{var S=0,C=0,E=1;this.islandStack[0]=M,M.addedToIsland=!0;do if(a=this.islandStack[--E],this.islandStack[E]=null,a.sleeping=!1,this.islandRigidBodies[S++]=a,!a.isStatic){for(var T=a.contactLink;null!==T;T=T.next){var m=T.contact;if(x=m.constraint,!x.addedToIsland&&m.touching){this.islandConstraints[C++]=x,x.addedToIsland=!0;var g=T.body;g.addedToIsland||(this.islandStack[E++]=g,g.addedToIsland=!0)}}for(var P=a.jointLink;null!==P;P=P.next)x=P.joint,x.addedToIsland||(this.islandConstraints[C++]=x,x.addedToIsland=!0,g=P.body,!g.addedToIsland&&g.isDynamic&&(this.islandStack[E++]=g,g.addedToIsland=!0))}while(0!=E);for(var A=(new n.Vec3).addTime(this.gravity,this.timeStep),k=S;k--;)a=this.islandRigidBodies[k],a.isDynamic&&a.linearVelocity.addEqual(A);if(this.enableRandomizer)for(k=C;k--;)if(0!==k){var O=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*k|0;x=this.islandConstraints[k],this.islandConstraints[k]=this.islandConstraints[O],this.islandConstraints[O]=x}for(k=C;k--;)this.islandConstraints[k].preSolve(this.timeStep,_);for(var N=this.numIterations;N--;)for(k=C;k--;)this.islandConstraints[k].solve();for(k=C;k--;)this.islandConstraints[k].postSolve(),this.islandConstraints[k]=null;var D=10;for(k=S;k--;)a=this.islandRigidBodies[k],this.calSleep(a)?(a.sleepTime+=this.timeStep,a.sleepTime<D&&(D=a.sleepTime)):(a.sleepTime=0,D=0);if(D>.5)for(k=S;k--;)this.islandRigidBodies[k].sleep(),this.islandRigidBodies[k]=null;else for(k=S;k--;)this.islandRigidBodies[k].updatePosition(this.timeStep),this.islandRigidBodies[k]=null;this.numIslands++}o&&(i=n.now(),this.performance.solvingTime=i-e,i=n.now(),this.performance.upfps(),this.performance.totalTime=i-t)},addContact:function(t,e){var i;null!==this.unusedContacts?(i=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):i=new n.Contact,i.attach(t,e),i.detector=this.detectors[t.type][e.type],this.contacts&&((this.contacts.prev=i).next=this.contacts),this.contacts=i,this.numContacts++},removeContact:function(t){var e=t.prev,i=t.next;i&&(i.prev=e),e&&(e.next=i),this.contacts==t&&(this.contacts=i),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},checkContact:function(t,e){for(var i,n,r=this.contacts;null!==r;){if(i=r.body1.name||" ",n=r.body2.name||" ",i==t&&n==e||n==t&&i==e)return r.touching?!0:!1;r=r.next}return!1},calSleep:function(t){return t.allowSleep?t.linearVelocity.lengthSq()>.04?!1:t.angularVelocity.lengthSq()>.25?!1:!0:!1}},n.RigidBody=function(t,e,i,r,o,a,s){this.name=" ",this.MAX_SHAPES=64,this.prev=null,this.next=null,this.type=n.BODY_NULL,this.massInfo=new n.MassInfo,this.position=new n.Vec3(t,e,i),this.orientation=this.rotationAxisToQuad(r||0,o||0,a||0,s||0),this.newPosition=new n.Vec3,this.controlPos=!1,this.newOrientation=new n.Quat,this.newRotation=new n.Vec3,this.currentRotation=new n.Vec3,this.controlRot=!1,this.controlRotInTime=!1,this.linearVelocity=new n.Vec3,this.angularVelocity=new n.Vec3,this.matrix=new n.Mat44,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new n.Vec3,this.sleepOrientation=new n.Quat,this.isStatic=!1,this.isDynamic=!1,this.rotation=new n.Mat33,this.mass=NaN,this.inverseMass=NaN,this.inverseInertia=new n.Mat33,this.localInertia=new n.Mat33,this.inverseLocalInertia=new n.Mat33,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1},n.RigidBody.prototype={constructor:n.RigidBody,addShape:function(t){t.parent&&n.Error("RigidBody","It is not possible that you add to the multi-rigid body the shape of one"),null!=this.shapes&&((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&&this.parent.addShape(t),this.numShapes++},removeShape:function(t){var e=t;if(e.parent==this){var i=e.prev,n=e.next;null!=i&&(i.next=n),null!=n&&(n.prev=i),this.shapes==e&&(this.shapes=n),e.prev=null,e.next=null,e.parent=null,this.parent&&this.parent.removeShape(e),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,e){var i=void 0!==e?e:!0;this.type=t||n.BODY_DYNAMIC,this.isDynamic=this.type==n.BODY_DYNAMIC,this.isStatic=this.type==n.BODY_STATIC,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var r=this.localInertia.elements,o=new n.Mat33,a=new n.Vec3,s=this.shapes;null!=s;s=s.next){s.calculateMassInfo(this.massInfo);var u=this.massInfo.mass,l=s.relativePosition.x,h=s.relativePosition.y,c=s.relativePosition.z;a.addScale(s.relativePosition,u),this.mass+=u,this.rotateInertia(s.relativeRotation,this.massInfo.inertia,o),this.localInertia.addEqual(o),r[0]+=u*(h*h+c*c),r[4]+=u*(l*l+c*c),r[8]+=u*(l*l+h*h);var p=u*l*h,d=u*h*c,f=u*c*l;r[1]-=p,r[3]-=p,r[2]-=d,r[6]-=d,r[5]-=f,r[7]-=f}if(this.inverseMass=1/this.mass,a.scaleEqual(this.inverseMass),i){for(this.position.addEqual(a),s=this.shapes;null!=s;s=s.next)s.relativePosition.subEqual(a);l=a.x,h=a.y,c=a.z,r[0]-=this.mass*(h*h+c*c),r[4]-=this.mass*(l*l+c*c),r[8]-=this.mass*(l*l+h*h),p=this.mass*l*h,d=this.mass*h*c,f=this.mass*c*l,r[1]+=p,r[3]+=p,r[2]+=d,r[6]+=d,r[5]+=f,r[7]+=f}this.inverseLocalInertia.invert(this.localInertia),this.type==n.BODY_STATIC&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&&this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;null!=t;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var e=this.jointLink;null!=e;)e.body.sleepTime=0,e.body.sleeping=!1,e=e.next;for(var i=this.shapes;null!=i;i=i.next)i.updateProxy()}},sleep:function(){if(this.allowSleep&&!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;null!=t;t=t.next)t.updateProxy()}},isLonely:function(){return 0==this.numJoints&&0==this.numContacts},updatePosition:function(t){switch(this.type){case n.BODY_STATIC:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case n.BODY_DYNAMIC:this.controlPos&&(this.angularVelocity.set(0,0,0),this.linearVelocity.set(0,0,0),this.linearVelocity.x=(this.newPosition.x-this.position.x)/t,this.linearVelocity.y=(this.newPosition.y-this.position.y)/t,this.linearVelocity.z=(this.newPosition.z-this.position.z)/t,this.controlPos=!1),this.controlRot&&(this.angularVelocity.set(0,0,0),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addTime(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t);break;default:n.Error("RigidBody","Invalid type.")}this.syncShapes()},rotateInertia:function(t,e,i){var n=t.elements,r=e.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],h=n[7],c=n[2],p=n[5],d=n[8],f=r[0],m=r[3],y=r[6],v=r[1],g=r[4],b=r[7],x=r[2],_=r[5],w=r[8],M=o*f+u*m+c*y,S=o*v+u*g+c*b,C=o*x+u*_+c*w,E=a*f+l*m+p*y,T=a*v+l*g+p*b,P=a*x+l*_+p*w,A=s*f+h*m+d*y,k=s*v+h*g+d*b,O=s*x+h*_+d*w,N=i.elements;N[0]=M*o+S*u+C*c,N[1]=M*a+S*l+C*p,N[2]=M*s+S*h+C*d,N[3]=E*o+T*u+P*c,N[4]=E*a+T*l+P*p,N[5]=E*s+T*h+P*d,N[6]=A*o+k*u+O*c,N[7]=A*a+k*l+O*p,N[8]=A*s+k*h+O*d},syncShapes:function(){var t=this.orientation.s,e=this.orientation.x,i=this.orientation.y,n=this.orientation.z,r=2*e,o=2*i,a=2*n,s=e*r,u=i*o,l=n*a,h=e*o,c=i*a,p=e*a,d=t*r,f=t*o,m=t*a,y=this.rotation.elements;y[0]=1-u-l,y[1]=h-m,y[2]=p+f,y[3]=h+m,y[4]=1-s-l,y[5]=c-d,y[6]=p-f,y[7]=c+d,y[8]=1-s-u,this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var v=this.shapes;null!=v;v=v.next)v.position.mul(this.position,v.relativePosition,this.rotation),v.rotation.mul(this.rotation,v.relativeRotation),v.updateProxy()},applyImpulse:function(t,e){this.linearVelocity.addScale(e,this.inverseMass);var i=new n.Vec3;i.sub(t,this.position).cross(i,e).mulMat(this.inverseInertia,i),this.angularVelocity.addEqual(i)},rotationVectToQuad:function(t){var e=n.EulerToAxis(t.x*n.degtorad,t.y*n.degtorad,t.z*n.degtorad);return this.rotationAxisToQuad(e[0],e[1],e[2],e[3])},rotationAxisToQuad:function(t,e,i,r){var o=e*e+i*i+r*r;o>0&&(o=1/n.sqrt(o),e*=o,i*=o,r*=o);var a=n.sin(.5*t),s=n.cos(.5*t);return new n.Quat(s,a*e,a*i,a*r)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(n.INV_SCALE),this.controlPos=!0},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0},setRotation:function(t){this.newOrientation=this.rotationVectToQuad(t),this.controlRot=!0},resetPosition:function(t,e,i){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,e,i).multiplyScalar(n.INV_SCALE),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new n.Quat(t.w,t.x,t.y,t.z),this.awake()},resetRotation:function(t,e,i){this.angularVelocity.set(0,0,0),this.orientation=this.rotationVectToQuad(new n.Vec3(t,e,i)),this.awake()},getPosition:function(){return(new n.Vec3).scale(this.position,n.WORLD_SCALE)},getRotation:function(){return(new n.Euler).setFromRotationMatrix(this.rotation)},getQuaternion:function(){return(new n.Quaternion).setFromRotationMatrix(this.rotation)},getMatrix:function(){var t,e,i=this.matrix.elements;return this.sleeping?i[15]=1:(t=this.rotation.elements,i[0]=t[0],i[1]=t[3],i[2]=t[6],i[3]=0,i[4]=t[1],i[5]=t[4],i[6]=t[7],i[7]=0,i[8]=t[2],i[9]=t[5],i[10]=t[8],i[11]=0,e=this.position,i[12]=e.x*n.WORLD_SCALE,i[13]=e.y*n.WORLD_SCALE,i[14]=e.z*n.WORLD_SCALE,i[15]=0),i}},n.Body=function(t){var e=t||{};e.world&&(void 0===e.type&&(e.type="box"),this.name=e.name||"",this.body=e.world.add(e))},n.Body.prototype={constructor:n.Body,setPosition:function(t){this.body.setPosition(t)},setQuaternion:function(t){this.body.setQuaternion(t)},setRotation:function(t){this.body.setRotation(t)},getPosition:function(){return this.body.getPosition()},getRotation:function(){return this.body.getRotation()},getQuaternion:function(){return this.body.getQuaternion()},getMatrix:function(){return this.body.getMatrix()},getSleep:function(){return this.body.sleeping},resetPosition:function(t,e,i){this.body.resetPosition(t,e,i)},resetRotation:function(t,e,i){this.body.resetRotation(t,e,i)},awake:function(){this.body.awake()},remove:function(){this.body.dispose()},checkContact:function(t){this.body.checkContact(t)}},n.Link=function(t){var e=t||{};e.world&&(void 0===e.type&&(e.type="jointHinge"),this.name=e.name||"",this.joint=e.world.add(e))},n.Link.prototype={constructor:n.Link,getPosition:function(){return this.joint.getPosition()},getMatrix:function(){return this.joint.getMatrix()},remove:function(){this.joint.dispose()},awake:function(){this.joint.awake()}},n.Dictionary=function(){this.data={},this.keys=[]},n.Dictionary.prototype={constructor:n.Dictionary,set:function(t){var e=t.id;this.get[e]||this.keys.push(e),
this.data[e]=t},get:function(t){return this.data[t]},del:function(t){var e=this.keys,i=e.indexOf(t.id);i>-1&&(delete this.data[e[i]],e.splice(i,1))},reset:function(){for(var t,e=this.data,i=this.keys;i.length>0;)t=i.pop(),delete e[t]}},n.Performance=function(t){this.parent=t,this.infos=new i(13),this.f=[0,0,0],this.types=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhase=this.types[this.parent.broadPhase.types],this.version=n.REVISION,this.fps=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0},n.Performance.prototype={upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},updatingTime:function(){return n.fix(this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime))},show:function(){var t=["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconde<br><br>","broad-phase &nbsp;"+n.fix(this.broadPhaseTime)+"<br>","narrow-phase "+n.fix(this.narrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+n.fix(this.solvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+n.fix(this.totalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;&nbsp;"+this.updatingTime()+"<br>"].join("\n");return t},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updatingTime(),this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}},n.Mat44=function(t,e,n,r,o,a,s,u,l,h,c,p,d,f,m,y){this.elements=new i(16);var v=this.elements;v[0]=void 0!==t?t:1,v[4]=e||0,v[8]=n||0,v[12]=r||0,v[1]=o||0,v[5]=void 0!==a?a:1,v[9]=s||0,v[13]=u||0,v[2]=l||0,v[6]=h||0,v[10]=void 0!==c?c:1,v[14]=p||0,v[3]=d||0,v[7]=f||0,v[11]=m||0,v[15]=void 0!==y?y:1},n.Mat44.prototype={constructor:n.Mat44,set:function(t,e,i,n,r,o,a,s,u,l,h,c,p,d,f,m){var y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=n,y[1]=r,y[5]=o,y[9]=a,y[13]=s,y[2]=u,y[6]=l,y[10]=h,y[14]=c,y[3]=p,y[7]=d,y[11]=f,y[15]=m,this}},n.Mat33=function(t,e,n,r,o,a,s,u,l){this.elements=new i(9);this.elements;this.init(void 0!==t?t:1,e||0,n||0,r||0,void 0!==o?o:1,a||0,s||0,u||0,void 0!==l?l:1)},n.Mat33.prototype={constructor:n.Mat33,set:function(t,e,i,n,r,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=e,l[2]=i,l[3]=n,l[4]=r,l[5]=o,l[6]=a,l[7]=s,l[8]=u,this},init:function(t,e,i,n,r,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=e,l[2]=i,l[3]=n,l[4]=r,l[5]=o,l[6]=a,l[7]=s,l[8]=u,this},multiply:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},add:function(t,e){var i=this.elements,n=t.elements,r=e.elements;return i[0]=n[0]+r[0],i[1]=n[1]+r[1],i[2]=n[2]+r[2],i[3]=n[3]+r[3],i[4]=n[4]+r[4],i[5]=n[5]+r[5],i[6]=n[6]+r[6],i[7]=n[7]+r[7],i[8]=n[8]+r[8],this},addEqual:function(t){var e=this.elements,i=t.elements;return e[0]+=i[0],e[1]+=i[1],e[2]+=i[2],e[3]+=i[3],e[4]+=i[4],e[5]+=i[5],e[6]+=i[6],e[7]+=i[7],e[8]+=i[8],this},sub:function(t,e){var i=this.elements,n=t.elements,r=e.elements;return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],i[3]=n[3]-r[3],i[4]=n[4]-r[4],i[5]=n[5]-r[5],i[6]=n[6]-r[6],i[7]=n[7]-r[7],i[8]=n[8]-r[8],this},subEqual:function(t){var e=this.elements,i=t.elements;return e[0]-=i[0],e[1]-=i[1],e[2]-=i[2],e[3]-=i[3],e[4]-=i[4],e[5]-=i[5],e[6]-=i[6],e[7]-=i[7],e[8]-=i[8],this},scale:function(t,e){var i=this.elements,n=t.elements;return i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e,i[4]=n[4]*e,i[5]=n[5]*e,i[6]=n[6]*e,i[7]=n[7]*e,i[8]=n[8]*e,this},scaleEqual:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},mul:function(t,e){var i=this.elements,n=t.elements,r=e.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],h=n[7],c=n[2],p=n[5],d=n[8],f=r[0],m=r[3],y=r[6],v=r[1],g=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*f+u*m+c*y,i[1]=o*v+u*g+c*b,i[2]=o*x+u*_+c*w,i[3]=a*f+l*m+p*y,i[4]=a*v+l*g+p*b,i[5]=a*x+l*_+p*w,i[6]=s*f+h*m+d*y,i[7]=s*v+h*g+d*b,i[8]=s*x+h*_+d*w,this},mulScale:function(t,e,i,n,r){var o=r||!1,a=this.elements,s=t.elements;return o?(a[0]=e*s[0],a[1]=e*s[1],a[2]=e*s[2],a[3]=i*s[3],a[4]=i*s[4],a[5]=i*s[5],a[6]=n*s[6],a[7]=n*s[7],a[8]=n*s[8]):(a[0]=s[0]*e,a[1]=s[1]*i,a[2]=s[2]*n,a[3]=s[3]*e,a[4]=s[4]*i,a[5]=s[5]*n,a[6]=s[6]*e,a[7]=s[7]*i,a[8]=s[8]*n),this},mulRotate:function(t,e,i,r,o,a){var s=a||!1,u=n.sin(e),l=n.cos(e),h=1-l,c=i*i*h+l,p=i*r*h-o*u,d=i*o*h+r*u,f=r*i*h+o*u,m=r*r*h+l,y=r*o*h-i*u,v=o*i*h-r*u,g=o*r*h+i*u,b=o*o*h+l,x=t.elements,_=x[0],w=x[3],M=x[6],S=x[1],C=x[4],E=x[7],T=x[2],P=x[5],A=x[8],k=this.elements;return s?(k[0]=c*_+p*w+d*M,k[1]=c*S+p*C+d*E,k[2]=c*T+p*P+d*A,k[3]=f*_+m*w+y*M,k[4]=f*S+m*C+y*E,k[5]=f*T+m*P+y*A,k[6]=v*_+g*w+b*M,k[7]=v*S+g*C+b*E,k[8]=v*T+g*P+b*A):(k[0]=_*c+S*f+T*v,k[1]=_*p+S*m+T*g,k[2]=_*d+S*y+T*b,k[3]=w*c+C*f+P*v,k[4]=w*p+C*m+P*g,k[5]=w*d+C*y+P*b,k[6]=M*c+E*f+A*v,k[7]=M*p+E*m+A*g,k[8]=M*d+E*y+A*b),this},transpose:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this},setQuat:function(t){var e=this.elements,i=2*t.x,n=2*t.y,r=2*t.z,o=t.x*i,a=t.y*n,s=t.z*r,u=t.x*n,l=t.y*r,h=t.x*r,c=t.s*i,p=t.s*n,d=t.s*r;return e[0]=1-a-s,e[1]=u-d,e[2]=h+p,e[3]=u+d,e[4]=1-o-s,e[5]=l-c,e[6]=h-p,e[7]=l+c,e[8]=1-o-a,this},invert:function(t){var e=this.elements,i=t.elements,n=i[0],r=i[3],o=i[6],a=i[1],s=i[4],u=i[7],l=i[2],h=i[5],c=i[8],p=s*c-u*h,d=u*l-a*c,f=a*h-s*l,m=n*p+r*d+o*f;return 0!=m&&(m=1/m),e[0]=m*p,e[1]=m*d,e[2]=m*f,e[3]=m*(h*o-r*c),e[4]=m*(n*c-l*o),e[5]=m*(l*r-n*h),e[6]=m*(r*u-s*o),e[7]=m*(a*o-n*u),e[8]=m*(n*s-a*r),this},toEuler:function(){function t(t){return n.min(n.max(t,-1),1)}var e=this.elements,i=e[0],r=e[3],o=e[6],a=(e[1],e[4]),s=e[7],u=(e[2],e[5]),l=e[8],h=new n.Vec3;new n.Quat;return h.y=n.asin(t(o)),n.abs(o)<.99999?(h.x=n.atan2(-s,l),h.z=n.atan2(-r,i)):(h.x=n.atan2(u,a),h.z=0),h},toString:function(){var t=this.elements,e="Mat33|"+t[0].toFixed(4)+", "+t[1].toFixed(4)+", "+t[2].toFixed(4)+"|\n     |"+t[3].toFixed(4)+", "+t[4].toFixed(4)+", "+t[5].toFixed(4)+"|\n     |"+t[6].toFixed(4)+", "+t[7].toFixed(4)+", "+t[8].toFixed(4)+"|";return e},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}},n.Quat=function(t,e,i,n){this.s=void 0!==t?t:1,this.x=e||0,this.y=i||0,this.z=n||0},n.Quat.prototype={constructor:n.Quat,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.s=n,this},init:function(t,e,i,n){return this.s=void 0!==t?t:1,this.x=e||0,this.y=i||0,this.z=n||0,this},add:function(t,e){return this.s=t.s+e.s,this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addTime:function(t,e){var i=t.x,r=t.y,o=t.z,a=this.s,s=this.x,u=this.y,l=this.z;e*=.5;var h=(-i*s-r*u-o*l)*e,c=(i*a+r*l-o*u)*e,p=(-i*l+r*a+o*s)*e,d=(i*u-r*s+o*a)*e;a+=h,s+=c,u+=p,l+=d;var f=1/n.sqrt(a*a+s*s+u*u+l*l);return this.s=a*f,this.x=s*f,this.y=u*f,this.z=l*f,this},sub:function(t,e){return this.s=t.s-e.s,this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},scale:function(t,e){return this.s=t.s*e,this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},mul:function(t,e){var i=t.x,n=t.y,r=t.z,o=t.s,a=e.x,s=e.y,u=e.z,l=e.s;return this.x=i*l+o*a+n*u-r*s,this.y=n*l+o*s+r*a-i*u,this.z=r*l+o*u+i*s-n*a,this.s=o*l-i*a-n*s-r*u,this},arc:function(t,e){var i=t.x,r=t.y,o=t.z,a=e.x,s=e.y,u=e.z,l=i*a+r*s+o*u;if(-1==l)return a=r*i-o*o,s=-o*r-i*i,u=i*o+r*r,l=1/n.sqrt(a*a+s*s+u*u),this.s=0,this.x=a*l,this.y=s*l,this.z=u*l,this;var h=r*u-o*s,c=o*a-i*u,p=i*s-r*a;return this.s=n.sqrt(.5*(1+l)),l=.5/this.s,this.x=h*l,this.y=c*l,this.z=p*l,this},normalize:function(t){var e=n.sqrt(t.s*t.s+t.x*t.x+t.y*t.y+t.z*t.z);return e>0&&(e=1/e),this.s=t.s*e,this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},invert:function(t){return this.s=t.s,this.x=-t.x,this.y=-t.y,this.z=-t.z,this},length:function(){return n.sqrt(this.s*this.s+this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.s=t.s,this.x=t.x,this.y=t.y,this.z=t.z,this},testDiff:function(t){return this.s!==t.s||this.x!==t.x||this.y!==t.y||this.z!==t.z?!0:!1},clone:function(t){return new n.Quat(this.s,this.x,this.y,this.z)},toString:function(){return"Quat["+this.s.toFixed(4)+", ("+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+")]"}},n.Quaternion=function(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1},n.Quaternion.prototype={constructor:n.Quaternion,setFromRotationMatrix:function(t){var e,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],u=i[4],l=i[5],h=i[6],c=i[7],p=i[8],d=r+u+p;return d>0?(e=.5/n.sqrt(d+1),this.w=.25/e,this.x=(c-l)*e,this.y=(a-h)*e,this.z=(s-o)*e):r>u&&r>p?(e=2*n.sqrt(1+r-u-p),this.w=(c-l)/e,this.x=.25*e,this.y=(o+s)/e,this.z=(a+h)/e):u>p?(e=2*n.sqrt(1+u-r-p),this.w=(a-h)/e,this.x=(o+s)/e,this.y=.25*e,this.z=(l+c)/e):(e=2*n.sqrt(1+p-r-u),this.w=(s-o)/e,this.x=(a+h)/e,this.y=(l+c)/e,this.z=.25*e),this}},n.Vec3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},n.Vec3.prototype={constructor:n.Vec3,init:function(t,e,i){return this.x=t||0,this.y=e||0,this.z=i||0,this},set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},add:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addTime:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},scale:function(t,e){return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},cross:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this},mul:function(t,e,i){var n=i.elements;return this.x=t.x+e.x*n[0]+e.y*n[1]+e.z*n[2],this.y=t.y+e.x*n[3]+e.y*n[4]+e.z*n[5],this.z=t.z+e.x*n[6]+e.y*n[7]+e.z*n[8],this},mulMat:function(t,e){var i=t.elements;return this.x=i[0]*e.x+i[1]*e.y+i[2]*e.z,this.y=i[3]*e.x+i[4]*e.y+i[5]*e.z,this.z=i[6]*e.x+i[7]*e.y+i[8]*e.z,this},normalize:function(t){var e=t.x,i=t.y,r=t.z,o=e*e+i*i+r*r;return o>0&&(o=1/n.sqrt(o),this.x=e*o,this.y=i*o,this.z=r*o),this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return n.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,a=t.z,s=t.s,u=s*e+o*n-a*i,l=s*i+a*e-r*n,h=s*n+r*i-o*e,c=-r*e-o*i-a*n;return this.x=u*s+c*-r+l*-a-h*-o,this.y=l*s+c*-o+h*-r-u*-a,this.z=h*s+c*-a+u*-o-l*-r,this},testZero:function(){return 0!==this.x||0!==this.y||0!==this.z?!0:!1},testDiff:function(t){return t.x!==this.x||t.y!==this.y||t.z!==this.z},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},norm:function(){return this.divideScalar(this.length())}},n.Euler=function(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._order=r||n.Euler.DefaultOrder},n.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n.Euler.DefaultOrder="XYZ",n.clamp=function(t,e,i){return e>t?e:t>i?i:t},n.Euler.prototype={constructor:n.Euler,_x:0,_y:0,_z:0,_order:n.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e){var i=n.clamp,r=t.elements,o=r[0],a=r[1],s=r[2],u=r[3],l=r[4],h=r[5],c=r[6],p=r[7],d=r[8];return e=e||this._order,"XYZ"===e?(this._y=n.asin(i(s,-1,1)),n.abs(s)<.99999?(this._x=n.atan2(-h,d),this._z=n.atan2(-a,o)):(this._x=n.atan2(p,l),this._z=0)):"YXZ"===e?(this._x=n.asin(-i(h,-1,1)),n.abs(h)<.99999?(this._y=n.atan2(s,d),this._z=n.atan2(u,l)):(this._y=n.atan2(-c,o),this._z=0)):"ZXY"===e?(this._x=n.asin(i(p,-1,1)),n.abs(p)<.99999?(this._y=n.atan2(-c,d),this._z=n.atan2(-a,l)):(this._y=0,this._z=n.atan2(u,o))):"ZYX"===e?(this._y=n.asin(-i(c,-1,1)),n.abs(c)<.99999?(this._x=n.atan2(p,d),this._z=n.atan2(u,o)):(this._x=0,this._z=n.atan2(-a,l))):"YZX"===e?(this._z=n.asin(i(u,-1,1)),n.abs(u)<.99999?(this._x=n.atan2(-h,l),this._y=n.atan2(-c,o)):(this._x=0,this._y=n.atan2(s,d))):"XZY"===e?(this._z=n.asin(-i(a,-1,1)),n.abs(a)<.99999?(this._x=n.atan2(p,l),this._y=n.atan2(s,o)):(this._x=n.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,this.onChangeCallback(),this},setFromQuaternion:function(t,e,i){var r=n.clamp,o=t.x*t.x,a=t.y*t.y,s=t.z*t.z,u=t.s*t.s;return e=e||this._order,"XYZ"===e?(this._x=n.atan2(2*(t.x*t.s-t.y*t.z),u-o-a+s),this._y=n.asin(r(2*(t.x*t.z+t.y*t.s),-1,1)),this._z=n.atan2(2*(t.z*t.s-t.x*t.y),u+o-a-s)):"YXZ"===e?(this._x=n.asin(r(2*(t.x*t.s-t.y*t.z),-1,1)),this._y=n.atan2(2*(t.x*t.z+t.y*t.s),u-o-a+s),this._z=n.atan2(2*(t.x*t.y+t.z*t.s),u-o+a-s)):"ZXY"===e?(this._x=n.asin(r(2*(t.x*t.s+t.y*t.z),-1,1)),this._y=n.atan2(2*(t.y*t.s-t.z*t.x),u-o-a+s),this._z=n.atan2(2*(t.z*t.s-t.x*t.y),u-o+a-s)):"ZYX"===e?(this._x=n.atan2(2*(t.x*t.s+t.z*t.y),u-o-a+s),this._y=n.asin(r(2*(t.y*t.s-t.x*t.z),-1,1)),this._z=n.atan2(2*(t.x*t.y+t.z*t.s),u+o-a-s)):"YZX"===e?(this._x=n.atan2(2*(t.x*t.s-t.z*t.y),u-o+a-s),this._y=n.atan2(2*(t.y*t.s-t.x*t.z),u+o-a-s),this._z=n.asin(r(2*(t.x*t.y+t.z*t.s),-1,1))):"XZY"===e?(this._x=n.atan2(2*(t.x*t.s+t.y*t.z),u-o+a-s),this._y=n.atan2(2*(t.x*t.z+t.y*t.s),u+o-a-s),this._z=n.asin(r(2*(t.z*t.s-t.x*t.y),-1,1))):console.warn("OIMO.Euler: .setFromQuaternion() given unsupported order: "+e),this._order=e,i!==!1&&this.onChangeCallback(),this},reorder:function(){var t=new n.Quat;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new n.Euler(this._x,this._y,this._z,this._order)}},n.EulerToAxis=function(t,e,i){var r=n.cos(.5*e),o=n.sin(.5*e),a=n.cos(.5*i),s=n.sin(.5*i),u=n.cos(.5*t),l=n.sin(.5*t),h=r*a,c=o*s,p=h*u-c*l,d=h*l+c*u,f=o*a*u+r*s*l,m=r*s*u-o*a*l,y=2*n.acos(p),v=d*d+f*f+m*m;return.001>v?(d=1,f=m=0):(v=n.sqrt(v),d/=v,f/=v,m/=v),[y,d,f,m]},n.EulerToMatrix=function(t,e,i){var r=n.cos(e),o=n.sin(e),a=n.cos(i),s=n.sin(i),u=n.cos(t),l=n.sin(t),h=new n.Mat33,c=h.elements;return c[0]=r*a,c[1]=o*l-r*s*u,c[2]=r*s*l+o*u,c[3]=s,c[4]=a*u,c[5]=-a*l,c[6]=-o*a,c[7]=o*s*u+r*l,c[8]=-o*s*l+r*u,h},n.MatrixToEuler=function(t){var e,i,r,o=t.elements;return o[3]>.998?(i=n.atan2(o[2],o[8]),r=n.PI/2,e=0):o[3]<-.998?(i=n.atan2(o[2],o[8]),r=-n.PI/2,e=0):(i=n.atan2(-o[6],o[0]),e=n.atan2(-o[5],o[4]),r=n.asin(o[3])),[e,i,r]},n.unwrapDegrees=function(t){return t%=360,t>180&&(t-=360),-180>t&&(t+=360),t},n.unwrapRadian=function(t){return t%=n.TwoPI,t>n.PI&&(t-=n.TwoPI),t<-n.PI&&(t+=n.TwoPI),t},n.Distance3d=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n.sqrt(i*i+r*r+o*o)},n.Constraint=function(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1},n.Constraint.prototype={constructor:n.Constraint,preSolve:function(t,e){n.Error("Constraint","Inheritance error.")},solve:function(){n.Error("Constraint","Inheritance error.")},postSolve:function(){n.Error("Constraint","Inheritance error.")}},n.Joint=function(t){n.Constraint.call(this),this.name="",this.type=n.JOINT_NULL,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=(new n.Vec3).copy(t.localAnchorPoint1),this.localAnchorPoint2=(new n.Vec3).copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new n.Vec3,this.relativeAnchorPoint2=new n.Vec3,this.anchorPoint1=new n.Vec3,this.anchorPoint2=new n.Vec3,this.allowCollision=t.allowCollision,this.b1Link=new n.JointLink(this),this.b2Link=new n.JointLink(this),this.matrix=new n.Mat44},n.Joint.prototype=Object.create(n.Constraint.prototype),n.Joint.prototype.constructor=n.Joint,n.Joint.prototype.updateAnchorPoints=function(){this.relativeAnchorPoint1.mulMat(this.body1.rotation,this.localAnchorPoint1),this.relativeAnchorPoint2.mulMat(this.body2.rotation,this.localAnchorPoint2),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},n.Joint.prototype.attach=function(){this.b1Link.body=this.body2,this.b2Link.body=this.body1,null!=this.body1.jointLink?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,null!=this.body2.jointLink?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++},n.Joint.prototype.detach=function(){var t=this.b1Link.prev,e=this.b1Link.next;null!=t&&(t.next=e),null!=e&&(e.prev=t),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,t=this.b2Link.prev,e=this.b2Link.next,null!=t&&(t.next=e),null!=e&&(e.prev=t),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--,this.b1Link.body=null,this.b2Link.body=null},n.Joint.prototype.awake=function(){this.body1.awake(),this.body2.awake()},n.Joint.prototype.preSolve=function(t,e){},n.Joint.prototype.solve=function(){},n.Joint.prototype.postSolve=function(){},n.Joint.prototype.remove=function(){this.dispose()},n.Joint.prototype.dispose=function(){this.parent.removeJoint(this)},n.Joint.prototype.getPosition=function(){var t=(new n.Vec3).scale(this.anchorPoint1,n.WORLD_SCALE),e=(new n.Vec3).scale(this.anchorPoint2,n.WORLD_SCALE);return[t,e]},n.Joint.prototype.getMatrix=function(){var t=this.matrix.elements,e=this.anchorPoint1,i=this.anchorPoint2;return t[0]=e.x*n.WORLD_SCALE,t[1]=e.y*n.WORLD_SCALE,t[2]=e.z*n.WORLD_SCALE,t[3]=0,t[4]=i.x*n.WORLD_SCALE,t[5]=i.y*n.WORLD_SCALE,t[6]=i.z*n.WORLD_SCALE,t[7]=0,t},n.JointConfig=function(){this.body1=null,this.body2=null,this.localAnchorPoint1=new n.Vec3,this.localAnchorPoint2=new n.Vec3,this.localAxis1=new n.Vec3,this.localAxis2=new n.Vec3,this.allowCollision=!1},n.JointLink=function(t){this.prev=null,this.next=null,this.body=null,this.joint=t},n.LimitMotor=function(t,e){e=e||!1,this.axis=t,this.angle=0,this.lowerLimit=e?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0},n.LimitMotor.prototype={constructor:n.LimitMotor,setLimit:function(t,e){this.lowerLimit=t,this.upperLimit=e},setMotor:function(t,e){this.motorSpeed=t,this.maxMotorForce=e},setSpring:function(t,e){this.frequency=t,this.dampingRatio=e}},n.BallAndSocketJoint=function(t){n.Joint.call(this,t),this.type=n.JOINT_BALL_AND_SOCKET,this.lc=new n.LinearConstraint(this)},n.BallAndSocketJoint.prototype=Object.create(n.Joint.prototype),n.BallAndSocketJoint.prototype.constructor=n.BallAndSocketJoint,n.BallAndSocketJoint.prototype.preSolve=function(t,e){this.updateAnchorPoints(),this.lc.preSolve(t,e)},n.BallAndSocketJoint.prototype.solve=function(){this.lc.solve()},n.BallAndSocketJoint.prototype.postSolve=function(){},n.DistanceJoint=function(t,e,i){n.Joint.call(this,t),this.type=n.JOINT_DISTANCE,this.normal=new n.Vec3,this.nr=new n.Vec3,this.limitMotor=new n.LimitMotor(this.normal,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=i,this.t=new n.TranslationalConstraint(this,this.limitMotor)},n.DistanceJoint.prototype=Object.create(n.Joint.prototype),n.DistanceJoint.prototype.constructor=n.DistanceJoint,n.DistanceJoint.prototype.preSolve=function(t,e){this.updateAnchorPoints(),this.nr.sub(this.anchorPoint2,this.anchorPoint1),this.normal.normalize(this.nr),this.t.preSolve(t,e)},n.DistanceJoint.prototype.solve=function(){this.t.solve()},n.DistanceJoint.prototype.postSolve=function(){},n.HingeJoint=function(t,e,i){n.Joint.call(this,t),this.type=n.JOINT_HINGE,this.localAxis1=t.localAxis1.clone().norm(),this.localAxis2=t.localAxis2.clone().norm(),this.localAngle1=new n.Vec3(this.localAxis1.y*this.localAxis1.x-this.localAxis1.z*this.localAxis1.z,-this.localAxis1.z*this.localAxis1.y-this.localAxis1.x*this.localAxis1.x,this.localAxis1.x*this.localAxis1.z+this.localAxis1.y*this.localAxis1.y).norm();var r=(new n.Mat33).setQuat((new n.Quat).arc(this.localAxis1,this.localAxis2));this.localAngle2=(new n.Vec3).mulMat(r,this.localAngle1),this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.ax1=new n.Vec3,this.ax2=new n.Vec3,this.an1=new n.Vec3,this.an2=new n.Vec3,this.limitMotor=new n.LimitMotor(this.nor,!1),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=i,this.lc=new n.LinearConstraint(this),this.r3=new n.Rotational3Constraint(this,this.limitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0))},n.HingeJoint.prototype=Object.create(n.Joint.prototype),n.HingeJoint.prototype.constructor=n.HingeJoint,n.HingeJoint.prototype.preSolve=function(t,e){var i,n,r,o;this.updateAnchorPoints(),this.ax1.mulMat(this.body1.rotation,this.localAxis1),this.ax2.mulMat(this.body2.rotation,this.localAxis2),this.an1.mulMat(this.body1.rotation,this.localAngle1),this.an2.mulMat(this.body2.rotation,this.localAngle2),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).norm(),this.tan.set(this.nor.y*this.nor.x-this.nor.z*this.nor.z,-this.nor.z*this.nor.y-this.nor.x*this.nor.x,this.nor.x*this.nor.z+this.nor.y*this.nor.y).norm(),this.bin.set(this.nor.y*this.tan.z-this.nor.z*this.tan.y,this.nor.z*this.tan.x-this.nor.x*this.tan.z,this.nor.x*this.tan.y-this.nor.y*this.tan.x),o=this.acosClamp(this.an1.x*this.an2.x+this.an1.y*this.an2.y+this.an1.z*this.an2.z),this.nor.x*(this.an1.y*this.an2.z-this.an1.z*this.an2.y)+this.nor.y*(this.an1.z*this.an2.x-this.an1.x*this.an2.z)+this.nor.z*(this.an1.x*this.an2.y-this.an1.y*this.an2.x)<0?this.limitMotor.angle=-o:this.limitMotor.angle=o,i=this.ax1.y*this.ax2.z-this.ax1.z*this.ax2.y,n=this.ax1.z*this.ax2.x-this.ax1.x*this.ax2.z,r=this.ax1.x*this.ax2.y-this.ax1.y*this.ax2.x,this.r3.limitMotor2.angle=this.tan.x*i+this.tan.y*n+this.tan.z*r,this.r3.limitMotor3.angle=this.bin.x*i+this.bin.y*n+this.bin.z*r,this.r3.preSolve(t,e),this.lc.preSolve(t,e)},n.HingeJoint.prototype.solve=function(){this.r3.solve(),this.lc.solve()},n.HingeJoint.prototype.postSolve=function(){},n.HingeJoint.prototype.acosClamp=function(t){return t>1?0:-1>t?n.PI:n.acos(t)},n.PrismaticJoint=function(t,e,i){n.Joint.call(this,t),this.type=n.JOINT_PRISMATIC,this.localAxis1=(new n.Vec3).normalize(t.localAxis1),this.localAxis2=(new n.Vec3).normalize(t.localAxis2),this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z,this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.ac=new n.AngularConstraint(this,(new n.Quat).arc(this.localAxis1,this.localAxis2)),this.limitMotor=new n.LimitMotor(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=i,this.t3=new n.Translational3Constraint(this,this.limitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0))},n.PrismaticJoint.prototype=Object.create(n.Joint.prototype),n.PrismaticJoint.prototype.constructor=n.PrismaticJoint,n.PrismaticJoint.prototype.preSolve=function(t,e){var i,r;this.updateAnchorPoints(),i=this.body1.rotation.elements;var o=this.localAxis1X*i[0]+this.localAxis1Y*i[1]+this.localAxis1Z*i[2],a=this.localAxis1X*i[3]+this.localAxis1Y*i[4]+this.localAxis1Z*i[5],s=this.localAxis1X*i[6]+this.localAxis1Y*i[7]+this.localAxis1Z*i[8];i=this.body2.rotation.elements;var u=this.localAxis2X*i[0]+this.localAxis2Y*i[1]+this.localAxis2Z*i[2],l=this.localAxis2X*i[3]+this.localAxis2Y*i[4]+this.localAxis2Z*i[5],h=this.localAxis2X*i[6]+this.localAxis2Y*i[7]+this.localAxis2Z*i[8],c=o*this.body2.inverseMass+u*this.body1.inverseMass,p=a*this.body2.inverseMass+l*this.body1.inverseMass,d=s*this.body2.inverseMass+h*this.body1.inverseMass;r=n.sqrt(c*c+p*p+d*d),r>0&&(r=1/r),c*=r,p*=r,d*=r;var f=p*c-d*d,m=-d*p-c*c,y=c*d+p*p;r=1/n.sqrt(f*f+m*m+y*y),f*=r,m*=r,y*=r;var v=p*y-d*m,g=d*f-c*y,b=c*m-p*f;this.nor.init(c,p,d),this.tan.init(f,m,y),this.bin.init(v,g,b),this.ac.preSolve(t,e),this.t3.preSolve(t,e)},n.PrismaticJoint.prototype.solve=function(){this.ac.solve(),this.t3.solve()},n.PrismaticJoint.prototype.postSolve=function(){},n.SliderJoint=function(t,e,i){n.Joint.call(this,t),this.type=n.JOINT_SLIDER,this.localAxis1=(new n.Vec3).normalize(t.localAxis1),this.localAxis2=(new n.Vec3).normalize(t.localAxis2);var r;this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAngAxis1X=this.localAxis1Y*this.localAxis1X-this.localAxis1Z*this.localAxis1Z,this.localAngAxis1Y=-this.localAxis1Z*this.localAxis1Y-this.localAxis1X*this.localAxis1X,this.localAngAxis1Z=this.localAxis1X*this.localAxis1Z+this.localAxis1Y*this.localAxis1Y,r=1/n.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=r,this.localAngAxis1Y*=r,this.localAngAxis1Z*=r,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z;var o=(new n.Mat33).setQuat((new n.Quat).arc(this.localAxis1,this.localAxis2)),a=o.elements;this.localAngAxis2X=this.localAngAxis1X*a[0]+this.localAngAxis1Y*a[1]+this.localAngAxis1Z*a[2],this.localAngAxis2Y=this.localAngAxis1X*a[3]+this.localAngAxis1Y*a[4]+this.localAngAxis1Z*a[5],this.localAngAxis2Z=this.localAngAxis1X*a[6]+this.localAngAxis1Y*a[7]+this.localAngAxis1Z*a[8],this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.rotationalLimitMotor=new n.LimitMotor(this.nor,!1),this.r3=new n.Rotational3Constraint(this,this.rotationalLimitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0)),this.translationalLimitMotor=new n.LimitMotor(this.nor,!0),this.translationalLimitMotor.lowerLimit=e,this.translationalLimitMotor.upperLimit=i,this.t3=new n.Translational3Constraint(this,this.translationalLimitMotor,new n.LimitMotor(this.tan,!0),new n.LimitMotor(this.bin,!0))},n.SliderJoint.prototype=Object.create(n.Joint.prototype),n.SliderJoint.prototype.constructor=n.SliderJoint,n.SliderJoint.prototype.preSolve=function(t,e){var i,r,o,a;this.updateAnchorPoints(),i=this.body1.rotation.elements;var s=this.localAxis1X*i[0]+this.localAxis1Y*i[1]+this.localAxis1Z*i[2],u=this.localAxis1X*i[3]+this.localAxis1Y*i[4]+this.localAxis1Z*i[5],l=this.localAxis1X*i[6]+this.localAxis1Y*i[7]+this.localAxis1Z*i[8],h=this.localAngAxis1X*i[0]+this.localAngAxis1Y*i[1]+this.localAngAxis1Z*i[2],c=this.localAngAxis1X*i[3]+this.localAngAxis1Y*i[4]+this.localAngAxis1Z*i[5],p=this.localAngAxis1X*i[6]+this.localAngAxis1Y*i[7]+this.localAngAxis1Z*i[8];i=this.body2.rotation.elements;var d=this.localAxis2X*i[0]+this.localAxis2Y*i[1]+this.localAxis2Z*i[2],f=this.localAxis2X*i[3]+this.localAxis2Y*i[4]+this.localAxis2Z*i[5],m=this.localAxis2X*i[6]+this.localAxis2Y*i[7]+this.localAxis2Z*i[8],y=this.localAngAxis2X*i[0]+this.localAngAxis2Y*i[1]+this.localAngAxis2Z*i[2],v=this.localAngAxis2X*i[3]+this.localAngAxis2Y*i[4]+this.localAngAxis2Z*i[5],g=this.localAngAxis2X*i[6]+this.localAngAxis2Y*i[7]+this.localAngAxis2Z*i[8],b=s*this.body2.inverseMass+d*this.body1.inverseMass,x=u*this.body2.inverseMass+f*this.body1.inverseMass,_=l*this.body2.inverseMass+m*this.body1.inverseMass;r=n.sqrt(b*b+x*x+_*_),r>0&&(r=1/r),b*=r,x*=r,_*=r;var w=x*b-_*_,M=-_*x-b*b,S=b*_+x*x;r=1/n.sqrt(w*w+M*M+S*S),w*=r,M*=r,S*=r;var C=x*S-_*M,E=_*w-b*S,T=b*M-x*w;this.nor.init(b,x,_),this.tan.init(w,M,S),this.bin.init(C,E,T),0>b*(c*g-p*v)+x*(p*y-h*g)+_*(h*v-c*y)?this.rotationalLimitMotor.angle=-this.acosClamp(h*y+c*v+p*g):this.rotationalLimitMotor.angle=this.acosClamp(h*y+c*v+p*g),r=u*m-l*f,o=l*d-s*m,a=s*f-u*d,this.r3.limitMotor2.angle=w*r+M*o+S*a,this.r3.limitMotor3.angle=C*r+E*o+T*a,this.r3.preSolve(t,e),this.t3.preSolve(t,e)},n.SliderJoint.prototype.solve=function(){this.r3.solve(),this.t3.solve()},n.SliderJoint.prototype.postSolve=function(){},n.SliderJoint.prototype.acosClamp=function(t){return t>1?0:-1>t?n.PI:n.acos(t)},n.WheelJoint=function(t){n.Joint.call(this,t),this.type=n.JOINT_WHEEL,this.localAxis1=(new n.Vec3).normalize(t.localAxis1),this.localAxis2=(new n.Vec3).normalize(t.localAxis2);var e;this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z;var i=this.localAxis1X*this.localAxis2X+this.localAxis1Y*this.localAxis2Y+this.localAxis1Z*this.localAxis2Z;if(i>-1&&1>i)this.localAngAxis1X=this.localAxis2X-i*this.localAxis1X,this.localAngAxis1Y=this.localAxis2Y-i*this.localAxis1Y,this.localAngAxis1Z=this.localAxis2Z-i*this.localAxis1Z,this.localAngAxis2X=this.localAxis1X-i*this.localAxis2X,this.localAngAxis2Y=this.localAxis1Y-i*this.localAxis2Y,this.localAngAxis2Z=this.localAxis1Z-i*this.localAxis2Z,e=1/n.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=e,this.localAngAxis1Y*=e,this.localAngAxis1Z*=e,e=1/n.sqrt(this.localAngAxis2X*this.localAngAxis2X+this.localAngAxis2Y*this.localAngAxis2Y+this.localAngAxis2Z*this.localAngAxis2Z),this.localAngAxis2X*=e,this.localAngAxis2Y*=e,this.localAngAxis2Z*=e;else{this.localAngAxis1X=this.localAxis1Y*this.localAxis1X-this.localAxis1Z*this.localAxis1Z,this.localAngAxis1Y=-this.localAxis1Z*this.localAxis1Y-this.localAxis1X*this.localAxis1X,this.localAngAxis1Z=this.localAxis1X*this.localAxis1Z+this.localAxis1Y*this.localAxis1Y,e=1/n.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),
this.localAngAxis1X*=e,this.localAngAxis1Y*=e,this.localAngAxis1Z*=e;var r=(new n.Mat33).setQuat((new n.Quat).arc(this.localAxis1,this.localAxis2)),o=r.elements;this.localAngAxis2X=this.localAngAxis1X*o[0]+this.localAngAxis1Y*o[1]+this.localAngAxis1Z*o[2],this.localAngAxis2Y=this.localAngAxis1X*o[3]+this.localAngAxis1Y*o[4]+this.localAngAxis1Z*o[5],this.localAngAxis2Z=this.localAngAxis1X*o[6]+this.localAngAxis1Y*o[7]+this.localAngAxis1Z*o[8]}this.nor=new n.Vec3,this.tan=new n.Vec3,this.bin=new n.Vec3,this.translationalLimitMotor=new n.LimitMotor(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new n.LimitMotor(this.tan,!1),this.rotationalLimitMotor2=new n.LimitMotor(this.bin,!1),this.t3=new n.Translational3Constraint(this,new n.LimitMotor(this.nor,!0),this.translationalLimitMotor,new n.LimitMotor(this.bin,!0)),this.t3.weight=1,this.r3=new n.Rotational3Constraint(this,new n.LimitMotor(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)},n.WheelJoint.prototype=Object.create(n.Joint.prototype),n.WheelJoint.prototype.constructor=n.WheelJoint,n.WheelJoint.prototype.preSolve=function(t,e){var i,r;this.updateAnchorPoints(),i=this.body1.rotation.elements;var o=this.localAxis1X*i[0]+this.localAxis1Y*i[1]+this.localAxis1Z*i[2],a=this.localAxis1X*i[3]+this.localAxis1Y*i[4]+this.localAxis1Z*i[5],s=this.localAxis1X*i[6]+this.localAxis1Y*i[7]+this.localAxis1Z*i[8],u=this.localAngAxis1X*i[0]+this.localAngAxis1Y*i[1]+this.localAngAxis1Z*i[2],l=this.localAngAxis1X*i[3]+this.localAngAxis1Y*i[4]+this.localAngAxis1Z*i[5],h=this.localAngAxis1X*i[6]+this.localAngAxis1Y*i[7]+this.localAngAxis1Z*i[8];i=this.body2.rotation.elements;var c=this.localAxis2X*i[0]+this.localAxis2Y*i[1]+this.localAxis2Z*i[2],p=this.localAxis2X*i[3]+this.localAxis2Y*i[4]+this.localAxis2Z*i[5],d=this.localAxis2X*i[6]+this.localAxis2Y*i[7]+this.localAxis2Z*i[8],f=this.localAngAxis2X*i[0]+this.localAngAxis2Y*i[1]+this.localAngAxis2Z*i[2],m=this.localAngAxis2X*i[3]+this.localAngAxis2Y*i[4]+this.localAngAxis2Z*i[5],y=this.localAngAxis2X*i[6]+this.localAngAxis2Y*i[7]+this.localAngAxis2Z*i[8];this.r3.limitMotor1.angle=o*c+a*p+s*d,0>o*(l*d-h*p)+a*(h*c-u*d)+s*(u*p-l*c)?this.rotationalLimitMotor1.angle=-this.acosClamp(u*c+l*p+h*d):this.rotationalLimitMotor1.angle=this.acosClamp(u*c+l*p+h*d),0>c*(m*s-y*a)+p*(y*o-f*s)+d*(f*a-m*o)?this.rotationalLimitMotor2.angle=this.acosClamp(f*o+m*a+y*s):this.rotationalLimitMotor2.angle=-this.acosClamp(f*o+m*a+y*s);var v=p*s-d*a,g=d*o-c*s,b=c*a-p*o;r=n.sqrt(v*v+g*g+b*b),r>0&&(r=1/r),v*=r,g*=r,b*=r;var x=g*d-b*p,_=b*c-v*d,w=v*p-g*c;r=n.sqrt(x*x+_*_+w*w),r>0&&(r=1/r),x*=r,_*=r,w*=r;var M=a*b-s*g,S=s*v-o*b,C=o*g-a*v;r=n.sqrt(M*M+S*S+C*C),r>0&&(r=1/r),M*=r,S*=r,C*=r,this.nor.init(v,g,b),this.tan.init(x,_,w),this.bin.init(M,S,C),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},n.WheelJoint.prototype.solve=function(){this.r3.solve(),this.t3.solve()},n.WheelJoint.prototype.postSolve=function(){},n.WheelJoint.prototype.acosClamp=function(t){return t>1?0:-1>t?n.PI:n.acos(t)},n.AngularConstraint=function(t,e){this.joint=t,this.targetOrientation=(new n.Quat).invert(e),this.relativeOrientation=new n.Quat,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new n.Vec3,this.imp=new n.Vec3,this.rn0=new n.Vec3,this.rn1=new n.Vec3,this.rn2=new n.Vec3,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia},n.AngularConstraint.prototype={constructor:n.AngularConstraint,preSolve:function(t,e){var i,r,o;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),o=(new n.Mat33).add(this.ii1,this.ii2).elements,i=1/(o[0]*(o[4]*o[8]-o[7]*o[5])+o[3]*(o[7]*o[2]-o[1]*o[8])+o[6]*(o[1]*o[5]-o[4]*o[2])),this.dd=new n.Mat33(o[4]*o[8]-o[5]*o[7],o[2]*o[7]-o[1]*o[8],o[1]*o[5]-o[2]*o[4],o[5]*o[6]-o[3]*o[8],o[0]*o[8]-o[2]*o[6],o[2]*o[3]-o[0]*o[5],o[3]*o[7]-o[4]*o[6],o[1]*o[6]-o[0]*o[7],o[0]*o[4]-o[1]*o[3]).multiply(i),this.relativeOrientation.invert(this.b1.orientation),this.relativeOrientation.mul(this.targetOrientation,this.relativeOrientation),this.relativeOrientation.mul(this.b2.orientation,this.relativeOrientation),i=2*this.relativeOrientation.s,this.vel.scale(this.relativeOrientation,i),r=this.vel.length(),r>.02?(r=(.02-r)/r*e*.05,this.vel.scaleEqual(r)):this.vel.init(),this.rn1.mulMat(this.ii1,this.imp),this.rn2.mulMat(this.ii2,this.imp),this.a1.addEqual(this.rn1),this.a2.subEqual(this.rn2)},solve:function(){var t=this.a2.clone().subEqual(this.a1).subEqual(this.vel);this.rn0.mulMat(this.dd,t),this.rn1.mulMat(this.ii1,this.rn0),this.rn2.mulMat(this.ii2,this.rn0),this.imp.addEqual(this.rn0),this.a1.addEqual(this.rn1),this.a2.subEqual(this.rn2)}},n.LinearConstraint=function(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0},n.LinearConstraint.prototype={constructor:n.LinearConstraint,preSolve:function(t,e){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var i=this.ii1.elements,r=this.ii2.elements;this.ax1x=this.r1z*i[1]+-this.r1y*i[2],this.ax1y=this.r1z*i[4]+-this.r1y*i[5],this.ax1z=this.r1z*i[7]+-this.r1y*i[8],this.ay1x=-this.r1z*i[0]+this.r1x*i[2],this.ay1y=-this.r1z*i[3]+this.r1x*i[5],this.ay1z=-this.r1z*i[6]+this.r1x*i[8],this.az1x=this.r1y*i[0]+-this.r1x*i[1],this.az1y=this.r1y*i[3]+-this.r1x*i[4],this.az1z=this.r1y*i[6]+-this.r1x*i[7],this.ax2x=this.r2z*r[1]+-this.r2y*r[2],this.ax2y=this.r2z*r[4]+-this.r2y*r[5],this.ax2z=this.r2z*r[7]+-this.r2y*r[8],this.ay2x=-this.r2z*r[0]+this.r2x*r[2],this.ay2y=-this.r2z*r[3]+this.r2x*r[5],this.ay2z=-this.r2z*r[6]+this.r2x*r[8],this.az2x=this.r2y*r[0]+-this.r2x*r[1],this.az2y=this.r2y*r[3]+-this.r2x*r[4],this.az2z=this.r2y*r[6]+-this.r2x*r[7];var o=this.m1+this.m2,a=new n.Mat33(o,0,0,0,o,0,0,0,o),s=a.elements;s[0]+=i[4]*this.r1z*this.r1z-(i[7]+i[5])*this.r1y*this.r1z+i[8]*this.r1y*this.r1y,s[1]+=(i[6]*this.r1y+i[5]*this.r1x)*this.r1z-i[3]*this.r1z*this.r1z-i[8]*this.r1x*this.r1y,s[2]+=(i[3]*this.r1y-i[4]*this.r1x)*this.r1z-i[6]*this.r1y*this.r1y+i[7]*this.r1x*this.r1y,s[3]+=(i[2]*this.r1y+i[7]*this.r1x)*this.r1z-i[1]*this.r1z*this.r1z-i[8]*this.r1x*this.r1y,s[4]+=i[0]*this.r1z*this.r1z-(i[6]+i[2])*this.r1x*this.r1z+i[8]*this.r1x*this.r1x,s[5]+=(i[1]*this.r1x-i[0]*this.r1y)*this.r1z-i[7]*this.r1x*this.r1x+i[6]*this.r1x*this.r1y,s[6]+=(i[1]*this.r1y-i[4]*this.r1x)*this.r1z-i[2]*this.r1y*this.r1y+i[5]*this.r1x*this.r1y,s[7]+=(i[3]*this.r1x-i[0]*this.r1y)*this.r1z-i[5]*this.r1x*this.r1x+i[2]*this.r1x*this.r1y,s[8]+=i[0]*this.r1y*this.r1y-(i[3]+i[1])*this.r1x*this.r1y+i[4]*this.r1x*this.r1x,s[0]+=r[4]*this.r2z*this.r2z-(r[7]+r[5])*this.r2y*this.r2z+r[8]*this.r2y*this.r2y,s[1]+=(r[6]*this.r2y+r[5]*this.r2x)*this.r2z-r[3]*this.r2z*this.r2z-r[8]*this.r2x*this.r2y,s[2]+=(r[3]*this.r2y-r[4]*this.r2x)*this.r2z-r[6]*this.r2y*this.r2y+r[7]*this.r2x*this.r2y,s[3]+=(r[2]*this.r2y+r[7]*this.r2x)*this.r2z-r[1]*this.r2z*this.r2z-r[8]*this.r2x*this.r2y,s[4]+=r[0]*this.r2z*this.r2z-(r[6]+r[2])*this.r2x*this.r2z+r[8]*this.r2x*this.r2x,s[5]+=(r[1]*this.r2x-r[0]*this.r2y)*this.r2z-r[7]*this.r2x*this.r2x+r[6]*this.r2x*this.r2y,s[6]+=(r[1]*this.r2y-r[4]*this.r2x)*this.r2z-r[2]*this.r2y*this.r2y+r[5]*this.r2x*this.r2y,s[7]+=(r[3]*this.r2x-r[0]*this.r2y)*this.r2z-r[5]*this.r2x*this.r2x+r[2]*this.r2x*this.r2y,s[8]+=r[0]*this.r2y*this.r2y-(r[3]+r[1])*this.r2x*this.r2y+r[4]*this.r2x*this.r2x;var u=1/(s[0]*(s[4]*s[8]-s[7]*s[5])+s[3]*(s[7]*s[2]-s[1]*s[8])+s[6]*(s[1]*s[5]-s[4]*s[2]));this.dd=new n.Mat33(s[4]*s[8]-s[5]*s[7],s[2]*s[7]-s[1]*s[8],s[1]*s[5]-s[2]*s[4],s[5]*s[6]-s[3]*s[8],s[0]*s[8]-s[2]*s[6],s[2]*s[3]-s[0]*s[5],s[3]*s[7]-s[4]*s[6],s[1]*s[6]-s[0]*s[7],s[0]*s[4]-s[1]*s[3]).multiply(u),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var l=n.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);l>.005?(l=(.005-l)/l*e*.05,this.velx*=l,this.vely*=l,this.velz*=l):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,e=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,i=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,n=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,r=e*t[0]+i*t[1]+n*t[2],o=e*t[3]+i*t[4]+n*t[5],a=e*t[6]+i*t[7]+n*t[8];this.impx+=r,this.impy+=o,this.impz+=a,this.l1.x+=r*this.m1,this.l1.y+=o*this.m1,this.l1.z+=a*this.m1,this.a1.x+=r*this.ax1x+o*this.ay1x+a*this.az1x,this.a1.y+=r*this.ax1y+o*this.ay1y+a*this.az1y,this.a1.z+=r*this.ax1z+o*this.ay1z+a*this.az1z,this.l2.x-=r*this.m2,this.l2.y-=o*this.m2,this.l2.z-=a*this.m2,this.a2.x-=r*this.ax2x+o*this.ay2x+a*this.az2x,this.a2.y-=r*this.ax2y+o*this.ay2y+a*this.az2y,this.a2.z-=r*this.ax2z+o*this.ay2z+a*this.az2z}},n.Rotational3Constraint=function(t,e,i,n){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=i,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0},n.Rotational3Constraint.prototype={constructor:n.Rotational3Constraint,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.limitMotor1.frequency,o=this.limitMotor2.frequency,a=this.limitMotor3.frequency,s=r>0,u=o>0,l=a>0,h=this.lowerLimit1<=this.upperLimit1,c=this.lowerLimit2<=this.upperLimit2,p=this.lowerLimit3<=this.upperLimit3,d=this.limitMotor1.angle;h?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-d):d<this.lowerLimit1?(-1!=this.limitState1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-d):d>this.upperLimit1?(1!=this.limitState1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-d):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),s||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var f=this.limitMotor2.angle;c?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-f):f<this.lowerLimit2?(-1!=this.limitState2&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-f):f>this.upperLimit2?(1!=this.limitState2&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-f):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),u||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var m=this.limitMotor3.angle;if(p?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m):m<this.lowerLimit3?(-1!=this.limitState3&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m):m>this.upperLimit3?(1!=this.limitState3&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-m):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),l||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(0!=this.limitState1||s)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(0!=this.limitState2||u)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(0!=this.limitState3||l)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,s&&2!=this.limitState1){var y=6.2831853*r,v=y*y*t,g=e/(v+2*this.limitMotor1.dampingRatio*y);this.cfm1=this.kv00*g,this.limitVelocity1*=v*g}else this.cfm1=0,this.limitVelocity1*=.05*e;u&&2!=this.limitState2?(y=6.2831853*o,v=y*y*t,g=e/(v+2*this.limitMotor2.dampingRatio*y),this.cfm2=this.kv11*g,this.limitVelocity2*=v*g):(this.cfm2=0,this.limitVelocity2*=.05*e),l&&2!=this.limitState3?(y=6.2831853*a,v=y*y*t,g=e/(v+2*this.limitMotor3.dampingRatio*y),this.cfm3=this.kv22*g,this.limitVelocity3*=v*g):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var b=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*b,this.d01=(this.k02*this.k21-this.k01*this.k22)*b,this.d02=(this.k01*this.k12-this.k02*this.k11)*b,this.d10=(this.k12*this.k20-this.k10*this.k22)*b,this.d11=(this.k00*this.k22-this.k02*this.k20)*b,this.d12=(this.k02*this.k10-this.k00*this.k12)*b,this.d20=(this.k10*this.k21-this.k11*this.k20)*b,this.d21=(this.k01*this.k20-this.k00*this.k21)*b,this.d22=(this.k00*this.k11-this.k01*this.k10)*b,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var x=this.limitImpulse1+this.motorImpulse1,_=this.limitImpulse2+this.motorImpulse2,w=this.limitImpulse3+this.motorImpulse3;this.a1.x+=x*this.a1x1+_*this.a1x2+w*this.a1x3,this.a1.y+=x*this.a1y1+_*this.a1y2+w*this.a1y3,this.a1.z+=x*this.a1z1+_*this.a1z2+w*this.a1z3,this.a2.x-=x*this.a2x1+_*this.a2x2+w*this.a2x3,this.a2.y-=x*this.a2y1+_*this.a2y2+w*this.a2y3,this.a2.z-=x*this.a2z1+_*this.a2z2+w*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,i=this.a2.z-this.a1.z;this.limitVelocity3=30;var n=t*this.ax1+e*this.ay1+i*this.az1-this.limitVelocity1,r=t*this.ax2+e*this.ay2+i*this.az2-this.limitVelocity2,o=t*this.ax3+e*this.ay3+i*this.az3-this.limitVelocity3,a=n*this.d00+r*this.d01+o*this.d02,s=n*this.d10+r*this.d11+o*this.d12,u=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=a,this.limitImpulse2+=s,this.limitImpulse3+=u,this.a1.x+=a*this.a1x1+s*this.a1x2+u*this.a1x3,this.a1.y+=a*this.a1y1+s*this.a1y2+u*this.a1y3,this.a1.z+=a*this.a1z1+s*this.a1z2+u*this.a1z3,this.a2.x-=a*this.a2x1+s*this.a2x2+u*this.a2x3,this.a2.y-=a*this.a2y1+s*this.a2y2+u*this.a2y3,this.a2.z-=a*this.a2z1+s*this.a2z2+u*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,i=this.a2.z-this.a1.z,n=t*this.ax1+e*this.ay1+i*this.az1,r=t*this.ax2+e*this.ay2+i*this.az2,o=t*this.ax3+e*this.ay3+i*this.az3,a=this.motorImpulse1,s=this.motorImpulse2,u=this.motorImpulse3,l=0,h=0,c=0;this.enableMotor1&&(l=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=l,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),l=this.motorImpulse1-a),this.enableMotor2&&(h=(r-this.motorSpeed2)*this.dv11,this.motorImpulse2+=h,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),h=this.motorImpulse2-s),this.enableMotor3&&(c=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=c,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),c=this.motorImpulse3-u),n+=l*this.kv00+h*this.k01+c*this.k02,r+=l*this.k10+h*this.kv11+c*this.k12,o+=l*this.k20+h*this.k21+c*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,r-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,d=this.limitImpulse2,f=this.limitImpulse3,m=n*this.d00+r*this.d01+o*this.d02,y=n*this.d10+r*this.d11+o*this.d12,v=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=m,this.limitImpulse2+=y,this.limitImpulse3+=v;var g=0;(2==this.limitState1||this.limitImpulse1*this.limitState1<0)&&(m=-p,r+=m*this.k10,o+=m*this.k20,g|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2<0)&&(y=-d,n+=y*this.k01,o+=y*this.k21,g|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3<0)&&(v=-f,n+=v*this.k02,r+=v*this.k12,g|=4);var b;switch(g){case 1:b=1/(this.k11*this.k22-this.k12*this.k21),y=(this.k22*r+-this.k12*o)*b,v=(-this.k21*r+this.k11*o)*b;break;case 2:b=1/(this.k00*this.k22-this.k02*this.k20),m=(this.k22*n+-this.k02*o)*b,v=(-this.k20*n+this.k00*o)*b;break;case 3:v=o/this.k22;break;case 4:b=1/(this.k00*this.k11-this.k01*this.k10),m=(this.k11*n+-this.k01*r)*b,y=(-this.k10*n+this.k00*r)*b;break;case 5:y=r/this.k11;break;case 6:m=n/this.k00}this.limitImpulse1=m+p,this.limitImpulse2=y+d,this.limitImpulse3=v+f;var x=l+m,_=h+y,w=c+v;this.a1.x+=x*this.a1x1+_*this.a1x2+w*this.a1x3,this.a1.y+=x*this.a1y1+_*this.a1y2+w*this.a1y3,this.a1.z+=x*this.a1z1+_*this.a1z2+w*this.a1z3,this.a2.x-=x*this.a2x1+_*this.a2x2+w*this.a2x3,this.a2.y-=x*this.a2y1+_*this.a2y2+w*this.a2y3,this.a2.z-=x*this.a2z1+_*this.a2z2+w*this.a2z3,t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,i=this.a2.z-this.a1.z,r=t*this.ax2+e*this.ay2+i*this.az2}},n.RotationalConstraint=function(t,e){this.cfm=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.enableLimit=!1,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0},n.RotationalConstraint.prototype={constructor:n.RotationalConstraint,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.limitMotor.frequency,o=r>0,a=this.lowerLimit<=this.upperLimit,s=this.limitMotor.angle;if(a?(this.lowerLimit==this.upperLimit?(0!=this.limitState&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-s):s<this.lowerLimit?(-1!=this.limitState&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-s):s>this.upperLimit?(1!=this.limitState&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-s):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),o||(this.limitVelocity>.02?this.limitVelocity-=.02:this.limitVelocity<-.02?this.limitVelocity+=.02:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(0!=this.limitState||o)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0),this.a1x=this.ax*this.i1e00+this.ay*this.i1e01+this.az*this.i1e02,this.a1y=this.ax*this.i1e10+this.ay*this.i1e11+this.az*this.i1e12,this.a1z=this.ax*this.i1e20+this.ay*this.i1e21+this.az*this.i1e22,this.a2x=this.ax*this.i2e00+this.ay*this.i2e01+this.az*this.i2e02,this.a2y=this.ax*this.i2e10+this.ay*this.i2e11+this.az*this.i2e12,this.a2z=this.ax*this.i2e20+this.ay*this.i2e21+this.az*this.i2e22,this.motorDenom=this.ax*(this.a1x+this.a2x)+this.ay*(this.a1y+this.a2y)+this.az*(this.a1z+this.a2z),this.invMotorDenom=1/this.motorDenom,o&&2!=this.limitState){var u=6.2831853*r,l=u*u*t,h=e/(l+2*this.limitMotor.dampingRatio*u);this.cfm=this.motorDenom*h,this.limitVelocity*=l*h}else this.cfm=0,this.limitVelocity*=.05*e;this.invDenom=1/(this.motorDenom+this.cfm),this.limitImpulse*=.95,this.motorImpulse*=.95;var c=this.limitImpulse+this.motorImpulse;this.a1.x+=c*this.a1x,this.a1.y+=c*this.a1y,this.a1.z+=c*this.a1z,this.a2.x-=c*this.a2x,this.a2.y-=c*this.a2y,this.a2.z-=c*this.a2z},solve:function(){var t,e=this.ax*(this.a2.x-this.a1.x)+this.ay*(this.a2.y-this.a1.y)+this.az*(this.a2.z-this.a1.z);if(this.enableMotor){t=(e-this.motorSpeed)*this.invMotorDenom;var i=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),t=this.motorImpulse-i,e-=t*this.motorDenom}else t=0;var n;if(2!=this.limitState){n=(e-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var r=this.limitImpulse;this.limitImpulse+=n,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),n=this.limitImpulse-r}else n=0;var o=n+t;this.a1.x+=o*this.a1x,this.a1.y+=o*this.a1y,this.a1.z+=o*this.a1z,this.a2.x-=o*this.a2x,this.a2.y-=o*this.a2y,this.a2.z-=o*this.a2z}},n.Translational3Constraint=function(t,e,i,n){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=i,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1},n.Translational3Constraint.prototype={constructor:n.Translational3Constraint,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],
this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,a=this.p2.z-this.p1.z,s=r*this.ax1+o*this.ay1+a*this.az1,u=r*this.ax2+o*this.ay2+a*this.az2,l=r*this.ax3+o*this.ay3+a*this.az3,h=this.limitMotor1.frequency,c=this.limitMotor2.frequency,p=this.limitMotor3.frequency,d=h>0,f=c>0,m=p>0,y=this.lowerLimit1<=this.upperLimit1,v=this.lowerLimit2<=this.upperLimit2,g=this.lowerLimit3<=this.upperLimit3;(d&&s>20||-20>s)&&(d=!1),(f&&u>20||-20>u)&&(f=!1),(m&&l>20||-20>l)&&(m=!1),y?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-s,d||(s=this.lowerLimit1)):s<this.lowerLimit1?(-1!=this.limitState1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-s,d||(s=this.lowerLimit1)):s>this.upperLimit1?(1!=this.limitState1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-s,d||(s=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),d||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),v?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-u,f||(u=this.lowerLimit2)):u<this.lowerLimit2?(-1!=this.limitState2&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-u,f||(u=this.lowerLimit2)):u>this.upperLimit2?(1!=this.limitState2&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-u,f||(u=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),f||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),g?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-l,m||(l=this.lowerLimit3)):l<this.lowerLimit3?(-1!=this.limitState3&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-l,m||(l=this.lowerLimit3)):l>this.upperLimit3?(1!=this.limitState3&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-l,m||(l=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),m||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(0!=this.limitState1||d)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(0!=this.limitState2||f)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(0!=this.limitState3||m)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var b=s*this.ax1+u*this.ax2+l*this.ax2,x=s*this.ay1+u*this.ay2+l*this.ay2,_=s*this.az1+u*this.az2+l*this.az2,w=this.m2/(this.m1+this.m2);this.weight>=0&&(w=this.weight);var M=1-w;this.r1x=this.r1.x+b*w,this.r1y=this.r1.y+x*w,this.r1z=this.r1.z+_*w,this.r2x=this.r2.x-b*M,this.r2y=this.r2.y-x*M,this.r2z=this.r2.z-_*M,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var S=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*S,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*S,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*S,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*S,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*S,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*S,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*S,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*S,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*S,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,d&&2!=this.limitState1){var C=6.2831853*h,E=C*C*t,T=e/(E+2*this.limitMotor1.dampingRatio*C);this.cfm1=this.kv00*T,this.limitVelocity1*=E*T}else this.cfm1=0,this.limitVelocity1*=.05*e;f&&2!=this.limitState2?(C=6.2831853*c,E=C*C*t,T=e/(E+2*this.limitMotor2.dampingRatio*C),this.cfm2=this.kv11*T,this.limitVelocity2*=E*T):(this.cfm2=0,this.limitVelocity2*=.05*e),m&&2!=this.limitState3?(C=6.2831853*p,E=C*C*t,T=e/(E+2*this.limitMotor3.dampingRatio*C),this.cfm3=this.kv22*T,this.limitVelocity3*=E*T):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var P=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*P,this.d01=(this.k02*this.k21-this.k01*this.k22)*P,this.d02=(this.k01*this.k12-this.k02*this.k11)*P,this.d10=(this.k12*this.k20-this.k10*this.k22)*P,this.d11=(this.k00*this.k22-this.k02*this.k20)*P,this.d12=(this.k02*this.k10-this.k00*this.k12)*P,this.d20=(this.k10*this.k21-this.k11*this.k20)*P,this.d21=(this.k01*this.k20-this.k00*this.k21)*P,this.d22=(this.k00*this.k11-this.k01*this.k10)*P;var A=this.limitImpulse1+this.motorImpulse1,k=this.limitImpulse2+this.motorImpulse2,O=this.limitImpulse3+this.motorImpulse3;this.l1.x+=A*this.l1x1+k*this.l1x2+O*this.l1x3,this.l1.y+=A*this.l1y1+k*this.l1y2+O*this.l1y3,this.l1.z+=A*this.l1z1+k*this.l1z2+O*this.l1z3,this.a1.x+=A*this.a1x1+k*this.a1x2+O*this.a1x3,this.a1.y+=A*this.a1y1+k*this.a1y2+O*this.a1y3,this.a1.z+=A*this.a1z1+k*this.a1z2+O*this.a1z3,this.l2.x-=A*this.l2x1+k*this.l2x2+O*this.l2x3,this.l2.y-=A*this.l2y1+k*this.l2y2+O*this.l2y3,this.l2.z-=A*this.l2z1+k*this.l2z2+O*this.l2z3,this.a2.x-=A*this.a2x1+k*this.a2x2+O*this.a2x3,this.a2.y-=A*this.a2y1+k*this.a2y2+O*this.a2y3,this.a2.z-=A*this.a2z1+k*this.a2z2+O*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,e=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,i=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,n=t*this.ax1+e*this.ay1+i*this.az1,r=t*this.ax2+e*this.ay2+i*this.az2,o=t*this.ax3+e*this.ay3+i*this.az3,a=this.motorImpulse1,s=this.motorImpulse2,u=this.motorImpulse3,l=0,h=0,c=0;this.enableMotor1&&(l=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=l,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),l=this.motorImpulse1-a),this.enableMotor2&&(h=(r-this.motorSpeed2)*this.dv11,this.motorImpulse2+=h,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),h=this.motorImpulse2-s),this.enableMotor3&&(c=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=c,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),c=this.motorImpulse3-u),n+=l*this.kv00+h*this.k01+c*this.k02,r+=l*this.k10+h*this.kv11+c*this.k12,o+=l*this.k20+h*this.k21+c*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,r-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,d=this.limitImpulse2,f=this.limitImpulse3,m=n*this.d00+r*this.d01+o*this.d02,y=n*this.d10+r*this.d11+o*this.d12,v=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=m,this.limitImpulse2+=y,this.limitImpulse3+=v;var g=0;(2==this.limitState1||this.limitImpulse1*this.limitState1<0)&&(m=-p,r+=m*this.k10,o+=m*this.k20,g|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2<0)&&(y=-d,n+=y*this.k01,o+=y*this.k21,g|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3<0)&&(v=-f,n+=v*this.k02,r+=v*this.k12,g|=4);var b;switch(g){case 1:b=1/(this.k11*this.k22-this.k12*this.k21),y=(this.k22*r+-this.k12*o)*b,v=(-this.k21*r+this.k11*o)*b;break;case 2:b=1/(this.k00*this.k22-this.k02*this.k20),m=(this.k22*n+-this.k02*o)*b,v=(-this.k20*n+this.k00*o)*b;break;case 3:v=o/this.k22;break;case 4:b=1/(this.k00*this.k11-this.k01*this.k10),m=(this.k11*n+-this.k01*r)*b,y=(-this.k10*n+this.k00*r)*b;break;case 5:y=r/this.k11;break;case 6:m=n/this.k00}this.limitImpulse1=p+m,this.limitImpulse2=d+y,this.limitImpulse3=f+v;var x=l+m,_=h+y,w=c+v;this.l1.x+=x*this.l1x1+_*this.l1x2+w*this.l1x3,this.l1.y+=x*this.l1y1+_*this.l1y2+w*this.l1y3,this.l1.z+=x*this.l1z1+_*this.l1z2+w*this.l1z3,this.a1.x+=x*this.a1x1+_*this.a1x2+w*this.a1x3,this.a1.y+=x*this.a1y1+_*this.a1y2+w*this.a1y3,this.a1.z+=x*this.a1z1+_*this.a1z2+w*this.a1z3,this.l2.x-=x*this.l2x1+_*this.l2x2+w*this.l2x3,this.l2.y-=x*this.l2y1+_*this.l2y2+w*this.l2y3,this.l2.z-=x*this.l2z1+_*this.l2z2+w*this.l2z3,this.a2.x-=x*this.a2x1+_*this.a2x2+w*this.a2x3,this.a2.y-=x*this.a2y1+_*this.a2y2+w*this.a2y3,this.a2.z-=x*this.a2z1+_*this.a2z2+w*this.a2z3}},n.TranslationalConstraint=function(t,e){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0},n.TranslationalConstraint.prototype={constructor:n.TranslationalConstraint,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,a=this.p2.z-this.p1.z,s=r*this.ax+o*this.ay+a*this.az,u=this.limitMotor.frequency,l=u>0,h=this.lowerLimit<=this.upperLimit;(l&&s>20||-20>s)&&(l=!1),h?(this.lowerLimit==this.upperLimit?(0!=this.limitState&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-s,l||(s=this.lowerLimit)):s<this.lowerLimit?(-1!=this.limitState&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-s,l||(s=this.lowerLimit)):s>this.upperLimit?(1!=this.limitState&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-s,l||(s=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),l||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(0!=this.limitState||l)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var c=s*this.ax,p=s*this.ay,d=s*this.az,f=this.m1/(this.m1+this.m2),m=1-f;if(this.r1x=this.r1.x+c*f,this.r1y=this.r1.y+p*f,this.r1z=this.r1.z+d*f,this.r2x=this.r2.x-c*m,this.r2y=this.r2.y-p*m,this.r2z=this.r2.z-d*m,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,l&&2!=this.limitState){var y=6.2831853*u,v=y*y*t,g=e/(v+2*this.limitMotor.dampingRatio*y);this.cfm=this.motorDenom*g,this.limitVelocity*=v*g}else this.cfm=0,this.limitVelocity*=.05*e;this.invDenom=1/(this.motorDenom+this.cfm);var b=this.limitImpulse+this.motorImpulse;this.l1.x+=b*this.l1x,this.l1.y+=b*this.l1y,this.l1.z+=b*this.l1z,this.a1.x+=b*this.a1x,this.a1.y+=b*this.a1y,this.a1.z+=b*this.a1z,this.l2.x-=b*this.l2x,this.l2.y-=b*this.l2y,this.l2.z-=b*this.l2z,this.a2.x-=b*this.a2x,this.a2.y-=b*this.a2y,this.a2.z-=b*this.a2z},solve:function(){var t,e=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){t=(e-this.motorSpeed)*this.invMotorDenom;var i=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),t=this.motorImpulse-i,e-=t*this.motorDenom}else t=0;var n;if(2!=this.limitState){n=(e-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var r=this.limitImpulse;this.limitImpulse+=n,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),n=this.limitImpulse-r}else n=0;var o=n+t;this.l1.x+=o*this.l1x,this.l1.y+=o*this.l1y,this.l1.z+=o*this.l1z,this.a1.x+=o*this.a1x,this.a1.y+=o*this.a1y,this.a1.z+=o*this.a1z,this.l2.x-=o*this.l2x,this.l2.y-=o*this.l2y,this.l2.z-=o*this.l2z,this.a2.x-=o*this.a2x,this.a2.y-=o*this.a2y,this.a2.z-=o*this.a2z}},n.Contact=function(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.b1Link=new n.ContactLink(this),this.b2Link=new n.ContactLink(this),this.s1Link=new n.ContactLink(this),this.s2Link=new n.ContactLink(this),this.manifold=new n.ContactManifold,this.buffer=[],this.buffer.length=4,this.buffer[0]=new n.ImpulseDataBuffer,this.buffer[1]=new n.ImpulseDataBuffer,this.buffer[2]=new n.ImpulseDataBuffer,this.buffer[3]=new n.ImpulseDataBuffer,this.points=this.manifold.points,this.constraint=new n.ContactConstraint(this.manifold)},n.Contact.prototype={constructor:n.Contact,mixRestitution:function(t,e){return n.sqrt(t*e)},mixFriction:function(t,e){return n.sqrt(t*e)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,e=t;e--;){var i=this.buffer[e],n=this.points[e];i.lp1X=n.localPoint1.x,i.lp1Y=n.localPoint1.y,i.lp1Z=n.localPoint1.z,i.lp2X=n.localPoint2.x,i.lp2Y=n.localPoint2.y,i.lp2Z=n.localPoint2.z,i.impulse=n.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var r=this.manifold.numPoints;if(0==r)return void(this.touching=!1);for(this.touching=!0,e=r;e--;){n=this.points[e];for(var o=n.localPoint1.x,a=n.localPoint1.y,s=n.localPoint1.z,u=n.localPoint2.x,l=n.localPoint2.y,h=n.localPoint2.z,c=-1,p=4e-4,d=t;d--;){i=this.buffer[d];var f=i.lp1X-o,m=i.lp1Y-a,y=i.lp1Z-s,v=f*f+m*m+y*y;f=i.lp2X-u,m=i.lp2Y-l,y=i.lp2Z-h;var g=f*f+m*m+y*y;g>v?p>v&&(p=v,c=d):p>g&&(p=g,c=d)}if(-1!=c){var b=this.buffer[c];this.buffer[c]=this.buffer[--t],this.buffer[t]=b,n.normalImpulse=b.impulse,n.warmStarted=!0}else n.normalImpulse=0,n.warmStarted=!1}},attach:function(t,e){this.shape1=t,this.shape2=e,this.body1=t.parent,this.body2=e.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=e,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,null!=t.contactLink?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,null!=e.contactLink?(this.s2Link.next=e.contactLink).prev=this.s2Link:this.s2Link.next=null,e.contactLink=this.s2Link,e.numContacts++,this.b1Link.shape=e,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,null!=this.body1.contactLink?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,null!=this.body2.contactLink?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,e=this.s1Link.next;null!==t&&(t.next=e),null!==e&&(e.prev=t),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=e),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,e=this.s2Link.next,null!==t&&(t.next=e),null!==e&&(e.prev=t),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=e),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,e=this.b1Link.next,null!==t&&(t.next=e),null!==e&&(e.prev=t),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,e=this.b2Link.next,null!==t&&(t.next=e),null!==e&&(e.prev=t),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}},n.ContactConstraint=function(t){n.Constraint.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.ii1=null,this.ii2=null,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new n.ContactPointDataBuffer,this.cs.next=new n.ContactPointDataBuffer,this.cs.next.next=new n.ContactPointDataBuffer,this.cs.next.next.next=new n.ContactPointDataBuffer},n.ContactConstraint.prototype=Object.create(n.Constraint.prototype),n.ContactConstraint.prototype.attach=function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},n.ContactConstraint.prototype.detach=function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},n.ContactConstraint.prototype.preSolve=function(t,e){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var i=this.ii1.elements,r=this.ii2.elements,o=this.p1.x,a=this.p1.y,s=this.p1.z,u=this.p2.x,l=this.p2.y,h=this.p2.z,c=this.m1+this.m2;this.num=this.manifold.numPoints;for(var p=this.cs,d=0;d<this.num;d++){var f,m,y,v,g,b,x=this.ps[d];f=x.position.x,m=x.position.y,y=x.position.z;var _=f-o,w=m-a,M=y-s,S=f-u,C=m-l,E=y-h;p.rp1X=_,p.rp1Y=w,p.rp1Z=M,p.rp2X=S,p.rp2Y=C,p.rp2Z=E,p.norImp=x.normalImpulse,p.tanImp=x.tangentImpulse,p.binImp=x.binormalImpulse;var T=x.normal.x,P=x.normal.y,A=x.normal.z,k=this.lv2.x+this.av2.y*E-this.av2.z*C-(this.lv1.x+this.av1.y*M-this.av1.z*w),O=this.lv2.y+this.av2.z*S-this.av2.x*E-(this.lv1.y+this.av1.z*_-this.av1.x*M),N=this.lv2.z+this.av2.x*C-this.av2.y*S-(this.lv1.z+this.av1.x*w-this.av1.y*_),D=T*k+P*O+A*N,L=k-D*T,R=O-D*P,I=N-D*A,z=L*L+R*R+I*I;z>.04?z=1/n.sqrt(z):(L=P*T-A*A,R=-A*P-T*T,I=T*A+P*P,z=1/n.sqrt(L*L+R*R+I*I)),L*=z,R*=z,I*=z;var j=P*I-A*R,V=A*L-T*I,B=T*R-P*L;p.norX=T,p.norY=P,p.norZ=A,p.tanX=L,p.tanY=R,p.tanZ=I,p.binX=j,p.binY=V,p.binZ=B,p.norU1X=T*this.m1,p.norU1Y=P*this.m1,p.norU1Z=A*this.m1,p.norU2X=T*this.m2,p.norU2Y=P*this.m2,p.norU2Z=A*this.m2,p.tanU1X=L*this.m1,p.tanU1Y=R*this.m1,p.tanU1Z=I*this.m1,p.tanU2X=L*this.m2,p.tanU2Y=R*this.m2,p.tanU2Z=I*this.m2,p.binU1X=j*this.m1,p.binU1Y=V*this.m1,p.binU1Z=B*this.m1,p.binU2X=j*this.m2,p.binU2Y=V*this.m2,p.binU2Z=B*this.m2;var U=w*A-M*P,F=M*T-_*A,G=_*P-w*T,H=C*A-E*P,W=E*T-S*A,X=S*P-C*T,q=w*I-M*R,Y=M*L-_*I,K=_*R-w*L,Z=C*I-E*R,J=E*L-S*I,Q=S*R-C*L,$=w*B-M*V,tt=M*j-_*B,et=_*V-w*j,it=C*B-E*V,nt=E*j-S*B,rt=S*V-C*j,ot=U*i[0]+F*i[1]+G*i[2],at=U*i[3]+F*i[4]+G*i[5],st=U*i[6]+F*i[7]+G*i[8],ut=H*r[0]+W*r[1]+X*r[2],lt=H*r[3]+W*r[4]+X*r[5],ht=H*r[6]+W*r[7]+X*r[8],ct=q*i[0]+Y*i[1]+K*i[2],pt=q*i[3]+Y*i[4]+K*i[5],dt=q*i[6]+Y*i[7]+K*i[8],ft=Z*r[0]+J*r[1]+Q*r[2],mt=Z*r[3]+J*r[4]+Q*r[5],yt=Z*r[6]+J*r[7]+Q*r[8],vt=$*i[0]+tt*i[1]+et*i[2],gt=$*i[3]+tt*i[4]+et*i[5],bt=$*i[6]+tt*i[7]+et*i[8],xt=it*r[0]+nt*r[1]+rt*r[2],_t=it*r[3]+nt*r[4]+rt*r[5],wt=it*r[6]+nt*r[7]+rt*r[8];p.norT1X=U,p.norT1Y=F,p.norT1Z=G,p.tanT1X=q,p.tanT1Y=Y,p.tanT1Z=K,p.binT1X=$,p.binT1Y=tt,p.binT1Z=et,p.norT2X=H,p.norT2Y=W,p.norT2Z=X,p.tanT2X=Z,p.tanT2Y=J,p.tanT2Z=Q,p.binT2X=it,p.binT2Y=nt,p.binT2Z=rt,p.norTU1X=ot,p.norTU1Y=at,p.norTU1Z=st,p.tanTU1X=ct,p.tanTU1Y=pt,p.tanTU1Z=dt,p.binTU1X=vt,p.binTU1Y=gt,p.binTU1Z=bt,p.norTU2X=ut,p.norTU2Y=lt,p.norTU2Z=ht,p.tanTU2X=ft,p.tanTU2Y=mt,p.tanTU2Z=yt,p.binTU2X=xt,p.binTU2Y=_t,p.binTU2Z=wt,f=U*i[0]+F*i[1]+G*i[2],m=U*i[3]+F*i[4]+G*i[5],y=U*i[6]+F*i[7]+G*i[8],v=m*M-y*w,g=y*_-f*M,b=f*w-m*_,f=H*r[0]+W*r[1]+X*r[2],m=H*r[3]+W*r[4]+X*r[5],y=H*r[6]+W*r[7]+X*r[8],v+=m*E-y*C,g+=y*S-f*E,b+=f*C-m*S;var Mt=1/(c+T*v+P*g+A*b);f=q*i[0]+Y*i[1]+K*i[2],m=q*i[3]+Y*i[4]+K*i[5],y=q*i[6]+Y*i[7]+K*i[8],v=m*M-y*w,g=y*_-f*M,b=f*w-m*_,f=Z*r[0]+J*r[1]+Q*r[2],m=Z*r[3]+J*r[4]+Q*r[5],y=Z*r[6]+J*r[7]+Q*r[8],v+=m*E-y*C,g+=y*S-f*E,b+=f*C-m*S;var St=1/(c+L*v+R*g+I*b);f=$*i[0]+tt*i[1]+et*i[2],m=$*i[3]+tt*i[4]+et*i[5],y=$*i[6]+tt*i[7]+et*i[8],v=m*M-y*w,g=y*_-f*M,b=f*w-m*_,f=it*r[0]+nt*r[1]+rt*r[2],m=it*r[3]+nt*r[4]+rt*r[5],y=it*r[6]+nt*r[7]+rt*r[8],v+=m*E-y*C,g+=y*S-f*E,b+=f*C-m*S;var Ct=1/(c+j*v+V*g+B*b);if(p.norDen=Mt,p.tanDen=St,p.binDen=Ct,x.warmStarted){var Et=x.normalImpulse;this.lv1.x+=p.norU1X*Et,this.lv1.y+=p.norU1Y*Et,this.lv1.z+=p.norU1Z*Et,this.av1.x+=ot*Et,this.av1.y+=at*Et,this.av1.z+=st*Et,this.lv2.x-=p.norU2X*Et,this.lv2.y-=p.norU2Y*Et,this.lv2.z-=p.norU2Z*Et,this.av2.x-=ut*Et,this.av2.y-=lt*Et,this.av2.z-=ht*Et,p.norImp=Et,p.tanImp=0,p.binImp=0,D=0}else p.norImp=0,p.tanImp=0,p.binImp=0;D>-1&&(D=0);var Tt=this.restitution*-D,Pt=-(x.penetration+.005)*e*.05;Pt>Tt&&(Tt=Pt),p.norTar=Tt,p.last=d==this.num-1,p=p.next}},n.ContactConstraint.prototype.solve=function(){for(var t=this.lv1.x,e=this.lv1.y,i=this.lv1.z,r=this.lv2.x,o=this.lv2.y,a=this.lv2.z,s=this.av1.x,u=this.av1.y,l=this.av1.z,h=this.av2.x,c=this.av2.y,p=this.av2.z,d=this.cs;;){var f,m,y,v,g,b=d.norImp,x=d.tanImp,_=d.binImp,w=-b*this.friction,M=r-t,S=o-e,C=a-i;g=M*d.tanX+S*d.tanY+C*d.tanZ+h*d.tanT2X+c*d.tanT2Y+p*d.tanT2Z-s*d.tanT1X-u*d.tanT1Y-l*d.tanT1Z,f=x,m=g*d.tanDen,x+=m,g=M*d.binX+S*d.binY+C*d.binZ+h*d.binT2X+c*d.binT2Y+p*d.binT2Z-s*d.binT1X-u*d.binT1Y-l*d.binT1Z,y=_,v=g*d.binDen,_+=v;var E=x*x+_*_;if(E>w*w&&(E=w/n.sqrt(E),x*=E,_*=E),m=x-f,v=_-y,t+=d.tanU1X*m+d.binU1X*v,e+=d.tanU1Y*m+d.binU1Y*v,i+=d.tanU1Z*m+d.binU1Z*v,s+=d.tanTU1X*m+d.binTU1X*v,u+=d.tanTU1Y*m+d.binTU1Y*v,l+=d.tanTU1Z*m+d.binTU1Z*v,r-=d.tanU2X*m+d.binU2X*v,o-=d.tanU2Y*m+d.binU2Y*v,a-=d.tanU2Z*m+d.binU2Z*v,h-=d.tanTU2X*m+d.binTU2X*v,c-=d.tanTU2Y*m+d.binTU2Y*v,p-=d.tanTU2Z*m+d.binTU2Z*v,g=(r-t)*d.norX+(o-e)*d.norY+(a-i)*d.norZ+h*d.norT2X+c*d.norT2Y+p*d.norT2Z-s*d.norT1X-u*d.norT1Y-l*d.norT1Z,f=b,m=(g-d.norTar)*d.norDen,b+=m,b>0&&(b=0),m=b-f,t+=d.norU1X*m,e+=d.norU1Y*m,i+=d.norU1Z*m,s+=d.norTU1X*m,u+=d.norTU1Y*m,l+=d.norTU1Z*m,r-=d.norU2X*m,o-=d.norU2Y*m,a-=d.norU2Z*m,h-=d.norTU2X*m,c-=d.norTU2Y*m,p-=d.norTU2Z*m,d.norImp=b,d.tanImp=x,d.binImp=_,d.last)break;d=d.next}this.lv1.x=t,this.lv1.y=e,this.lv1.z=i,this.lv2.x=r,this.lv2.y=o,this.lv2.z=a,this.av1.x=s,this.av1.y=u,this.av1.z=l,this.av2.x=h,this.av2.y=c,this.av2.z=p},n.ContactConstraint.prototype.postSolve=function(){for(var t=this.cs,e=this.num;e--;){var i=this.ps[e];i.normal.x=t.norX,i.normal.y=t.norY,i.normal.z=t.norZ,i.tangent.x=t.tanX,i.tangent.y=t.tanY,i.tangent.z=t.tanZ,i.binormal.x=t.binX,i.binormal.y=t.binY,i.binormal.z=t.binZ,i.normalImpulse=t.norImp,i.tangentImpulse=t.tanImp,i.binormalImpulse=t.binImp,i.normalDenominator=t.norDen,i.tangentDenominator=t.tanDen,i.binormalDenominator=t.binDen,t=t.next}},n.ContactLink=function(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t},n.ContactManifold=function(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[],this.points.length=4,this.points[0]=new n.ManifoldPoint,this.points[1]=new n.ManifoldPoint,this.points[2]=new n.ManifoldPoint,this.points[3]=new n.ManifoldPoint},n.ContactManifold.prototype={constructor:n.ContactManifold,reset:function(t,e){this.body1=t.parent,this.body2=e.parent,this.numPoints=0},addPoint:function(t,e,i,n,r,o,a,s){var u=this.points[this.numPoints++];u.position.x=t,u.position.y=e,u.position.z=i;var l=this.body1.rotation,h=t-this.body1.position.x,c=e-this.body1.position.y,p=i-this.body1.position.z,d=l.elements;u.localPoint1.x=h*d[0]+c*d[3]+p*d[6],u.localPoint1.y=h*d[1]+c*d[4]+p*d[7],u.localPoint1.z=h*d[2]+c*d[5]+p*d[8],l=this.body2.rotation,h=t-this.body2.position.x,c=e-this.body2.position.y,p=i-this.body2.position.z,u.localPoint2.x=h*d[0]+c*d[3]+p*d[6],u.localPoint2.y=h*d[1]+c*d[4]+p*d[7],u.localPoint2.z=h*d[2]+c*d[5]+p*d[8],u.normalImpulse=0,s?(u.normal.x=-n,u.normal.y=-r,u.normal.z=-o):(u.normal.x=n,u.normal.y=r,u.normal.z=o),u.penetration=a,u.warmStarted=!1}},n.ContactPointDataBuffer=function(){this.norX=NaN,this.norY=NaN,this.norZ=NaN,this.tanX=NaN,this.tanY=NaN,this.tanZ=NaN,this.binX=NaN,this.binY=NaN,this.binZ=NaN,this.rp1X=NaN,this.rp1Y=NaN,this.rp1Z=NaN,this.rp2X=NaN,this.rp2Y=NaN,this.rp2Z=NaN,this.norU1X=NaN,this.norU1Y=NaN,this.norU1Z=NaN,this.norU2X=NaN,this.norU2Y=NaN,this.norU2Z=NaN,this.tanU1X=NaN,this.tanU1Y=NaN,this.tanU1Z=NaN,this.tanU2X=NaN,this.tanU2Y=NaN,
this.tanU2Z=NaN,this.binU1X=NaN,this.binU1Y=NaN,this.binU1Z=NaN,this.binU2X=NaN,this.binU2Y=NaN,this.binU2Z=NaN,this.norT1X=NaN,this.norT1Y=NaN,this.norT1Z=NaN,this.norT2X=NaN,this.norT2Y=NaN,this.norT2Z=NaN,this.tanT1X=NaN,this.tanT1Y=NaN,this.tanT1Z=NaN,this.tanT2X=NaN,this.tanT2Y=NaN,this.tanT2Z=NaN,this.binT1X=NaN,this.binT1Y=NaN,this.binT1Z=NaN,this.binT2X=NaN,this.binT2Y=NaN,this.binT2Z=NaN,this.norTU1X=NaN,this.norTU1Y=NaN,this.norTU1Z=NaN,this.norTU2X=NaN,this.norTU2Y=NaN,this.norTU2Z=NaN,this.tanTU1X=NaN,this.tanTU1Y=NaN,this.tanTU1Z=NaN,this.tanTU2X=NaN,this.tanTU2Y=NaN,this.tanTU2Z=NaN,this.binTU1X=NaN,this.binTU1Y=NaN,this.binTU1Z=NaN,this.binTU2X=NaN,this.binTU2Y=NaN,this.binTU2Z=NaN,this.norImp=NaN,this.tanImp=NaN,this.binImp=NaN,this.norDen=NaN,this.tanDen=NaN,this.binDen=NaN,this.norTar=NaN,this.next=null,this.last=!1},n.ImpulseDataBuffer=function(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN},n.ManifoldPoint=function(){this.warmStarted=!1,this.position=new n.Vec3,this.localPoint1=new n.Vec3,this.localPoint2=new n.Vec3,this.normal=new n.Vec3,this.tangent=new n.Vec3,this.binormal=new n.Vec3,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0},n.MassInfo=function(){this.mass=0,this.inertia=new n.Mat33},n.Shape=function(t){this.type=n.SHAPE_NULL,this.id=n.nextID++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new n.Vec3,this.rotation=new n.Mat33,this.relativePosition=(new n.Vec3).copy(t.relativePosition),this.relativeRotation=(new n.Mat33).copy(t.relativeRotation),this.aabb=new n.AABB,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith},n.Shape.prototype={constructor:n.Shape,calculateMassInfo:function(t){n.Error("Shape","Inheritance error.")},updateProxy:function(){n.Error("Shape","Inheritance error.")}},n.ShapeConfig=function(){this.relativePosition=new n.Vec3,this.relativeRotation=new n.Mat33,this.friction=.4,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295},n.BoxShape=function(t,e,r,o){n.Shape.call(this,t),this.type=n.SHAPE_BOX,this.width=e,this.height=r,this.depth=o,this.halfWidth=.5*e,this.halfHeight=.5*r,this.halfDepth=.5*o,this.dimentions=new i(18),this.elements=new i(24)},n.BoxShape.prototype=Object.create(n.Shape.prototype),n.BoxShape.prototype.constructor=n.BoxShape,n.BoxShape.prototype.calculateMassInfo=function(t){var e=this.width*this.height*this.depth*this.density,i=1/12;t.mass=e,t.inertia.set(e*(this.height*this.height+this.depth*this.depth)*i,0,0,0,e*(this.width*this.width+this.depth*this.depth)*i,0,0,0,e*(this.width*this.width+this.height*this.height)*i)},n.BoxShape.prototype.updateProxy=function(){var t=this.rotation.elements,e=this.dimentions;e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e[9]=t[0]*this.halfWidth,e[10]=t[3]*this.halfWidth,e[11]=t[6]*this.halfWidth,e[12]=t[1]*this.halfHeight,e[13]=t[4]*this.halfHeight,e[14]=t[7]*this.halfHeight,e[15]=t[2]*this.halfDepth,e[16]=t[5]*this.halfDepth,e[17]=t[8]*this.halfDepth;var i=e[9],r=e[10],o=e[11],a=e[12],s=e[13],u=e[14],l=e[15],h=e[16],c=e[17],p=this.position.x,d=this.position.y,f=this.position.z,m=this.elements;m[0]=p+i+a+l,m[1]=d+r+s+h,m[2]=f+o+u+c,m[3]=p+i+a-l,m[4]=d+r+s-h,m[5]=f+o+u-c,m[6]=p+i-a+l,m[7]=d+r-s+h,m[8]=f+o-u+c,m[9]=p+i-a-l,m[10]=d+r-s-h,m[11]=f+o-u-c,m[12]=p-i+a+l,m[13]=d-r+s+h,m[14]=f-o+u+c,m[15]=p-i+a-l,m[16]=d-r+s-h,m[17]=f-o+u-c,m[18]=p-i-a+l,m[19]=d-r-s+h,m[20]=f-o-u+c,m[21]=p-i-a-l,m[22]=d-r-s-h,m[23]=f-o-u-c;var y=e[9]<0?-e[9]:e[9],v=e[10]<0?-e[10]:e[10],g=e[11]<0?-e[11]:e[11];y=e[12]<0?y-e[12]:y+e[12],v=e[13]<0?v-e[13]:v+e[13],g=e[14]<0?g-e[14]:g+e[14],y=e[15]<0?y-e[15]:y+e[15],v=e[16]<0?v-e[16]:v+e[16],g=e[17]<0?g-e[17]:g+e[17];var b=n.AABB_PROX;this.aabb.set(this.position.x-y-b,this.position.x+y+b,this.position.y-v-b,this.position.y+v+b,this.position.z-g-b,this.position.z+g+b),null!=this.proxy&&this.proxy.update()},n.SphereShape=function(t,e){n.Shape.call(this,t),this.type=n.SHAPE_SPHERE,this.radius=e},n.SphereShape.prototype=Object.create(n.Shape.prototype),n.SphereShape.prototype.constructor=n.SphereShape,n.SphereShape.prototype.calculateMassInfo=function(t){var e=1.333*n.PI*this.radius*this.radius*this.radius*this.density;t.mass=e;var i=e*this.radius*this.radius*.4;t.inertia.set(i,0,0,0,i,0,0,0,i)},n.SphereShape.prototype.updateProxy=function(){var t=n.AABB_PROX;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),null!=this.proxy&&this.proxy.update()},n.CylinderShape=function(t,e,i){n.Shape.call(this,t),this.type=n.SHAPE_CYLINDER,this.radius=e,this.height=i,this.halfHeight=.5*i,this.normalDirection=new n.Vec3,this.halfDirection=new n.Vec3},n.CylinderShape.prototype=Object.create(n.Shape.prototype),n.CylinderShape.prototype.constructor=n.CylinderShape,n.CylinderShape.prototype.calculateMassInfo=function(t){var e=this.radius*this.radius,i=n.PI*e*this.height*this.density,r=(.25*e+.0833*this.height*this.height)*i,o=.5*e;t.mass=i,t.inertia.set(r,0,0,0,o,0,0,0,r)},n.CylinderShape.prototype.updateProxy=function(){var t,e,i,r,o,a,s,u,l,h,c,p=this.rotation.elements;o=p[1]*p[1],a=p[4]*p[4],s=p[7]*p[7],this.normalDirection.set(p[1],p[4],p[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),e=1-o,t=n.sqrt(e*e+o*a+o*s),t>0&&(t=this.radius/t),e*=t,i=1-a,t=n.sqrt(a*o+i*i+a*s),t>0&&(t=this.radius/t),i*=t,r=1-s,t=n.sqrt(s*o+s*a+r*r),t>0&&(t=this.radius/t),r*=t,u=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,l=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,h=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,u=0>e?u-e:u+e,l=0>i?l-i:l+i,h=0>r?h-r:h+r,c=n.AABB_PROX,this.aabb.set(this.position.x-u-c,this.position.x+u+c,this.position.y-l-c,this.position.y+l+c,this.position.z-h-c,this.position.z+h+c),null!=this.proxy&&this.proxy.update()},n.CollisionDetector=function(){this.flip=!1},n.CollisionDetector.prototype={constructor:n.CollisionDetector,detectCollision:function(t,e,i){n.Error("CollisionDetector","Inheritance error.")}},n.BoxBoxCollisionDetector=function(){n.CollisionDetector.call(this),this.clipVertices1=new i(24),this.clipVertices2=new i(24),this.used=new i(8),this.INF=1/0},n.BoxBoxCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.BoxBoxCollisionDetector.prototype.constructor=n.BoxBoxCollisionDetector,n.BoxBoxCollisionDetector.prototype.detectCollision=function(t,e,i){var r,o;t.id<e.id?(r=t,o=e):(r=e,o=t);var a,s,u,l,h,c,p,d,f,m,y,v,g,b,x,_,w,M,S,C,E,T,P,A,k,O,N,D,L,R,I,z,j,V,B,U,F=r.elements,G=o.elements,H=r.dimentions,W=o.dimentions,X=r.position,q=o.position,Y=X.x,K=X.y,Z=X.z,J=q.x,Q=q.y,$=q.z,tt=J-Y,et=Q-K,it=$-Z,nt=r.halfWidth,rt=r.halfHeight,ot=r.halfDepth,at=o.halfWidth,st=o.halfHeight,ut=o.halfDepth,lt=H[0],ht=H[1],ct=H[2],pt=H[3],dt=H[4],ft=H[5],mt=H[6],yt=H[7],vt=H[8],gt=H[9],bt=H[10],xt=H[11],_t=H[12],wt=H[13],Mt=H[14],St=H[15],Ct=H[16],Et=H[17],Tt=W[0],Pt=W[1],At=W[2],kt=W[3],Ot=W[4],Nt=W[5],Dt=W[6],Lt=W[7],Rt=W[8],It=W[9],zt=W[10],jt=W[11],Vt=W[12],Bt=W[13],Ut=W[14],Ft=W[15],Gt=W[16],Ht=W[17],Wt=ht*At-ct*Pt,Xt=ct*Tt-lt*At,qt=lt*Pt-ht*Tt,Yt=ht*Nt-ct*Ot,Kt=ct*kt-lt*Nt,Zt=lt*Ot-ht*kt,Jt=ht*Rt-ct*Lt,Qt=ct*Dt-lt*Rt,$t=lt*Lt-ht*Dt,te=dt*At-ft*Pt,ee=ft*Tt-pt*At,ie=pt*Pt-dt*Tt,ne=dt*Nt-ft*Ot,re=ft*kt-pt*Nt,oe=pt*Ot-dt*kt,ae=dt*Rt-ft*Lt,se=ft*Dt-pt*Rt,ue=pt*Lt-dt*Dt,le=yt*At-vt*Pt,he=vt*Tt-mt*At,ce=mt*Pt-yt*Tt,pe=yt*Nt-vt*Ot,de=vt*kt-mt*Nt,fe=mt*Ot-yt*kt,me=yt*Rt-vt*Lt,ye=vt*Dt-mt*Rt,ve=mt*Lt-yt*Dt,ge=!1,be=!1,xe=!1,_e=!1,we=!1,Me=!1,Se=!1,Ce=!1,Ee=!1;if(I=lt*tt+ht*et+ct*it,a=I>0,a||(I=-I),z=nt,V=lt*Tt+ht*Pt+ct*At,B=lt*kt+ht*Ot+ct*Nt,U=lt*Dt+ht*Lt+ct*Rt,0>V&&(V=-V),0>B&&(B=-B),0>U&&(U=-U),j=V*at+B*st+U*ut,_=I-z-j,!(_>0||(I=pt*tt+dt*et+ft*it,s=I>0,s||(I=-I),z=rt,V=pt*Tt+dt*Pt+ft*At,B=pt*kt+dt*Ot+ft*Nt,U=pt*Dt+dt*Lt+ft*Rt,0>V&&(V=-V),0>B&&(B=-B),0>U&&(U=-U),j=V*at+B*st+U*ut,w=I-z-j,w>0||(I=mt*tt+yt*et+vt*it,u=I>0,u||(I=-I),z=ot,V=mt*Tt+yt*Pt+vt*At,B=mt*kt+yt*Ot+vt*Nt,U=mt*Dt+yt*Lt+vt*Rt,0>V&&(V=-V),0>B&&(B=-B),0>U&&(U=-U),j=V*at+B*st+U*ut,M=I-z-j,M>0||(I=Tt*tt+Pt*et+At*it,l=I>0,l||(I=-I),V=Tt*lt+Pt*ht+At*ct,B=Tt*pt+Pt*dt+At*ft,U=Tt*mt+Pt*yt+At*vt,0>V&&(V=-V),0>B&&(B=-B),0>U&&(U=-U),z=V*nt+B*rt+U*ot,j=at,S=1*(I-z-j),S>0||(I=kt*tt+Ot*et+Nt*it,h=I>0,h||(I=-I),V=kt*lt+Ot*ht+Nt*ct,B=kt*pt+Ot*dt+Nt*ft,U=kt*mt+Ot*yt+Nt*vt,0>V&&(V=-V),0>B&&(B=-B),0>U&&(U=-U),z=V*nt+B*rt+U*ot,j=st,C=1*(I-z-j),C>0||(I=Dt*tt+Lt*et+Rt*it,c=I>0,c||(I=-I),V=Dt*lt+Lt*ht+Rt*ct,B=Dt*pt+Lt*dt+Rt*ft,U=Dt*mt+Lt*yt+Rt*vt,0>V&&(V=-V),0>B&&(B=-B),0>U&&(U=-U),z=V*nt+B*rt+U*ot,j=ut,E=1*(I-z-j),E>0))))))){if(I=Wt*Wt+Xt*Xt+qt*qt,I>1e-5){if(I=1/n.sqrt(I),Wt*=I,Xt*=I,qt*=I,I=Wt*tt+Xt*et+qt*it,p=I>0,p||(I=-I),V=Wt*pt+Xt*dt+qt*ft,B=Wt*mt+Xt*yt+qt*vt,0>V&&(V=-V),0>B&&(B=-B),z=V*rt+B*ot,V=Wt*kt+Xt*Ot+qt*Nt,B=Wt*Dt+Xt*Lt+qt*Rt,0>V&&(V=-V),0>B&&(B=-B),j=V*st+B*ut,T=I-z-j,T>0)return}else p=!1,T=0,ge=!0;if(I=Yt*Yt+Kt*Kt+Zt*Zt,I>1e-5){if(I=1/n.sqrt(I),Yt*=I,Kt*=I,Zt*=I,I=Yt*tt+Kt*et+Zt*it,d=I>0,d||(I=-I),V=Yt*pt+Kt*dt+Zt*ft,B=Yt*mt+Kt*yt+Zt*vt,0>V&&(V=-V),0>B&&(B=-B),z=V*rt+B*ot,V=Yt*Tt+Kt*Pt+Zt*At,B=Yt*Dt+Kt*Lt+Zt*Rt,0>V&&(V=-V),0>B&&(B=-B),j=V*at+B*ut,P=I-z-j,P>0)return}else d=!1,P=0,be=!0;if(I=Jt*Jt+Qt*Qt+$t*$t,I>1e-5){if(I=1/n.sqrt(I),Jt*=I,Qt*=I,$t*=I,I=Jt*tt+Qt*et+$t*it,f=I>0,f||(I=-I),V=Jt*pt+Qt*dt+$t*ft,B=Jt*mt+Qt*yt+$t*vt,0>V&&(V=-V),0>B&&(B=-B),z=V*rt+B*ot,V=Jt*Tt+Qt*Pt+$t*At,B=Jt*kt+Qt*Ot+$t*Nt,0>V&&(V=-V),0>B&&(B=-B),j=V*at+B*st,A=I-z-j,A>0)return}else f=!1,A=0,xe=!0;if(I=te*te+ee*ee+ie*ie,I>1e-5){if(I=1/n.sqrt(I),te*=I,ee*=I,ie*=I,I=te*tt+ee*et+ie*it,m=I>0,m||(I=-I),V=te*lt+ee*ht+ie*ct,B=te*mt+ee*yt+ie*vt,0>V&&(V=-V),0>B&&(B=-B),z=V*nt+B*ot,V=te*kt+ee*Ot+ie*Nt,B=te*Dt+ee*Lt+ie*Rt,0>V&&(V=-V),0>B&&(B=-B),j=V*st+B*ut,k=I-z-j,k>0)return}else m=!1,k=0,_e=!0;if(I=ne*ne+re*re+oe*oe,I>1e-5){if(I=1/n.sqrt(I),ne*=I,re*=I,oe*=I,I=ne*tt+re*et+oe*it,y=I>0,y||(I=-I),V=ne*lt+re*ht+oe*ct,B=ne*mt+re*yt+oe*vt,0>V&&(V=-V),0>B&&(B=-B),z=V*nt+B*ot,V=ne*Tt+re*Pt+oe*At,B=ne*Dt+re*Lt+oe*Rt,0>V&&(V=-V),0>B&&(B=-B),j=V*at+B*ut,O=I-z-j,O>0)return}else y=!1,O=0,we=!0;if(I=ae*ae+se*se+ue*ue,I>1e-5){if(I=1/n.sqrt(I),ae*=I,se*=I,ue*=I,I=ae*tt+se*et+ue*it,v=I>0,v||(I=-I),V=ae*lt+se*ht+ue*ct,B=ae*mt+se*yt+ue*vt,0>V&&(V=-V),0>B&&(B=-B),z=V*nt+B*ot,V=ae*Tt+se*Pt+ue*At,B=ae*kt+se*Ot+ue*Nt,0>V&&(V=-V),0>B&&(B=-B),j=V*at+B*st,N=I-z-j,N>0)return}else v=!1,N=0,Me=!0;if(I=le*le+he*he+ce*ce,I>1e-5){if(I=1/n.sqrt(I),le*=I,he*=I,ce*=I,I=le*tt+he*et+ce*it,g=I>0,g||(I=-I),V=le*lt+he*ht+ce*ct,B=le*pt+he*dt+ce*ft,0>V&&(V=-V),0>B&&(B=-B),z=V*nt+B*rt,V=le*kt+he*Ot+ce*Nt,B=le*Dt+he*Lt+ce*Rt,0>V&&(V=-V),0>B&&(B=-B),j=V*st+B*ut,D=I-z-j,D>0)return}else g=!1,D=0,Se=!0;if(I=pe*pe+de*de+fe*fe,I>1e-5){if(I=1/n.sqrt(I),pe*=I,de*=I,fe*=I,I=pe*tt+de*et+fe*it,b=I>0,b||(I=-I),V=pe*lt+de*ht+fe*ct,B=pe*pt+de*dt+fe*ft,0>V&&(V=-V),0>B&&(B=-B),z=V*nt+B*rt,V=pe*Tt+de*Pt+fe*At,B=pe*Dt+de*Lt+fe*Rt,0>V&&(V=-V),0>B&&(B=-B),j=V*at+B*ut,L=I-z-j,L>0)return}else b=!1,L=0,Ce=!0;if(I=me*me+ye*ye+ve*ve,I>1e-5){if(I=1/n.sqrt(I),me*=I,ye*=I,ve*=I,I=me*tt+ye*et+ve*it,x=I>0,x||(I=-I),V=me*lt+ye*ht+ve*ct,B=me*pt+ye*dt+ve*ft,0>V&&(V=-V),0>B&&(B=-B),z=V*nt+B*rt,V=me*Tt+ye*Pt+ve*At,B=me*kt+ye*Ot+ve*Nt,0>V&&(V=-V),0>B&&(B=-B),j=V*at+B*st,R=I-z-j,R>0)return}else x=!1,R=0,Ee=!0;var Te=_,Pe=_,Ae=0,ke=a;w>Pe&&(Te=w,Pe=w,Ae=1,ke=s),M>Pe&&(Te=M,Pe=M,Ae=2,ke=u),S>Pe&&(Te=S,Pe=S,Ae=3,ke=l),C>Pe&&(Te=C,Pe=C,Ae=4,ke=h),E>Pe&&(Te=E,Pe=E,Ae=5,ke=c),T-.01>Pe&&!ge&&(Te=T,Pe=T-.01,Ae=6,ke=p),P-.01>Pe&&!be&&(Te=P,Pe=P-.01,Ae=7,ke=d),A-.01>Pe&&!xe&&(Te=A,Pe=A-.01,Ae=8,ke=f),k-.01>Pe&&!_e&&(Te=k,Pe=k-.01,Ae=9,ke=m),O-.01>Pe&&!we&&(Te=O,Pe=O-.01,Ae=10,ke=y),N-.01>Pe&&!Me&&(Te=N,Pe=N-.01,Ae=11,ke=v),D-.01>Pe&&!Se&&(Te=D,Pe=D-.01,Ae=12,ke=g),L-.01>Pe&&!Ce&&(Te=L,Pe=L-.01,Ae=13,ke=b),R-.01>Pe&&!Ee&&(Te=R,Ae=14,ke=x);var Oe=0,Ne=0,De=0,Le=0,Re=0,Ie=0,ze=0,je=0,Ve=0,Be=0,Ue=0,Fe=0,Ge=0,He=0,We=0,Xe=0,qe=0,Ye=0,Ke=!1;0==Ae?(ke?(Be=Y+gt,Ue=K+bt,Fe=Z+xt,Oe=lt,Ne=ht,De=ct):(Be=Y-gt,Ue=K-bt,Fe=Z-xt,Oe=-lt,Ne=-ht,De=-ct),Ge=_t,He=wt,We=Mt,Le=-pt,Re=-dt,Ie=-ft,Xe=St,qe=Ct,Ye=Et,ze=-mt,je=-yt,Ve=-vt):1==Ae?(ke?(Be=Y+_t,Ue=K+wt,Fe=Z+Mt,Oe=pt,Ne=dt,De=ft):(Be=Y-_t,Ue=K-wt,Fe=Z-Mt,Oe=-pt,Ne=-dt,De=-ft),Ge=gt,He=bt,We=xt,Le=-lt,Re=-ht,Ie=-ct,Xe=St,qe=Ct,Ye=Et,ze=-mt,je=-yt,Ve=-vt):2==Ae?(ke?(Be=Y+St,Ue=K+Ct,Fe=Z+Et,Oe=mt,Ne=yt,De=vt):(Be=Y-St,Ue=K-Ct,Fe=Z-Et,Oe=-mt,Ne=-yt,De=-vt),Ge=gt,He=bt,We=xt,Le=-lt,Re=-ht,Ie=-ct,Xe=_t,qe=wt,Ye=Mt,ze=-pt,je=-dt,Ve=-ft):3==Ae?(Ke=!0,ke?(Be=J-It,Ue=Q-zt,Fe=$-jt,Oe=-Tt,Ne=-Pt,De=-At):(Be=J+It,Ue=Q+zt,Fe=$+jt,Oe=Tt,Ne=Pt,De=At),Ge=Vt,He=Bt,We=Ut,Le=-kt,Re=-Ot,Ie=-Nt,Xe=Ft,qe=Gt,Ye=Ht,ze=-Dt,je=-Lt,Ve=-Rt):4==Ae?(Ke=!0,ke?(Be=J-Vt,Ue=Q-Bt,Fe=$-Ut,Oe=-kt,Ne=-Ot,De=-Nt):(Be=J+Vt,Ue=Q+Bt,Fe=$+Ut,Oe=kt,Ne=Ot,De=Nt),Ge=It,He=zt,We=jt,Le=-Tt,Re=-Pt,Ie=-At,Xe=Ft,qe=Gt,Ye=Ht,ze=-Dt,je=-Lt,Ve=-Rt):5==Ae?(Ke=!0,ke?(Be=J-Ft,Ue=Q-Gt,Fe=$-Ht,Oe=-Dt,Ne=-Lt,De=-Rt):(Be=J+Ft,Ue=Q+Gt,Fe=$+Ht,Oe=Dt,Ne=Lt,De=Rt),Ge=It,He=zt,We=jt,Le=-Tt,Re=-Pt,Ie=-At,Xe=Vt,qe=Bt,Ye=Ut,ze=-kt,je=-Ot,Ve=-Nt):6==Ae?(Oe=Wt,Ne=Xt,De=qt,Le=lt,Re=ht,Ie=ct,ze=Tt,je=Pt,Ve=At):7==Ae?(Oe=Yt,Ne=Kt,De=Zt,Le=lt,Re=ht,Ie=ct,ze=kt,je=Ot,Ve=Nt):8==Ae?(Oe=Jt,Ne=Qt,De=$t,Le=lt,Re=ht,Ie=ct,ze=Dt,je=Lt,Ve=Rt):9==Ae?(Oe=te,Ne=ee,De=ie,Le=pt,Re=dt,Ie=ft,ze=Tt,je=Pt,Ve=At):10==Ae?(Oe=ne,Ne=re,De=oe,Le=pt,Re=dt,Ie=ft,ze=kt,je=Ot,Ve=Nt):11==Ae?(Oe=ae,Ne=se,De=ue,Le=pt,Re=dt,Ie=ft,ze=Dt,je=Lt,Ve=Rt):12==Ae?(Oe=le,Ne=he,De=ce,Le=mt,Re=yt,Ie=vt,ze=Tt,je=Pt,Ve=At):13==Ae?(Oe=pe,Ne=de,De=fe,Le=mt,Re=yt,Ie=vt,ze=kt,je=Ot,Ve=Nt):14==Ae&&(Oe=me,Ne=ye,De=ve,Le=mt,Re=yt,Ie=vt,ze=Dt,je=Lt,Ve=Rt);if(Ae>5){ke||(Oe=-Oe,Ne=-Ne,De=-De);var Ze,Je,Qe,$e,ti,ei,ii,ni,ri,oi,ai;ei=F[0],ii=F[1],ni=F[2],Je=Oe*ei+Ne*ii+De*ni,Qe=F[3],$e=F[4],ti=F[5],Ze=Oe*Qe+Ne*$e+De*ti,Ze>Je&&(Je=Ze,ei=Qe,ii=$e,ni=ti),Qe=F[6],$e=F[7],ti=F[8],Ze=Oe*Qe+Ne*$e+De*ti,Ze>Je&&(Je=Ze,ei=Qe,ii=$e,ni=ti),Qe=F[9],$e=F[10],ti=F[11],Ze=Oe*Qe+Ne*$e+De*ti,Ze>Je&&(Je=Ze,ei=Qe,ii=$e,ni=ti),Qe=F[12],$e=F[13],ti=F[14],Ze=Oe*Qe+Ne*$e+De*ti,Ze>Je&&(Je=Ze,ei=Qe,ii=$e,ni=ti),Qe=F[15],$e=F[16],ti=F[17],Ze=Oe*Qe+Ne*$e+De*ti,Ze>Je&&(Je=Ze,ei=Qe,ii=$e,ni=ti),Qe=F[18],$e=F[19],ti=F[20],Ze=Oe*Qe+Ne*$e+De*ti,Ze>Je&&(Je=Ze,ei=Qe,ii=$e,ni=ti),Qe=F[21],$e=F[22],ti=F[23],Ze=Oe*Qe+Ne*$e+De*ti,Ze>Je&&(Je=Ze,ei=Qe,ii=$e,ni=ti),ri=G[0],oi=G[1],ai=G[2],Je=Oe*ri+Ne*oi+De*ai,Qe=G[3],$e=G[4],ti=G[5],Ze=Oe*Qe+Ne*$e+De*ti,Je>Ze&&(Je=Ze,ri=Qe,oi=$e,ai=ti),Qe=G[6],$e=G[7],ti=G[8],Ze=Oe*Qe+Ne*$e+De*ti,Je>Ze&&(Je=Ze,ri=Qe,oi=$e,ai=ti),Qe=G[9],$e=G[10],ti=G[11],Ze=Oe*Qe+Ne*$e+De*ti,Je>Ze&&(Je=Ze,ri=Qe,oi=$e,ai=ti),Qe=G[12],$e=G[13],ti=G[14],Ze=Oe*Qe+Ne*$e+De*ti,Je>Ze&&(Je=Ze,ri=Qe,oi=$e,ai=ti),Qe=G[15],$e=G[16],ti=G[17],Ze=Oe*Qe+Ne*$e+De*ti,Je>Ze&&(Je=Ze,ri=Qe,oi=$e,ai=ti),Qe=G[18],$e=G[19],ti=G[20],Ze=Oe*Qe+Ne*$e+De*ti,Je>Ze&&(Je=Ze,ri=Qe,oi=$e,ai=ti),Qe=G[21],$e=G[22],ti=G[23],Ze=Oe*Qe+Ne*$e+De*ti,Je>Ze&&(Je=Ze,ri=Qe,oi=$e,ai=ti),Qe=ri-ei,$e=oi-ii,ti=ai-ni,V=Le*ze+Re*je+Ie*Ve;var si=(Qe*(Le-ze*V)+$e*(Re-je*V)+ti*(Ie-Ve*V))/(1-V*V);return void i.addPoint(ei+Le*si+Oe*Te*.5,ii+Re*si+Ne*Te*.5,ni+Ie*si+De*Te*.5,Oe,Ne,De,Te,!1)}var ui,li,hi,ci,pi,di,fi,mi,yi,vi,gi,bi,xi=1,_i=0,wi=0;Ke?(_i=lt*Oe+ht*Ne+ct*De,xi>_i&&(xi=_i,wi=0),xi>-_i&&(xi=-_i,wi=1),_i=pt*Oe+dt*Ne+ft*De,xi>_i&&(xi=_i,wi=2),xi>-_i&&(xi=-_i,wi=3),_i=mt*Oe+yt*Ne+vt*De,xi>_i&&(xi=_i,wi=4),xi>-_i&&(xi=-_i,wi=5),0==wi?(ui=F[0],li=F[1],hi=F[2],ci=F[6],pi=F[7],di=F[8],fi=F[9],mi=F[10],yi=F[11],vi=F[3],gi=F[4],bi=F[5]):1==wi?(ui=F[15],li=F[16],hi=F[17],ci=F[21],pi=F[22],di=F[23],fi=F[18],mi=F[19],yi=F[20],vi=F[12],gi=F[13],bi=F[14]):2==wi?(ui=F[12],li=F[13],hi=F[14],ci=F[0],pi=F[1],di=F[2],fi=F[3],mi=F[4],yi=F[5],vi=F[15],gi=F[16],bi=F[17]):3==wi?(ui=F[21],li=F[22],hi=F[23],ci=F[9],pi=F[10],di=F[11],fi=F[6],mi=F[7],yi=F[8],vi=F[18],gi=F[19],bi=F[20]):4==wi?(ui=F[12],li=F[13],hi=F[14],ci=F[18],pi=F[19],di=F[20],fi=F[6],mi=F[7],yi=F[8],vi=F[0],gi=F[1],bi=F[2]):5==wi&&(ui=F[3],li=F[4],hi=F[5],ci=F[6],pi=F[7],di=F[8],fi=F[21],mi=F[22],yi=F[23],vi=F[15],gi=F[16],bi=F[17])):(_i=Tt*Oe+Pt*Ne+At*De,xi>_i&&(xi=_i,wi=0),xi>-_i&&(xi=-_i,wi=1),_i=kt*Oe+Ot*Ne+Nt*De,xi>_i&&(xi=_i,wi=2),xi>-_i&&(xi=-_i,wi=3),_i=Dt*Oe+Lt*Ne+Rt*De,xi>_i&&(xi=_i,wi=4),xi>-_i&&(xi=-_i,wi=5),0==wi?(ui=G[0],li=G[1],hi=G[2],ci=G[6],pi=G[7],di=G[8],fi=G[9],mi=G[10],yi=G[11],vi=G[3],gi=G[4],bi=G[5]):1==wi?(ui=G[15],li=G[16],hi=G[17],ci=G[21],pi=G[22],di=G[23],fi=G[18],mi=G[19],yi=G[20],vi=G[12],gi=G[13],bi=G[14]):2==wi?(ui=G[12],li=G[13],hi=G[14],ci=G[0],pi=G[1],di=G[2],fi=G[3],mi=G[4],yi=G[5],vi=G[15],gi=G[16],bi=G[17]):3==wi?(ui=G[21],li=G[22],hi=G[23],ci=G[9],pi=G[10],di=G[11],fi=G[6],mi=G[7],yi=G[8],vi=G[18],gi=G[19],bi=G[20]):4==wi?(ui=G[12],li=G[13],hi=G[14],ci=G[18],pi=G[19],di=G[20],fi=G[6],mi=G[7],yi=G[8],vi=G[0],gi=G[1],bi=G[2]):5==wi&&(ui=G[3],li=G[4],hi=G[5],ci=G[9],pi=G[10],di=G[11],fi=G[21],mi=G[22],yi=G[23],vi=G[15],gi=G[16],bi=G[17]));var Mi,Si,Ci,Ei,Ti,Pi,Ai,ki,Oi;this.clipVertices1[0]=ui,this.clipVertices1[1]=li,this.clipVertices1[2]=hi,this.clipVertices1[3]=ci,this.clipVertices1[4]=pi,this.clipVertices1[5]=di,this.clipVertices1[6]=fi,this.clipVertices1[7]=mi,this.clipVertices1[8]=yi,this.clipVertices1[9]=vi,this.clipVertices1[10]=gi,this.clipVertices1[11]=bi,Si=0,Ei=this.clipVertices1[9],Ti=this.clipVertices1[10],Pi=this.clipVertices1[11],V=(Ei-Be-Ge)*Le+(Ti-Ue-He)*Re+(Pi-Fe-We)*Ie;for(var Ni=0;4>Ni;Ni++)Ci=3*Ni,Ai=this.clipVertices1[Ci],ki=this.clipVertices1[Ci+1],Oi=this.clipVertices1[Ci+2],B=(Ai-Be-Ge)*Le+(ki-Ue-He)*Re+(Oi-Fe-We)*Ie,V>0?B>0?(Ci=3*Si,Si++,this.clipVertices2[Ci]=Ai,this.clipVertices2[Ci+1]=ki,this.clipVertices2[Ci+2]=Oi):(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices2[Ci]=Ei+(Ai-Ei)*si,this.clipVertices2[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices2[Ci+2]=Pi+(Oi-Pi)*si):B>0&&(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices2[Ci]=Ei+(Ai-Ei)*si,this.clipVertices2[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices2[Ci+2]=Pi+(Oi-Pi)*si,Ci=3*Si,Si++,this.clipVertices2[Ci]=Ai,this.clipVertices2[Ci+1]=ki,this.clipVertices2[Ci+2]=Oi),Ei=Ai,Ti=ki,Pi=Oi,V=B;if(Mi=Si,0!=Mi){for(Si=0,Ci=3*(Mi-1),Ei=this.clipVertices2[Ci],Ti=this.clipVertices2[Ci+1],Pi=this.clipVertices2[Ci+2],V=(Ei-Be-Xe)*ze+(Ti-Ue-qe)*je+(Pi-Fe-Ye)*Ve,Ni=0;Mi>Ni;Ni++)Ci=3*Ni,Ai=this.clipVertices2[Ci],ki=this.clipVertices2[Ci+1],Oi=this.clipVertices2[Ci+2],B=(Ai-Be-Xe)*ze+(ki-Ue-qe)*je+(Oi-Fe-Ye)*Ve,V>0?B>0?(Ci=3*Si,Si++,this.clipVertices1[Ci]=Ai,this.clipVertices1[Ci+1]=ki,this.clipVertices1[Ci+2]=Oi):(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices1[Ci]=Ei+(Ai-Ei)*si,this.clipVertices1[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices1[Ci+2]=Pi+(Oi-Pi)*si):B>0&&(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices1[Ci]=Ei+(Ai-Ei)*si,this.clipVertices1[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices1[Ci+2]=Pi+(Oi-Pi)*si,Ci=3*Si,Si++,this.clipVertices1[Ci]=Ai,this.clipVertices1[Ci+1]=ki,this.clipVertices1[Ci+2]=Oi),Ei=Ai,Ti=ki,Pi=Oi,V=B;if(Mi=Si,0!=Mi){for(Si=0,Ci=3*(Mi-1),Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],V=(Ei-Be+Ge)*-Le+(Ti-Ue+He)*-Re+(Pi-Fe+We)*-Ie,Ni=0;Mi>Ni;Ni++)Ci=3*Ni,Ai=this.clipVertices1[Ci],ki=this.clipVertices1[Ci+1],Oi=this.clipVertices1[Ci+2],B=(Ai-Be+Ge)*-Le+(ki-Ue+He)*-Re+(Oi-Fe+We)*-Ie,V>0?B>0?(Ci=3*Si,Si++,this.clipVertices2[Ci]=Ai,this.clipVertices2[Ci+1]=ki,this.clipVertices2[Ci+2]=Oi):(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices2[Ci]=Ei+(Ai-Ei)*si,this.clipVertices2[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices2[Ci+2]=Pi+(Oi-Pi)*si):B>0&&(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices2[Ci]=Ei+(Ai-Ei)*si,this.clipVertices2[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices2[Ci+2]=Pi+(Oi-Pi)*si,Ci=3*Si,Si++,this.clipVertices2[Ci]=Ai,this.clipVertices2[Ci+1]=ki,this.clipVertices2[Ci+2]=Oi),Ei=Ai,Ti=ki,Pi=Oi,V=B;if(Mi=Si,0!=Mi){for(Si=0,Ci=3*(Mi-1),Ei=this.clipVertices2[Ci],Ti=this.clipVertices2[Ci+1],Pi=this.clipVertices2[Ci+2],V=(Ei-Be+Xe)*-ze+(Ti-Ue+qe)*-je+(Pi-Fe+Ye)*-Ve,Ni=0;Mi>Ni;Ni++)Ci=3*Ni,Ai=this.clipVertices2[Ci],ki=this.clipVertices2[Ci+1],Oi=this.clipVertices2[Ci+2],B=(Ai-Be+Xe)*-ze+(ki-Ue+qe)*-je+(Oi-Fe+Ye)*-Ve,V>0?B>0?(Ci=3*Si,Si++,this.clipVertices1[Ci]=Ai,this.clipVertices1[Ci+1]=ki,this.clipVertices1[Ci+2]=Oi):(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices1[Ci]=Ei+(Ai-Ei)*si,this.clipVertices1[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices1[Ci+2]=Pi+(Oi-Pi)*si):B>0&&(Ci=3*Si,Si++,si=V/(V-B),this.clipVertices1[Ci]=Ei+(Ai-Ei)*si,this.clipVertices1[Ci+1]=Ti+(ki-Ti)*si,this.clipVertices1[Ci+2]=Pi+(Oi-Pi)*si,Ci=3*Si,Si++,this.clipVertices1[Ci]=Ai,this.clipVertices1[Ci+1]=ki,this.clipVertices1[Ci+2]=Oi),Ei=Ai,Ti=ki,Pi=Oi,V=B;if(Mi=Si,Ke){var Di=r;r=o,o=Di}if(0!=Mi){var Li=r!=t;if(Mi>4){Ei=.25*(ui+ci+fi+vi),Ti=.25*(li+pi+mi+gi),Pi=.25*(hi+di+yi+bi),Le=ui-Ei,Re=li-Ti,Ie=hi-Pi,ze=ci-Ei,je=pi-Ti,Ve=di-Pi;var Ri=0,Ii=0,zi=0,ji=0,Vi=-this.INF;for(xi=this.INF,Ni=0;Mi>Ni;Ni++)this.used[Ni]=!1,Ci=3*Ni,Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],_i=Ei*Le+Ti*Re+Pi*Ie,xi>_i&&(xi=_i,Ri=Ni),_i>Vi&&(Vi=_i,zi=Ni);for(this.used[Ri]=!0,this.used[zi]=!0,Vi=-this.INF,xi=this.INF,Ni=0;Mi>Ni;Ni++)this.used[Ni]||(Ci=3*Ni,Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],_i=Ei*ze+Ti*je+Pi*Ve,xi>_i&&(xi=_i,Ii=Ni),_i>Vi&&(Vi=_i,ji=Ni));Ci=3*Ri,Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],_i=(Ei-Be)*Oe+(Ti-Ue)*Ne+(Pi-Fe)*De,0>_i&&i.addPoint(Ei,Ti,Pi,Oe,Ne,De,_i,Li),Ci=3*Ii,Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],_i=(Ei-Be)*Oe+(Ti-Ue)*Ne+(Pi-Fe)*De,0>_i&&i.addPoint(Ei,Ti,Pi,Oe,Ne,De,_i,Li),Ci=3*zi,Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],_i=(Ei-Be)*Oe+(Ti-Ue)*Ne+(Pi-Fe)*De,0>_i&&i.addPoint(Ei,Ti,Pi,Oe,Ne,De,_i,Li),Ci=3*ji,Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],_i=(Ei-Be)*Oe+(Ti-Ue)*Ne+(Pi-Fe)*De,0>_i&&i.addPoint(Ei,Ti,Pi,Oe,Ne,De,_i,Li)}else for(Ni=0;Mi>Ni;Ni++)Ci=3*Ni,Ei=this.clipVertices1[Ci],Ti=this.clipVertices1[Ci+1],Pi=this.clipVertices1[Ci+2],_i=(Ei-Be)*Oe+(Ti-Ue)*Ne+(Pi-Fe)*De,0>_i&&i.addPoint(Ei,Ti,Pi,Oe,Ne,De,_i,Li)}}}}}},n.SphereBoxCollisionDetector=function(t){n.CollisionDetector.call(this),this.flip=t},n.SphereBoxCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.SphereBoxCollisionDetector.prototype.constructor=n.SphereBoxCollisionDetector,n.SphereBoxCollisionDetector.prototype.detectCollision=function(t,e,i){var r,o;this.flip?(r=e,o=t):(r=t,o=e);var a,s,u,l,h,c=o.dimentions,p=r.position,d=p.x,f=p.y,m=p.z,y=o.position,v=y.x,g=y.y,b=y.z,x=r.radius,_=o.halfWidth,w=o.halfHeight,M=o.halfDepth,S=d-v,C=f-g,E=m-b,T=c[0]*S+c[1]*C+c[2]*E,P=c[3]*S+c[4]*C+c[5]*E,A=c[6]*S+c[7]*C+c[8]*E,k=0;T>_?T=_:-_>T?T=-_:k=1,P>w?P=w:-w>P?P=-w:k|=2,A>M?A=M:-M>A?A=-M:k|=4,7==k?(S=0>T?_+T:_-T,C=0>P?w+P:w-P,E=0>A?M+A:M-A,C>S?E>S?(l=S-_,0>T?(T=-_,S=c[0],C=c[1],E=c[2]):(T=_,S=-c[0],C=-c[1],E=-c[2])):(l=E-M,0>A?(A=-M,S=c[6],C=c[7],E=c[8]):(A=M,S=-c[6],C=-c[7],E=-c[8])):E>C?(l=C-w,0>P?(P=-w,S=c[3],C=c[4],E=c[5]):(P=w,S=-c[3],C=-c[4],E=-c[5])):(l=E-M,0>A?(A=-M,S=c[6],C=c[7],E=c[8]):(A=M,S=-c[6],C=-c[7],E=-c[8])),a=v+T*c[0]+P*c[3]+A*c[6],s=g+T*c[1]+P*c[4]+A*c[7],u=b+T*c[2]+P*c[5]+A*c[8],i.addPoint(d+x*S,f+x*C,m+x*E,S,C,E,l-x,this.flip)):(a=v+T*c[0]+P*c[3]+A*c[6],s=g+T*c[1]+P*c[4]+A*c[7],u=b+T*c[2]+P*c[5]+A*c[8],S=a-p.x,C=s-p.y,E=u-p.z,l=S*S+C*C+E*E,l>0&&x*x>l&&(l=n.sqrt(l),h=1/l,S*=h,C*=h,E*=h,i.addPoint(d+x*S,f+x*C,m+x*E,S,C,E,l-x,this.flip)))},n.SphereSphereCollisionDetector=function(){n.CollisionDetector.call(this)},n.SphereSphereCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.SphereSphereCollisionDetector.prototype.constructor=n.SphereSphereCollisionDetector,n.SphereSphereCollisionDetector.prototype.detectCollision=function(t,e,i){var r=t,o=e,a=r.position,s=o.position,u=s.x-a.x,l=s.y-a.y,h=s.z-a.z,c=u*u+l*l+h*h,p=r.radius,d=o.radius,f=p+d;if(c>0&&f*f>c){c=n.sqrt(c);var m=1/c;u*=m,l*=m,h*=m,i.addPoint(a.x+u*p,a.y+l*p,a.z+h*p,u,l,h,c-f,!1)}},n.BoxCylinderCollisionDetector=function(t){n.CollisionDetector.call(this),this.flip=t},n.BoxCylinderCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.BoxCylinderCollisionDetector.prototype.constructor=n.BoxCylinderCollisionDetector,n.BoxCylinderCollisionDetector.prototype.getSep=function(t,e,i,r,o){var a,s,u,l,h,c,p,d,f,m,y,v,g,b=new n.Vec3,x=t.position.x,_=t.position.y,w=t.position.z,M=e.position.x,S=e.position.y,C=e.position.z,E=M-x,T=S-_,P=C-w;E*E+T*T+P*P==0&&(T=.001);var A=-E,k=-T,O=-P;this.supportPointB(t,-A,-k,-O,b);var N=b.x,D=b.y,L=b.z;this.supportPointC(e,A,k,O,b);var R=b.x,I=b.y,z=b.z,j=R-N,V=I-D,B=z-L;if(0>=j*A+V*k+B*O)return!1;if(A=V*P-B*T,k=B*E-j*P,O=j*T-V*E,A*A+k*k+O*O==0)return i.init(j-E,V-T,B-P),i.normalize(i),r.init(.5*(N+R),.5*(D+I),.5*(L+z)),!0;this.supportPointB(t,-A,-k,-O,b);var U=b.x,F=b.y,G=b.z;this.supportPointC(e,A,k,O,b);var H=b.x,W=b.y,X=b.z,q=H-U,Y=W-F,K=X-G;if(0>=q*A+Y*k+K*O)return!1;a=j-E,s=V-T,u=B-P,l=q-E,h=Y-T,c=K-P,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l,A*E+k*T+O*P>0&&(a=j,s=V,u=B,j=q,V=Y,B=K,q=a,Y=s,K=u,a=N,s=D,u=L,N=U,D=F,L=G,U=a,F=s,G=u,a=R,s=I,u=z,R=H,I=W,z=X,H=a,W=s,X=u,A=-A,k=-k,O=-O);for(var Z=0;;){if(++Z>100)return!1;this.supportPointB(t,-A,-k,-O,b);var J=b.x,Q=b.y,$=b.z;this.supportPointC(e,A,k,O,b);var tt=b.x,et=b.y,it=b.z,nt=tt-J,rt=et-Q,ot=it-$;if(0>=nt*A+rt*k+ot*O)return!1;if(0>(V*ot-B*rt)*E+(B*nt-j*ot)*T+(j*rt-V*nt)*P)q=nt,Y=rt,K=ot,U=J,F=Q,G=$,H=tt,W=et,X=it,a=j-E,s=V-T,u=B-P,l=nt-E,h=rt-T,c=ot-P,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l;else if(0>(rt*K-ot*Y)*E+(ot*q-nt*K)*T+(nt*Y-rt*q)*P)j=nt,V=rt,B=ot,N=J,D=Q,L=$,R=tt,I=et,z=it,a=nt-E,s=rt-T,u=ot-P,l=q-E,h=Y-T,c=K-P,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l;else for(var at=!1;;){if(a=q-j,s=Y-V,u=K-B,l=nt-j,h=rt-V,c=ot-B,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l,p=1/n.sqrt(A*A+k*k+O*O),A*=p,k*=p,O*=p,A*j+k*V+O*B>=0&&!at){var st=(V*K-B*Y)*nt+(B*q-j*K)*rt+(j*Y-V*q)*ot,ut=(rt*K-ot*Y)*E+(ot*q-nt*K)*T+(nt*Y-rt*q)*P,lt=(T*B-P*V)*nt+(P*j-E*B)*rt+(E*V-T*j)*ot,ht=(Y*B-K*V)*E+(K*j-q*B)*T+(q*V-Y*j)*P,ct=st+ut+lt+ht;0>=ct&&(st=0,ut=(Y*ot-K*rt)*A+(K*nt-q*ot)*k+(q*rt-Y*nt)*O,lt=(rt*K-ot*Y)*A+(ot*q-nt*K)*k+(nt*Y-rt*q)*O,ht=(V*K-B*Y)*A+(B*q-j*K)*k+(j*Y-V*q)*O,ct=ut+lt+ht);var pt=1/ct;d=(x*st+N*ut+U*lt+J*ht)*pt,f=(_*st+D*ut+F*lt+Q*ht)*pt,m=(w*st+L*ut+G*lt+$*ht)*pt,y=(M*st+R*ut+H*lt+tt*ht)*pt,v=(S*st+I*ut+W*lt+et*ht)*pt,g=(C*st+z*ut+X*lt+it*ht)*pt,at=!0}this.supportPointB(t,-A,-k,-O,b);var dt=b.x,ft=b.y,mt=b.z;this.supportPointC(e,A,k,O,b);var yt=b.x,vt=b.y,gt=b.z,bt=yt-dt,xt=vt-ft,_t=gt-mt,wt=-(bt*A+xt*k+_t*O);if(.01>=(bt-nt)*A+(xt-rt)*k+(_t-ot)*O||wt>=0)return at?(i.init(-A,-k,-O),r.init(.5*(d+y),.5*(f+v),.5*(m+g)),o.x=wt,!0):!1;0>(xt*B-_t*V)*E+(_t*j-bt*B)*T+(bt*V-xt*j)*P?0>(xt*K-_t*Y)*E+(_t*q-bt*K)*T+(bt*Y-xt*q)*P?(j=bt,V=xt,B=_t,N=dt,D=ft,L=mt,R=yt,I=vt,z=gt):(nt=bt,rt=xt,ot=_t,J=dt,Q=ft,$=mt,tt=yt,et=vt,it=gt):0>(xt*ot-_t*rt)*E+(_t*nt-bt*ot)*T+(bt*rt-xt*nt)*P?(q=bt,Y=xt,K=_t,U=dt,F=ft,G=mt,H=yt,W=vt,X=gt):(j=bt,V=xt,B=_t,N=dt,D=ft,L=mt,R=yt,I=vt,z=gt)}}},n.BoxCylinderCollisionDetector.prototype.supportPointB=function(t,e,i,n,r){var o,a,s,u=t.rotation.elements,l=u[0]*e+u[3]*i+u[6]*n,h=u[1]*e+u[4]*i+u[7]*n,c=u[2]*e+u[5]*i+u[8]*n,p=t.halfWidth,d=t.halfHeight,f=t.halfDepth;o=0>l?-p:p,a=0>h?-d:d,s=0>c?-f:f,l=u[0]*o+u[1]*a+u[2]*s+t.position.x,h=u[3]*o+u[4]*a+u[5]*s+t.position.y,c=u[6]*o+u[7]*a+u[8]*s+t.position.z,r.init(l,h,c)},n.BoxCylinderCollisionDetector.prototype.supportPointC=function(t,e,i,r,o){var a,s,u,l=t.rotation.elements,h=l[0]*e+l[3]*i+l[6]*r,c=l[1]*e+l[4]*i+l[7]*r,p=l[2]*e+l[5]*i+l[8]*r,d=h,f=p,m=d*d+f*f,y=t.radius,v=t.halfHeight;0==m?0>c?(a=y,s=-v,u=0):(a=y,s=v,u=0):(m=t.radius/n.sqrt(m),0>c?(a=d*m,s=-v,u=f*m):(a=d*m,s=v,u=f*m)),h=l[0]*a+l[1]*s+l[2]*u+t.position.x,c=l[3]*a+l[4]*s+l[5]*u+t.position.y,p=l[6]*a+l[7]*s+l[8]*u+t.position.z,o.init(h,c,p)},n.BoxCylinderCollisionDetector.prototype.detectCollision=function(t,e,i){var r,o;this.flip?(r=e,o=t):(r=t,o=e);var a=new n.Vec3,s=new n.Vec3,u=new n.Vec3;if(this.getSep(r,o,a,s,u)){var l=r.position.x,h=r.position.y,c=r.position.z,p=o.position.x,d=o.position.y,f=o.position.z,m=r.halfWidth,y=r.halfHeight,v=r.halfDepth,g=o.halfHeight,b=o.radius,x=r.dimentions,_=x[0],w=x[1],M=x[2],S=x[3],C=x[4],E=x[5],T=x[6],P=x[7],A=x[8],k=x[9],O=x[10],N=x[11],D=x[12],L=x[13],R=x[14],I=x[15],z=x[16],j=x[17],V=o.normalDirection.x,B=o.normalDirection.y,U=o.normalDirection.z,F=o.halfDirection.x,G=o.halfDirection.y,H=o.halfDirection.z,W=a.x,X=a.y,q=a.z,Y=W*_+X*w+q*M,K=W*S+X*C+q*E,Z=W*T+X*P+q*A,J=W*V+X*B+q*U,Q=Y>0,$=K>0,tt=Z>0,et=J>0;Q||(Y=-Y),$||(K=-K),tt||(Z=-Z),et||(J=-J);var it=0;J>.999?it=Y>.999?Y>J?1:4:K>.999?K>J?2:4:Z>.999&&Z>J?3:4:Y>.999?it=1:K>.999?it=2:Z>.999&&(it=3);var nt,rt,ot,at,st,ut,lt,ht,ct,pt,dt,ft,mt,yt,vt,gt,bt,xt,_t,wt,Mt,St,Ct,Et,Tt,Pt,At,kt,Ot,Nt,Dt,Lt,Rt,It,zt,jt,Vt,Bt,Ut,Ft,Gt,Ht,Wt,Xt,qt,Yt,Kt,Zt,Jt,Qt,$t,te,ee;if(0==it)i.addPoint(s.x,s.y,s.z,W,X,q,u.x,this.flip);else if(4==it){et?(at=p-F,st=d-G,ut=f-H,W=-V,X=-B,q=-U):(at=p+F,st=d+G,ut=f+H,W=V,X=B,q=U);var ie,ne,re,oe,ae,se,ue,le,he,ce,pe,de;wt=1,it=0,Wt=_*W+w*X+M*q,wt>Wt&&(wt=Wt,it=0),wt>-Wt&&(wt=-Wt,it=1),Wt=S*W+C*X+E*q,wt>Wt&&(wt=Wt,it=2),wt>-Wt&&(wt=-Wt,it=3),Wt=T*W+P*X+A*q,wt>Wt&&(wt=Wt,it=4),wt>-Wt&&(wt=-Wt,it=5);var fe=r.elements;switch(it){case 0:ie=fe[0],ne=fe[1],re=fe[2],oe=fe[6],ae=fe[7],se=fe[8],ue=fe[9],le=fe[10],he=fe[11],ce=fe[3],pe=fe[4],de=fe[5];break;case 1:ie=fe[15],ne=fe[16],re=fe[17],oe=fe[21],ae=fe[22],se=fe[23],ue=fe[18],le=fe[19],he=fe[20],ce=fe[12],pe=fe[13],de=fe[14];break;case 2:ie=fe[12],ne=fe[13],re=fe[14],oe=fe[0],ae=fe[1],se=fe[2],ue=fe[3],le=fe[4],he=fe[5],ce=fe[15],pe=fe[16],de=fe[17];break;case 3:ie=fe[21],ne=fe[22],re=fe[23],oe=fe[9],ae=fe[10],se=fe[11],ue=fe[6],le=fe[7],he=fe[8],ce=fe[18],pe=fe[19],de=fe[20];break;case 4:ie=fe[12],ne=fe[13],re=fe[14],oe=fe[18],ae=fe[19],se=fe[20],ue=fe[6],le=fe[7],he=fe[8],ce=fe[0],pe=fe[1],de=fe[2];break;case 5:ie=fe[3],ne=fe[4],re=fe[5],oe=fe[9],ae=fe[10],se=fe[11],ue=fe[21],le=fe[22],he=fe[23],ce=fe[15],pe=fe[16],de=fe[17]}_t=W*(ie-at)+X*(ne-st)+q*(re-ut),0>=_t&&i.addPoint(ie,ne,re,-W,-X,-q,_t,this.flip),_t=W*(oe-at)+X*(ae-st)+q*(se-ut),0>=_t&&i.addPoint(oe,ae,se,-W,-X,-q,_t,this.flip),_t=W*(ue-at)+X*(le-st)+q*(he-ut),0>=_t&&i.addPoint(ue,le,he,-W,-X,-q,_t,this.flip),_t=W*(ce-at)+X*(pe-st)+q*(de-ut),0>=_t&&i.addPoint(ce,pe,de,-W,-X,-q,_t,this.flip)}else{switch(it){case 1:Q?(nt=l+k,rt=h+O,ot=c+N,W=_,X=w,q=M):(nt=l-k,rt=h-O,ot=c-N,W=-_,X=-w,q=-M),Yt=S,Kt=C,Zt=E,te=y,Jt=T,Qt=P,$t=A,ee=v;break;case 2:$?(nt=l+D,rt=h+L,ot=c+R,W=S,X=C,q=E):(nt=l-D,rt=h-L,ot=c-R,W=-S,X=-C,q=-E),Yt=_,Kt=w,Zt=M,te=m,Jt=T,Qt=P,$t=A,ee=v;break;case 3:tt?(nt=l+I,rt=h+z,ot=c+j,W=T,X=P,q=A):(nt=l-I,rt=h-z,ot=c-j,W=-T,X=-P,q=-A),Yt=_,Kt=w,Zt=M,te=m,Jt=S,Qt=C,$t=E,ee=y}if(wt=W*V+X*B+q*U,Mt=0>wt?g:-g,at=p+Mt*V,st=d+Mt*B,ut=f+Mt*U,J>=.999999?(St=-X,Ct=q,Et=W):(St=W,Ct=X,Et=q),Mt=St*V+Ct*B+Et*U,Pt=Mt*V-St,At=Mt*B-Ct,kt=Mt*U-Et,Mt=n.sqrt(Pt*Pt+At*At+kt*kt),0==Mt)return;if(Mt=b/Mt,Pt*=Mt,At*=Mt,kt*=Mt,St=at+Pt,Ct=st+At,Et=ut+kt,-.96>wt||wt>.96)lt=V*V*1.5-.5,ht=V*B*1.5-.866025403*U,ct=V*U*1.5+.866025403*B,pt=B*V*1.5+.866025403*U,dt=B*B*1.5-.5,ft=B*U*1.5-.866025403*V,mt=U*V*1.5-.866025403*B,yt=U*B*1.5+.866025403*V,vt=U*U*1.5-.5,gt=St,bt=Ct,xt=Et,_t=W*(gt-nt)+X*(bt-rt)+q*(xt-ot),St=gt-_t*W-nt,Ct=bt-_t*X-rt,Et=xt-_t*q-ot,Bt=Yt*St+Kt*Ct+Zt*Et,Ht=Jt*St+Qt*Ct+$t*Et,-te>Bt?Bt=-te:Bt>te&&(Bt=te),-ee>Ht?Ht=-ee:Ht>ee&&(Ht=ee),St=Bt*Yt+Ht*Jt,Ct=Bt*Kt+Ht*Qt,Et=Bt*Zt+Ht*$t,gt=nt+St,bt=rt+Ct,xt=ot+Et,i.addPoint(gt,bt,xt,W,X,q,_t,this.flip),gt=Pt*lt+At*ht+kt*ct,bt=Pt*pt+At*dt+kt*ft,xt=Pt*mt+At*yt+kt*vt,gt=(Pt=gt)+at,bt=(At=bt)+st,xt=(kt=xt)+ut,_t=W*(gt-nt)+X*(bt-rt)+q*(xt-ot),0>=_t&&(St=gt-_t*W-nt,Ct=bt-_t*X-rt,Et=xt-_t*q-ot,Bt=Yt*St+Kt*Ct+Zt*Et,Ht=Jt*St+Qt*Ct+$t*Et,-te>Bt?Bt=-te:Bt>te&&(Bt=te),-ee>Ht?Ht=-ee:Ht>ee&&(Ht=ee),St=Bt*Yt+Ht*Jt,Ct=Bt*Kt+Ht*Qt,Et=Bt*Zt+Ht*$t,gt=nt+St,bt=rt+Ct,xt=ot+Et,i.addPoint(gt,bt,xt,W,X,q,_t,this.flip)),
gt=Pt*lt+At*ht+kt*ct,bt=Pt*pt+At*dt+kt*ft,xt=Pt*mt+At*yt+kt*vt,gt=(Pt=gt)+at,bt=(At=bt)+st,xt=(kt=xt)+ut,_t=W*(gt-nt)+X*(bt-rt)+q*(xt-ot),0>=_t&&(St=gt-_t*W-nt,Ct=bt-_t*X-rt,Et=xt-_t*q-ot,Bt=Yt*St+Kt*Ct+Zt*Et,Ht=Jt*St+Qt*Ct+$t*Et,-te>Bt?Bt=-te:Bt>te&&(Bt=te),-ee>Ht?Ht=-ee:Ht>ee&&(Ht=ee),St=Bt*Yt+Ht*Jt,Ct=Bt*Kt+Ht*Qt,Et=Bt*Zt+Ht*$t,gt=nt+St,bt=rt+Ct,xt=ot+Et,i.addPoint(gt,bt,xt,W,X,q,_t,this.flip));else{if(zt=St,jt=Ct,Vt=Et,Bt=W*(zt-nt)+X*(jt-rt)+q*(Vt-ot),zt-=Bt*W,jt-=Bt*X,Vt-=Bt*q,wt>0?(Ut=St+2*F,Ft=Ct+2*G,Gt=Et+2*H):(Ut=St-2*F,Ft=Ct-2*G,Gt=Et-2*H),Ht=W*(Ut-nt)+X*(Ft-rt)+q*(Gt-ot),Ut-=Ht*W,Ft-=Ht*X,Gt-=Ht*q,Ot=zt-nt,Nt=jt-rt,Dt=Vt-ot,Lt=Ut-nt,Rt=Ft-rt,It=Gt-ot,St=Ut-zt,Ct=Ft-jt,Et=Gt-Vt,Tt=Ht-Bt,Y=Ot*Yt+Nt*Kt+Dt*Zt,K=Lt*Yt+Rt*Kt+It*Zt,Wt=Y-te,Xt=K-te,Wt>0){if(Xt>0)return;qt=Wt/(Wt-Xt),zt+=St*qt,jt+=Ct*qt,Vt+=Et*qt,Bt+=Tt*qt,Ot=zt-nt,Nt=jt-rt,Dt=Vt-ot,Y=Ot*Yt+Nt*Kt+Dt*Zt,St=Ut-zt,Ct=Ft-jt,Et=Gt-Vt,Tt=Ht-Bt}else Xt>0&&(qt=Wt/(Wt-Xt),Ut=zt+St*qt,Ft=jt+Ct*qt,Gt=Vt+Et*qt,Ht=Bt+Tt*qt,Lt=Ut-nt,Rt=Ft-rt,It=Gt-ot,K=Lt*Yt+Rt*Kt+It*Zt,St=Ut-zt,Ct=Ft-jt,Et=Gt-Vt,Tt=Ht-Bt);if(Wt=Y+te,Xt=K+te,0>Wt){if(0>Xt)return;qt=Wt/(Wt-Xt),zt+=St*qt,jt+=Ct*qt,Vt+=Et*qt,Bt+=Tt*qt,Ot=zt-nt,Nt=jt-rt,Dt=Vt-ot,St=Ut-zt,Ct=Ft-jt,Et=Gt-Vt,Tt=Ht-Bt}else 0>Xt&&(qt=Wt/(Wt-Xt),Ut=zt+St*qt,Ft=jt+Ct*qt,Gt=Vt+Et*qt,Ht=Bt+Tt*qt,Lt=Ut-nt,Rt=Ft-rt,It=Gt-ot,St=Ut-zt,Ct=Ft-jt,Et=Gt-Vt,Tt=Ht-Bt);if(Y=Ot*Jt+Nt*Qt+Dt*$t,K=Lt*Jt+Rt*Qt+It*$t,Wt=Y-ee,Xt=K-ee,Wt>0){if(Xt>0)return;qt=Wt/(Wt-Xt),zt+=St*qt,jt+=Ct*qt,Vt+=Et*qt,Bt+=Tt*qt,Ot=zt-nt,Nt=jt-rt,Dt=Vt-ot,Y=Ot*Jt+Nt*Qt+Dt*$t,St=Ut-zt,Ct=Ft-jt,Et=Gt-Vt,Tt=Ht-Bt}else Xt>0&&(qt=Wt/(Wt-Xt),Ut=zt+St*qt,Ft=jt+Ct*qt,Gt=Vt+Et*qt,Ht=Bt+Tt*qt,Lt=Ut-nt,Rt=Ft-rt,It=Gt-ot,K=Lt*Jt+Rt*Qt+It*$t,St=Ut-zt,Ct=Ft-jt,Et=Gt-Vt,Tt=Ht-Bt);if(Wt=Y+ee,Xt=K+ee,0>Wt){if(0>Xt)return;qt=Wt/(Wt-Xt),zt+=St*qt,jt+=Ct*qt,Vt+=Et*qt,Bt+=Tt*qt}else 0>Xt&&(qt=Wt/(Wt-Xt),Ut=zt+St*qt,Ft=jt+Ct*qt,Gt=Vt+Et*qt,Ht=Bt+Tt*qt);0>Bt&&i.addPoint(zt,jt,Vt,W,X,q,Bt,this.flip),0>Ht&&i.addPoint(Ut,Ft,Gt,W,X,q,Ht,this.flip)}}}},n.CylinderCylinderCollisionDetector=function(){n.CollisionDetector.call(this)},n.CylinderCylinderCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.CylinderCylinderCollisionDetector.prototype.constructor=n.CylinderCylinderCollisionDetector,n.CylinderCylinderCollisionDetector.prototype.getSep=function(t,e,i,r,o){var a,s,u,l,h,c,p,d,f,m,y,v,g,b=new n.Vec3,x=t.position.x,_=t.position.y,w=t.position.z,M=e.position.x,S=e.position.y,C=e.position.z,E=M-x,T=S-_,P=C-w;E*E+T*T+P*P==0&&(T=.001);var A=-E,k=-T,O=-P;this.supportPoint(t,-A,-k,-O,b);var N=b.x,D=b.y,L=b.z;this.supportPoint(e,A,k,O,b);var R=b.x,I=b.y,z=b.z,j=R-N,V=I-D,B=z-L;if(0>=j*A+V*k+B*O)return!1;if(A=V*P-B*T,k=B*E-j*P,O=j*T-V*E,A*A+k*k+O*O==0)return i.init(j-E,V-T,B-P),i.normalize(i),r.init(.5*(N+R),.5*(D+I),.5*(L+z)),!0;this.supportPoint(t,-A,-k,-O,b);var U=b.x,F=b.y,G=b.z;this.supportPoint(e,A,k,O,b);var H=b.x,W=b.y,X=b.z,q=H-U,Y=W-F,K=X-G;if(0>=q*A+Y*k+K*O)return!1;a=j-E,s=V-T,u=B-P,l=q-E,h=Y-T,c=K-P,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l,A*E+k*T+O*P>0&&(a=j,s=V,u=B,j=q,V=Y,B=K,q=a,Y=s,K=u,a=N,s=D,u=L,N=U,D=F,L=G,U=a,F=s,G=u,a=R,s=I,u=z,R=H,I=W,z=X,H=a,W=s,X=u,A=-A,k=-k,O=-O);for(var Z=0;;){if(++Z>100)return!1;this.supportPoint(t,-A,-k,-O,b);var J=b.x,Q=b.y,$=b.z;this.supportPoint(e,A,k,O,b);var tt=b.x,et=b.y,it=b.z,nt=tt-J,rt=et-Q,ot=it-$;if(0>=nt*A+rt*k+ot*O)return!1;if(0>(V*ot-B*rt)*E+(B*nt-j*ot)*T+(j*rt-V*nt)*P)q=nt,Y=rt,K=ot,U=J,F=Q,G=$,H=tt,W=et,X=it,a=j-E,s=V-T,u=B-P,l=nt-E,h=rt-T,c=ot-P,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l;else if(0>(rt*K-ot*Y)*E+(ot*q-nt*K)*T+(nt*Y-rt*q)*P)j=nt,V=rt,B=ot,N=J,D=Q,L=$,R=tt,I=et,z=it,a=nt-E,s=rt-T,u=ot-P,l=q-E,h=Y-T,c=K-P,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l;else for(var at=!1;;){if(a=q-j,s=Y-V,u=K-B,l=nt-j,h=rt-V,c=ot-B,A=s*c-u*h,k=u*l-a*c,O=a*h-s*l,p=1/n.sqrt(A*A+k*k+O*O),A*=p,k*=p,O*=p,A*j+k*V+O*B>=0&&!at){var st=(V*K-B*Y)*nt+(B*q-j*K)*rt+(j*Y-V*q)*ot,ut=(rt*K-ot*Y)*E+(ot*q-nt*K)*T+(nt*Y-rt*q)*P,lt=(T*B-P*V)*nt+(P*j-E*B)*rt+(E*V-T*j)*ot,ht=(Y*B-K*V)*E+(K*j-q*B)*T+(q*V-Y*j)*P,ct=st+ut+lt+ht;0>=ct&&(st=0,ut=(Y*ot-K*rt)*A+(K*nt-q*ot)*k+(q*rt-Y*nt)*O,lt=(rt*K-ot*Y)*A+(ot*q-nt*K)*k+(nt*Y-rt*q)*O,ht=(V*K-B*Y)*A+(B*q-j*K)*k+(j*Y-V*q)*O,ct=ut+lt+ht);var pt=1/ct;d=(x*st+N*ut+U*lt+J*ht)*pt,f=(_*st+D*ut+F*lt+Q*ht)*pt,m=(w*st+L*ut+G*lt+$*ht)*pt,y=(M*st+R*ut+H*lt+tt*ht)*pt,v=(S*st+I*ut+W*lt+et*ht)*pt,g=(C*st+z*ut+X*lt+it*ht)*pt,at=!0}this.supportPoint(t,-A,-k,-O,b);var dt=b.x,ft=b.y,mt=b.z;this.supportPoint(e,A,k,O,b);var yt=b.x,vt=b.y,gt=b.z,bt=yt-dt,xt=vt-ft,_t=gt-mt,wt=-(bt*A+xt*k+_t*O);if(.01>=(bt-nt)*A+(xt-rt)*k+(_t-ot)*O||wt>=0)return at?(i.init(-A,-k,-O),r.init(.5*(d+y),.5*(f+v),.5*(m+g)),o.x=wt,!0):!1;0>(xt*B-_t*V)*E+(_t*j-bt*B)*T+(bt*V-xt*j)*P?0>(xt*K-_t*Y)*E+(_t*q-bt*K)*T+(bt*Y-xt*q)*P?(j=bt,V=xt,B=_t,N=dt,D=ft,L=mt,R=yt,I=vt,z=gt):(nt=bt,rt=xt,ot=_t,J=dt,Q=ft,$=mt,tt=yt,et=vt,it=gt):0>(xt*ot-_t*rt)*E+(_t*nt-bt*ot)*T+(bt*rt-xt*nt)*P?(q=bt,Y=xt,K=_t,U=dt,F=ft,G=mt,H=yt,W=vt,X=gt):(j=bt,V=xt,B=_t,N=dt,D=ft,L=mt,R=yt,I=vt,z=gt)}}},n.CylinderCylinderCollisionDetector.prototype.supportPoint=function(t,e,i,r,o){var a,s,u,l=t.rotation.elements,h=l[0]*e+l[3]*i+l[6]*r,c=l[1]*e+l[4]*i+l[7]*r,p=l[2]*e+l[5]*i+l[8]*r,d=h,f=p,m=d*d+f*f,y=t.radius,v=t.halfHeight;0==m?0>c?(a=y,s=-v,u=0):(a=y,s=v,u=0):(m=t.radius/n.sqrt(m),0>c?(a=d*m,s=-v,u=f*m):(a=d*m,s=v,u=f*m)),h=l[0]*a+l[1]*s+l[2]*u+t.position.x,c=l[3]*a+l[4]*s+l[5]*u+t.position.y,p=l[6]*a+l[7]*s+l[8]*u+t.position.z,o.init(h,c,p)},n.CylinderCylinderCollisionDetector.prototype.detectCollision=function(t,e,i){var r,o;t.id<e.id?(r=t,o=e):(r=e,o=t);var a,s,u,l,h,c,p,d,f,m,y,v,g,b,x,_,w,M,S,C,E,T=r.position,P=o.position,A=T.x,k=T.y,O=T.z,N=P.x,D=P.y,L=P.z,R=r.halfHeight,I=o.halfHeight,z=r.normalDirection,j=o.normalDirection,V=r.halfDirection,B=o.halfDirection,U=r.radius,F=o.radius,G=z.x,H=z.y,W=z.z,X=j.x,q=j.y,Y=j.z,K=V.x,Z=V.y,J=V.z,Q=B.x,$=B.y,tt=B.z,et=A-N,it=k-D,nt=O-L,rt=new n.Vec3,ot=new n.Vec3,at=new n.Vec3;if(this.getSep(r,o,rt,ot,at)){var st=rt.x*G+rt.y*H+rt.z*W,ut=rt.x*X+rt.y*q+rt.z*Y,lt=st>0,ht=ut>0;lt||(st=-st),ht||(ut=-ut);var ct=0;(st>.999||ut>.999)&&(ct=st>ut?1:2);var pt,dt,ft,mt,yt,vt,gt,bt,xt,_t,wt,Mt,St,Ct,Et,Tt,Pt,At,kt,Ot,Nt=at.x;switch(pt=rt.x,dt=rt.y,ft=rt.z,ct){case 0:i.addPoint(ot.x,ot.y,ot.z,pt,dt,ft,Nt,!1);break;case 1:if(lt?(s=A+K,u=k+Z,l=O+J,pt=G,dt=H,ft=W):(s=A-K,u=k-Z,l=O-J,pt=-G,dt=-H,ft=-W),S=pt*X+dt*q+ft*Y,a=0>S?I:-I,h=N+a*X,c=D+a*q,p=L+a*Y,ut>=.999999?(d=-dt,f=ft,m=pt):(d=pt,f=dt,m=ft),a=d*X+f*q+m*Y,et=a*X-d,it=a*q-f,nt=a*Y-m,a=n.sqrt(et*et+it*it+nt*nt),0==a)break;if(a=F/a,et*=a,it*=a,nt*=a,d=h+et,f=c+it,m=p+nt,-.96>S||S>.96)mt=X*X*1.5-.5,yt=X*q*1.5-.866025403*Y,vt=X*Y*1.5+.866025403*q,gt=q*X*1.5+.866025403*Y,bt=q*q*1.5-.5,xt=q*Y*1.5-.866025403*X,_t=Y*X*1.5-.866025403*q,wt=Y*q*1.5+.866025403*X,Mt=Y*Y*1.5-.5,St=d,Ct=f,Et=m,Tt=pt*(St-s)+dt*(Ct-u)+ft*(Et-l),d=St-Tt*pt-s,f=Ct-Tt*dt-u,m=Et-Tt*ft-l,a=d*d+f*f+m*m,a>U*U&&(a=U/n.sqrt(a),d*=a,f*=a,m*=a),St=s+d,Ct=u+f,Et=l+m,i.addPoint(St,Ct,Et,pt,dt,ft,Tt,!1),St=et*mt+it*yt+nt*vt,Ct=et*gt+it*bt+nt*xt,Et=et*_t+it*wt+nt*Mt,St=(et=St)+h,Ct=(it=Ct)+c,Et=(nt=Et)+p,Tt=pt*(St-s)+dt*(Ct-u)+ft*(Et-l),0>=Tt&&(d=St-Tt*pt-s,f=Ct-Tt*dt-u,m=Et-Tt*ft-l,a=d*d+f*f+m*m,a>U*U&&(a=U/n.sqrt(a),d*=a,f*=a,m*=a),St=s+d,Ct=u+f,Et=l+m,i.addPoint(St,Ct,Et,pt,dt,ft,Tt,!1)),St=et*mt+it*yt+nt*vt,Ct=et*gt+it*bt+nt*xt,Et=et*_t+it*wt+nt*Mt,St=(et=St)+h,Ct=(it=Ct)+c,Et=(nt=Et)+p,Tt=pt*(St-s)+dt*(Ct-u)+ft*(Et-l),0>=Tt&&(d=St-Tt*pt-s,f=Ct-Tt*dt-u,m=Et-Tt*ft-l,a=d*d+f*f+m*m,a>U*U&&(a=U/n.sqrt(a),d*=a,f*=a,m*=a),St=s+d,Ct=u+f,Et=l+m,i.addPoint(St,Ct,Et,pt,dt,ft,Tt,!1));else{if(y=d,v=f,g=m,w=pt*(y-s)+dt*(v-u)+ft*(g-l),y-=w*pt,v-=w*dt,g-=w*ft,S>0?(b=d+X*I*2,x=f+q*I*2,_=m+Y*I*2):(b=d-X*I*2,x=f-q*I*2,_=m-Y*I*2),M=pt*(b-s)+dt*(x-u)+ft*(_-l),b-=M*pt,x-=M*dt,_-=M*ft,et=s-y,it=u-v,nt=l-g,d=b-y,f=x-v,m=_-g,Pt=et*et+it*it+nt*nt,At=et*d+it*f+nt*m,kt=d*d+f*f+m*m,Ot=At*At-kt*(Pt-U*U),0>Ot)break;Ot=n.sqrt(Ot),C=(At+Ot)/kt,E=(At-Ot)/kt,C>E&&(a=C,C=E,E=a),E>1&&(E=1),0>C&&(C=0),d=y+(b-y)*C,f=v+(x-v)*C,m=g+(_-g)*C,b=y+(b-y)*E,x=v+(x-v)*E,_=g+(_-g)*E,y=d,v=f,g=m,a=w+(M-w)*C,M=w+(M-w)*E,w=a,0>w&&i.addPoint(y,v,g,pt,dt,ft,Tt,!1),0>M&&i.addPoint(b,x,_,pt,dt,ft,Tt,!1)}break;case 2:if(ht?(h=N-Q,c=D-$,p=L-tt,pt=-X,dt=-q,ft=-Y):(h=N+Q,c=D+$,p=L+tt,pt=X,dt=q,ft=Y),S=pt*G+dt*H+ft*W,a=0>S?R:-R,s=A+a*G,u=k+a*H,l=O+a*W,st>=.999999?(d=-dt,f=ft,m=pt):(d=pt,f=dt,m=ft),a=d*G+f*H+m*W,et=a*G-d,it=a*H-f,nt=a*W-m,a=n.sqrt(et*et+it*it+nt*nt),0==a)break;if(a=U/a,et*=a,it*=a,nt*=a,d=s+et,f=u+it,m=l+nt,-.96>S||S>.96)mt=G*G*1.5-.5,yt=G*H*1.5-.866025403*W,vt=G*W*1.5+.866025403*H,gt=H*G*1.5+.866025403*W,bt=H*H*1.5-.5,xt=H*W*1.5-.866025403*G,_t=W*G*1.5-.866025403*H,wt=W*H*1.5+.866025403*G,Mt=W*W*1.5-.5,St=d,Ct=f,Et=m,Tt=pt*(St-h)+dt*(Ct-c)+ft*(Et-p),d=St-Tt*pt-h,f=Ct-Tt*dt-c,m=Et-Tt*ft-p,a=d*d+f*f+m*m,a>F*F&&(a=F/n.sqrt(a),d*=a,f*=a,m*=a),St=h+d,Ct=c+f,Et=p+m,i.addPoint(St,Ct,Et,-pt,-dt,-ft,Tt,!1),St=et*mt+it*yt+nt*vt,Ct=et*gt+it*bt+nt*xt,Et=et*_t+it*wt+nt*Mt,St=(et=St)+s,Ct=(it=Ct)+u,Et=(nt=Et)+l,Tt=pt*(St-h)+dt*(Ct-c)+ft*(Et-p),0>=Tt&&(d=St-Tt*pt-h,f=Ct-Tt*dt-c,m=Et-Tt*ft-p,a=d*d+f*f+m*m,a>F*F&&(a=F/n.sqrt(a),d*=a,f*=a,m*=a),St=h+d,Ct=c+f,Et=p+m,i.addPoint(St,Ct,Et,-pt,-dt,-ft,Tt,!1)),St=et*mt+it*yt+nt*vt,Ct=et*gt+it*bt+nt*xt,Et=et*_t+it*wt+nt*Mt,St=(et=St)+s,Ct=(it=Ct)+u,Et=(nt=Et)+l,Tt=pt*(St-h)+dt*(Ct-c)+ft*(Et-p),0>=Tt&&(d=St-Tt*pt-h,f=Ct-Tt*dt-c,m=Et-Tt*ft-p,a=d*d+f*f+m*m,a>F*F&&(a=F/n.sqrt(a),d*=a,f*=a,m*=a),St=h+d,Ct=c+f,Et=p+m,i.addPoint(St,Ct,Et,-pt,-dt,-ft,Tt,!1));else{if(y=d,v=f,g=m,w=pt*(y-h)+dt*(v-c)+ft*(g-p),y-=w*pt,v-=w*dt,g-=w*ft,S>0?(b=d+G*R*2,x=f+H*R*2,_=m+W*R*2):(b=d-G*R*2,x=f-H*R*2,_=m-W*R*2),M=pt*(b-h)+dt*(x-c)+ft*(_-p),b-=M*pt,x-=M*dt,_-=M*ft,et=h-y,it=c-v,nt=p-g,d=b-y,f=x-v,m=_-g,Pt=et*et+it*it+nt*nt,At=et*d+it*f+nt*m,kt=d*d+f*f+m*m,Ot=At*At-kt*(Pt-F*F),0>Ot)break;Ot=n.sqrt(Ot),C=(At+Ot)/kt,E=(At-Ot)/kt,C>E&&(a=C,C=E,E=a),E>1&&(E=1),0>C&&(C=0),d=y+(b-y)*C,f=v+(x-v)*C,m=g+(_-g)*C,b=y+(b-y)*E,x=v+(x-v)*E,_=g+(_-g)*E,y=d,v=f,g=m,a=w+(M-w)*C,M=w+(M-w)*E,w=a,0>w&&i.addPoint(y,v,g,-pt,-dt,-ft,w,!1),0>M&&i.addPoint(b,x,_,-pt,-dt,-ft,M,!1)}}}},n.SphereCylinderCollisionDetector=function(t){n.CollisionDetector.call(this),this.flip=t},n.SphereCylinderCollisionDetector.prototype=Object.create(n.CollisionDetector.prototype),n.SphereCylinderCollisionDetector.prototype.constructor=n.SphereCylinderCollisionDetector,n.SphereCylinderCollisionDetector.prototype.detectCollision=function(t,e,i){var r,o;this.flip?(r=e,o=t):(r=t,o=e);var a=r.position,s=a.x,u=a.y,l=a.z,h=o.position,c=h.x,p=h.y,d=h.z,f=o.normalDirection.x,m=o.normalDirection.y,y=o.normalDirection.z,v=r.radius,g=o.radius,b=v+g,x=o.halfHeight,_=s-c,w=u-p,M=l-d,S=_*f+w*m+M*y;if(!(-x-v>S||S>x+v)){var C=c+S*f,E=p+S*m,T=d+S*y,P=s-C,A=u-E,k=l-T,O=P*P+A*A+k*k;if(!(O>b*b)){O>g*g&&(O=g/n.sqrt(O),P*=O,A*=O,k*=O),-x>S?S=-x:S>x&&(S=x),C=c+S*f+P,E=p+S*m+A,T=d+S*y+k,_=C-s,w=E-u,M=T-l,O=_*_+w*w+M*M;var N;O>0&&v*v>O&&(O=n.sqrt(O),N=1/O,_*=N,w*=N,M*=N,i.addPoint(s+_*v,u+w*v,l+M*v,_,w,M,O-v,this.flip))}}},n.AABB=function(t,e,n,r,o,a){this.elements=new i(6);var s=this.elements;s[0]=t||0,s[1]=n||0,s[2]=o||0,s[3]=e||0,s[4]=r||0,s[5]=a||0},n.AABB.prototype={constructor:n.AABB,set:function(t,e,i,n,r,o){var a=this.elements;return a[0]=t,a[3]=e,a[1]=i,a[4]=n,a[2]=r,a[5]=o,this},intersectTest:function(t){var e=this.elements,i=t.elements;return e[0]>i[3]||e[1]>i[4]||e[2]>i[5]||e[3]<i[0]||e[4]<i[1]||e[5]<i[2]},intersectTestTwo:function(t){var e=this.elements,i=t.elements;return e[0]<i[0]||e[1]<i[1]||e[2]<i[2]||e[3]>i[3]||e[4]>i[4]||e[5]>i[5]},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t,e){var i=e||0,n=t.elements;return this.set(n[0]-i,n[3]+i,n[1]-i,n[4]+i,n[2]-i,n[5]+i),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,e){var i=t.elements,n=e.elements,r=this.elements;return r[0]=i[0]<n[0]?i[0]:n[0],r[1]=i[1]<n[1]?i[1]:n[1],r[2]=i[2]<n[2]?i[2]:n[2],r[3]=i[3]>n[3]?i[3]:n[3],r[4]=i[4]>n[4]?i[4]:n[4],r[5]=i[5]>n[5]?i[5]:n[5],this},surfaceArea:function(){var t=this.elements,e=t[3]-t[0],i=t[4]-t[1],n=t[5]-t[2];return 2*(e*(i+n)+i*n)},intersectsWithPoint:function(t,e,i){var n=this.elements;return t>=n[0]&&t<=n[3]&&e>=n[1]&&e<=n[4]&&i>=n[2]&&i<=n[5]}},n.Proxy=function(t){this.shape=t,this.aabb=t.aabb},n.Proxy.prototype={constructor:n.Proxy,update:function(){n.Error("Proxy","Inheritance error.")}},n.BasicProxy=function(t){n.Proxy.call(this,t),this.id=n.proxyID++},n.BasicProxy.prototype=Object.create(n.Proxy.prototype),n.BasicProxy.prototype.constructor=n.BasicProxy,n.BasicProxy.prototype.update=function(){},n.BroadPhase=function(){this.types=n.BR_NULL,this.numPairChecks=0,this.numPairs=0,this.pairs=[]},n.BroadPhase.prototype={constructor:n.BroadPhase,createProxy:function(t){n.Error("BroadPhase","Inheritance error.")},addProxy:function(t){n.Error("BroadPhase","Inheritance error.")},removeProxy:function(t){n.Error("BroadPhase","Inheritance error.")},isAvailablePair:function(t,e){var i=t.parent,n=e.parent;if(i==n||!i.isDynamic&&!n.isDynamic||0==(t.belongsTo&e.collidesWith)||0==(e.belongsTo&t.collidesWith))return!1;var r;for(r=i.numJoints<n.numJoints?i.jointLink:n.jointLink;null!==r;){var o=r.joint;if(!o.allowCollision&&(o.body1==i&&o.body2==n||o.body1==n&&o.body2==i))return!1;r=r.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){n.Error("BroadPhase","Inheritance error.")},addPair:function(t,e){var i=new n.Pair(t,e);this.pairs.push(i),this.numPairs++}},n.BruteForceBroadPhase=function(){n.BroadPhase.call(this),this.types=n.BR_BRUTE_FORCE,this.proxies=[]},n.BruteForceBroadPhase.prototype=Object.create(n.BroadPhase.prototype),n.BruteForceBroadPhase.prototype.constructor=n.BruteForceBroadPhase,n.BruteForceBroadPhase.prototype.createProxy=function(t){return new n.BasicProxy(t)},n.BruteForceBroadPhase.prototype.addProxy=function(t){this.proxies.push(t)},n.BruteForceBroadPhase.prototype.removeProxy=function(t){var e=this.proxies.indexOf(t);e>-1&&this.proxies.splice(e,1)},n.BruteForceBroadPhase.prototype.collectPairs=function(){var t,e,i,n=0,r=this.proxies,o=r.length;for(this.numPairChecks=o*(o-1)>>1;o>n;)for(e=r[n++],t=n+1;o>t;)i=r[t++],!e.aabb.intersectTest(i.aabb)&&this.isAvailablePair(e.shape,i.shape)&&this.addPair(e.shape,i.shape)},n.Pair=function(t,e){this.shape1=t||null,this.shape2=e||null},n.SAPAxis=function(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new i(64)},n.SAPAxis.prototype={constructor:n.SAPAxis,addElements:function(t,e){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var i=[],n=this.numElements;n--;)i[n]=this.elements[n]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=e},removeElements:function(t,e){for(var i=-1,n=-1,r=0,o=this.numElements;o>r;r++){var a=this.elements[r];if(a==t||a==e){if(-1!=i){n=r;break}i=r}}for(r=i+1,o=n;o>r;r++)this.elements[r-1]=this.elements[r];for(r=n+1,o=this.numElements;o>r;r++)this.elements[r-2]=this.elements[r];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,e=1;this.numElements>>e!=0;)e++;e=e*this.numElements>>2,t=0;for(var i=!1,r=this.elements,o=1,a=this.numElements;a>o;o++){var s=r[o],u=s.value,l=r[o-1];if(l.value>u){var h=o;do{if(r[h]=l,0==--h)break;l=r[h-1]}while(l.value>u);if(r[h]=s,t+=o-h,t>e){i=!0;break}}}if(i){t=2;var c=this.stack;for(c[0]=0,c[1]=this.numElements-1;t>0;){var p=c[--t],d=c[--t],f=p-d;if(f>16){var m=d+n.floor(.5*f);for(s=r[m],r[m]=r[p],r[p]=s,u=s.value,o=d-1,h=p;;){var y,v;do y=r[++o];while(y.value<u);do v=r[--h];while(u<v.value&&h!=d);if(o>=h)break;r[o]=v,r[h]=y}r[p]=r[o],r[o]=s,o-d>p-o?(c[t++]=d,c[t++]=o-1,c[t++]=o+1,c[t++]=p):(c[t++]=o+1,c[t++]=p,c[t++]=d,c[t++]=o-1)}else for(o=d+1;p>=o;o++)if(s=r[o],u=s.value,l=r[o-1],l.value>u){h=o;do{if(r[h]=l,0==--h)break;l=r[h-1]}while(l.value>u);r[h]=s}}}},calculateTestCount:function(){for(var t=1,e=0,i=1,n=this.numElements;n>i;i++)this.elements[i].max?t--:(e+=t,t++);return e}},n.SAPBroadPhase=function(){n.BroadPhase.call(this),this.types=n.BR_SWEEP_AND_PRUNE,this.numElementsD=0,this.numElementsS=0,this.axesD=[new n.SAPAxis,new n.SAPAxis,new n.SAPAxis],this.axesS=[new n.SAPAxis,new n.SAPAxis,new n.SAPAxis],this.index1=0,this.index2=1},n.SAPBroadPhase.prototype=Object.create(n.BroadPhase.prototype),n.SAPBroadPhase.prototype.constructor=n.SAPBroadPhase,n.SAPBroadPhase.prototype.createProxy=function(t){return new n.SAPProxy(this,t)},n.SAPBroadPhase.prototype.addProxy=function(t){var e=t;e.isDynamic()?(this.axesD[0].addElements(e.min[0],e.max[0]),this.axesD[1].addElements(e.min[1],e.max[1]),this.axesD[2].addElements(e.min[2],e.max[2]),e.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(e.min[0],e.max[0]),this.axesS[1].addElements(e.min[1],e.max[1]),this.axesS[2].addElements(e.min[2],e.max[2]),e.belongsTo=2,this.numElementsS+=2)},n.SAPBroadPhase.prototype.removeProxy=function(t){var e=t;if(0!=e.belongsTo){switch(e.belongsTo){case 1:this.axesD[0].removeElements(e.min[0],e.max[0]),this.axesD[1].removeElements(e.min[1],e.max[1]),this.axesD[2].removeElements(e.min[2],e.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(e.min[0],e.max[0]),this.axesS[1].removeElements(e.min[1],e.max[1]),this.axesS[2].removeElements(e.min[2],e.max[2]),this.numElementsS-=2}e.belongsTo=0}},n.SAPBroadPhase.prototype.collectPairs=function(){if(0!=this.numElementsD){var t=this.axesD[this.index1],e=this.axesD[this.index2];t.sort(),e.sort();var i,n,r=t.calculateTestCount(),o=e.calculateTestCount();o>=r?(e=this.axesS[this.index1],e.sort(),i=t.elements,n=e.elements):(t=this.axesS[this.index2],t.sort(),i=e.elements,n=t.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var a,s,u=0,l=0;u<this.numElementsD;){var h,c;if(l==this.numElementsS)h=i[u],c=!0,u++;else{var p=i[u],d=n[l];p.value<d.value?(h=p,c=!0,u++):(h=d,c=!1,l++)}if(h.max){var f=h.pair;if(c){if(f==a){a=a.pair;continue}h=a}else{if(f==s){s=s.pair;continue}h=s}do{if(x=h.pair,x==f){h.pair=x.pair;break}h=x}while(null!=h)}else{for(var m=h.proxy.shape,y=h.min1.value,v=h.max1.value,g=h.min2.value,b=h.max2.value,x=a;null!=x;x=x.pair){var _=x.proxy.shape;this.numPairChecks++,y>x.max1.value||v<x.min1.value||g>x.max2.value||b<x.min2.value||!this.isAvailablePair(m,_)||this.addPair(m,_)}if(c){for(x=s;null!=x;x=x.pair)_=x.proxy.shape,this.numPairChecks++,y>x.max1.value||v<x.min1.value||g>x.max2.value||b<x.min2.value||!this.isAvailablePair(m,_)||this.addPair(m,_);h.pair=a,a=h}else h.pair=s,s=h}}this.index2=3^(this.index1|this.index2)}},n.SAPElement=function(t,e){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=e,this.value=0},n.SAPProxy=function(t,e){n.Proxy.call(this,e),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new n.SAPElement(this,!1),this.max[0]=new n.SAPElement(this,!0),this.min[1]=new n.SAPElement(this,!1),this.max[1]=new n.SAPElement(this,!0),this.min[2]=new n.SAPElement(this,!1),this.max[2]=new n.SAPElement(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]},n.SAPProxy.prototype=Object.create(n.Proxy.prototype),n.SAPProxy.prototype.constructor=n.SAPProxy,n.SAPProxy.prototype.isDynamic=function(){var t=this.shape.parent;return t.isDynamic&&!t.sleeping},n.SAPProxy.prototype.update=function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(1==this.belongsTo&&!this.isDynamic()||2==this.belongsTo&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))},n.DBVT=function(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new n.AABB},n.DBVT.prototype={constructor:n.DBVT,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(null==this.root)return void(this.root=t);for(var e,i,r=t.aabb,o=this.root;null==o.proxy;){var a=o.child1,s=o.child2,u=o.aabb,l=a.aabb,h=s.aabb;e=u.surfaceArea(),this.aabb.combine(r,u),i=this.aabb.surfaceArea();var c=2*i,p=2*(i-e),d=p;this.aabb.combine(r,l),d+=null!=a.proxy?this.aabb.surfaceArea():this.aabb.surfaceArea()-l.surfaceArea();var f=p;if(this.aabb.combine(r,h),f+=null!=s.proxy?this.aabb.surfaceArea():this.aabb.surfaceArea()-h.surfaceArea(),f>d){if(d>c)break;o=a}else{if(f>c)break;o=s}}var m,y=o.parent;m=this.numFreeNodes>0?this.freeNodes[--this.numFreeNodes]:new n.DBVTNode,m.parent=y,m.child1=t,m.child2=o,m.aabb.combine(t.aabb,o.aabb),m.height=o.height+1,o.parent=m,t.parent=m,o==this.root?this.root=m:y.child1==o?y.child1=m:y.child2=m;do m=this.balance(m),this.fix(m),m=m.parent;while(null!=m)},getBalance:function(t){return null!=t.proxy?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t==this.root)return void(this.root=null);var e,i=t.parent;if(e=i.child1==t?i.child2:i.child1,i==this.root)return this.root=e,void(e.parent=null);var n=i.parent;e.parent=n,n.child1==i?n.child1=e:n.child2=e,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=i);do n=this.balance(n),this.fix(n),n=n.parent;while(null!=n)},balance:function r(t){var e=t.height;if(2>e)return t;var i,n=t.parent,o=t.child1,a=t.child2,s=o.height,u=a.height,r=s-u;if(r>1){var l=o.child1,h=o.child2,c=l.height,p=h.height;return c>p?(o.child2=t,t.parent=o,t.child1=h,h.parent=t,t.aabb.combine(h.aabb,a.aabb),i=p-u,t.height=p-(i&i>>31)+1,o.aabb.combine(l.aabb,t.aabb),i=c-e,o.height=c-(i&i>>31)+1):(o.child1=t,t.parent=o,t.child1=l,l.parent=t,t.aabb.combine(l.aabb,a.aabb),i=c-u,t.height=c-(i&i>>31)+1,o.aabb.combine(t.aabb,h.aabb),i=e-p,o.height=e-(i&i>>31)+1),null!=n?n.child1==t?n.child1=o:n.child2=o:this.root=o,o.parent=n,o}if(-1>r){var d=a.child1,f=a.child2,m=d.height,y=f.height;return m>y?(a.child2=t,t.parent=a,t.child2=f,f.parent=t,t.aabb.combine(o.aabb,f.aabb),i=s-y,t.height=s-(i&i>>31)+1,a.aabb.combine(d.aabb,t.aabb),i=m-e,a.height=m-(i&i>>31)+1):(a.child1=t,t.parent=a,t.child2=d,d.parent=t,t.aabb.combine(o.aabb,d.aabb),i=s-m,t.height=s-(i&i>>31)+1,a.aabb.combine(t.aabb,f.aabb),i=e-y,a.height=e-(i&i>>31)+1),null!=n?n.child1==t?n.child1=a:n.child2=a:this.root=a,a.parent=n,a}return t},fix:function(t){var e=t.child1,i=t.child2;t.aabb.combine(e.aabb,i.aabb),t.height=e.height<i.height?i.height+1:e.height+1}},n.DBVTBroadPhase=function(){n.BroadPhase.call(this),this.types=n.BR_BOUNDING_VOLUME_TREE,this.tree=new n.DBVT,this.stack=[],this.leaves=[],this.numLeaves=0},n.DBVTBroadPhase.prototype=Object.create(n.BroadPhase.prototype),n.DBVTBroadPhase.prototype.constructor=n.DBVTBroadPhase,n.DBVTBroadPhase.prototype.createProxy=function(t){return new n.DBVTProxy(t)},n.DBVTBroadPhase.prototype.addProxy=function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},n.DBVTBroadPhase.prototype.removeProxy=function(t){this.tree.deleteLeaf(t.leaf);var e=this.leaves.indexOf(t.leaf);e>-1&&(this.leaves.splice(e,1),this.numLeaves--)},n.DBVTBroadPhase.prototype.collectPairs=function(){if(!(this.numLeaves<2))for(var t,e=.1,i=this.numLeaves;i--;)t=this.leaves[i],t.proxy.aabb.intersectTestTwo(t.aabb)&&(t.aabb.copy(t.proxy.aabb,e),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},n.DBVTBroadPhase.prototype.collide=function(t,e){var i,n,r,o,a,s,u=2;for(this.stack[0]=t,this.stack[1]=e;u>0;)if(r=this.stack[--u],o=this.stack[--u],a=null!=r.proxy,s=null!=o.proxy,this.numPairChecks++,a&&s){if(i=r.proxy.shape,n=o.proxy.shape,i==n||i.aabb.intersectTest(n.aabb)||!this.isAvailablePair(i,n))continue;this.addPair(i,n)}else{if(r.aabb.intersectTest(o.aabb))continue;s||!a&&r.aabb.surfaceArea()>o.aabb.surfaceArea()?(this.stack[u++]=r.child1,this.stack[u++]=o,this.stack[u++]=r.child2,this.stack[u++]=o):(this.stack[u++]=r,this.stack[u++]=o.child1,this.stack[u++]=r,this.stack[u++]=o.child2)}},n.DBVTNode=function(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new n.AABB},n.DBVTProxy=function(t){n.Proxy.call(this,t),this.leaf=new n.DBVTNode,this.leaf.proxy=this},n.DBVTProxy.prototype=Object.create(n.Proxy.prototype),n.DBVTProxy.prototype.constructor=n.DBVTProxy,n.DBVTProxy.prototype.update=function(){},n.World.prototype.add=function(t){t=t||{};var e=t.type||"box";if("string"==typeof e&&(e=[e]),"joint"==e[0].substring(0,5)){"joint"===e[0]&&(e[0]="jointHinge");var i=t.axe1||[1,0,0],r=t.axe2||[1,0,0],o=t.pos1||[0,0,0],a=t.pos2||[0,0,0];o=o.map(function(t){return t*n.INV_SCALE}),a=a.map(function(t){return t*n.INV_SCALE});var s,u;"jointDistance"===e[0]?(s=t.min||0,u=t.max||10,s*=n.INV_SCALE,u*=n.INV_SCALE):(s=t.min||57.29578,u=t.max||0,s*=n.degtorad,u*=n.degtorad);var l=t.limit||null,h=t.spring||null,c=t.motor||null,p=new n.JointConfig;p.allowCollision=t.collision||!1,p.localAxis1.init(i[0],i[1],i[2]),p.localAxis2.init(r[0],r[1],r[2]),p.localAnchorPoint1.init(o[0],o[1],o[2]),p.localAnchorPoint2.init(a[0],a[1],a[2]),("string"==typeof t.body1||t.body1 instanceof String)&&(t.body1=this.getByName(t.body1)),("string"==typeof t.body2||t.body2 instanceof String)&&(t.body2=this.getByName(t.body2)),p.body1=t.body1,p.body2=t.body2;var d;switch(e[0]){case"jointDistance":d=new n.DistanceJoint(p,s,u),null!==h&&d.limitMotor.setSpring(h[0],h[1]),null!==c&&d.limitMotor.setSpring(c[0],c[1]);break;case"jointHinge":d=new n.HingeJoint(p,s,u),null!==h&&d.limitMotor.setSpring(h[0],h[1]),null!==c&&d.limitMotor.setSpring(c[0],c[1]);break;case"jointPrisme":d=new n.PrismaticJoint(p,s,u);break;case"jointSlide":d=new n.SliderJoint(p,s,u);break;case"jointBall":d=new n.BallAndSocketJoint(p);break;case"jointWheel":d=new n.WheelJoint(p),null!==l&&d.rotationalLimitMotor1.setLimit(l[0],l[1]),null!==h&&d.rotationalLimitMotor1.setSpring(h[0],h[1]),null!==c&&d.rotationalLimitMotor1.setSpring(c[0],c[1])}return d.name=t.name||"",this.addJoint(d),d}var f=t.move||!1,m=t.noSleep||!1,y=t.pos||[0,0,0];y=y.map(function(t){return t*n.INV_SCALE});var v=t.size||[1,1,1];v=v.map(function(t){return t*n.INV_SCALE});var g=t.rot||[0,0,0];g=g.map(function(t){return t*n.degtorad});for(var b=[],x=0;x<g.length/3;x++){var _=n.EulerToAxis(g[x+0],g[x+1],g[x+2]);b.push(_[0]),b.push(_[1]),b.push(_[2]),b.push(_[3])}var w=new n.ShapeConfig;void 0!==t.sc&&(w=t.sc),t.config&&(w.density=void 0===t.config[0]?1:t.config[0],w.friction=void 0===t.config[1]?.4:t.config[1],w.restitution=void 0===t.config[2]?.2:t.config[2],w.belongsTo=t.config[3]||1,w.collidesWith=t.config[4]||4294967295),void 0!==t.density&&(w.density=t.density),void 0!==t.friction&&(w.friction=t.friction),void 0!==t.restitution&&(w.restitution=t.restitution),void 0!==t.belongsTo&&(w.belongsTo=t.belongsTo),void 0!==t.collidesWith&&(w.collidesWith=t.collidesWith),t.massPos&&(t.massPos=t.massPos.map(function(t){return t*n.INV_SCALE}),w.relativePosition.init(t.massPos[0],t.massPos[1],t.massPos[2])),t.massRot&&(t.massRot=t.massRot.map(function(t){return t*n.degtorad}),w.relativeRotation=n.EulerToMatrix(t.massRot[0],t.massRot[1],t.massRot[2]));for(var M,S,C=new n.RigidBody(y[0],y[1],y[2],b[0],b[1],b[2],b[3]),E=[],x=0;x<e.length;x++){switch(M=3*x,S=4*x,e[x]){case"sphere":E[x]=new n.SphereShape(w,v[M]);break;case"cylinder":E[x]=new n.CylinderShape(w,v[M],v[M+1]);break;case"box":E[x]=new n.BoxShape(w,v[M],v[M+1],v[M+2])}C.addShape(E[x]),x>0&&(E[x].relativePosition=new n.Vec3(y[M],y[M+1],y[M+2]),b[S+0]&&(E[x].relativeRotation=[b[S],b[S+1],b[S+2],b[S+3]]))}return f?(t.massPos||t.massRot?C.setupMass(1,!1):C.setupMass(1,!0),m?C.allowSleep=!1:C.allowSleep=!0):C.setupMass(2),C.name=t.name||" ",this.addRigidBody(C),C},e["default"]=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),u=n(s),l=function(t){function e(t,i){function n(t){v.enabled!==!1&&(window.removeEventListener("keydown",n),w=_,_===g.NONE&&(t.keyCode!==v.keys[g.ROTATE]||v.noRotate?t.keyCode!==v.keys[g.ZOOM]||v.noZoom?t.keyCode!==v.keys[g.PAN]||v.noPan||(_=g.PAN):_=g.ZOOM:_=g.ROTATE))}function a(){v.enabled!==!1&&(_=w,window.addEventListener("keydown",n,!1))}function s(t){v.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),_!==g.ROTATE||v.noRotate?_!==g.ZOOM||v.noZoom?_!==g.PAN||v.noPan||D.copy(z(t.pageX,t.pageY)):A.copy(z(t.pageX,t.pageY)):(S.copy(C),C.copy(j(t.pageX,t.pageY))))}function l(t){v.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),_=g.NONE,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l),v.dispatchEvent(I))}function h(t){v.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),_===g.NONE&&(_=t.button),_!==g.ROTATE||v.noRotate?_!==g.ZOOM||v.noZoom?_!==g.PAN||v.noPan||(N.copy(z(t.pageX,t.pageY)),D.copy(N)):(P.copy(z(t.pageX,t.pageY)),A.copy(P)):(C.copy(j(t.pageX,t.pageY)),S.copy(C)),document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",l,!1),v.dispatchEvent(R))}function c(t){if(v.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=0;t.wheelDelta?e=t.wheelDelta/40:t.detail&&(e=-t.detail/3),P.y+=.01*e,v.dispatchEvent(R),v.dispatchEvent(I)}}function p(t){if(v.enabled!==!1){switch(t.touches.length){case 1:_=g.TOUCH_ROTATE,C.copy(j(t.touches[0].pageX,t.touches[0].pageY)),S.copy(C);break;case 2:_=g.TOUCH_ZOOM_PAN;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;O=k=Math.sqrt(e*e+i*i);var n=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;N.copy(z(n,r)),D.copy(N);break;default:_=g.NONE}v.dispatchEvent(R)}}function d(t){if(v.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:S.copy(C),C.copy(j(t.touches[0].pageX,t.touches[0].pageY));break;case 2:var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;O=Math.sqrt(e*e+i*i);var n=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;D.copy(z(n,r));break;default:_=g.NONE}}function f(t){if(v.enabled!==!1){switch(t.touches.length){default:break;case 1:C.copy(j(t.touches[0].pageX,t.touches[0].pageY)),S.copy(C);break;case 2:k=O=0;var e=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;D.copy(z(e,i)),N.copy(D)}_=g.NONE,v.dispatchEvent(I)}}function m(t){t.preventDefault()}r(this,e);var y=o(this,Object.getPrototypeOf(e).call(this)),v=y,g={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};y.object=t,y.domElement=void 0!==i?i:document,y.enabled=!0,y.screen={left:0,top:0,width:0,height:0},y.rotateSpeed=1,y.zoomSpeed=1.2,y.panSpeed=.3,y.noRotate=!1,y.noZoom=!1,y.noPan=!1,y.staticMoving=!1,y.dynamicDampingFactor=.2,y.minDistance=0,y.maxDistance=1/0,y.keys=[65,83,68],y.target=new u["default"].Vector3;var b=1e-6,x=new u["default"].Vector3,_=g.NONE,w=g.NONE,M=new u["default"].Vector3,S=new u["default"].Vector2,C=new u["default"].Vector2,E=new u["default"].Vector3,T=0,P=new u["default"].Vector2,A=new u["default"].Vector2,k=0,O=0,N=new u["default"].Vector2,D=new u["default"].Vector2;y.target0=y.target.clone(),y.position0=y.object.position.clone(),y.up0=y.object.up.clone();
var L={type:"change"},R={type:"start"},I={type:"end"};y.handleResize=function(){if(y.domElement===document)y.screen.left=0,y.screen.top=0,y.screen.width=window.innerWidth,y.screen.height=window.innerHeight;else{var t=y.domElement.getBoundingClientRect(),e=y.domElement.ownerDocument.documentElement;y.screen.left=t.left+window.pageXOffset-e.clientLeft,y.screen.top=t.top+window.pageYOffset-e.clientTop,y.screen.width=t.width,y.screen.height=t.height}},y.handleEvent=function(t){"function"==typeof y[t.type]&&y[t.type](t)};var z=function(){var t=new u["default"].Vector2;return function(e,i){return t.set((e-v.screen.left)/v.screen.width,(i-v.screen.top)/v.screen.height),t}}(),j=function(){var t=new u["default"].Vector2;return function(e,i){return t.set((e-.5*v.screen.width-v.screen.left)/(.5*v.screen.width),(v.screen.height+2*(v.screen.top-i))/v.screen.width),t}}();return y.rotateCamera=function(){var t=new u["default"].Vector3,e=new u["default"].Quaternion,i=new u["default"].Vector3,n=new u["default"].Vector3,r=new u["default"].Vector3,o=new u["default"].Vector3,a=void 0;return function(){o.set(C.x-S.x,C.y-S.y,0),a=o.length(),a?(M.copy(v.object.position).sub(v.target),i.copy(M).normalize(),n.copy(v.object.up).normalize(),r.crossVectors(n,i).normalize(),n.setLength(C.y-S.y),r.setLength(C.x-S.x),o.copy(n.add(r)),t.crossVectors(o,M).normalize(),a*=v.rotateSpeed,e.setFromAxisAngle(t,a),M.applyQuaternion(e),v.object.up.applyQuaternion(e),E.copy(t),T=a):!v.staticMoving&&T&&(T*=Math.sqrt(1-v.dynamicDampingFactor),M.copy(v.object.position).sub(v.target),e.setFromAxisAngle(E,T),M.applyQuaternion(e),v.object.up.applyQuaternion(e)),S.copy(C)}}(),y.zoomCamera=function(){var t=void 0;_===g.TOUCH_ZOOM_PAN?(t=k/O,k=O,M.multiplyScalar(t)):(t=1+(A.y-P.y)*v.zoomSpeed,1!==t&&t>0&&(M.multiplyScalar(t),v.staticMoving?P.copy(A):P.y+=(A.y-P.y)*y.dynamicDampingFactor))},y.panCamera=function(){var t=new u["default"].Vector2,e=new u["default"].Vector3,i=new u["default"].Vector3;return function(){t.copy(D).sub(N),t.lengthSq()&&(t.multiplyScalar(M.length()*v.panSpeed),i.copy(M).cross(v.object.up).setLength(t.x),i.add(e.copy(v.object.up).setLength(t.y)),v.object.position.add(i),v.target.add(i),v.staticMoving?N.copy(D):N.add(t.subVectors(D,N).multiplyScalar(v.dynamicDampingFactor)))}}(),y.checkDistances=function(){v.noZoom&&v.noPan||(M.lengthSq()>v.maxDistance*v.maxDistance&&(v.object.position.addVectors(v.target,M.setLength(v.maxDistance)),P.copy(A)),M.lengthSq()<v.minDistance*v.minDistance&&(v.object.position.addVectors(v.target,M.setLength(v.minDistance)),P.copy(A)))},y.update=function(){M.subVectors(v.object.position,v.target),v.noRotate||v.rotateCamera(),v.noZoom||v.zoomCamera(),v.noPan||v.panCamera(),v.object.position.addVectors(v.target,M),v.checkDistances(),v.object.lookAt(v.target),x.distanceToSquared(v.object.position)>b&&(v.dispatchEvent(L),x.copy(v.object.position))},y.reset=function(){_=g.NONE,w=g.NONE,v.target.copy(v.target0),v.object.position.copy(v.position0),v.object.up.copy(v.up0),M.subVectors(v.object.position,v.target),v.object.lookAt(v.target),v.dispatchEvent(L),x.copy(v.object.position)},y.dispose=function(){y.domElement.removeEventListener("contextmenu",m,!1),y.domElement.removeEventListener("mousedown",h,!1),y.domElement.removeEventListener("mousewheel",c,!1),y.domElement.removeEventListener("DOMMouseScroll",c,!1),y.domElement.removeEventListener("touchstart",p,!1),y.domElement.removeEventListener("touchend",f,!1),y.domElement.removeEventListener("touchmove",d,!1),document.removeEventListener("mousemove",s,!1),document.removeEventListener("mouseup",l,!1),window.removeEventListener("keydown",n,!1),window.removeEventListener("keyup",a,!1)},y.domElement.addEventListener("contextmenu",m,!1),y.domElement.addEventListener("mousedown",h,!1),y.domElement.addEventListener("mousewheel",c,!1),y.domElement.addEventListener("DOMMouseScroll",c,!1),y.domElement.addEventListener("touchstart",p,!1),y.domElement.addEventListener("touchend",f,!1),y.domElement.addEventListener("touchmove",d,!1),window.addEventListener("keydown",n,!1),window.addEventListener("keyup",a,!1),y.handleResize(),y.update(),y}return a(e,t),e}(u["default"].EventDispatcher);e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.hasRelevantType=void 0;var r=i(161),o=n(r),a=i(159),s=n(a),u=e.hasRelevantType=function(t){if(o["default"].isCompositeComponent(t)){var e=o["default"].getComponentOf(t);return e===s["default"]||e===a.Body||e===a.Joint}return!1},l={hasRelevantType:u};e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.WorldUtils=e.HocUtils=e.ReactThreeUtils=e.VectorUtils=e.TrackballControls=e.Oimo=e.CustomPropTypes=void 0;var r=i(45),o=n(r),a=i(291),s=n(a),u=i(292),l=n(u),h=i(162),c=n(h),p=i(161),d=n(p),f=i(290),m=n(f),y=i(293),v=n(y);e.CustomPropTypes=o["default"],e.Oimo=s["default"],e.TrackballControls=l["default"],e.VectorUtils=c["default"],e.ReactThreeUtils=d["default"],e.HocUtils=m["default"],e.WorldUtils=v["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.CannonCmd=e.OimoCmd=void 0;var r=i(782),o=n(r),a=i(781),s=n(a);e.OimoCmd=o["default"],e.CannonCmd=s["default"]},[784,309],[786,311],[787,312],function(t,e,i){t.exports={"default":i(314),__esModule:!0}},[789,315],[790,316],function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},[793,163],function(t,e,i){t.exports=i(305)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=i(163),o=n(r);e["default"]=function(t,e,i){return e in t?(0,o["default"])(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){return t&&t.__esModule?t:{"default":t}}},[798,301],[799,328,38],[800,27],[801,27],[802,27,329],[803,330,38],[804,331,38],function(t,e,i){i(332),t.exports=i(38).Object.preventExtensions},[805,333,38],[806,335,334,38],function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},[810,27],[812,77,27],[813,27,171,168],[815,165],[816,27,77],233,[817,27,107,170,74],[819,320],[820,27,106,164,166],[821,27,169,174],[826,73,324],[827,77,76],[828,107,76],[829,107,76],function(t,e,i){var n=i(106);i(76)("preventExtensions",function(t){return function(e){return t&&n(e)?t(e):e}})},[830,73,326],function(t,e){},[831,27,75,169,168,73,325,74,172,327,173,174,322,319,318,321,164,77,171,323],function(t,e,i){function n(t){return null==t?"":t+""}function r(t,e,i){var n=typeof t;return"function"==n?void 0===e?t:w(t,e,i):null==t?b:"object"==n?s(t):void 0===e?x(t):u(t,e)}function o(t,e,i){if(null!=t){void 0!==i&&i in m(t)&&(e=[i]);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:void 0}}function a(t,e,i){var n=e.length,r=n,o=!i;if(null==t)return!r;for(t=m(t);n--;){var a=e[n];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<r;){a=e[n];var s=a[0],u=t[s],l=a[1];if(o&&a[2]){if(void 0===u&&!(s in t))return!1}else{var h=i?i(u,l,s):void 0;if(!(void 0===h?_(l,u,i,!0):h))return!1}}return!0}function s(t){var e=p(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[i]===n&&(void 0!==n||i in m(t))}}return function(t){return a(t,e)}}function u(t,e){var i=M(t),n=d(t)&&f(e),r=t+"";return t=y(t),function(a){if(null==a)return!1;var s=r;if(a=m(a),(i||!n)&&!(s in a)){if(a=1==t.length?a:o(a,c(t,0,-1)),null==a)return!1;s=v(t),a=m(a)}return a[s]===e?void 0!==e||s in a:_(e,a[s],void 0,!0)}}function l(t){return function(e){return null==e?void 0:e[t]}}function h(t){var e=t+"";return t=y(t),function(i){return o(i,t,e)}}function c(t,e,i){var n=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),i=void 0===i||i>r?r:+i||0,0>i&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=t[n+e];return o}function p(t){for(var e=S(t),i=e.length;i--;)e[i][2]=f(e[i][1]);return e}function d(t,e){var i=typeof t;if("string"==i&&E.test(t)||"number"==i)return!0;if(M(t))return!1;var n=!C.test(t);return n||null!=e&&t in m(e)}function f(t){return t===t&&!g(t)}function m(t){return g(t)?t:Object(t)}function y(t){if(M(t))return t;var e=[];return n(t).replace(T,function(t,i,n,r){e.push(n?r.replace(P,"$1"):i||t)}),e}function v(t){var e=t?t.length:0;return e?t[e-1]:void 0}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){return t}function x(t){return d(t)?l(t):h(t)}var _=i(337),w=i(339),M=i(176),S=i(340),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,E=/^\w*$/,T=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,P=/\\(\\)?/g;t.exports=r},function(t,e,i){function n(t){return!!t&&"object"==typeof t}function r(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function o(t,e,i,r,s,u){return t===e?!0:null==t||null==e||!h(t)&&!n(e)?t!==t&&e!==e:a(t,e,o,i,r,s,u)}function a(t,e,i,n,r,o,a){var h=c(t),d=c(e),y=m,v=m;h||(y=C.call(t),y==f?y=x:y!=x&&(h=p(t))),d||(v=C.call(e),v==f?v=x:v!=x&&(d=p(e)));var g=y==x,b=v==x,_=y==v;if(_&&!h&&!g)return u(t,e,y);if(!r){var w=g&&S.call(t,"__wrapped__"),M=b&&S.call(e,"__wrapped__");if(w||M)return i(w?t.value():t,M?e.value():e,n,r,o,a)}if(!_)return!1;o||(o=[]),a||(a=[]);for(var E=o.length;E--;)if(o[E]==t)return a[E]==e;o.push(t),a.push(e);var T=(h?s:l)(t,e,i,n,r,o,a);return o.pop(),a.pop(),T}function s(t,e,i,n,o,a,s){var u=-1,l=t.length,h=e.length;if(l!=h&&!(o&&h>l))return!1;for(;++u<l;){var c=t[u],p=e[u],d=n?n(o?p:c,o?c:p,u):void 0;if(void 0!==d){if(d)continue;return!1}if(o){if(!r(e,function(t){return c===t||i(c,t,n,o,a,s)}))return!1}else if(c!==p&&!i(c,p,n,o,a,s))return!1}return!0}function u(t,e,i){switch(i){case y:case v:return+t==+e;case g:return t.name==e.name&&t.message==e.message;case b:return t!=+t?e!=+e:t==+e;case _:case w:return t==e+""}return!1}function l(t,e,i,n,r,o,a){var s=d(t),u=s.length,l=d(e),h=l.length;if(u!=h&&!r)return!1;for(var c=u;c--;){var p=s[c];if(!(r?p in e:S.call(e,p)))return!1}for(var f=r;++c<u;){p=s[c];var m=t[p],y=e[p],v=n?n(r?y:m,r?m:y,p):void 0;if(!(void 0===v?i(m,y,n,r,o,a):v))return!1;f||(f="constructor"==p)}if(!f){var g=t.constructor,b=e.constructor;if(g!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b))return!1}return!0}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var c=i(176),p=i(338),d=i(108),f="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",g="[object Error]",b="[object Number]",x="[object Object]",_="[object RegExp]",w="[object String]",M=Object.prototype,S=M.hasOwnProperty,C=M.toString;t.exports=o},function(t,e){function i(t){return!!t&&"object"==typeof t}function n(t){return"number"==typeof t&&t>-1&&t%1==0&&O>=t}function r(t){return i(t)&&n(t.length)&&!!P[k.call(t)]}var o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",h="[object Function]",c="[object Map]",p="[object Number]",d="[object Object]",f="[object RegExp]",m="[object Set]",y="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",b="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",w="[object Int16Array]",M="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]",P={};P[b]=P[x]=P[_]=P[w]=P[M]=P[S]=P[C]=P[E]=P[T]=!0,P[o]=P[a]=P[g]=P[s]=P[u]=P[l]=P[h]=P[c]=P[p]=P[d]=P[f]=P[m]=P[y]=P[v]=!1;var A=Object.prototype,k=A.toString,O=9007199254740991;t.exports=r},function(t,e){function i(t,e,i){if("function"!=typeof t)return n;if(void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)};case 5:return function(i,n,r,o,a){return t.call(e,i,n,r,o,a)}}return function(){return t.apply(e,arguments)}}function n(t){return t}t.exports=i},function(t,e,i){function n(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){t=n(t);for(var e=-1,i=a(t),r=i.length,o=Array(r);++e<r;){var s=i[e];o[e]=[s,t[s]]}return o}var a=i(108);t.exports=o},function(t,e){function i(t){return function(e,i,r){for(var o=n(e),a=r(e),s=a.length,u=t?s:-1;t?u--:++u<s;){var l=a[u];if(i(o[l],l,o)===!1)break}return e}}function n(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var o=i();t.exports=o},function(t,e){function i(t){return!!t&&"object"==typeof t}function n(t,e){var i=null==t?void 0:t[e];return a(i)?i:void 0}function r(t){return o(t)&&p.call(t)==s}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:r(t)?d.test(h.call(t)):i(t)&&u.test(t)}var s="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,h=Function.prototype.toString,c=l.hasOwnProperty,p=l.toString,d=RegExp("^"+h.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e){function i(t){return!!t&&"object"==typeof t}function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&o(c(t))}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function a(t){return i(t)&&r(t)&&u.call(t,"callee")&&!l.call(t,"callee")}var s=Object.prototype,u=s.hasOwnProperty,l=s.propertyIsEnumerable,h=9007199254740991,c=n("length");t.exports=a},176,function(t,e,i){var n=i(346),r=i(347),o=i(352),a=i(355),s=i(356),u=i(357),l=i(177),h=i(361),c=h(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=n(o(e),String);return s(t,r(l(t),e))}var i=a(e[0],e[1],3);return u(t,function(t,e,n){return!i(t,e,n)})});t.exports=c},function(t,e){function i(t,e){for(var i=-1,n=t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}t.exports=i},function(t,e,i){function n(t,e){var i=t?t.length:0,n=[];if(!i)return n;var u=-1,l=r,h=!0,c=h&&e.length>=s?a(e):null,p=e.length;c&&(l=o,h=!1,e=c);t:for(;++u<i;){var d=t[u];if(h&&d===d){for(var f=p;f--;)if(e[f]===d)continue t;n.push(d)}else l(e,d,0)<0&&n.push(d)}return n}var r=i(348),o=i(349),a=i(350),s=200;t.exports=n},function(t,e){function i(t,e,i){if(e!==e)return n(t,i);for(var r=i-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function n(t,e,i){for(var n=t.length,r=e+(i?0:-1);i?r--:++r<n;){var o=t[r];if(o!==o)return r}return-1}t.exports=i},function(t,e){function i(t,e){var i=t.data,r="string"==typeof e||n(e)?i.set.has(e):i.hash[e];return r?0:-1}function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=i},function(t,e,i){(function(e){function n(t){var e=t?t.length:0;for(this.data={hash:l(null),set:new u};e--;)this.push(t[e])}function r(t){var e=this.data;"string"==typeof t||a(t)?e.set.add(t):e.hash[t]=!0}function o(t){return l&&u?new n(t):null}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var s=i(351),u=s(e,"Set"),l=s(Object,"create");n.prototype.push=r,t.exports=o}).call(e,function(){return this}())},342,[832,353,354],343,176,339,function(t,e){function i(t,e){t=n(t);for(var i=-1,r=e.length,o={};++i<r;){var a=e[i];a in t&&(o[a]=t[a])}return o}function n(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=i},[833,358,177],341,343,176,function(t,e){function i(t,e){if("function"!=typeof t)throw new TypeError(n);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,o=r(i.length-e,0),a=Array(o);++n<o;)a[n]=i[e+n];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,i[0],a);case 2:return t.call(this,i[0],i[1],a)}var s=Array(e+1);for(n=-1;++n<e;)s[n]=i[n];return s[e]=a,t.apply(this,s)}}var n="Expected a function",r=Math.max;t.exports=i},[832,363,364],343,176,339,356,[833,368,369],341,[834,370,371],343,176,361,function(t,e,i){t.exports=i(477)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){p||(p=!0,console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}var s=i(8),u=s.Component,l=s.PropTypes,h=s.Children,c=i(180),p=!1,d=function(t){function e(i,o){n(this,e);var a=r(this,t.call(this,i,o));return a.store=i.store,a}return o(e,t),e.prototype.getChildContext=function(){return{store:this.store}},e.prototype.componentWillReceiveProps=function(t){var e=this.store,i=t.store;e!==i&&a()},e.prototype.render=function(){var t=this.props.children;return h.only(t)},e}(u);d.propTypes={store:c.isRequired,children:l.element.isRequired},d.childContextTypes={store:c.isRequired},t.exports=d},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return t.displayName||t.name||"Component"}function s(t,e,i){function s(t,e){var i=t.getState(),n=P?C(i,e):C(i);return v(f(n),"`mapStateToProps` must return an object. Instead received %s.",n),n}function l(t,e){var i=t.dispatch,n=A?E(i,e):E(i);return v(f(n),"`mapDispatchToProps` must return an object. Instead received %s.",n),n}function w(t,e,i){var n=T(t,e,i);return v(f(n),"`mergeProps` must return an object. Instead received %s.",n),n}var M=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],S=Boolean(t),C=t||g,E=f(e)?m(e):e||b,T=i||x,P=1!==C.length,A=1!==E.length,k=M.pure,O=void 0===k?!0:k,N=M.withRef,D=void 0===N?!1:N,L=_++;return function(t){var e=function(e){function i(t,o){n(this,i);var a=r(this,e.call(this,t,o));a.version=L,a.store=t.store||o.store,v(a.store,'Could not find "store" in either the context or '+('props of "'+a.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+a.constructor.displayName+'".'));var s=a.store.getState();return a.state={storeState:s},a.clearCache(),a}return o(i,e),i.prototype.shouldComponentUpdate=function(){return!O||this.haveOwnPropsChanged||this.hasStoreStateChanged},i.prototype.updateStatePropsIfNeeded=function(){var t=s(this.store,this.props);return this.stateProps&&d(t,this.stateProps)?!1:(this.stateProps=t,!0)},i.prototype.updateDispatchPropsIfNeeded=function(){var t=l(this.store,this.props);return this.dispatchProps&&d(t,this.dispatchProps)?!1:(this.dispatchProps=t,!0)},i.prototype.updateMergedProps=function(){this.mergedProps=w(this.stateProps,this.dispatchProps,this.props)},i.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},i.prototype.trySubscribe=function(){S&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},i.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},i.prototype.componentDidMount=function(){this.trySubscribe()},i.prototype.componentWillReceiveProps=function(t){O&&d(t,this.props)||(this.haveOwnPropsChanged=!0)},i.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},i.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.renderedElement=null},i.prototype.handleChange=function(){if(this.unsubscribe){var t=this.state.storeState,e=this.store.getState();O&&t===e||(this.hasStoreStateChanged=!0,this.setState({storeState:e}))}},i.prototype.getWrappedInstance=function(){return v(D,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},i.prototype.render=function(){var e=this.haveOwnPropsChanged,i=this.hasStoreStateChanged,n=this.renderedElement;this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1;var r=!0,o=!0;O&&n&&(r=i||e&&P,o=e&&A);var a=!1,s=!1;r&&(a=this.updateStatePropsIfNeeded()),o&&(s=this.updateDispatchPropsIfNeeded());var l=!0;return a||s||e?this.updateMergedProps():l=!1,!l&&n?n:(D?this.renderedElement=c(t,u({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=c(t,this.mergedProps),this.renderedElement)},i}(h);return e.displayName="Connect("+a(t)+")",e.WrappedComponent=t,e.contextTypes={store:p},e.propTypes={store:p},y(e,t)}}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},l=i(8),h=l.Component,c=l.createElement,p=i(180),d=i(377),f=i(376),m=i(378),y=i(379),v=i(380),g=function(t){return{}},b=function(t){return{dispatch:t}},x=function(t,e,i){return u({},i,t,e)},_=0;t.exports=s},function(t,e){"use strict";function i(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function n(t){if(!t||"object"!==("undefined"==typeof t?"undefined":i(t)))return!1;var e="function"==typeof t.constructor?Object.getPrototypeOf(t):Object.prototype;if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&r(n)===r(Object)}var r=function(t){return Function.prototype.toString.call(t)};t.exports=n},function(t,e){"use strict";function i(t,e){if(t===e)return!0;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(var r=Object.prototype.hasOwnProperty,o=0;o<i.length;o++)if(!r.call(e,i[o])||t[i[o]]!==e[i[o]])return!1;return!0}t.exports=i},function(t,e,i){"use strict";function n(t){return function(e){return(0,r.bindActionCreators)(t,e)}}var r=i(60);t.exports=n},function(t,e){"use strict";var i={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};t.exports=function(t,e){for(var r=Object.getOwnPropertyNames(e),o=0;o<r.length;++o)i[r[o]]||n[r[o]]||(t[r[o]]=e[r[o]]);return t}},function(t,e,i){"use strict";var n=function(t,e,i,n,r,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,o,a,s],h=0;u=new Error(e.replace(/%s/g,function(){return l[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=n},function(t,e,i){"use strict";var n=i(1)["default"],r=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(445),a=r(o),s=i(434),u=r(s),l=i(451),h=r(l),c=i(444),p=r(c),d=i(28),f=r(d),m=i(438),y=r(m),v=i(436),g=r(v),b=i(437),x=r(b),_=i(435),w=r(_),M=i(113),S=r(M),C=i(442),E=r(C),T=i(443),P=r(T),A=i(417),k=r(A),O=i(418),N=r(O),D=i(420),L=r(D),R=i(419),I=r(R),z=i(447),j=r(z),V=i(188),B=r(V),U=i(448),F=r(U),G=i(450),H=r(G),W=i(449),X=r(W),q=i(396),Y=r(q),K=i(391),Z=r(K),J=i(413),Q=r(J),$=i(400),tt=r($),et=i(401),it=r(et),nt=i(402),rt=r(nt),ot=i(397),at=r(ot),st=i(399),ut=r(st),lt=i(414),ht=r(lt),ct=i(393),pt=r(ct),dt=i(392),ft=r(dt),mt=i(403),yt=r(mt),vt=i(394),gt=r(vt),bt=i(398),xt=r(bt),_t=i(415),wt=r(_t),Mt=i(416),St=r(Mt),Ct=i(395),Et=r(Ct),Tt=i(411),Pt=r(Tt),At=i(409),kt=r(At),Ot=i(408),Nt=r(Ot),Dt=i(406),Lt=r(Dt),Rt=i(410),It=r(Rt),zt=i(404),jt=r(zt),Vt=i(405),Bt=r(Vt),Ut=i(407),Ft=r(Ut),Gt=i(412),Ht=r(Gt),Wt=i(428),Xt=r(Wt),qt=i(423),Yt=r(qt),Kt=i(427),Zt=r(Kt),Jt=i(425),Qt=r(Jt),$t=i(429),te=r($t),ee=i(431),ie=r(ee),ne=i(446),re=r(ne),oe=i(433),ae=r(oe),se=i(432),ue=r(se),le=i(421),he=r(le),ce=i(422),pe=r(ce),de=i(424),fe=r(de),me=i(426),ye=r(me),ve=i(430),ge=r(ve),be=i(441),xe=r(be),_e=i(440),we=r(_e),Me=i(439),Se=r(Me),Ce=function Ee(t){n(this,Ee),this.react3RendererInstance=t,this.descriptors={react3:new a["default"](t),module:new u["default"](t),viewport:new h["default"](t),scene:new p["default"](t),object3D:new f["default"](t),group:new y["default"](t),orthographicCamera:new g["default"](t),perspectiveCamera:new x["default"](t),cubeCamera:new w["default"](t),mesh:new S["default"](t),line:new E["default"](t),points:new P["default"](t),meshBasicMaterial:new Yt["default"](t),meshPhongMaterial:new Zt["default"](t),meshLambertMaterial:new Qt["default"](t),pointsMaterial:new Xt["default"](t),shaderMaterial:new te["default"](t),lineBasicMaterial:new he["default"](t),lineDashedMaterial:new pe["default"](t),meshDepthMaterial:new fe["default"](t),meshNormalMaterial:new ye["default"](t),spriteMaterial:new ge["default"](t),texture:new ie["default"](t),geometry:new Y["default"](t),boxGeometry:new Z["default"](t),sphereGeometry:new Q["default"](t),parametricGeometry:new tt["default"](t),planeBufferGeometry:new it["default"](t),polyhedronGeometry:new rt["default"](t),icosahedronGeometry:new at["default"](t),octahedronGeometry:new ut["default"](t),tetrahedronGeometry:new ht["default"](t),circleGeometry:new pt["default"](t),circleBufferGeometry:new ft["default"](t),ringGeometry:new yt["default"](t),cylinderGeometry:new gt["default"](t),latheGeometry:new xt["default"](t),torusGeometry:new wt["default"](t),torusKnotGeometry:new St["default"](t),extrudeGeometry:new Et["default"](t),shape:new Pt["default"](t),moveTo:new kt["default"](t),lineTo:new Nt["default"](t),bezierCurveTo:new Lt["default"](t),quadraticCurveTo:new It["default"](t),absArc:new jt["default"](t),absEllipse:new Bt["default"](t),hole:new Ft["default"](t),splineThru:new Ht["default"](t),ambientLight:new k["default"](t),directionalLight:new N["default"](t),spotLight:new L["default"](t),pointLight:new I["default"](t),resources:new j["default"](t),materialResource:new re["default"](t),geometryResource:new B["default"](t),shapeGeometryResource:new F["default"](t),textureResource:new H["default"](t),shapeResource:new X["default"](t),uniforms:new ae["default"](t),uniform:new ue["default"](t),cameraHelper:new xe["default"](t),axisHelper:new we["default"](t),arrowHelper:new Se["default"](t)}};e["default"]=Ce,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t}function r(t,e){console.log("deleteListener",t,e)}function o(t,e,i,n){console.log("enqueuePutListener",t,e,i,n)}function a(t,e,i){t.splice(i,0,t.splice(e,1)[0])}var s=i(1)["default"],u=i(3)["default"],l=i(304)["default"],h=i(105)["default"],c=i(63)["default"],p=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var d=i(30),f=p(d),m=i(208),y=p(m),v=i(11),g=p(v),b=i(216),x=p(b),_=i(22),w=(p(_),i(190)),M=p(w),S=i(182),C=p(S),E=function O(){var t=this;s(this,O),this.wantRemount=!1,this.onTrigger=function(){},this.trigger=function(){t.wantRemount=!0,t.onTrigger()}},T={},P=function(t){return t.threeObject},A=y["default"].Mixin,k=function(){function t(e,i){var n=this;s(this,t),this.updateChildren=A.updateChildren.bind(this),this._mountChildByNameAtIndex=A._mountChildByNameAtIndex.bind(this),this._unmountChild=A._unmountChild.bind(this),this.unmountChildren=A.unmountChildren.bind(this),this._currentElement=e,this._react3RendererInstance=i,this._elementType=e.type,this._renderedChildren=[],this._rootNodeID=null,this._threeObject=null,this._topLevelWrapper=null,this._markup=null,this._nodeWithLegacyProperties=null,this._forceRemountOfComponent=!1,this.threeElementDescriptor=i.threeElementDescriptors[e.type],this.threeElementDescriptor||(0,g["default"])(!1),"true"==={NODE_ENV:"production"}.ENABLE_REACT_ADDON_HOOKS&&(this.highlightComponent=function(){n.threeElementDescriptor.highlight(n._threeObject)},this.hideHighlight=function(){n.threeElementDescriptor.hideHighlight(n._threeObject)}),this.remountTrigger=new E,this.remountTrigger.onTrigger=function(){n._forceRemountOfComponent=!0}}return u(t,null,[{key:"displayName",value:"React3Component",enumerable:!0}]),u(t,[{key:"construct",value:function(t){this._currentElement=t}},{key:"mountComponent",value:function(t,e,i){var r,o=this._currentElement;this._rootNodeID=t,this._threeObject=this.threeElementDescriptor.construct(o.props),this.threeElementDescriptor.applyInitialProps(this._threeObject,o.props),this.threeElementDescriptor.placeRemountTrigger(this._threeObject,this.remountTrigger.trigger);var a=o.props.children,s=this.mountChildren(a,e,n(i,this)),u=(r={},l(r,M["default"],t),l(r,"_rootInstance",null),l(r,"elementType",o.type),l(r,"threeObject",this._threeObject),l(r,"parentMarkup",null),l(r,"childrenMarkup",s),l(r,"toJSON",function(){return"---MARKUP---"}),r);(0,g["default"])(!!this._threeObject.userData),h(this._threeObject.userData,{object3D:this._threeObject,react3internalComponent:this,toJSON:function(){return"---USERDATA---"},markup:u});var c=this._react3RendererInstance.threeElementDescriptors;if(s&&s.length>0){this.threeElementDescriptor.addChildren(this._threeObject,s.map(P));for(var p=0;p<s.length;++p){var d=s[p],f=c[d.elementType];d.parentMarkup=u,f.setParent(d.threeObject,this._threeObject)}}return this._markup=u,u}},{key:"_reconcilerInstantiateChildren",value:function(t,e,i){return this._react3RendererInstance.instantiateChildren(t,e,i)}},{key:"_reconcilerUpdateChildren",value:function(t,e,i,n){var r=void 0;return r=(0,x["default"])(e),this._react3RendererInstance.updateChildren(t,r,i,n)}},{key:"mountChildren",value:function(t,e,i){var n=this._reconcilerInstantiateChildren(t,e,i);this._renderedChildren=n;var r=[],o=0;if(n)for(var a=c(n),s=0;s<a.length;++s){var u=a[s],l=n[u],h=this._rootNodeID+u,p=f["default"].mountComponent(l,h,e,i);l._mountIndex=o,r.push(p),o++}return r}},{key:"moveChild",value:function(t,e,i){if(t._mountIndex!==e){this.threeElementDescriptor.moveChild(this._threeObject,t._threeObject,e,t._mountIndex);var n=this._markup;a(n.childrenMarkup,i,e)}}},{key:"receiveComponent",value:function(t,e,i){var n=this._currentElement;this._currentElement=t,this.updateComponent(e,n,t,i)}},{key:"updateComponent",value:function(t,e,i,r){var o=e.props,a=this._currentElement.props;e.type!==i.type&&(0,g["default"])(!1),this._updateObjectProperties(o,a,t,r),this._updateChildrenObjects(a,t,n(r,this))}},{key:"_updateChildrenObjects",value:function(t,e,i){var n=t.children||null;this.updateChildren(n,e,i)}},{key:"_updateObjectProperties",value:function(t,e,i){var n=this.remountTrigger;n.wantRemount=!1,this.threeElementDescriptor.beginPropertyUpdates(this._threeObject);for(var a=c(t),s=0;s<a.length;++s){var u=a[s];if(!e.hasOwnProperty(u)&&"children"!==u){if(n.wantRemount)break;T.hasOwnProperty(u)?t[u]&&r(this._rootNodeID,u):this.threeElementDescriptor.deleteProperty(this._threeObject,u)}}for(var l=c(e),s=0;s<l.length;++s){var u=l[s];if("children"!==u){if(n.wantRemount)break;var h=e[u],p=t[u];h!==p&&(T.hasOwnProperty(u)?h?o(this._rootNodeID,u,h,i):p&&r(this._rootNodeID,u):this.threeElementDescriptor.updateProperty(this._threeObject,u,h))}}this.threeElementDescriptor.completePropertyUpdates(this._threeObject)}},{key:"unmountComponent",value:function(){if(null!==this._threeObject&&this.threeElementDescriptor.componentWillUnmount(this._threeObject),
this.unmountChildren(),null!==this._threeObject&&this.threeElementDescriptor.unmount(this._threeObject),this._markup=null,this._rootNodeID=null,this._nodeWithLegacyProperties){var t=this._nodeWithLegacyProperties;t._reactInternalComponent=null,this._nodeWithLegacyProperties=null}}},{key:"emptyJson",value:function(){return"..."}},{key:"getPublicInstance",value:function(){var t=this._react3RendererInstance.getMarkup(this._rootNodeID);return t.threeObject?(t.threeObject.toJSON=this.emptyJson,t.threeObject):void(0,g["default"])(!1)}},{key:"_updateChildren",value:function(t,e,i){var n=this._renderedChildren,r=this._reconcilerUpdateChildren(n,t,e,i);if(this._renderedChildren=r,r||n){var o=this.remountTrigger;o.wantRemount=!1,this.threeElementDescriptor.beginChildUpdates(this._threeObject);var a=0,s=0;if(r)for(var u=c(r),l=0;l<u.length;++l){var h=u[l];if(!o.wantRemount){var p=n&&n[h],d=r[h];if(p===d)this.moveChild(p,s,a),a=Math.max(p._mountIndex,a),p._mountIndex=s;else{if(p&&(a=Math.max(p._mountIndex,a),this._unmountChild(p)),o.wantRemount)continue;this._mountChildByNameAtIndex(d,h,s,e,i)}s++}}if(n)for(var f=c(n),l=0;l<f.length;++l){var h=f[l];o.wantRemount||r&&r.hasOwnProperty(h)||this._unmountChild(n[h])}this.threeElementDescriptor.completeChildUpdates(this._threeObject)}}},{key:"createChild",value:function(t,e){var i=t._mountIndex;this._markup.childrenMarkup.splice(i,0,e),e.parentMarkup=this._markup,this.threeElementDescriptor.addChild(this._threeObject,e.threeObject,i);var n=this._react3RendererInstance.threeElementDescriptors[e.elementType];n.setParent(e.threeObject,this._threeObject)}},{key:"removeChild",value:function(e){this.threeElementDescriptor.removeChild(this._threeObject,e._threeObject),e instanceof t?e.threeElementDescriptor.removedFromParent(e._threeObject):e instanceof C["default"]?e._threeObject.userData.react3internalComponent.threeElementDescriptor.removedFromParent(e._threeObject):(0,g["default"])(!1);for(var i=this._markup.childrenMarkup,n=0;n<i.length;n++){var r=i[n];if(r.threeObject===e._threeObject)return i.splice(n,1),void delete r.parentMarkup}(0,g["default"])(!1)}}]),t}();e["default"]=k,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(8),h=u(l),c=i(79),p=u(c),d=i(468),f=u(d),m=i(4),y=u(m),v=h["default"].PropTypes,g=function(t){function e(t,i){var r=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.shouldComponentUpdate=f["default"].shouldComponentUpdate,this._onRecreateCanvas=function(){r.setState({canvasKey:r.state.canvasKey+1})},this.state={canvasKey:0}}return r(e,t),o(e,null,[{key:"propTypes",value:{context:v.string,width:v.number.isRequired,height:v.number.isRequired,children:v.any,canvasStyle:v.any,gammaInput:v.bool,gammaOutput:v.bool,sortObjects:v.bool,mainCamera:v.string,onAnimate:v.func,clearColor:v.oneOfType([v.instanceOf(y["default"].Color),v.number,v.string]),shadowMapEnabled:v.bool,shadowMapType:v.oneOf([y["default"].BasicShadowMap,y["default"].PCFShadowMap,y["default"].PCFSoftShadowMap]),shadowMapCullFace:v.oneOf([y["default"].CullFaceNone,y["default"].CullFaceBack,y["default"].CullFaceFront,y["default"].CullFaceFrontBack]),shadowMapDebug:v.bool,pixelRatio:v.number,antialias:v.oneOfType([v.bool,v.number])},enumerable:!0},{key:"defaultProps",value:{context:"3d"},enumerable:!0}]),o(e,[{key:"componentDidMount",value:function(){this.react3Renderer=new p["default"],this._render()}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){this.react3Renderer.dispose(),delete this.react3Renderer}},{key:"_render",value:function(){var t=this.refs.canvas,e=s({},this.props);delete e.canvasStyle,this.react3Renderer.render(h["default"].createElement("react3",s({},e,{onRecreateCanvas:this._onRecreateCanvas}),this.props.children),t)}},{key:"render",value:function(){var t=this.state.canvasKey;return h["default"].createElement("canvas",{ref:"canvas",key:t,width:this.props.width,height:this.props.height,style:s({},this.props.canvasStyle,{width:this.props.width,height:this.props.height})})}}],[{key:"findTHREEObject",value:p["default"].findTHREEObject,enumerable:!0},{key:"eventDispatcher",value:p["default"].eventDispatcher,enumerable:!0}]),e}(h["default"].Component);e["default"]=g,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(35)),h=s(l),c=function(t){function e(t,i,r,o,s,u){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.x=t,this.y=i,this.radius=r,this.startAngle=o,this.endAngle=s,this.clockwise=u}return r(e,t),o(e,[{key:"performAction",value:function(t){t.absarc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.clockwise)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(35)),h=s(l),c=function(t){function e(t,i,r,o,s,u,l,h){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.x=t,this.y=i,this.xRadius=r,this.yRadius=o,this.startAngle=s,this.endAngle=u,this.clockwise=l,this.rotation=h}return r(e,t),o(e,[{key:"performAction",value:function(t){t.absellipse(this.x,this.y,this.xRadius,this.yRadius,this.startAngle,this.endAngle,this.clockwise,this.rotation)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(35)),h=s(l),c=function(t){function e(t,i,r,o,s,u){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.cp1X=t,this.cp1Y=i,this.cp2X=r,this.cp2Y=o,this.aX=s,this.aY=u}return r(e,t),o(e,[{key:"performAction",value:function(t){t.bezierCurveTo(this.cp1X,this.cp1Y,this.cp2X,this.cp2Y,this.aX,this.aY)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(35)),h=s(l),c=function(t){function e(t,i){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.x=t,this.y=i}return r(e,t),o(e,[{key:"performAction",value:function(t){t.lineTo(this.x,this.y)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(35)),h=s(l),c=function(t){function e(t,i){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.x=t,this.y=i}return r(e,t),o(e,[{key:"performAction",value:function(t){t.moveTo(this.x,this.y)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(35)),h=s(l),c=function(t){function e(t,i,r,o){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.cpX=t,this.cpY=i,this.x=r,this.y=o}return r(e,t),o(e,[{key:"performAction",value:function(t){t.quadraticCurveTo(this.cpX,this.cpY,this.x,this.y)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(35)),h=s(l),c=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.points=t}return r(e,t),o(e,[{key:"performAction",value:function(t){t.splineThru(this.points)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["width","height","depth"].forEach(function(t){i.hasProp(t,{type:d["default"].number.isRequired,update:i.triggerRemount,"default":void 0})}),["widthSegments","heightSegments","depthSegments"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.width,i=t.height,n=t.depth,r=t.widthSegments,o=t.heightSegments,a=t.depthSegments;return new l["default"].BoxGeometry(e,i,n,r,o,a)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(112),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["radius","segments","thetaStart","thetaLength"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.updateCacheAndReplace.bind(i,t),"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.segments,n=t.thetaStart,r=t.thetaLength;return new l["default"].CircleBufferGeometry(e,i,n,r)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["radius","segments","thetaStart","thetaLength"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.segments,n=t.thetaStart,r=t.thetaLength;return new l["default"].CircleGeometry(e,i,n,r)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["radiusTop","radiusBottom","height","radialSegments","heightSegments","openEnded","thetaStart","thetaLength"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radiusTop,i=t.radiusBottom,n=t.height,r=t.radialSegments,o=t.heightSegments,a=t.openEnded,s=t.thetaStart,u=t.thetaLength;return new l["default"].CylinderGeometry(e,i,n,r,o,a,s,u)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(21),p=u(c),d=i(183),f=u(d),m=i(7),y=u(m),v=i(11),g=u(v),b=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._invalidChild=function(t){var e=!(t instanceof h["default"].Shape||t instanceof f["default"]);return e},this.hasProp("shapes",{type:y["default"].arrayOf(y["default"].instanceOf(h["default"].Shape)),updateInitial:!0,update:function(t,e){t.userData._shapesFromProps=e||[],t.userData._rootInstance&&i._refreshGeometry(t)},"default":[]}),this.hasProp("settings",{type:y["default"].any,update:function(t,e){t.userData._settings=e},updateInitial:!0,"default":void 0}),["amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","curveSegments","steps","extrudePath","UVGenerator","frames"].forEach(function(t){i.hasProp(t,{type:y["default"].any,update:function(e,n){void 0===n?delete e.userData._options[t]:e.userData._options[t]=n,i._refreshGeometry(e)},"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(){return new h["default"].BufferGeometry}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i);var r={};["amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","curveSegments","steps","extrudePath","UVGenerator","frames"].forEach(function(t){i.hasOwnProperty(t)&&(r[t]=i[t])}),t.userData._shapeCache=[],t.userData._options=r,t.userData._resourceListenerCleanupFunctions=[],this._refreshGeometry(t)}},{key:"_onShapeResourceUpdate",value:function(t,e,i){t.userData._shapeCache[e]=i,this._refreshGeometry(t)}},{key:"_refreshGeometry",value:function(t){var e=t.userData._shapeCache.filter(function(t){return!!t}).concat(t.userData._shapesFromProps);t.fromGeometry(new h["default"].ExtrudeGeometry(e,s({},t.userData._options,t.userData._settings)))}},{key:"addChildren",value:function(t,e){var i=this;(0,g["default"])(0===e.filter(this._invalidChild).length,!1);var n=[];e.forEach(function(e){e instanceof f["default"]?!function(){var r=n.length,o=i._onShapeResourceUpdate.bind(i,t,r);o.target=e;var a=function s(){e.userData.events.removeListener("resource.set",o),t.userData._resourceListenerCleanupFunctions.splice(t.userData._resourceListenerCleanupFunctions.indexOf(s),1)};t.userData._resourceListenerCleanupFunctions.push(a),e.userData.events.on("resource.set",o),e.userData.events.once("dispose",function(){a()}),n.push(null)}():n.push(e)}),t.userData._shapeCache=n,this._refreshGeometry(t)}},{key:"addChild",value:function(t){this.triggerRemount(t)}},{key:"removeChild",value:function(t){this.triggerRemount(t)}},{key:"unmount",value:function(t){return t.userData._resourceListenerCleanupFunctions.forEach(function(t){t()}),delete t.userData._resourceListenerCleanupFunctions,delete t.userData._options,delete t.userData._shapesFromProps,n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(p["default"]);e["default"]=b,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasProp("vertices",{type:d["default"].arrayOf(d["default"].instanceOf(l["default"].Vector3)).isRequired,update:function(t,e){t.vertices!==e&&(t.vertices=e,t.verticesNeedUpdate=!0)},updateInitial:!0,"default":[]}),this.hasProp("colors",{type:d["default"].arrayOf(d["default"].instanceOf(l["default"].Color)),update:function(t,e,i){i&&t.colors!==e&&(t.colors=e,t.colorsNeedUpdate=!0)},updateInitial:!0,"default":[]}),this.hasProp("faces",{type:d["default"].arrayOf(d["default"].instanceOf(l["default"].Face3)),update:function(t,e){t.faces!==e&&(t.faces=e,t.verticesNeedUpdate=!0,t.elementsNeedUpdate=!0)},updateInitial:!0,"default":[]})}return r(e,t),o(e,[{key:"construct",value:function(t){return new l["default"].Geometry}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(81),c=s(h),p=i(7),d=(s(p),function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.detail;return new l["default"].IcosahedronGeometry(e,i)}}]),e}(c["default"]));e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["segments","phiStart","phiLength"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})}),this.hasProp("points",{type:d["default"].arrayOf(d["default"].instanceOf(l["default"].Vector3)).isRequired,update:this.triggerRemount,"default":void 0})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.points,i=t.segments,n=t.phiStart,r=t.phiLength;return new l["default"].LatheGeometry(e,i,n,r)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(81),c=s(h),p=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.detail;return new l["default"].OctahedronGeometry(e,i)}}]),e}(c["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["slices","stacks"].forEach(function(t){i.hasProp(t,{type:d["default"].number.isRequired,update:i.triggerRemount,"default":void 0})}),this.hasProp("parametricFunction",{type:d["default"].func.isRequired,update:this.triggerRemount,"default":void 0})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.parametricFunction,i=t.slices,n=t.stacks;return new l["default"].ParametricGeometry(e,i,n)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(112),c=s(h),p=i(11),d=(s(p),i(7)),f=s(d),m=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["width","height"].forEach(function(t){i.hasProp(t,{type:f["default"].number.isRequired,update:i.updateCacheAndReplace.bind(i,t)})}),["widthSegments","heightSegments"].forEach(function(t){i.hasProp(t,{type:f["default"].number,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.width,i=t.height,n=t.widthSegments,r=t.heightSegments;return new l["default"].PlaneBufferGeometry(e,i,n,r)}}]),e}(c["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(81),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["vertices","indices"].forEach(function(t){i.hasProp(t,{type:d["default"].arrayOf(d["default"].number).isRequired,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.vertices,i=t.indices,n=t.radius,r=t.detail;return new l["default"].PolyhedronGeometry(e,i,n,r)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["innerRadius","outerRadius","thetaSegments","phiSegments","thetaStart","thetaLength"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.innerRadius,i=t.outerRadius,n=t.thetaSegments,r=t.phiSegments,o=t.thetaStart,a=t.thetaLength;return new l["default"].RingGeometry(e,i,n,r,o,a)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(46),l=s(u),h=i(7),c=s(h),p=i(384),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["x","y","radius","startAngle","endAngle"].forEach(function(t){i.hasProp(t,{type:c["default"].number.isRequired,update:i.triggerRemount,"default":0})}),this.hasProp("clockwise",{type:c["default"].bool.isRequired,update:this.triggerRemount,"default":!1})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.x,i=t.y,n=t.radius,r=t.startAngle,o=t.endAngle,a=t.clockwise;return new d["default"](e,i,n,r,o,a)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(46),l=s(u),h=i(7),c=s(h),p=i(385),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["x","y","xRadius","yRadius","startAngle","endAngle"].forEach(function(t){i.hasProp(t,{type:c["default"].number.isRequired,update:i.triggerRemount,"default":0})}),this.hasProp("clockwise",{type:c["default"].bool,update:this.triggerRemount,"default":!1}),this.hasProp("rotation",{type:c["default"].number,update:this.triggerRemount,"default":!1})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.x,i=t.y,n=t.xRadius,r=t.yRadius,o=t.startAngle,a=t.endAngle,s=t.clockwise,u=t.rotation;return new d["default"](e,i,n,r,o,a,s,u)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(46),l=s(u),h=i(7),c=s(h),p=i(386),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["cp1X","cp1Y","cp2X","cp2Y","aX","aY"].forEach(function(t){i.hasProp(t,{type:c["default"].number.isRequired,update:i.triggerRemount,"default":0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.cp1X,i=t.cp1Y,n=t.cp2X,r=t.cp2Y,o=t.aX,a=t.aY;return new d["default"](e,i,n,r,o,a)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(186),l=s(u),h=i(184),c=s(h),p=i(11),d=s(p),f=i(4),m=s(f),y=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"construct",value:function(){return new c["default"]}},{key:"performChildAction",value:function(t,e){e.performAction(t.path)}},{key:"setParent",value:function(t,i){return(0,d["default"])(i instanceof m["default"].Shape,"Holes can only be added to shapes."),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i)}}]),e}(l["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(15),l=(s(u),i(46)),h=s(l),c=i(7),p=s(c),d=i(387),f=s(d),m=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["x","y"].forEach(function(t){i.hasProp(t,{type:p["default"].number.isRequired,update:i.triggerRemount,"default":0})})}return r(e,t),o(e,[{key:"construct",value:function(t){return new f["default"](t.x,t.y)}}]),e}(h["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=(s(u),i(46)),h=s(l),c=i(11),p=(s(c),i(7)),d=s(p),f=i(388),m=s(f),y=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["x","y"].forEach(function(t){i.hasProp(t,{type:d["default"].number.isRequired,update:i.triggerRemount,"default":0})})}return r(e,t),o(e,[{key:"construct",value:function(t){return new m["default"](t.x,t.y)}}]),e}(h["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(46),l=s(u),h=i(7),c=s(h),p=i(389),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["cpX","cpY","x","y"].forEach(function(t){i.hasProp(t,{type:c["default"].number.isRequired,update:i.triggerRemount,"default":0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.cpX,i=t.cpY,n=t.x,r=t.y;return new d["default"](e,i,n,r)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(186),c=s(h),p=i(64),d=s(p),f=function(t){function e(){a(this,i),n(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}r(e,t),o(e,[{key:"construct",value:function(t){return t.hasOwnProperty("points")?new l["default"].Shape(t.points):new l["default"].Shape}}]);var i=e;return e=(0,d["default"])(e)||e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(46),c=s(h),p=i(7),d=s(p),f=i(390),m=s(f),y=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasProp("points",{type:d["default"].arrayOf(d["default"].instanceOf(l["default"].Vector2)).isRequired,update:this.triggerRemount,"default":[]})}return r(e,t),o(e,[{key:"construct",value:function(t){return new m["default"](t.points)}}]),e}(c["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(112),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasProp("radius",{type:d["default"].number,update:this.updateCacheAndReplace.bind(this,"radius"),"default":void 0}),["widthSegments","heightSegments"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})}),["phiStart","phiLength","thetaStart","thetaLength"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.updateCacheAndReplace.bind(i,t),"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.widthSegments,n=t.heightSegments,r=t.phiStart,o=t.phiLength,a=t.thetaStart,s=t.thetaLength;return new l["default"].SphereBufferGeometry(e,i,n,r,o,a,s)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(81),c=s(h),p=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.detail;return new l["default"].TetrahedronGeometry(e,i)}}]),e}(c["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["radius","tube","radialSegments","tubularSegments","arc"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.tube,n=t.radialSegments,r=t.tubularSegments,o=t.arc;return new l["default"].TorusGeometry(e,i,n,r,o)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(21),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["radius","tube","radialSegments","tubularSegments","p","q","heightScale"].forEach(function(t){i.hasProp(t,{type:d["default"].number,update:i.triggerRemount,"default":void 0})})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.radius,i=t.tube,n=t.radialSegments,r=t.tubularSegments,o=t.p,a=t.q,s=t.heightScale;return new l["default"].TorusKnotGeometry(e,i,n,r,o,a,s)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(82),c=s(h),p=i(7),d=(s(p),function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.color;return new l["default"].AmbientLight(e)}}]),e}(c["default"]));e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(82),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasProp("intensity",{type:d["default"].number,simple:!0,"default":1}),["shadowCameraLeft","shadowCameraBottom"].forEach(function(t){i.hasProp(t,{type:d["default"].number,updateInitial:!0,update:function(e,i,n){n&&(e[t]=i)},"default":-500})}),["shadowCameraRight","shadowCameraTop"].forEach(function(t){i.hasProp(t,{type:d["default"].number,updateInitial:!0,update:function(e,i,n){n&&(e[t]=i)},"default":500})}),this.hasColor()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.color,i=t.intensity;return new l["default"].DirectionalLight(e,i)}},{key:"unmount",value:function(t){n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(82),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),
n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor(),["intensity","decay"].forEach(function(t){i.hasProp(t,{type:d["default"].number,simple:!0,"default":1})}),this.hasProp("distance",{type:d["default"].number,simple:!0,"default":0})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.color,i=t.intensity,n=t.distance,r=t.decay;return new l["default"].PointLight(e,i,n,r)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(82),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var r=[1,0,Math.PI/3,10,1];["intensity","distance","angle","exponent","decay"].forEach(function(t,e){i.hasProp(t,{type:d["default"].number,simple:!0,"default":r[e]})}),this.hasProp("shadowCameraFov",{type:d["default"].number,updateInitial:!0,update:function(t,e,i){i&&(t.shadow.camera.fov=e)},"default":50}),this.hasColor()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.color,i=t.intensity,n=t.distance,r=t.angle,o=t.exponent,a=t.decay;return new l["default"].SpotLight(e,i,n,r,o,a)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor(),this.hasProp("linewidth",{type:d["default"].number,simple:!0,"default":1}),["linecap","linejoin"].forEach(function(t){i.hasProp(t,{type:d["default"].oneOf(["round"]),simple:!0,"default":"round"})}),this.hasProp("vertexColors",{type:d["default"].oneOf([l["default"].NoColors,l["default"].FaceColors,l["default"].VertexColors]),simple:!0,"default":l["default"].NoColors}),this.hasProp("fog",{type:d["default"].bool,update:function(t,e,i){i&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,"default":!0})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l["default"].LineBasicMaterial(e)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor(),["linewidth","scale","gapSize"].forEach(function(t){i.hasProp(t,{type:d["default"].number,simple:!0,"default":1})}),this.hasProp("dashSize",{type:d["default"].number,simple:!0,"default":3}),["linecap","linejoin"].forEach(function(t){i.hasProp(t,{type:d["default"].oneOf(["round"]),simple:!0,"default":"round"})}),this.hasProp("vertexColors",{type:d["default"].oneOf([l["default"].NoColors,l["default"].FaceColors,l["default"].VertexColors]),simple:!0,"default":l["default"].NoColors}),this.hasProp("fog",{type:d["default"].bool,update:function(t,e,i){i&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,"default":!0})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l["default"].LineDashedMaterial(e)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=(s(p),function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor(),this.hasWireframe()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return t.hasOwnProperty("map")&&(e.map=t.map),new l["default"].MeshBasicMaterial(e)}}]),e}(c["default"]));e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=(s(p),function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasWireframe()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l["default"].MeshDepthMaterial(e)}}]),e}(c["default"]));e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=(s(p),function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor(),this.hasColor("emissive",0),this.hasWireframe()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l["default"].MeshLambertMaterial(e)}},{key:"getMaterialDescription",value:function(t){var i=n(Object.getPrototypeOf(e.prototype),"getMaterialDescription",this).call(this,t);return t.hasOwnProperty("shininess")&&(i.shininess=t.shininess),t.hasOwnProperty("map")&&(i.map=t.map),i}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),i.hasOwnProperty("map")||(t.map=void 0)}}]),e}(c["default"]));e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=(s(p),function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasWireframe()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l["default"].MeshNormalMaterial(e)}}]),e}(c["default"]));e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(29),p=u(c),d=i(7),f=u(d),m=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.propTypes=s({},this.propTypes,{side:f["default"].number}),this.hasColor(),this.hasColor("specular",1118481),this.hasColor("emissive",0),this.hasWireframe(),this.hasProp("shininess",{type:f["default"].number,simple:!0,"default":30}),this.hasProp("metal",{type:f["default"].bool,update:function(t,e){t.metal=e,t.needsUpdate=!0},"default":!1})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return t.hasOwnProperty("shininess")&&(e.shininess=t.shininess),new h["default"].MeshPhongMaterial(e)}}]),e}(p["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor(),this.hasProp("size",{type:d["default"].number,simple:!0,"default":1}),this.hasProp("sizeAttenuation",{type:d["default"].bool,update:function(t,e,i){i&&(t.sizeAttenuation=e),t.needsUpdate=!0},updateInitial:!0,"default":!0}),this.hasProp("fog",{type:d["default"].bool,update:function(t,e,i){i&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,"default":!0}),this.hasProp("vertexColors",{type:d["default"].oneOf([l["default"].NoColors,l["default"].FaceColors,l["default"].VertexColors]),simple:!0,"default":l["default"].NoColors})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l["default"].PointsMaterial(e)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(111),d=s(p),f=i(7),m=s(f),y=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["vertexShader","fragmentShader"].forEach(function(t){i.hasProp(t,{type:m["default"].string.isRequired,update:i.triggerRemount})}),this.hasWireframe()}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return t.hasOwnProperty("uniforms")&&(e.uniforms=t.uniforms),t.hasOwnProperty("vertexShader")&&(e.vertexShader=t.vertexShader),t.hasOwnProperty("fragmentShader")&&(e.fragmentShader=t.fragmentShader),new l["default"].ShaderMaterial(e)}},{key:"invalidChildInternal",value:function(t){var i=!(t instanceof d["default"]||n(Object.getPrototypeOf(e.prototype),"invalidChildInternal",this).call(this,t));return i}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),i.hasOwnProperty("uniforms")||(t.uniforms=void 0)}}]),e}(c["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(29),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasColor(),this.hasProp("rotation",{type:d["default"].number,simple:!0,"default":0}),this.hasProp("fog",{type:d["default"].bool,update:function(t,e,i){i&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,"default":!1})}return r(e,t),o(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l["default"].SpriteMaterial(e)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(15),p=u(c),d=i(11),f=u(d),m=i(64),y=u(m),v=i(7),g=u(v),b=i(80),x=u(b),_=i(79),w=(u(_),new h["default"].TextureLoader),M=function(t){function e(t){var e=this;a(this,i),n(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,t),this.hasProp("repeat",{type:g["default"].instanceOf(h["default"].Vector2),updateInitial:!0,update:function(t,e){e?t.repeat.copy(e):t.repeat.set(1,1)},"default":new h["default"].Vector2(1,1)}),["wrapS","wrapT"].forEach(function(t){e.hasProp(t,{type:g["default"].oneOf([h["default"].RepeatWrapping,h["default"].ClampToEdgeWrapping,h["default"].MirroredRepeatWrapping]),updateInitial:!0,update:function(e,i){e[t]=i,e.image&&(e.needsUpdate=!0)},"default":h["default"].ClampToEdgeWrapping})}),this.hasProp("anisotropy",{type:g["default"].number,updateInitial:!0,update:function(t,e){t.anisotropy=e,t.image&&(t.needsUpdate=!0)},"default":1}),this.hasProp("url",{type:g["default"].string.isRequired,update:this.triggerRemount,"default":""})}r(e,t),o(e,[{key:"construct",value:function(t){return t.hasOwnProperty("url")?w.load(t.url):void(0,f["default"])(!1,"The texture needs a url property.")}},{key:"setParent",value:function(t,e){(0,f["default"])(e instanceof h["default"].Material||e instanceof x["default"],"Parent is not a material or a uniform"),e instanceof h["default"].Material?((0,f["default"])(null===e.map||void 0===e.map,"Parent already has a texture"),e.map=t,e.needsUpdate=!0):e.setValue(t),n(Object.getPrototypeOf(i.prototype),"setParent",this).call(this,t,e)}},{key:"applyInitialProps",value:function(t,e){t.userData=s({},t.userData),n(Object.getPrototypeOf(i.prototype),"applyInitialProps",this).call(this,t,e)}},{key:"unmount",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e instanceof h["default"].Material?e.map===t&&(e.map=null,e.needsUpdate=!0):e instanceof x["default"]&&e.value===t&&e.setValue(null),t.dispose(),n(Object.getPrototypeOf(i.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]);var i=e;return e=(0,y["default"])(e)||e}(p["default"]);e["default"]=M,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(15),c=s(h),p=i(80),d=s(p),f=i(111),m=s(f),y=i(55),v=s(y),g=i(11),b=s(g),x=i(7),_=s(x),w=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._invalidChild=function(t){return i.invalidChildInternal(t)},this.hasProp("type",{type:_["default"].string.isRequired,simple:!0}),this.hasProp("value",{type:_["default"].any,update:function(t,e){t.setValue(e)},"default":null}),this.hasProp("name",{type:_["default"].string.isRequired})}return r(e,t),o(e,[{key:"construct",value:function(){return new d["default"]}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),(0,b["default"])(i.hasOwnProperty("name"),"The <uniform/> should have a 'name' property"),t.name=i.name,t.value=i.value}},{key:"setParent",value:function(t,i){(0,b["default"])(i instanceof m["default"],"Parent is not a Uniform Container (<uniforms/>)");var r=t.name;(0,b["default"])(void 0===i[r],"Parent already has uniforms"),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i),i.uniforms[r]={type:t.type,value:t.value},t.userData._onValueChanged=function(t){i.uniforms[r].value=t},t.userData.events.on("valueChanged",t.userData._onValueChanged)}},{key:"addChildren",value:function(t,e){(0,b["default"])(0===e.filter(this._invalidChild).length,"Uniform children can only be textures or resource references")}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"removeChild",value:function(t,e){}},{key:"invalidChildInternal",value:function(t){var e=!(t instanceof l["default"].Texture||t instanceof v["default"]);return e}},{key:"unmount",value:function(t){t.userData.events.removeListener("valueChanged",t.userData._onValueChanged),delete t.userData._onValueChanged,n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]),e}(c["default"]);e["default"]=w,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(15),c=s(h),p=i(111),d=s(p),f=i(80),m=s(f),y=i(11),v=s(y),g=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return r(e,t),o(e,[{key:"construct",value:function(){return new d["default"]}},{key:"setParent",value:function(t,i){(0,v["default"])(i instanceof l["default"].ShaderMaterial,"Parent of <uniforms/> is not a shader material"),(0,v["default"])(void 0===i.uniforms,"Parent already has uniforms"),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i),i.uniforms=t.uniforms}},{key:"addChildren",value:function(t,e){e.forEach(function(t){(0,v["default"])(t instanceof m["default"],"The <uniforms/> component can only have <uniform/> elements as children.")})}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]),e}(c["default"]);e["default"]=g,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var r=i(5)["default"],o=i(6)["default"],a=i(3)["default"],s=i(1)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(15),h=u(l),c=i(181),p=u(c),d=i(57),f=u(d),m=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var i=function(t,e,i,r,o){var a=f["default"][r];if(!t[e])return new Error("Required "+a+" `"+o+"` was not specified in "+("`"+i+"`."));if(!(t[e].prototype instanceof p["default"])){var s=n(t[e]);return new Error("Invalid "+a+" `"+o+"` of type "+("`"+s+"` supplied to `"+i+"`, expected ")+"subclass of `Module`.")}};i.toString=function(){return"``` subclass of ReactThreeRenderer.Module ``` *``` required ```*"},this.hasProp("descriptor",{type:i,update:this.triggerRemount,"default":void 0})}return o(e,t),a(e,[{key:"construct",value:function(t){var e=t.descriptor;return new e}},{key:"applyInitialProps",value:function(t,i){r(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.setup(this.react3RendererInstance)}},{key:"unmount",value:function(t){t.dispose(),r(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(h["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(28),h=u(l),c=i(4),p=u(c),d=i(7),f=u(d),m=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.propTypes=s({},this.propTypes,{near:f["default"].number,far:f["default"].number,cubeResolution:f["default"].number.isRequired})}return r(e,t),o(e,[{key:"construct",value:function(t){return new p["default"].CubeCamera(t.near,t.far,t.cubeResolution)}}]),e}(h["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(187),h=u(l),c=i(4),p=u(c),d=i(7),f=u(d),m=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.propTypes=s({},this.propTypes,{left:f["default"].number.isRequired,right:f["default"].number.isRequired,top:f["default"].number.isRequired,bottom:f["default"].number.isRequired,near:f["default"].number,far:f["default"].number}),this.propUpdates=s({},this.propUpdates,{left:this._updateAndRefreshProjection.bind(this,"left"),right:this._updateAndRefreshProjection.bind(this,"right"),top:this._updateAndRefreshProjection.bind(this,"top"),bottom:this._updateAndRefreshProjection.bind(this,"bottom"),fov:this._updateFov,far:this._updateFar})}return r(e,t),o(e,[{key:"_updateFov",value:function(t,e){t.fov=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateFar",value:function(t,e){t.far=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"construct",value:function(t){return new p["default"].OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far)}},{key:"_updateAndRefreshProjection",value:function(t,e,i){e[t]=i,e.userData._needsProjectionMatrixUpdate=!0}}]),e}(h["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(187),h=u(l),c=i(4),p=u(c),d=i(7),f=u(d),m=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.propTypes=s({},this.propTypes,{fov:f["default"].number,aspect:f["default"].number,near:f["default"].number,far:f["default"].number}),this.propUpdates=s({},this.propUpdates,{aspect:this._updateAspect,fov:this._updateFov,far:this._updateFar,near:this._updateNear})}return r(e,t),o(e,[{key:"construct",value:function(t){return new p["default"].PerspectiveCamera(t.fov,t.aspect,t.near,t.far)}},{key:"_updateFov",value:function(t,e){t.fov=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateNear",value:function(t,e){t.near=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateFar",value:function(t,e){t.far=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateAspect",value:function(t,e){t.aspect=e,t.userData._needsProjectionMatrixUpdate=!0}}]),e}(h["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(28),c=s(h),p=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"construct",value:function(){return new l["default"].Group}}]),e}(c["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(28),p=u(c),d=i(7),f=u(d),m=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.propTypes=s({},this.propTypes,{dir:f["default"].instanceOf(h["default"].Vector3),origin:f["default"].instanceOf(h["default"].Vector3),length:f["default"].number,color:f["default"].number,headLength:f["default"].number,headWidth:f["default"].number})}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i)}},{key:"construct",value:function(t){var e=t.dir,i=t.origin,n=t.length,r=t.color,o=t.headLength,a=t.headWidth;return new h["default"].ArrowHelper(e,i,n,r,o,a)}},{key:"unmount",value:function(t){t.line&&(t.line.geometry.dispose(),t.line.material.dispose()),t.cone&&(t.cone.geometry.dispose(),t.cone.material.dispose()),n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(p["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(13)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(4),h=u(l),c=i(28),p=u(c),d=i(7),f=u(d),m=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.propTypes=s({},this.propTypes,{size:f["default"].number})}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i)}},{key:"construct",value:function(t){var e=t.size;return new h["default"].AxisHelper(e)}},{key:"unmount",value:function(t){t.geometry.dispose(),t.material.dispose(),n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(p["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(189),c=s(h),p=i(28),d=s(p),f=i(7),m=s(f),y=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasProp("visible",{type:m["default"].bool,override:!0,update:function(t,e){t.userData._visible=e,t.visible=t.userData._hasCamera&&e},updateInitial:!0,"default":!0}),this.hasProp("cameraName",{type:m["default"].string.isRequired,update:function(t,e){i._clearCameraEvents(t),t.userData._cameraName=e,i._startCameraFinder(t)},"default":void 0})}return r(e,t),o(e,[{key:"construct",value:function(){return new l["default"].CameraHelper(new l["default"].PerspectiveCamera)}},{key:"applyInitialProps",value:function(t,i){var r=this;n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.userData._onCameraProjectionUpdate=function(){t.update()},t.userData._onCameraDispose=function(){r._startCameraFinder(t)},t.userData._onCameraRename=function(e){e.oldName===t.userData._cameraName&&r._startCameraFinder(t)},t.userData._onBeforeRender=function(){t.visible=t.userData._hasCamera&&t.userData._visible&&c["default"].current!==t.userData._camera},t.userData._cameraName=i.cameraName,t.userData._visible=i.hasOwnProperty("visible")?i.visible:!0,t.userData.events.once("addedIntoRoot",function(){var e=t.userData.markup._rootInstance;e.addBeforeRenderListener(t.userData._onBeforeRender),r._startCameraFinder(t)})}},{key:"unmount",value:function(t){return this._clearCameraEvents(t),delete t.userData._onCameraProjectionUpdate,n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"_getCamera",value:function(t,e){var i=null;if(e){var n=t.getObjectsByName(e).filter(function(t){return t instanceof l["default"].Camera});n.length>0&&(i=n[0])}return i}},{key:"_clearCameraEvents",value:function(t){t.userData._hasCamera&&(t.userData._camera.userData.events.removeListener("updateProjectionMatrix",t.userData._onCameraProjectionUpdate),t.userData._camera.userData.events.removeListener("dispose",t.userData._onCameraDispose),t.userData._camera.userData.events.removeListener("rename",t.userData._onCameraRename))}},{key:"_setCamera",value:function(t,e){var i=t.userData;if(i._camera!==e){this._clearCameraEvents(t),i._hasCamera=!0,i._camera=e,t.camera=e,t.matrix=e.matrixWorld,t.update(),t.visible=i._visible;var n=t.userData._camera.userData.events;n.on("rename",i._onCameraRename),n.on("updateProjectionMatrix",i._onCameraProjectionUpdate),n.once("dispose",i._onCameraDispose)}}},{key:"_startCameraFinder",value:function(t){var e=this;this._clearCameraEvents(t);var i=t.userData.markup&&t.userData.markup._rootInstance;if(i){t.userData._hasCamera=!1,t.userData._camera=null,t.camera=new l["default"].PerspectiveCamera,t.visible=!1;var n=this._getCamera(i,t.userData._cameraName);n?this._setCamera(t,n):!function(){var n=function r(){var n=e._getCamera(i,t.userData._cameraName);n&&(i.removeAnimateListener(r),e._setCamera(t,n))};i.addAnimateListener(n)}()}}}]),e}(d["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(28),c=(s(h),i(55)),p=(s(c),i(11)),d=(s(p),i(113)),f=s(d),m=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"construct",value:function(t){var e=t.hasOwnProperty("geometry")?t.geometry:void 0,i=t.hasOwnProperty("material")?t.material:void 0,n=new l["default"].Line(e,i);return e||(n.geometry.dispose(),n.geometry=void 0),i||(n.material.dispose(),n.material=void 0),n}}]),e}(f["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(113),c=s(h),p=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return r(e,t),o(e,[{key:"construct",value:function(){var t=new l["default"].Points;return t.geometry.dispose(),t.material.dispose(),t.geometry=void 0,t.material=void 0,t}}]),e}(c["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(28),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasProp("fog",{type:d["default"].instanceOf(l["default"].Fog),simple:!0,"default":void 0})}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i)}},{key:"construct",value:function(){return new l["default"].Scene}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(63)["default"],u=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=i(109),h=u(l),c=i(15),p=u(c),d=i(4),f=u(d),m=i(7),y=u(m),v=i(56),g=(u(v),i(11)),b=u(g),x={gammaInput:{type:y["default"].bool,"default":!1},gammaOutput:{type:y["default"].bool,"default":!1},sortObjects:{type:y["default"].bool,"default":!0},context:{type:y["default"].oneOf(["2d","3d"]).isRequired},mainCamera:{type:y["default"].string,"default":void 0},onAnimate:{type:y["default"].func,"default":void 0},clearColor:{type:y["default"].oneOfType([y["default"].instanceOf(f["default"].Color),y["default"].number,y["default"].string]),"default":0},shadowMapEnabled:{type:y["default"].bool,"default":!1},shadowMapType:{type:y["default"].oneOf([f["default"].BasicShadowMap,f["default"].PCFShadowMap,f["default"].PCFSoftShadowMap]),"default":f["default"].PCFShadowMap},shadowMapCullFace:{type:y["default"].oneOf([f["default"].CullFaceNone,f["default"].CullFaceBack,f["default"].CullFaceFront,f["default"].CullFaceFrontBack]),"default":f["default"].CullFaceFront},shadowMapDebug:{type:y["default"].bool,"default":!1},onRecreateCanvas:{type:y["default"].func.isRequired,"default":void 0},pixelRatio:{type:y["default"].number,"default":1},width:{type:y["default"].number.isRequired},height:{type:y["default"].number.isRequired},antialias:{type:y["default"].oneOfType([y["default"].bool,y["default"].number]),"default":!1}},_=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),s(x).forEach(function(t){var e=x[t],n=t[0].toUpperCase()+t.substr(1),r="update"+n,o={type:e.type,update:function(t,e){t[r](e)}};e.hasOwnProperty("default")&&(o["default"]=e["default"]),i.hasProp(t,o)})}return r(e,t),o(e,[{key:"setParent",value:function(t,i){(0,b["default"])(i instanceof HTMLCanvasElement,"The `react3` element can only be rendered into a canvas."),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i),t.updateCanvas(i)}},{key:"construct",value:function(t){return new h["default"](t,this.react3RendererInstance)}},{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.initialize()}},{key:"addChildren",value:function(t,e){t.addChildren(e)}},{key:"addChild",value:function(t,e){t.addChildren([e])}},{key:"moveChild",value:function(){}},{key:"removeChild",value:function(t,e){t.removeChild(e)}},{key:"_updateOnRecreateCanvas",value:function(t,e){t.updateOnRecreateCanvas(e)}},{key:"_updateHeight",value:function(t,e){t.updateHeight(e)}},{key:"unmount",value:function(t){n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t),t.unmount()}},{key:"componentWillUnmount",value:function(t){return t.willUnmount(),n(Object.getPrototypeOf(e.prototype),"componentWillUnmount",this).call(this,t)}}]),e}(p["default"]);e["default"]=_,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{
value:!0});var u=i(83),l=s(u),h=i(4),c=s(h),p=i(11),d=s(p),f=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),i.hasOwnProperty("slot")?t.userData._propertySlot=i.slot:t.userData._propertySlot="material"}},{key:"setParent",value:function(t,i){(0,d["default"])(i instanceof c["default"].Mesh||i instanceof c["default"].Points||i instanceof c["default"].Line,"Parent is not a mesh"),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(4),l=s(u),h=i(15),c=s(h),p=i(11),d=s(p),f=i(110),m=s(f),y=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"construct",value:function(){return new m["default"]}},{key:"unmount",value:function(t){var i=t.userData.markup.parentMarkup,r=i.threeObject.userData.events;t.resourceIds.forEach(function(e){r.emit("resource.removed",{id:e,distance:0,resource:t.resourceMap[e]})}),n(Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"addChildren",value:function(t,e){e.forEach(function(e){var i=e.userData._resourceId;(0,d["default"])(i,"Resource container can only hold resources"),t.resourceIds.push(i),t.resourceMap[i]=e;var n=t.userData.markup.parentMarkup;n&&n.threeObject.userData.events.emit("resource.added",{id:i,distance:0,resource:e})})}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"removeChild",value:function(t,e){var i=e.userData._resourceId;delete t.resourceIds[i];var n=t.userData.markup.parentMarkup;n&&n.threeObject.userData.events.emit("resource.removed",{id:i,distance:0,resource:e})}},{key:"setParent",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i);var r=i.userData.events;i.userData._resources=t,t.resourceIds.forEach(function(e){r.emit("resource.added",{id:e,distance:0,resource:t.resourceMap[e]})})}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.updateMatrixWorld&&e.traverse&&t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){var t=new l["default"].Box3;return t.setFromObject(e),[t]}})}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}}]),e}(c["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(188),l=s(u),h=i(7),c=s(h),p=i(4),d=s(p),f=function(t){function e(t){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.hasProp("type",{type:c["default"].oneOf(["points","spacedPoints","shape"]).isRequired,update:this.triggerRemount,"default":""}),this.hasProp("divisions",{type:c["default"].number,update:this.triggerRemount,"default":5})}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.userData._divisions=i.divisions,t.userData._type=i.type}},{key:"applyToSlot",value:function(t,i,r){if(!r)return n(Object.getPrototypeOf(e.prototype),"applyToSlot",this).call(this,t,i,null);var o=void 0;switch(t.userData._type){case"points":o=r.createPointsGeometry();break;case"spacedPoints":o=r.createSpacedPointsGeometry(t.userData._divisions);break;case"shape":o=new d["default"].ShapeGeometry(r)}return n(Object.getPrototypeOf(e.prototype),"applyToSlot",this).call(this,t,i,o)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(83),l=s(u),h=i(4),c=s(h),p=i(11),d=s(p),f=i(183),m=s(f),y=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.userData._remountOnUpdate=!0}},{key:"construct",value:function(t){return new m["default"](t.resourceId)}},{key:"setParent",value:function(t,i){(0,d["default"])(i instanceof c["default"].ExtrudeGeometry||i instanceof c["default"].BufferGeometry,"Parent is not an extrude geometry"),n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i)}},{key:"applyToSlot",value:function(t,e,i){t.userData.events.emit("resource.set",i)}}]),e}(l["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(83),l=s(u),h=i(4),c=s(h),p=i(11),d=s(p),f=i(80),m=s(f),y=function(t){function e(){a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),o(e,[{key:"applyInitialProps",value:function(t,i){n(Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,i),t.userData._propertySlot="map"}},{key:"applyToSlot",value:function(t,i,r){i instanceof c["default"].Material?(n(Object.getPrototypeOf(e.prototype),"applyToSlot",this).call(this,t,i,r),i.dispose()):i instanceof m["default"]?i.setValue(r):(0,d["default"])(!1,"Parent is not a material or a uniform")}},{key:"setParent",value:function(t,i){i instanceof c["default"].Material?n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i):i instanceof m["default"]?(t.userData._propertySlot="value",n(Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,i)):(0,d["default"])(!1,"Parent is not a material or a uniform")}}]),e}(l["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(5)["default"],r=i(6)["default"],o=i(3)["default"],a=i(1)["default"],s=i(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(185),l=s(u),h=i(15),c=s(h),p=i(7),d=s(p),f=function(t){function e(t){var i=this;a(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),["x","y","width","height"].forEach(function(t){i.hasProp(t,{type:d["default"].number.isRequired,simple:!0})}),this.hasProp("cameraName",{type:d["default"].string.isRequired,simple:!0})}return r(e,t),o(e,[{key:"construct",value:function(t){return new l["default"](t)}}]),e}(c["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(3)["default"],r=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){r(this,t)}return n(t,[{key:"dispatchEvent",value:function(t,e){var i=t.userData._eventCallbacks,n=i&&i[e];if(n){for(var r=arguments.length,o=Array(r>2?r-2:0),a=2;r>a;a++)o[a-2]=arguments[a];n.apply(void 0,o)}}}]),t}();e["default"]=o,t.exports=e["default"]},31,function(t,e,i){"use strict";var n=i(17),r=i(124),o=i(222),a={componentDidMount:function(){this.props.autoFocus&&o(r(this))}},s={Mixin:a,focusDOMComponent:function(){o(n.getNode(this._rootNodeID))}};t.exports=s},function(t,e,i){"use strict";function n(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function r(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case P.topCompositionStart:return A.compositionStart;case P.topCompositionEnd:return A.compositionEnd;case P.topCompositionUpdate:return A.compositionUpdate}}function a(t,e){return t===P.topKeyDown&&e.keyCode===_}function s(t,e){switch(t){case P.topKeyUp:return-1!==x.indexOf(e.keyCode);case P.topKeyDown:return e.keyCode!==_;case P.topKeyPress:case P.topMouseDown:case P.topBlur:return!0;default:return!1}}function u(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function l(t,e,i,n,r){var l,h;if(w?l=o(t):O?s(t,n)&&(l=A.compositionEnd):a(t,n)&&(l=A.compositionStart),!l)return null;C&&(O||l!==A.compositionStart?l===A.compositionEnd&&O&&(h=O.getData()):O=y.getPooled(e));var c=v.getPooled(l,i,n,r);if(h)c.data=h;else{var p=u(n);null!==p&&(c.data=p)}return f.accumulateTwoPhaseDispatches(c),c}function h(t,e){switch(t){case P.topCompositionEnd:return u(e);case P.topKeyPress:var i=e.which;return i!==E?null:(k=!0,T);case P.topTextInput:var n=e.data;return n===T&&k?null:n;default:return null}}function c(t,e){if(O){if(t===P.topCompositionEnd||s(t,e)){var i=O.getData();return y.release(O),O=null,i}return null}switch(t){case P.topPaste:return null;case P.topKeyPress:return e.which&&!r(e)?String.fromCharCode(e.which):null;case P.topCompositionEnd:return C?null:e.data;default:return null}}function p(t,e,i,n,r){var o;if(o=S?h(t,n):c(t,n),!o)return null;var a=g.getPooled(A.beforeInput,i,n,r);return a.data=o,f.accumulateTwoPhaseDispatches(a),a}var d=i(36),f=i(66),m=i(14),y=i(463),v=i(492),g=i(495),b=i(40),x=[9,13,27,32],_=229,w=m.canUseDOM&&"CompositionEvent"in window,M=null;m.canUseDOM&&"documentMode"in document&&(M=document.documentMode);var S=m.canUseDOM&&"TextEvent"in window&&!M&&!n(),C=m.canUseDOM&&(!w||M&&M>8&&11>=M),E=32,T=String.fromCharCode(E),P=d.topLevelTypes,A={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[P.topCompositionEnd,P.topKeyPress,P.topTextInput,P.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[P.topBlur,P.topCompositionEnd,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[P.topBlur,P.topCompositionStart,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[P.topBlur,P.topCompositionUpdate,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]}},k=!1,O=null,N={eventTypes:A,extractEvents:function(t,e,i,n,r){return[l(t,e,i,n,r),p(t,e,i,n,r)]}};t.exports=N},function(t,e,i){"use strict";var n=i(192),r=i(14),o=i(23),a=(i(509),i(500)),s=i(514),u=i(518),l=(i(12),u(function(t){return s(t)})),h=!1,c="cssFloat";if(r.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(d){h=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var f={createMarkupForStyles:function(t){var e="";for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];null!=n&&(e+=l(i)+":",e+=a(i,n)+";")}return e||null},setValueForStyles:function(t,e){var i=t.style;for(var r in e)if(e.hasOwnProperty(r)){var o=a(r,e[r]);if("float"===r&&(r=c),o)i[r]=o;else{var s=h&&n.shorthandPropertyExpansions[r];if(s)for(var u in s)i[u]="";else i[r]=""}}}};o.measureMethods(f,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),t.exports=f},function(t,e,i){"use strict";function n(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function r(t){var e=M.getPooled(A.change,O,t,S(t));x.accumulateTwoPhaseDispatches(e),w.batchedUpdates(o,e)}function o(t){b.enqueueEvents(t),b.processEventQueue(!1)}function a(t,e){k=t,O=e,k.attachEvent("onchange",r)}function s(){k&&(k.detachEvent("onchange",r),k=null,O=null)}function u(t,e,i){return t===P.topChange?i:void 0}function l(t,e,i){t===P.topFocus?(s(),a(e,i)):t===P.topBlur&&s()}function h(t,e){k=t,O=e,N=t.value,D=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(k,"value",I),k.attachEvent("onpropertychange",p)}function c(){k&&(delete k.value,k.detachEvent("onpropertychange",p),k=null,O=null,N=null,D=null)}function p(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==N&&(N=e,r(t))}}function d(t,e,i){return t===P.topInput?i:void 0}function f(t,e,i){t===P.topFocus?(c(),h(e,i)):t===P.topBlur&&c()}function m(t,e,i){return t!==P.topSelectionChange&&t!==P.topKeyUp&&t!==P.topKeyDown||!k||k.value===N?void 0:(N=k.value,O)}function y(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function v(t,e,i){return t===P.topClick?i:void 0}var g=i(36),b=i(65),x=i(66),_=i(14),w=i(18),M=i(50),S=i(127),C=i(130),E=i(219),T=i(40),P=g.topLevelTypes,A={change:{phasedRegistrationNames:{bubbled:T({onChange:null}),captured:T({onChangeCapture:null})},dependencies:[P.topBlur,P.topChange,P.topClick,P.topFocus,P.topInput,P.topKeyDown,P.topKeyUp,P.topSelectionChange]}},k=null,O=null,N=null,D=null,L=!1;_.canUseDOM&&(L=C("change")&&(!("documentMode"in document)||document.documentMode>8));var R=!1;_.canUseDOM&&(R=C("input")&&(!("documentMode"in document)||document.documentMode>9));var I={get:function(){return D.get.call(this)},set:function(t){N=""+t,D.set.call(this,t)}},z={eventTypes:A,extractEvents:function(t,e,i,r,o){var a,s;if(n(e)?L?a=u:s=l:E(e)?R?a=d:(a=m,s=f):y(e)&&(a=v),a){var h=a(t,e,i);if(h){var c=M.getPooled(A.change,h,r,o);return c.type="change",x.accumulateTwoPhaseDispatches(c),c}}s&&s(t,e,i)}};t.exports=z},function(t,e){"use strict";var i=0,n={createReactRootIndex:function(){return i++}};t.exports=n},function(t,e,i){"use strict";function n(t){return t.substring(1,t.indexOf(" "))}var r=i(14),o=i(511),a=i(31),s=i(224),u=i(9),l=/^(<[^ \/>]+)/,h="data-danger-index",c={dangerouslyRenderMarkup:function(t){r.canUseDOM?void 0:u(!1);for(var e,i={},c=0;c<t.length;c++)t[c]?void 0:u(!1),e=n(t[c]),e=s(e)?e:"*",i[e]=i[e]||[],i[e][c]=t[c];var p=[],d=0;for(e in i)if(i.hasOwnProperty(e)){var f,m=i[e];for(f in m)if(m.hasOwnProperty(f)){var y=m[f];m[f]=y.replace(l,"$1 "+h+'="'+f+'" ')}for(var v=o(m.join(""),a),g=0;g<v.length;++g){var b=v[g];b.hasAttribute&&b.hasAttribute(h)&&(f=+b.getAttribute(h),b.removeAttribute(h),p.hasOwnProperty(f)?u(!1):void 0,p[f]=b,d+=1)}}return d!==p.length?u(!1):void 0,p.length!==t.length?u(!1):void 0,p},dangerouslyReplaceNodeWithMarkup:function(t,e){r.canUseDOM?void 0:u(!1),e?void 0:u(!1),"html"===t.tagName.toLowerCase()?u(!1):void 0;var i;i="string"==typeof e?o(e,a)[0]:e,t.parentNode.replaceChild(i,t)}};t.exports=c},function(t,e,i){"use strict";var n=i(40),r=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({BeforeInputEventPlugin:null})];t.exports=r},function(t,e,i){"use strict";var n=i(36),r=i(66),o=i(86),a=i(17),s=i(40),u=n.topLevelTypes,l=a.getFirstReactDOM,h={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},c=[null,null],p={eventTypes:h,extractEvents:function(t,e,i,n,s){if(t===u.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==u.topMouseOut&&t!==u.topMouseOver)return null;var p;if(e.window===e)p=e;else{var d=e.ownerDocument;p=d?d.defaultView||d.parentWindow:window}var f,m,y="",v="";if(t===u.topMouseOut?(f=e,y=i,m=l(n.relatedTarget||n.toElement),m?v=a.getID(m):m=p,m=m||p):(f=p,m=e,v=i),f===m)return null;var g=o.getPooled(h.mouseLeave,y,n,s);g.type="mouseleave",g.target=f,g.relatedTarget=m;var b=o.getPooled(h.mouseEnter,v,n,s);return b.type="mouseenter",b.target=m,b.relatedTarget=f,r.accumulateEnterLeaveDispatches(g,b,y,v),c[0]=g,c[1]=b,c}};t.exports=p},function(t,e,i){"use strict";function n(t){return t===y.topMouseUp||t===y.topTouchEnd||t===y.topTouchCancel}function r(t){return t===y.topMouseMove||t===y.topTouchMove}function o(t){return t===y.topMouseDown||t===y.topTouchStart}function a(t,e,i,n){var r=t.type||"unknown-event";t.currentTarget=m.Mount.getNode(n),e?d.invokeGuardedCallbackWithCatch(r,i,t,n):d.invokeGuardedCallback(r,i,t,n),t.currentTarget=null}function s(t,e){var i=t._dispatchListeners,n=t._dispatchIDs;if(Array.isArray(i))for(var r=0;r<i.length&&!t.isPropagationStopped();r++)a(t,e,i[r],n[r]);else i&&a(t,e,i,n);t._dispatchListeners=null,t._dispatchIDs=null}function u(t){var e=t._dispatchListeners,i=t._dispatchIDs;if(Array.isArray(e)){for(var n=0;n<e.length&&!t.isPropagationStopped();n++)if(e[n](t,i[n]))return i[n]}else if(e&&e(t,i))return i;return null}function l(t){var e=u(t);return t._dispatchIDs=null,t._dispatchListeners=null,e}function h(t){var e=t._dispatchListeners,i=t._dispatchIDs;Array.isArray(e)?f(!1):void 0;var n=e?e(t,i):null;return t._dispatchListeners=null,t._dispatchIDs=null,n}function c(t){return!!t._dispatchListeners}var p=i(36),d=i(204),f=i(9),m=(i(12),{Mount:null,injectMount:function(t){m.Mount=t}}),y=p.topLevelTypes,v={isEndish:n,isMoveish:r,isStartish:o,executeDirectDispatch:h,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:c,getNode:function(t){return m.Mount.getNode(t)},getID:function(t){return m.Mount.getID(t)},injection:m};t.exports=v},function(t,e,i){"use strict";function n(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var r=i(39),o=i(10),a=i(218);o(n.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,i=this._startText,n=i.length,r=this.getText(),o=r.length;for(t=0;n>t&&i[t]===r[t];t++);var a=n-t;for(e=1;a>=e&&i[n-e]===r[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=r.slice(t,s),this._fallbackText}}),r.addPoolingTo(n),t.exports=n},function(t,e,i){"use strict";var n,r=i(47),o=i(14),a=r.injection.MUST_USE_ATTRIBUTE,s=r.injection.MUST_USE_PROPERTY,u=r.injection.HAS_BOOLEAN_VALUE,l=r.injection.HAS_SIDE_EFFECTS,h=r.injection.HAS_NUMERIC_VALUE,c=r.injection.HAS_POSITIVE_NUMERIC_VALUE,p=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var d=document.implementation;n=d&&d.hasFeature&&d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:a|u,allowTransparency:a,alt:null,async:u,autoComplete:null,autoPlay:u,capture:a|u,cellPadding:null,cellSpacing:null,charSet:a,challenge:a,checked:s|u,classID:a,className:n?a:s,cols:a|c,colSpan:null,content:null,contentEditable:null,contextMenu:a,controls:s|u,coords:null,crossOrigin:null,data:null,dateTime:a,"default":u,defer:u,dir:null,disabled:a|u,download:p,draggable:null,encType:null,form:a,formAction:a,formEncType:a,formMethod:a,formNoValidate:u,formTarget:a,frameBorder:a,headers:null,height:a,hidden:a|u,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,inputMode:a,integrity:null,is:a,keyParams:a,keyType:a,kind:null,label:null,lang:null,list:a,loop:s|u,low:null,manifest:a,marginHeight:null,marginWidth:null,max:null,maxLength:a,media:a,mediaGroup:null,method:null,min:null,minLength:a,multiple:s|u,muted:s|u,name:null,nonce:a,noValidate:u,open:u,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|u,rel:null,required:u,reversed:u,role:a,rows:a|c,rowSpan:null,sandbox:null,scope:null,scoped:u,scrolling:null,seamless:a|u,selected:s|u,shape:null,size:a|c,sizes:a,span:c,spellCheck:null,src:null,srcDoc:s,srcLang:null,srcSet:a,start:h,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|l,width:a,wmode:a,wrap:null,about:a,datatype:a,inlist:a,prefix:a,property:a,resource:a,"typeof":a,vocab:a,autoCapitalize:null,autoCorrect:null,autoSave:null,color:null,itemProp:a,itemScope:a|u,itemType:a,itemID:a,itemRef:a,results:null,security:a,unselectable:a},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=f},function(t,e,i){"use strict";var n=i(198),r=i(475),o=i(481),a=i(10),s=i(501),u={};a(u,o),a(u,{findDOMNode:s("findDOMNode","ReactDOM","react-dom",n,n.findDOMNode),render:s("render","ReactDOM","react-dom",n,n.render),unmountComponentAtNode:s("unmountComponentAtNode","ReactDOM","react-dom",n,n.unmountComponentAtNode),renderToString:s("renderToString","ReactDOMServer","react-dom/server",r,r.renderToString),renderToStaticMarkup:s("renderToStaticMarkup","ReactDOMServer","react-dom/server",r,r.renderToStaticMarkup)}),u.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n,u.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,t.exports=u},function(t,e,i){"use strict";var n=(i(49),i(124)),r=(i(12),"_getDOMNodeDidWarn"),o={getDOMNode:function(){return this.constructor[r]=!0,n(this)}};t.exports=o},function(t,e,i){"use strict";function n(t,e,i){var n=void 0===t[i];null!=e&&n&&(t[i]=o(e,null))}var r=i(30),o=i(129),a=i(91),s=i(92),u=(i(12),{instantiateChildren:function(t,e,i){if(null==t)return null;var r={};return s(t,n,r),r},updateChildren:function(t,e,i,n){if(!e&&!t)return null;var s;for(s in e)if(e.hasOwnProperty(s)){var u=t&&t[s],l=u&&u._currentElement,h=e[s];if(null!=u&&a(l,h))r.receiveComponent(u,h,i,n),e[s]=u;else{u&&r.unmountComponent(u,s);var c=o(h,null);e[s]=c}}for(s in t)!t.hasOwnProperty(s)||e&&e.hasOwnProperty(s)||r.unmountComponent(t[s]);return e},unmountChildren:function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];r.unmountComponent(i)}}});t.exports=u},function(t,e,i){"use strict";var n=i(507),r={shouldComponentUpdate:function(t,e){return n(this,t,e)}};t.exports=r},function(t,e){"use strict";var i={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},n={getNativeProps:function(t,e,n){if(!e.disabled)return e;var r={};for(var o in e)e.hasOwnProperty(o)&&!i[o]&&(r[o]=e[o]);return r}};t.exports=n},function(t,e,i){"use strict";function n(){return this}function r(){var t=this._reactInternalComponent;return!!t}function o(){}function a(t,e){var i=this._reactInternalComponent;i&&(N.enqueueSetPropsInternal(i,t),e&&N.enqueueCallbackInternal(i,e))}function s(t,e){var i=this._reactInternalComponent;i&&(N.enqueueReplacePropsInternal(i,t),e&&N.enqueueCallbackInternal(i,e))}function u(t,e){e&&(null!=e.dangerouslySetInnerHTML&&(null!=e.children?I(!1):void 0,"object"==typeof e.dangerouslySetInnerHTML&&X in e.dangerouslySetInnerHTML?void 0:I(!1)),null!=e.style&&"object"!=typeof e.style?I(!1):void 0)}function l(t,e,i,n){var r=A.findReactContainerForID(t);if(r){var o=r.nodeType===q?r.ownerDocument:r;U(e,o)}n.getReactMountReady().enqueue(h,{id:t,registrationName:e,listener:i})}function h(){var t=this;w.putListener(t.id,t.registrationName,t.listener)}function c(){var t=this;t._rootNodeID?void 0:I(!1);var e=A.getNode(t._rootNodeID);switch(e?void 0:I(!1),t._tag){case"iframe":t._wrapperState.listeners=[w.trapBubbledEvent(_.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var i in Y)Y.hasOwnProperty(i)&&t._wrapperState.listeners.push(w.trapBubbledEvent(_.topLevelTypes[i],Y[i],e));break;case"img":t._wrapperState.listeners=[w.trapBubbledEvent(_.topLevelTypes.topError,"error",e),w.trapBubbledEvent(_.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[w.trapBubbledEvent(_.topLevelTypes.topReset,"reset",e),w.trapBubbledEvent(_.topLevelTypes.topSubmit,"submit",e)]}}function p(){C.mountReadyWrapper(this)}function d(){T.postUpdateWrapper(this)}function f(t){$.call(Q,t)||(J.test(t)?void 0:I(!1),Q[t]=!0)}function m(t,e){return t.indexOf("-")>=0||null!=e.is}function y(t){f(t),this._tag=t.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var v=i(454),g=i(456),b=i(47),x=i(115),_=i(36),w=i(84),M=i(117),S=i(469),C=i(472),E=i(473),T=i(200),P=i(476),A=i(17),k=i(208),O=i(23),N=i(68),D=i(10),L=i(88),R=i(89),I=i(9),z=(i(130),i(40)),j=i(90),V=i(131),B=(i(133),i(132),i(12),w.deleteListener),U=w.listenTo,F=w.registrationNameModules,G={string:!0,number:!0},H=z({children:null}),W=z({style:null}),X=z({__html:null}),q=1,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},K={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Z={listing:!0,pre:!0,textarea:!0},J=(D({menuitem:!0},K),/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/),Q={},$={}.hasOwnProperty;y.displayName="ReactDOMComponent",y.Mixin={construct:function(t){this._currentElement=t},mountComponent:function(t,e,i){this._rootNodeID=t;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"button":n=S.getNativeProps(this,n,i);break;case"input":C.mountWrapper(this,n,i),n=C.getNativeProps(this,n,i);break;case"option":E.mountWrapper(this,n,i),n=E.getNativeProps(this,n,i);break;case"select":T.mountWrapper(this,n,i),n=T.getNativeProps(this,n,i),i=T.processChildContext(this,n,i);break;case"textarea":P.mountWrapper(this,n,i),n=P.getNativeProps(this,n,i)}u(this,n);var r;if(e.useCreateElement){var o=i[A.ownerDocumentContextKey],a=o.createElement(this._currentElement.type);x.setAttributeForID(a,this._rootNodeID),A.getID(a),this._updateDOMProperties({},n,e,a),this._createInitialChildren(e,n,i,a),r=a}else{var s=this._createOpenTagMarkupAndPutListeners(e,n),l=this._createContentMarkup(e,n,i);r=!l&&K[this._tag]?s+"/>":s+">"+l+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(p,this);case"button":case"select":case"textarea":n.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this)}return r},_createOpenTagMarkupAndPutListeners:function(t,e){var i="<"+this._currentElement.type;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(null!=r)if(F.hasOwnProperty(n))r&&l(this._rootNodeID,n,r,t);else{n===W&&(r&&(r=this._previousStyleCopy=D({},e.style)),r=g.createMarkupForStyles(r));var o=null;null!=this._tag&&m(this._tag,e)?n!==H&&(o=x.createMarkupForCustomAttribute(n,r)):o=x.createMarkupForProperty(n,r),o&&(i+=" "+o)}}if(t.renderToStaticMarkup)return i;var a=x.createMarkupForID(this._rootNodeID);return i+" "+a},_createContentMarkup:function(t,e,i){var n="",r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(n=r.__html);else{var o=G[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)n=R(o);else if(null!=a){var s=this.mountChildren(a,t,i);n=s.join("")}}return Z[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(t,e,i,n){var r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&j(n,r.__html);else{var o=G[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)V(n,o);else if(null!=a)for(var s=this.mountChildren(a,t,i),u=0;u<s.length;u++)n.appendChild(s[u])}},receiveComponent:function(t,e,i){var n=this._currentElement;this._currentElement=t,this.updateComponent(e,n,t,i)},updateComponent:function(t,e,i,n){var r=e.props,o=this._currentElement.props;switch(this._tag){case"button":r=S.getNativeProps(this,r),o=S.getNativeProps(this,o);break;case"input":C.updateWrapper(this),r=C.getNativeProps(this,r),o=C.getNativeProps(this,o);break;case"option":r=E.getNativeProps(this,r),o=E.getNativeProps(this,o);break;case"select":r=T.getNativeProps(this,r),o=T.getNativeProps(this,o);break;case"textarea":P.updateWrapper(this),r=P.getNativeProps(this,r),o=P.getNativeProps(this,o)}u(this,o),this._updateDOMProperties(r,o,t,null),this._updateDOMChildren(r,o,t,n),!L&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&t.getReactMountReady().enqueue(d,this)},_updateDOMProperties:function(t,e,i,n){var r,o,a;for(r in t)if(!e.hasOwnProperty(r)&&t.hasOwnProperty(r))if(r===W){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(a=a||{},a[o]="");this._previousStyleCopy=null}else F.hasOwnProperty(r)?t[r]&&B(this._rootNodeID,r):(b.properties[r]||b.isCustomAttribute(r))&&(n||(n=A.getNode(this._rootNodeID)),x.deleteValueForProperty(n,r));for(r in e){var u=e[r],h=r===W?this._previousStyleCopy:t[r];if(e.hasOwnProperty(r)&&u!==h)if(r===W)if(u?u=this._previousStyleCopy=D({},u):this._previousStyleCopy=null,h){for(o in h)!h.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(a=a||{},a[o]="");for(o in u)u.hasOwnProperty(o)&&h[o]!==u[o]&&(a=a||{},a[o]=u[o])}else a=u;else F.hasOwnProperty(r)?u?l(this._rootNodeID,r,u,i):h&&B(this._rootNodeID,r):m(this._tag,e)?(n||(n=A.getNode(this._rootNodeID)),r===H&&(u=null),x.setValueForAttribute(n,r,u)):(b.properties[r]||b.isCustomAttribute(r))&&(n||(n=A.getNode(this._rootNodeID)),null!=u?x.setValueForProperty(n,r,u):x.deleteValueForProperty(n,r))}a&&(n||(n=A.getNode(this._rootNodeID)),g.setValueForStyles(n,a))},_updateDOMChildren:function(t,e,i,n){var r=G[typeof t.children]?t.children:null,o=G[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=null!=r?null:t.children,l=null!=o?null:e.children,h=null!=r||null!=a,c=null!=o||null!=s;null!=u&&null==l?this.updateChildren(null,i,n):h&&!c&&this.updateTextContent(""),null!=o?r!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,i,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var t=this._wrapperState.listeners;if(t)for(var e=0;e<t.length;e++)t[e].remove();break;case"input":C.unmountWrapper(this);break;case"html":case"head":case"body":I(!1)}if(this.unmountChildren(),w.deleteAllListeners(this._rootNodeID),M.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var i=this._nodeWithLegacyProperties;i._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var t=A.getNode(this._rootNodeID);t._reactInternalComponent=this,t.getDOMNode=n,t.isMounted=r,t.setState=o,t.replaceState=o,t.forceUpdate=o,t.setProps=a,t.replaceProps=s,t.props=this._currentElement.props,this._nodeWithLegacyProperties=t}return this._nodeWithLegacyProperties}},O.measureMethods(y,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),D(y.prototype,y.Mixin,k.Mixin),t.exports=y},function(t,e,i){"use strict";function n(t){return r.createFactory(t)}var r=i(16),o=(i(203),i(517)),a=o({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",
h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},n);t.exports=a},function(t,e,i){"use strict";function n(){this._rootNodeID&&p.updateWrapper(this)}function r(t){var e=this._currentElement.props,i=a.executeOnChange(e,t);u.asap(n,this);var r=e.name;if("radio"===e.type&&null!=r){for(var o=s.getNode(this._rootNodeID),l=o;l.parentNode;)l=l.parentNode;for(var p=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),d=0;d<p.length;d++){var f=p[d];if(f!==o&&f.form===o.form){var m=s.getID(f);m?void 0:h(!1);var y=c[m];y?void 0:h(!1),u.asap(n,y)}}}return i}var o=i(119),a=i(116),s=i(17),u=i(18),l=i(10),h=i(9),c={},p={getNativeProps:function(t,e,i){var n=a.getValue(e),r=a.getChecked(e),o=l({},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return o},mountWrapper:function(t,e){var i=e.defaultValue;t._wrapperState={initialChecked:e.defaultChecked||!1,initialValue:null!=i?i:null,onChange:r.bind(t)}},mountReadyWrapper:function(t){c[t._rootNodeID]=t},unmountWrapper:function(t){delete c[t._rootNodeID]},updateWrapper:function(t){var e=t._currentElement.props,i=e.checked;null!=i&&o.updatePropertyByID(t._rootNodeID,"checked",i||!1);var n=a.getValue(e);null!=n&&o.updatePropertyByID(t._rootNodeID,"value",""+n)}};t.exports=p},function(t,e,i){"use strict";var n=i(195),r=i(200),o=i(10),a=(i(12),r.valueContextKey),s={mountWrapper:function(t,e,i){var n=i[a],r=null;if(null!=n)if(r=!1,Array.isArray(n)){for(var o=0;o<n.length;o++)if(""+n[o]==""+e.value){r=!0;break}}else r=""+n==""+e.value;t._wrapperState={selected:r}},getNativeProps:function(t,e,i){var r=o({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(r.selected=t._wrapperState.selected);var a="";return n.forEach(e.children,function(t){null!=t&&("string"==typeof t||"number"==typeof t)&&(a+=t)}),r.children=a,r}};t.exports=s},function(t,e,i){"use strict";function n(t,e,i,n){return t===i&&e===n}function r(t){var e=document.selection,i=e.createRange(),n=i.text.length,r=i.duplicate();r.moveToElementText(t),r.setEndPoint("EndToStart",i);var o=r.text.length,a=o+n;return{start:o,end:a}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var i=e.anchorNode,r=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(u){return null}var l=n(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),h=l?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(t),c.setEnd(s.startContainer,s.startOffset);var p=n(c.startContainer,c.startOffset,c.endContainer,c.endOffset),d=p?0:c.toString().length,f=d+h,m=document.createRange();m.setStart(i,r),m.setEnd(o,a);var y=m.collapsed;return{start:y?f:d,end:y?d:f}}function a(t,e){var i,n,r=document.selection.createRange().duplicate();"undefined"==typeof e.end?(i=e.start,n=i):e.start>e.end?(i=e.end,n=e.start):(i=e.start,n=e.end),r.moveToElementText(t),r.moveStart("character",i),r.setEndPoint("EndToStart",r),r.moveEnd("character",n-i),r.select()}function s(t,e){if(window.getSelection){var i=window.getSelection(),n=t[h()].length,r=Math.min(e.start,n),o="undefined"==typeof e.end?r:Math.min(e.end,n);if(!i.extend&&r>o){var a=o;o=r,r=a}var s=l(t,r),u=l(t,o);if(s&&u){var c=document.createRange();c.setStart(s.node,s.offset),i.removeAllRanges(),r>o?(i.addRange(c),i.extend(u.node,u.offset)):(c.setEnd(u.node,u.offset),i.addRange(c))}}}var u=i(14),l=i(503),h=i(218),c=u.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:c?r:o,setOffsets:c?a:s};t.exports=p},function(t,e,i){"use strict";var n=i(202),r=i(485),o=i(123);n.inject();var a={renderToString:r.renderToString,renderToStaticMarkup:r.renderToStaticMarkup,version:o};t.exports=a},function(t,e,i){"use strict";function n(){this._rootNodeID&&h.updateWrapper(this)}function r(t){var e=this._currentElement.props,i=o.executeOnChange(e,t);return s.asap(n,this),i}var o=i(116),a=i(119),s=i(18),u=i(10),l=i(9),h=(i(12),{getNativeProps:function(t,e,i){null!=e.dangerouslySetInnerHTML?l(!1):void 0;var n=u({},e,{defaultValue:void 0,value:void 0,children:t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,e){var i=e.defaultValue,n=e.children;null!=n&&(null!=i?l(!1):void 0,Array.isArray(n)&&(n.length<=1?void 0:l(!1),n=n[0]),i=""+n),null==i&&(i="");var a=o.getValue(e);t._wrapperState={initialValue:""+(null!=a?a:i),onChange:r.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,i=o.getValue(e);null!=i&&a.updatePropertyByID(t._rootNodeID,"value",""+i)}});t.exports=h},function(t,e,i){"use strict";function n(t){return Math.floor(100*t)/100}function r(t,e,i){t[e]=(t[e]||0)+i}var o=i(47),a=i(478),s=i(17),u=i(23),l=i(520),h={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){h._injected||u.injection.injectMeasure(h.measure),h._allMeasurements.length=0,u.enableMeasure=!0},stop:function(){u.enableMeasure=!1},getLastMeasurements:function(){return h._allMeasurements},printExclusive:function(t){t=t||h._allMeasurements;var e=a.getExclusiveSummary(t);console.table(e.map(function(t){return{"Component class name":t.componentName,"Total inclusive time (ms)":n(t.inclusive),"Exclusive mount time (ms)":n(t.exclusive),"Exclusive render time (ms)":n(t.render),"Mount time per instance (ms)":n(t.exclusive/t.count),"Render time per instance (ms)":n(t.render/t.count),Instances:t.count}}))},printInclusive:function(t){t=t||h._allMeasurements;var e=a.getInclusiveSummary(t);console.table(e.map(function(t){return{"Owner > component":t.componentName,"Inclusive time (ms)":n(t.time),Instances:t.count}})),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(t){var e=a.getInclusiveSummary(t,!0);return e.map(function(t){return{"Owner > component":t.componentName,"Wasted time (ms)":t.time,Instances:t.count}})},printWasted:function(t){t=t||h._allMeasurements,console.table(h.getMeasurementsSummaryMap(t)),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},printDOM:function(t){t=t||h._allMeasurements;var e=a.getDOMSummary(t);console.table(e.map(function(t){var e={};return e[o.ID_ATTRIBUTE_NAME]=t.id,e.type=t.type,e.args=JSON.stringify(t.args),e})),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},_recordWrite:function(t,e,i,n){var r=h._allMeasurements[h._allMeasurements.length-1].writes;r[t]=r[t]||[],r[t].push({type:e,time:i,args:n})},measure:function(t,e,i){return function(){for(var n=arguments.length,o=Array(n),a=0;n>a;a++)o[a]=arguments[a];var u,c,p;if("_renderNewRootComponent"===e||"flushBatchedUpdates"===e)return h._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0,created:{}}),p=l(),c=i.apply(this,o),h._allMeasurements[h._allMeasurements.length-1].totalTime=l()-p,c;if("_mountImageIntoNode"===e||"ReactBrowserEventEmitter"===t||"ReactDOMIDOperations"===t||"CSSPropertyOperations"===t||"DOMChildrenOperations"===t||"DOMPropertyOperations"===t){if(p=l(),c=i.apply(this,o),u=l()-p,"_mountImageIntoNode"===e){var d=s.getID(o[1]);h._recordWrite(d,e,u,o[0])}else if("dangerouslyProcessChildrenUpdates"===e)o[0].forEach(function(t){var e={};null!==t.fromIndex&&(e.fromIndex=t.fromIndex),null!==t.toIndex&&(e.toIndex=t.toIndex),null!==t.textContent&&(e.textContent=t.textContent),null!==t.markupIndex&&(e.markup=o[1][t.markupIndex]),h._recordWrite(t.parentID,t.type,u,e)});else{var f=o[0];"object"==typeof f&&(f=s.getID(o[0])),h._recordWrite(f,e,u,Array.prototype.slice.call(o,1))}return c}if("ReactCompositeComponent"!==t||"mountComponent"!==e&&"updateComponent"!==e&&"_renderValidatedComponent"!==e)return i.apply(this,o);if(this._currentElement.type===s.TopLevelWrapper)return i.apply(this,o);var m="mountComponent"===e?o[0]:this._rootNodeID,y="_renderValidatedComponent"===e,v="mountComponent"===e,g=h._mountStack,b=h._allMeasurements[h._allMeasurements.length-1];if(y?r(b.counts,m,1):v&&(b.created[m]=!0,g.push(0)),p=l(),c=i.apply(this,o),u=l()-p,y)r(b.render,m,u);else if(v){var x=g.pop();g[g.length-1]+=u,r(b.exclusive,m,u-x),r(b.inclusive,m,u)}else r(b.inclusive,m,u);return b.displayNames[m]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},c}}};t.exports=h},function(t,e,i){"use strict";function n(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];e+=n.totalTime}return e}function r(t){var e=[];return t.forEach(function(t){Object.keys(t.writes).forEach(function(i){t.writes[i].forEach(function(t){e.push({id:i,type:h[t.type]||t.type,args:t.args})})})}),e}function o(t){for(var e,i={},n=0;n<t.length;n++){var r=t[n],o=u({},r.exclusive,r.inclusive);for(var a in o)e=r.displayNames[a].current,i[e]=i[e]||{componentName:e,inclusive:0,exclusive:0,render:0,count:0},r.render[a]&&(i[e].render+=r.render[a]),r.exclusive[a]&&(i[e].exclusive+=r.exclusive[a]),r.inclusive[a]&&(i[e].inclusive+=r.inclusive[a]),r.counts[a]&&(i[e].count+=r.counts[a])}var s=[];for(e in i)i[e].exclusive>=l&&s.push(i[e]);return s.sort(function(t,e){return e.exclusive-t.exclusive}),s}function a(t,e){for(var i,n={},r=0;r<t.length;r++){var o,a=t[r],h=u({},a.exclusive,a.inclusive);e&&(o=s(a));for(var c in h)if(!e||o[c]){var p=a.displayNames[c];i=p.owner+" > "+p.current,n[i]=n[i]||{componentName:i,time:0,count:0},a.inclusive[c]&&(n[i].time+=a.inclusive[c]),a.counts[c]&&(n[i].count+=a.counts[c])}}var d=[];for(i in n)n[i].time>=l&&d.push(n[i]);return d.sort(function(t,e){return e.time-t.time}),d}function s(t){var e={},i=Object.keys(t.writes),n=u({},t.exclusive,t.inclusive);for(var r in n){for(var o=!1,a=0;a<i.length;a++)if(0===i[a].indexOf(r)){o=!0;break}t.created[r]&&(o=!0),!o&&t.counts[r]>0&&(e[r]=!0)}return e}var u=i(10),l=1.2,h={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",SET_MARKUP:"set innerHTML",TEXT_CONTENT:"set textContent",setValueForProperty:"update attribute",setValueForAttribute:"update attribute",deleteValueForProperty:"remove attribute",dangerouslyReplaceNodeWithMarkupByID:"replace"},c={getExclusiveSummary:o,getInclusiveSummary:a,getDOMSummary:r,getTotalTime:n};t.exports=c},function(t,e,i){"use strict";function n(t){r.enqueueEvents(t),r.processEventQueue(!1)}var r=i(65),o={handleTopLevel:function(t,e,i,o,a){var s=r.extractEvents(t,e,i,o,a);n(s)}};t.exports=o},function(t,e,i){"use strict";function n(t){var e=p.getID(t),i=c.getReactRootIDFromNodeID(e),n=p.findReactContainerForID(i),r=p.getFirstReactDOM(n);return r}function r(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){a(t)}function a(t){for(var e=p.getFirstReactDOM(m(t.nativeEvent))||window,i=e;i;)t.ancestors.push(i),i=n(i);for(var r=0;r<t.ancestors.length;r++){e=t.ancestors[r];var o=p.getID(e)||"";v._handleTopLevel(t.topLevelType,e,o,t.nativeEvent,m(t.nativeEvent))}}function s(t){var e=y(window);t(e)}var u=i(220),l=i(14),h=i(39),c=i(48),p=i(17),d=i(18),f=i(10),m=i(127),y=i(512);f(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),h.addPoolingTo(r,h.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(t){v._handleTopLevel=t},setEnabled:function(t){v._enabled=!!t},isEnabled:function(){return v._enabled},trapBubbledEvent:function(t,e,i){var n=i;return n?u.listen(n,e,v.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,i){var n=i;return n?u.capture(n,e,v.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=s.bind(null,t);u.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(v._enabled){var i=r.getPooled(t,e);try{d.batchedUpdates(o,i)}finally{r.release(i)}}}};t.exports=v},function(t,e,i){"use strict";var n=i(195),r=i(85),o=i(196),a=i(471),s=i(16),u=(i(203),i(7)),l=i(123),h=i(10),c=i(504),p=s.createElement,d=s.createFactory,f=s.cloneElement,m={Children:{map:n.map,forEach:n.forEach,count:n.count,toArray:n.toArray,only:c},Component:r,createElement:p,cloneElement:f,isValidElement:s.isValidElement,PropTypes:u,createClass:o.createClass,createFactory:d,createMixin:function(t){return t},DOM:a,version:l,__spread:h};t.exports=m},function(t,e,i){"use strict";var n=i(9),r={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,i){r.isValidOwner(i)?void 0:n(!1),i.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,i){r.isValidOwner(i)?void 0:n(!1),i.getPublicInstance().refs[e]===t.getPublicInstance()&&i.detachRef(e)}};t.exports=r},function(t,e,i){"use strict";function n(t,e,i){"function"==typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,i)}function r(t,e,i){"function"==typeof t?t(null):o.removeComponentAsRefFrom(e,t,i)}var o=i(482),a={};a.attachRefs=function(t,e){if(null!==e&&e!==!1){var i=e.ref;null!=i&&n(i,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var i=null===t||t===!1,n=null===e||e===!1;return i||n||e._owner!==t._owner||e.ref!==t.ref},a.detachRefs=function(t,e){if(null!==e&&e!==!1){var i=e.ref;null!=i&&r(i,t,e._owner)}},t.exports=a},function(t,e){"use strict";var i={isBatchingUpdates:!1,batchedUpdates:function(t){}};t.exports=i},function(t,e,i){"use strict";function n(t){a.isValidElement(t)?void 0:f(!1);var e;try{c.injection.injectBatchingStrategy(l);var i=s.createReactRootID();return e=h.getPooled(!1),e.perform(function(){var n=d(t,null),r=n.mountComponent(i,e,p);return u.addChecksumToMarkup(r)},null)}finally{h.release(e),c.injection.injectBatchingStrategy(o)}}function r(t){a.isValidElement(t)?void 0:f(!1);var e;try{c.injection.injectBatchingStrategy(l);var i=s.createReactRootID();return e=h.getPooled(!0),e.perform(function(){var n=d(t,null);return n.mountComponent(i,e,p)},null)}finally{h.release(e),c.injection.injectBatchingStrategy(o)}}var o=i(120),a=i(16),s=i(48),u=i(207),l=i(484),h=i(486),c=i(18),p=i(70),d=i(129),f=i(9);t.exports={renderToString:n,renderToStaticMarkup:r}},function(t,e,i){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=o.getPooled(null),this.useCreateElement=!1}var r=i(39),o=i(114),a=i(87),s=i(10),u=i(31),l={initialize:function(){this.reactMountReady.reset()},close:u},h=[l],c={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};s(n.prototype,a.Mixin,c),r.addPoolingTo(n),t.exports=n},function(t,e,i){"use strict";var n=i(47),r=n.injection.MUST_USE_ATTRIBUTE,o={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},a={Properties:{clipPath:r,cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,xlinkActuate:r,xlinkArcrole:r,xlinkHref:r,xlinkRole:r,xlinkShow:r,xlinkTitle:r,xlinkType:r,xmlBase:r,xmlLang:r,xmlSpace:r,y1:r,y2:r,y:r},DOMAttributeNamespaces:{xlinkActuate:o.xlink,xlinkArcrole:o.xlink,xlinkHref:o.xlink,xlinkRole:o.xlink,xlinkShow:o.xlink,xlinkTitle:o.xlink,xlinkType:o.xlink,xmlBase:o.xml,xmlLang:o.xml,xmlSpace:o.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};t.exports=a},function(t,e,i){"use strict";function n(t){if("selectionStart"in t&&u.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var i=document.selection.createRange();return{parentElement:i.parentElement(),text:i.text,top:i.boundingTop,left:i.boundingLeft}}}function r(t,e){if(x||null==v||v!==h())return null;var i=n(v);if(!b||!d(b,i)){b=i;var r=l.getPooled(y.select,g,t,e);return r.type="select",r.target=v,a.accumulateTwoPhaseDispatches(r),r}return null}var o=i(36),a=i(66),s=i(14),u=i(206),l=i(50),h=i(223),c=i(219),p=i(40),d=i(133),f=o.topLevelTypes,m=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,y={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[f.topBlur,f.topContextMenu,f.topFocus,f.topKeyDown,f.topMouseDown,f.topMouseUp,f.topSelectionChange]}},v=null,g=null,b=null,x=!1,_=!1,w=p({onSelect:null}),M={eventTypes:y,extractEvents:function(t,e,i,n,o){if(!_)return null;switch(t){case f.topFocus:(c(e)||"true"===e.contentEditable)&&(v=e,g=i,b=null);break;case f.topBlur:v=null,g=null,b=null;break;case f.topMouseDown:x=!0;break;case f.topContextMenu:case f.topMouseUp:return x=!1,r(n,o);case f.topSelectionChange:if(m)break;case f.topKeyDown:case f.topKeyUp:return r(n,o)}return null},didPutListener:function(t,e,i){e===w&&(_=!0)}};t.exports=M},function(t,e){"use strict";var i=Math.pow(2,53),n={createReactRootIndex:function(){return Math.ceil(Math.random()*i)}};t.exports=n},function(t,e,i){"use strict";var n=i(36),r=i(220),o=i(66),a=i(17),s=i(491),u=i(50),l=i(494),h=i(496),c=i(86),p=i(493),d=i(497),f=i(69),m=i(498),y=i(31),v=i(125),g=i(9),b=i(40),x=n.topLevelTypes,_={abort:{phasedRegistrationNames:{bubbled:b({onAbort:!0}),captured:b({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:b({onBlur:!0}),captured:b({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:b({onCanPlay:!0}),captured:b({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:b({onCanPlayThrough:!0}),captured:b({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:b({onClick:!0}),captured:b({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:b({onContextMenu:!0}),captured:b({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:b({onCopy:!0}),captured:b({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:b({onCut:!0}),captured:b({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:b({onDoubleClick:!0}),captured:b({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:b({onDrag:!0}),captured:b({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:b({onDragEnd:!0}),captured:b({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:b({onDragEnter:!0}),captured:b({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:b({onDragExit:!0}),captured:b({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:b({onDragLeave:!0}),captured:b({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:b({onDragOver:!0}),captured:b({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:b({onDragStart:!0}),captured:b({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:b({onDrop:!0}),captured:b({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:b({onDurationChange:!0}),captured:b({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:b({onEmptied:!0}),captured:b({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:b({onEncrypted:!0}),captured:b({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:b({onEnded:!0}),captured:b({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:b({onError:!0}),captured:b({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:b({onFocus:!0}),captured:b({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:b({onInput:!0}),captured:b({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:b({onKeyDown:!0}),captured:b({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:b({onKeyPress:!0}),captured:b({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:b({onKeyUp:!0}),captured:b({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:b({onLoad:!0}),captured:b({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:b({onLoadedData:!0}),captured:b({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:b({onLoadedMetadata:!0}),captured:b({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:b({onLoadStart:!0}),captured:b({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:b({onMouseDown:!0}),captured:b({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:b({onMouseMove:!0}),captured:b({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:b({onMouseOut:!0}),captured:b({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:b({onMouseOver:!0}),captured:b({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:b({onMouseUp:!0}),captured:b({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:b({onPaste:!0}),captured:b({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:b({onPause:!0}),captured:b({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:b({onPlay:!0}),captured:b({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:b({onPlaying:!0}),captured:b({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:b({onProgress:!0}),captured:b({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:b({onRateChange:!0}),captured:b({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:b({onReset:!0}),captured:b({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:b({onScroll:!0}),captured:b({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:b({onSeeked:!0}),captured:b({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:b({onSeeking:!0}),captured:b({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:b({onStalled:!0}),captured:b({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:b({onSubmit:!0}),captured:b({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:b({onSuspend:!0}),captured:b({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:b({onTimeUpdate:!0}),captured:b({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:b({onTouchCancel:!0}),captured:b({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:b({onTouchEnd:!0}),captured:b({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:b({onTouchMove:!0}),captured:b({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:b({onTouchStart:!0}),captured:b({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:b({onVolumeChange:!0}),captured:b({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:b({onWaiting:!0}),captured:b({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:b({onWheel:!0}),captured:b({onWheelCapture:!0})}}},w={topAbort:_.abort,topBlur:_.blur,topCanPlay:_.canPlay,topCanPlayThrough:_.canPlayThrough,topClick:_.click,topContextMenu:_.contextMenu,topCopy:_.copy,topCut:_.cut,topDoubleClick:_.doubleClick,topDrag:_.drag,topDragEnd:_.dragEnd,topDragEnter:_.dragEnter,topDragExit:_.dragExit,topDragLeave:_.dragLeave,topDragOver:_.dragOver,topDragStart:_.dragStart,topDrop:_.drop,topDurationChange:_.durationChange,topEmptied:_.emptied,topEncrypted:_.encrypted,topEnded:_.ended,topError:_.error,topFocus:_.focus,topInput:_.input,topKeyDown:_.keyDown,topKeyPress:_.keyPress,topKeyUp:_.keyUp,topLoad:_.load,topLoadedData:_.loadedData,topLoadedMetadata:_.loadedMetadata,topLoadStart:_.loadStart,topMouseDown:_.mouseDown,topMouseMove:_.mouseMove,topMouseOut:_.mouseOut,topMouseOver:_.mouseOver,topMouseUp:_.mouseUp,topPaste:_.paste,topPause:_.pause,topPlay:_.play,topPlaying:_.playing,topProgress:_.progress,topRateChange:_.rateChange,topReset:_.reset,topScroll:_.scroll,topSeeked:_.seeked,topSeeking:_.seeking,topStalled:_.stalled,topSubmit:_.submit,topSuspend:_.suspend,topTimeUpdate:_.timeUpdate,topTouchCancel:_.touchCancel,topTouchEnd:_.touchEnd,topTouchMove:_.touchMove,topTouchStart:_.touchStart,topVolumeChange:_.volumeChange,topWaiting:_.waiting,topWheel:_.wheel};for(var M in w)w[M].dependencies=[M];var S=b({onClick:null}),C={},E={eventTypes:_,extractEvents:function(t,e,i,n,r){var a=w[t];if(!a)return null;var y;switch(t){case x.topAbort:case x.topCanPlay:case x.topCanPlayThrough:case x.topDurationChange:case x.topEmptied:case x.topEncrypted:case x.topEnded:case x.topError:case x.topInput:case x.topLoad:case x.topLoadedData:case x.topLoadedMetadata:case x.topLoadStart:case x.topPause:case x.topPlay:case x.topPlaying:case x.topProgress:case x.topRateChange:case x.topReset:case x.topSeeked:case x.topSeeking:case x.topStalled:case x.topSubmit:case x.topSuspend:case x.topTimeUpdate:case x.topVolumeChange:case x.topWaiting:y=u;break;case x.topKeyPress:if(0===v(n))return null;case x.topKeyDown:case x.topKeyUp:y=h;break;case x.topBlur:case x.topFocus:y=l;break;case x.topClick:if(2===n.button)return null;case x.topContextMenu:case x.topDoubleClick:case x.topMouseDown:case x.topMouseMove:case x.topMouseOut:case x.topMouseOver:case x.topMouseUp:y=c;break;case x.topDrag:case x.topDragEnd:case x.topDragEnter:case x.topDragExit:case x.topDragLeave:case x.topDragOver:case x.topDragStart:case x.topDrop:y=p;break;case x.topTouchCancel:case x.topTouchEnd:case x.topTouchMove:case x.topTouchStart:y=d;break;case x.topScroll:y=f;break;case x.topWheel:y=m;break;case x.topCopy:case x.topCut:case x.topPaste:y=s}y?void 0:g(!1);var b=y.getPooled(a,i,n,r);return o.accumulateTwoPhaseDispatches(b),b},didPutListener:function(t,e,i){if(e===S){var n=a.getNode(t);C[t]||(C[t]=r.listen(n,"click",y))}},willDeleteListener:function(t,e){e===S&&(C[t].remove(),delete C[t])}};t.exports=E},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(50),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};r.augmentClass(n,o),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(50),o={data:null};r.augmentClass(n,o),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(86),o={dataTransfer:null};r.augmentClass(n,o),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(69),o={relatedTarget:null};r.augmentClass(n,o),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(50),o={data:null};r.augmentClass(n,o),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(69),o=i(125),a=i(502),s=i(126),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};r.augmentClass(n,u),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(69),o=i(126),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};r.augmentClass(n,a),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){r.call(this,t,e,i,n)}var r=i(86),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(n,o),t.exports=n},function(t,e){"use strict";function i(t){for(var e=1,i=0,r=0,o=t.length,a=-4&o;a>r;){for(;r<Math.min(r+4096,a);r+=4)i+=(e+=t.charCodeAt(r))+(e+=t.charCodeAt(r+1))+(e+=t.charCodeAt(r+2))+(e+=t.charCodeAt(r+3));e%=n,i%=n}for(;o>r;r++)i+=e+=t.charCodeAt(r);return e%=n,i%=n,e|i<<16}var n=65521;t.exports=i},function(t,e,i){"use strict";function n(t,e){var i=null==e||"boolean"==typeof e||""===e;if(i)return"";var n=isNaN(e);return n||0===e||o.hasOwnProperty(t)&&o[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}var r=i(192),o=r.isUnitlessNumber;t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n,r){return r}i(10),i(12);t.exports=n},function(t,e,i){"use strict";function n(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var i=r(t);return 13===i?"Enter":String.fromCharCode(i)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var r=i(125),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=n},function(t,e){"use strict";function i(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function r(t,e){for(var r=i(t),o=0,a=0;r;){if(3===r.nodeType){if(a=o+r.textContent.length,e>=o&&a>=e)return{node:r,offset:e-o};o=a}r=i(n(r))}}t.exports=r},function(t,e,i){"use strict";function n(t){return r.isValidElement(t)?void 0:o(!1),t}var r=i(16),o=i(9);t.exports=n},function(t,e,i){"use strict";function n(t){return'"'+r(t)+'"'}var r=i(89);t.exports=n},function(t,e,i){"use strict";var n=i(17);t.exports=n.renderSubtreeIntoContainer},function(t,e,i){"use strict";function n(t,e,i){return!r(t.props,e)||!r(t.state,i)}var r=i(133);t.exports=n},function(t,e){"use strict";function i(t){return t.replace(n,function(t,e){return e.toUpperCase();
})}var n=/-(.)/g;t.exports=i},function(t,e,i){"use strict";function n(t){return r(t.replace(o,"ms-"))}var r=i(508),o=/^-ms-/;t.exports=n},function(t,e,i){"use strict";function n(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function r(t){return n(t)?Array.isArray(t)?t.slice():o(t):[t]}var o=i(521);t.exports=r},function(t,e,i){"use strict";function n(t){var e=t.match(h);return e&&e[1].toLowerCase()}function r(t,e){var i=l;l?void 0:u(!1);var r=n(t),o=r&&s(r);if(o){i.innerHTML=o[1]+t+o[2];for(var h=o[0];h--;)i=i.lastChild}else i.innerHTML=t;var c=i.getElementsByTagName("script");c.length&&(e?void 0:u(!1),a(c).forEach(e));for(var p=a(i.childNodes);i.lastChild;)i.removeChild(i.lastChild);return p}var o=i(14),a=i(510),s=i(224),u=i(9),l=o.canUseDOM?document.createElement("div"):null,h=/^\s*<(\w+)/;t.exports=r},function(t,e){"use strict";function i(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=i},function(t,e){"use strict";function i(t){return t.replace(n,"-$1").toLowerCase()}var n=/([A-Z])/g;t.exports=i},function(t,e,i){"use strict";function n(t){return r(t).replace(o,"-ms-")}var r=i(513),o=/^ms-/;t.exports=n},function(t,e){"use strict";function i(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=i},function(t,e,i){"use strict";function n(t){return r(t)&&3==t.nodeType}var r=i(515);t.exports=n},function(t,e){"use strict";function i(t,e,i){if(!t)return null;var r={};for(var o in t)n.call(t,o)&&(r[o]=e.call(i,t[o],o,t));return r}var n=Object.prototype.hasOwnProperty;t.exports=i},function(t,e){"use strict";function i(t){var e={};return function(i){return e.hasOwnProperty(i)||(e[i]=t.call(this,i)),e[i]}}t.exports=i},function(t,e,i){"use strict";var n,r=i(14);r.canUseDOM&&(n=window.performance||window.msPerformance||window.webkitPerformance),t.exports=n||{}},function(t,e,i){"use strict";var n=i(519),r=n;r&&r.now||(r=Date);var o=r.now.bind(r);t.exports=o},function(t,e,i){"use strict";function n(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?r(!1):void 0,"number"!=typeof e?r(!1):void 0,0===e||e-1 in t?void 0:r(!1),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(i){}for(var n=Array(e),o=0;e>o;o++)n[o]=t[o];return n}var r=i(9);t.exports=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0;var l=i(8),h=n(l),c=i(581),p=n(c),d=i(226),f=i(225),m=i(524),y=n(m),v=i(578),g=n(v),b=function(t){function e(i){o(this,e);var n=a(this,t.call(this,i));return n.handleKeyDown=n.handleKeyDown.bind(n),n.handleSizeChange=n.handleSizeChange.bind(n),n}return s(e,t),e.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeyDown)},e.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeyDown)},e.prototype.matchesKey=function(t,e){var i=e.keyCode||e.which,n=String.fromCharCode(i);return t.name.toUpperCase()===n.toUpperCase()&&t.alt===e.altKey&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.shift===e.shiftKey},e.prototype.handleKeyDown=function(t){var e=(0,g["default"])(this.props.toggleVisibilityKey),i=(0,g["default"])(this.props.changePositionKey);this.matchesKey(e,t)?(t.preventDefault(),this.props.dispatch((0,f.toggleVisibility)())):this.matchesKey(i,t)&&(t.preventDefault(),this.props.dispatch((0,f.changePosition)()))},e.prototype.handleSizeChange=function(t){this.props.dispatch((0,f.changeSize)(t))},e.prototype.render=function(){var t=this.props,e=t.monitorState,i=t.children,n=t.fluid,o=r(t,["monitorState","children","fluid"]),a=e.position,s=e.isVisible,c=e.size,d=u({},o,{monitorState:e.childMonitorState});return h["default"].createElement(p["default"],{position:a,isVisible:s,size:c,fluid:n,onSizeChange:this.handleSizeChange,dimMode:"none"},(0,l.cloneElement)(i,d))},e}(l.Component);b.update=y["default"],b.propTypes={defaultPosition:l.PropTypes.oneOf(d.POSITIONS).isRequired,defaultIsVisible:l.PropTypes.bool.isRequired,defaultSize:l.PropTypes.number.isRequired,toggleVisibilityKey:l.PropTypes.string.isRequired,changePositionKey:l.PropTypes.string.isRequired,fluid:l.PropTypes.bool,children:l.PropTypes.element,dispatch:l.PropTypes.func,monitorState:l.PropTypes.shape({position:l.PropTypes.oneOf(d.POSITIONS).isRequired,size:l.PropTypes.number.isRequired,isVisible:l.PropTypes.bool.isRequired,childMonitorState:l.PropTypes.any})},b.defaultProps={defaultIsVisible:!0,defaultPosition:"right",defaultSize:.3,fluid:!0},e["default"]=b},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e["default"]=void 0;var r=i(522),o=n(r);e["default"]=o["default"]},function(t,e,i){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?t.defaultPosition:arguments[1],i=arguments[2];return i.type===u.CHANGE_POSITION?l.POSITIONS[(l.POSITIONS.indexOf(e)+1)%l.POSITIONS.length]:e}function r(t){var e=arguments.length<=1||void 0===arguments[1]?t.defaultSize:arguments[1],i=arguments[2];return i.type===u.CHANGE_SIZE?i.size:e}function o(t){var e=arguments.length<=1||void 0===arguments[1]?t.defaultIsVisible:arguments[1],i=arguments[2];return i.type===u.TOGGLE_VISIBILITY?!e:e}function a(t,e,i){var n=t.children;return n.type.update(n.props,e,i)}function s(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2];return{position:n(t,e.position,i),isVisible:o(t,e.isVisible,i),size:r(t,e.size,i),childMonitorState:a(t,e.childMonitorState,i)}}e.__esModule=!0,e["default"]=s;var u=i(225),l=i(226)},function(t,e,i){t.exports={"default":i(543),__esModule:!0}},[783,544],[784,545],[785,546],[786,547],[787,548],[789,550],[790,551],[791,534],302,[792,536],[793,528],[795,530,529],[796,531,527,542],306,function(t,e,i){t.exports=i(541)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=i(525),o=n(r);e["default"]=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,o["default"])(t)}},[798,532],function(t,e,i){i(575),i(568),t.exports=i(37).Array.from},[799,569,37],[800,19],[801,19],[802,19,570],[803,571,37],[804,572,37],[805,573,37],[806,576,574,37],317,[836,135,41],[810,19],[812,96,19],function(t,e,i){var n=i(140),r=i(41)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},[815,135],function(t,e,i){var n=i(134);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(o){var a=t["return"];throw void 0!==a&&n(a.call(t)),o}}},[837,19,142,143,139,41],[838,233,58,234,139,138,140,559,143,19,41],function(t,e,i){var n=i(41)("iterator"),r=!1;try{var o=[7][n]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],a=o[n]();a.next=function(){i=!0},o[n]=function(){return a},t(o)}catch(s){}return i}},[816,19,96],[817,19,97,231,94],[820,19,232,134,136],[839,236,137],function(t,e,i){var n=i(236),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},[840,553,41,140,37],function(t,e,i){"use strict";var n=i(136),r=i(58),o=i(97),a=i(558),s=i(556),u=i(566),l=i(567);r(r.S+r.F*!i(561)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,h,c=o(t),p="function"==typeof this?this:Array,d=arguments,f=d.length,m=f>1?d[1]:void 0,y=void 0!==m,v=0,g=l(c);if(y&&(m=n(m,f>2?d[2]:void 0,2)),void 0==g||p==Array&&s(g))for(e=u(c.length),i=new p(e);e>v;v++)i[v]=y?m(c[v],v):c[v];else for(h=g.call(c),i=new p;!(r=h.next()).done;v++)i[v]=y?a(h,m,[r.value,v],!0):r.value;return i.length=v,i}})},[826,58,563],[827,96,141],[828,97,141],[829,97,141],[830,58,564],334,[841,565,560],[831,19,95,138,230,58,234,94,235,143,237,41,562,555,554,557,134,96,142,233],function(t,e){t.exports={nomod:{escape:"",space:" "},ctrl:{" ":"\x00",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"\b",i:"	",j:"\n",k:"\x0B",m:"\f",n:"\r",l:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","[":"","\\":"","]":"","^":"",_:"",space:"\x00"}}},function(t,e,i){"use strict";function n(t){if(!/^(ctrl-|shift-|alt-|meta-){0,4}\w+$/.test(t))throw new Error('The string to parse needs to be of the format "c", "ctrl-c", "shift-ctrl-c".')}var r=i(577);t.exports=function(t){var e=t.trim().toLowerCase();n(e);var i,o={name:void 0,ctrl:!1,meta:!1,shift:!1,alt:!1,sequence:void 0},a=e.split("-");for(o.name=a.pop();i=a.pop();)o[i]=!0;return o.sequence=o.ctrl?r.ctrl[o.name]||o.name:r.nomod[o.name]||o.name,o.shift&&o.sequence&&1===o.sequence.length&&(o.sequence=o.sequence.toUpperCase()),o}},function(t,e,i){"use strict";function n(t){return m(t).reduce(function(e,i){return e[i]=(0,S["default"])(t[i]),e},{})}function r(t){return["left","top","width","height"].map(function(e){return e+" "+t/1e3+"s ease-out"})}function o(t,e){function i(t){return n?100-100*h+"%":t-h+"px"}var n=t.fluid,o=t.dockStyle,a=t.dockHiddenStyle,s=t.duration,u=t.position,l=t.isVisible,h=e.size,c=e.isResizing,p=e.fullWidth,d=e.fullHeight,m=void 0,y=n?100*h+"%":h+"px";switch(u){case"left":m={width:y,left:l?0:"-"+y};break;case"right":m={left:l?i(p):p,width:y};break;case"top":m={top:l?0:"-"+y,height:y};break;case"bottom":m={top:l?i(d):d,height:y}}var v=r(s);return[C.dock,(0,S["default"])({transition:[].concat(f(v),[!l&&"opacity 0.01s linear "+s/1e3+"s"]).filter(function(t){return t}).join(",")}),o,(0,S["default"])(m),c&&C.dockResizing,!l&&C.dockHidden,!l&&a]}function a(t,e){var i=t.dimMode,n=t.dimStyle,r=t.duration,o=t.isVisible,a=e.isTransitionStarted;return[C.dim,(0,S["default"])({transition:"opacity "+r/1e3+"s ease-out"}),n,"transparent"===i&&C.dimTransparent,!o&&C.dimHidden,a&&o&&C.dimAppear,a&&!o&&C.dimDisappear]}function s(t){var e=void 0,i=10;switch(t){case"left":e={right:-i/2,width:i,top:0,height:"100%",cursor:"col-resize"};break;case"right":e={left:-i/2,width:i,top:0,height:"100%",cursor:"col-resize"};break;case"top":e={bottom:-i/2,height:i,left:0,width:"100%",cursor:"row-resize"};break;case"bottom":e={top:-i/2,height:i,left:0,width:"100%",cursor:"row-resize"}}return[C.resizer,(0,S["default"])(e)]}function u(t,e,i){return"left"===t||"right"===t?e:i}var l=i(537)["default"],h=i(538)["default"],c=i(535)["default"],p=i(533)["default"],d=i(228)["default"],f=i(540)["default"],m=i(227)["default"],y=i(229)["default"];Object.defineProperty(e,"__esModule",{value:!0});var v=i(8),g=y(v),b=i(582),x=y(b),_=i(584),w=y(_),M=i(580),S=y(M),C=n({wrapper:{position:"fixed",width:0,height:0,top:0,left:0},dim:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:0,background:"rgba(0, 0, 0, 0.2)",opacity:1},dimAppear:{opacity:0},dimTransparent:{pointerEvents:"none"},dimHidden:{opacity:0},dock:{position:"fixed",zIndex:1,boxShadow:"0 0 4px rgba(0, 0, 0, 0.3)",background:"white",left:0,top:0,width:"100%",height:"100%"},dockHidden:{opacity:0},dockResizing:{transition:"none"},dockContent:{width:"100%",height:"100%",overflow:"auto"},resizer:{position:"absolute",zIndex:2,opacity:0}}),E=function(t){function e(t){var i=this;p(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.transitionEnd=function(){i.setState({isTransitionStarted:!1})},this.hideDim=function(){i.props.isVisible||i.setState({isDimHidden:!0})},this.handleDimClick=function(){"opaque"===i.props.dimMode&&i.props.onVisibleChange&&i.props.onVisibleChange(!1)},this.handleResize=function(){window.requestAnimationFrame?window.requestAnimationFrame(i.updateWindowSize.bind(i,!0)):i.updateWindowSize(!0)},this.updateWindowSize=function(t){var e={fullWidth:window.innerWidth,fullHeight:window.innerHeight};t?(i.setState(d({},e,{isResizing:!0,isWindowResizing:t})),i.debouncedUpdateWindowSizeEnd()):i.setState(e)},this.updateWindowSizeEnd=function(){i.setState({isResizing:!1,isWindowResizing:!1})},this.debouncedUpdateWindowSizeEnd=(0,x["default"])(this.updateWindowSizeEnd,30),this.handleWrapperLeave=function(){i.setState({isResizing:!1})},this.handleMouseDown=function(){i.setState({isResizing:!0})},this.handleMouseUp=function(){i.setState({isResizing:!1})},this.handleMouseMove=function(t){if(i.state.isResizing&&!i.state.isWindowResizing){t.preventDefault();var e=i.props,n=e.position,r=e.fluid,o=i.state,a=o.fullWidth,s=o.fullHeight,u=o.isControlled,l=t.clientX,h=t.clientY,c=void 0;switch(n){case"left":c=r?l/a:l;break;case"right":c=r?(a-l)/a:a-l;break;case"top":c=r?h/s:h;break;case"bottom":c=r?(s-h)/s:s-h}i.props.onSizeChange&&i.props.onSizeChange(c),u||i.setState({size:c})}},this.state={isControlled:"undefined"!=typeof t.size,size:t.size||t.defaultSize,isDimHidden:!t.isVisible,fullWidth:"undefined"!=typeof window&&window.innerWidth,fullHeight:"undefined"!=typeof window&&window.innerHeight,isTransitionStarted:!1,isWindowResizing:!1}}return h(e,t),c(e,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("resize",this.handleResize),window.fullWidth||this.updateWindowSize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize)}},{key:"componentWillReceiveProps",value:function(t){var e="undefined"!=typeof t.size;this.setState({isControlled:e}),e&&this.props.size!==t.size?this.setState({size:t.size}):this.props.fluid!==t.fluid&&this.updateSize(t),this.props.isVisible!==t.isVisible&&this.setState({isTransitionStarted:!0})}},{key:"updateSize",value:function(t){var e=this.state,i=e.fullWidth,n=e.fullHeight;this.setState({size:t.fluid?this.state.size/u(t.position,i,n):u(t.position,i,n)*this.state.size})}},{key:"componentDidUpdate",value:function(t){var e=this;this.props.isVisible!==t.isVisible&&(this.props.isVisible?this.setState({isDimHidden:!1}):window.setTimeout(function(){return e.hideDim()},this.props.duration),window.setTimeout(function(){return e.setState({isTransitionStarted:!1})},0))}},{key:"render",value:function(){var t=this.props,e=t.children,i=t.zIndex,n=t.dimMode,r=t.position,u=t.isVisible,l=this.state,h=l.isResizing,c=l.size,p=l.isDimHidden,d=w["default"].apply(void 0,[{}].concat(f(a(this.props,this.state)))),m=w["default"].apply(void 0,[{}].concat(f(o(this.props,this.state)))),y=w["default"].apply(void 0,[{}].concat(f(s(r))));return g["default"].createElement("div",{style:(0,w["default"])({},C.wrapper,{zIndex:i})},"none"!==n&&!p&&g["default"].createElement("div",{style:d,onClick:this.handleDimClick}),g["default"].createElement("div",{style:m},g["default"].createElement("div",{style:y,onMouseDown:this.handleMouseDown}),g["default"].createElement("div",{style:C.dockContent},"function"==typeof e?e({position:r,isResizing:h,size:c,isVisible:u}):e)))}}],[{key:"propTypes",value:{position:v.PropTypes.oneOf(["left","right","top","bottom"]),zIndex:v.PropTypes.number,fluid:v.PropTypes.bool,size:v.PropTypes.number,defaultSize:v.PropTypes.number,dimMode:v.PropTypes.oneOf(["none","transparent","opaque"]),isVisible:v.PropTypes.bool,onVisibleChange:v.PropTypes.func,onSizeChange:v.PropTypes.func,dimStyle:v.PropTypes.object,dockStyle:v.PropTypes.object,duration:v.PropTypes.number},enumerable:!0},{key:"defaultProps",value:{position:"left",zIndex:99999999,fluid:!0,defaultSize:.3,dimMode:"opaque",duration:200},enumerable:!0}]),e}(v.Component);e["default"]=E,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){return u.reduce(function(i,n){return i[n+t[0].toUpperCase()+t.substr(1)]=e,i},{})}function r(t){return a(t).reduce(function(e,i){return-1!==s.indexOf(i)?o({},e,n(i,t[i])):e},t)}var o=i(228)["default"],a=i(227)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var s=["animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","appearance","backfaceVisibility","backgroundClip","borderImage","borderImageSlice","boxSizing","boxShadow","contentColumns","transform","transformOrigin","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","perspective","perspectiveOrigin","userSelect"],u=["Moz","Webkit","ms","O"];t.exports=e["default"]},function(t,e,i){"use strict";var n=i(229)["default"];Object.defineProperty(e,"__esModule",{value:!0});var r=i(579),o=n(r);e["default"]=o["default"],t.exports=e["default"]},function(t,e,i){function n(t,e,i){function n(){v&&clearTimeout(v),d&&clearTimeout(d),b=0,d=v=g=void 0}function o(e,i){i&&clearTimeout(i),d=v=g=void 0,e&&(b=l(),f=t.apply(y,p),v||d||(p=y=void 0))}function u(){var t=e-(l()-m);0>=t||t>e?o(g,d):v=setTimeout(u,t)}function h(){o(_,v)}function c(){if(p=arguments,m=l(),y=this,g=_&&(v||!w),x===!1)var i=w&&!v;else{d||w||(b=m);var n=x-(m-b),r=0>=n||n>x;r?(d&&(d=clearTimeout(d)),b=m,f=t.apply(y,p)):d||(d=setTimeout(h,n))}return r&&v?v=clearTimeout(v):v||e===x||(v=setTimeout(u,e)),i&&(r=!0,f=t.apply(y,p)),!r||v||d||(p=y=void 0),f}var p,d,f,m,y,v,g,b=0,x=!1,_=!0;if("function"!=typeof t)throw new TypeError(a);if(e=0>e?0:+e||0,i===!0){var w=!0;_=!1}else r(i)&&(w=!!i.leading,x="maxWait"in i&&s(+i.maxWait||0,e),_="trailing"in i?!!i.trailing:_);return c.cancel=n,c}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var o=i(583),a="Expected a function",s=Math.max,u=o(Date,"now"),l=u||function(){return(new Date).getTime()};t.exports=n},342,function(t,e){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,e){for(var o,a,s=i(t),u=1;u<arguments.length;u++){o=Object(arguments[u]);for(var l in o)n.call(o,l)&&(s[l]=o[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(o);for(var h=0;h<a.length;h++)r.call(o,a[h])&&(s[a[h]]=o[a[h]])}}return s}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0;var l=i(8),h=r(l),c=i(587),p=r(c),d=i(586),f=r(d),m=i(150),y=r(m),v=i(651),g=n(v),b=i(100),x=i(238),_=i(591),w=r(_),M=b.ActionCreators.reset,S=b.ActionCreators.rollback,C=b.ActionCreators.commit,E=b.ActionCreators.sweep,T=b.ActionCreators.toggleAction,P={container:{fontFamily:"monaco, Consolas, Lucida Console, monospace",position:"relative",overflowY:"hidden",width:"100%",height:"100%",minWidth:300,direction:"ltr"},buttonBar:{textAlign:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderColor:"transparent",zIndex:1,display:"flex",flexDirection:"row"},elements:{position:"absolute",left:0,right:0,top:38,bottom:0,overflowX:"hidden",overflowY:"auto"}},A=function(t){function e(i){o(this,e);var n=a(this,t.call(this,i));return n.shouldComponentUpdate=y["default"],n.handleToggleAction=n.handleToggleAction.bind(n),n.handleReset=n.handleReset.bind(n),n.handleRollback=n.handleRollback.bind(n),n.handleSweep=n.handleSweep.bind(n),n.handleCommit=n.handleCommit.bind(n),n}return s(e,t),e.prototype.componentDidMount=function(){var t=this.refs.container;t&&(t.scrollTop=this.props.monitorState.initialScrollTop,this.interval=setInterval(this.updateScrollTop.bind(this),1e3))},e.prototype.componentWillUnmount=function(){clearInterval(this.setInterval)},e.prototype.updateScrollTop=function(){var t=this.refs.container;this.props.dispatch((0,x.updateScrollTop)(t?t.scrollTop:0))},e.prototype.componentWillReceiveProps=function(t){var e=this.refs.container;if(e)if(this.props.stagedActionIds.length<t.stagedActionIds.length){var i=e.scrollTop,n=e.offsetHeight,r=e.scrollHeight;this.scrollDown=Math.abs(r-(i+n))<20}else this.scrollDown=!1;else this.scrollDown=!0},e.prototype.componentDidUpdate=function(){var t=this.refs.container;if(t&&this.scrollDown){var e=t.offsetHeight,i=t.scrollHeight;t.scrollTop=i-e,this.scrollDown=!1}},e.prototype.handleRollback=function(){this.props.dispatch(S())},e.prototype.handleSweep=function(){this.props.dispatch(E())},e.prototype.handleCommit=function(){this.props.dispatch(C())},e.prototype.handleToggleAction=function(t){this.props.dispatch(T(t))},e.prototype.handleReset=function(){this.props.dispatch(M())},e.prototype.getTheme=function(){var t=this.props.theme;return"string"!=typeof t?t:"undefined"!=typeof g[t]?g[t]:(console.warn("DevTools theme "+t+" not found, defaulting to nicinabox"),g.nicinabox)},e.prototype.render=function(){for(var t=[],e=this.getTheme(),i=this.props,n=i.actionsById,r=i.skippedActionIds,o=i.stagedActionIds,a=i.computedStates,s=i.select,l=0;l<o.length;l++){var c=o[l],d=n[c].action,m=a[l],y=m.state,v=m.error,g=void 0;l>0&&(g=a[l-1].state),t.push(h["default"].createElement(p["default"],{key:c,theme:e,select:s,action:d,actionId:c,state:y,previousState:g,collapsed:r.indexOf(c)>-1,error:v,onActionClick:this.handleToggleAction}))}return h["default"].createElement("div",{style:u({},P.container,{backgroundColor:e.base00})},h["default"].createElement("div",{style:u({},P.buttonBar,{borderColor:e.base02})},h["default"].createElement(f["default"],{theme:e,onClick:this.handleReset,enabled:!0},"Reset"),h["default"].createElement(f["default"],{theme:e,onClick:this.handleRollback,enabled:a.length>1},"Revert"),h["default"].createElement(f["default"],{theme:e,onClick:this.handleSweep,enabled:r.length>0},"Sweep"),h["default"].createElement(f["default"],{theme:e,onClick:this.handleCommit,enabled:a.length>1},"Commit")),h["default"].createElement("div",{style:P.elements,ref:"container"},t))},e}(l.Component);A.update=w["default"],A.propTypes={dispatch:l.PropTypes.func,computedStates:l.PropTypes.array,actionsById:l.PropTypes.object,stagedActionIds:l.PropTypes.array,skippedActionIds:l.PropTypes.array,monitorState:l.PropTypes.shape({initialScrollTop:l.PropTypes.number}),preserveScrollTop:l.PropTypes.bool,select:l.PropTypes.func.isRequired,theme:l.PropTypes.oneOfType([l.PropTypes.object,l.PropTypes.string])},A.defaultProps={select:function(t){return t},theme:"nicinabox",preserveScrollTop:!0},e["default"]=A},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0;var u=i(8),l=n(u),h=i(589),c=n(h),p=i(150),d=n(p),f={base:{cursor:"pointer",fontWeight:"bold",borderRadius:3,padding:4,marginLeft:3,marginRight:3,marginTop:5,marginBottom:5,flexGrow:1,display:"inline-block",fontSize:"0.8em",color:"white",textDecoration:"none"}},m=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.shouldComponentUpdate=d["default"],n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleMouseLeave=n.handleMouseLeave.bind(n),n.handleMouseDown=n.handleMouseDown.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n.onClick=n.onClick.bind(n),n.state={hovered:!1,active:!1},n}return a(e,t),e.prototype.handleMouseEnter=function(){this.setState({hovered:!0})},e.prototype.handleMouseLeave=function(){this.setState({hovered:!1})},e.prototype.handleMouseDown=function(){this.setState({active:!0})},e.prototype.handleMouseUp=function(){this.setState({active:!1})},e.prototype.onClick=function(){this.props.enabled&&this.props.onClick&&this.props.onClick()},e.prototype.render=function(){var t=s({},f.base,{backgroundColor:this.props.theme.base02});return this.props.enabled&&this.state.hovered&&(t=s({},t,{backgroundColor:(0,c["default"])(this.props.theme.base02,.2)})),this.props.enabled||(t=s({},t,{opacity:.2,cursor:"text",backgroundColor:"transparent"})),l["default"].createElement("a",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.onClick,style:t},this.props.children)},e}(l["default"].Component);e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0;var u=i(8),l=n(u),h=i(239),c=n(h),p=i(588),d=n(p),f=i(150),m=n(f),y={entry:{display:"block",WebkitUserSelect:"none"},tree:{paddingLeft:0}},v=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.shouldComponentUpdate=m["default"],n.handleActionClick=n.handleActionClick.bind(n),n}return a(e,t),e.prototype.printState=function(t,e){var i=e;if(!i)try{return l["default"].createElement(c["default"],{theme:this.props.theme,keyName:"state",data:this.props.select(t),previousData:this.props.select(this.props.previousState),style:y.tree})}catch(n){i="Error selecting state."}return l["default"].createElement("div",{style:{color:this.props.theme.base08,paddingTop:20,paddingLeft:30,paddingRight:30,paddingBottom:35}},i)},e.prototype.handleActionClick=function(){var t=this.props,e=t.actionId,i=t.onActionClick;e>0&&i(e)},e.prototype.render=function(){var t=this.props,e=t.actionId,i=t.error,n=t.action,r=t.state,o=t.collapsed,a={opacity:o?.5:1,cursor:e>0?"pointer":"default"};return l["default"].createElement("div",{style:{textDecoration:o?"line-through":"none",color:this.props.theme.base06}},l["default"].createElement(d["default"],{theme:this.props.theme,collapsed:o,action:n,onClick:this.handleActionClick,style:s({},y.entry,a)}),!o&&l["default"].createElement("div",null,this.printState(r,i)))},e}(u.Component);v.propTypes={state:u.PropTypes.object.isRequired,action:u.PropTypes.object.isRequired,actionId:u.PropTypes.number.isRequired,select:u.PropTypes.func.isRequired,error:u.PropTypes.string,onActionClick:u.PropTypes.func.isRequired,collapsed:u.PropTypes.bool},e["default"]=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0;var l=i(8),h=n(l),c=i(239),p=n(c),d={actionBar:{paddingTop:8,paddingBottom:7,paddingLeft:16},payload:{margin:0,overflow:"auto"}},f=function(t){function e(){return o(this,e),a(this,t.apply(this,arguments))}return s(e,t),e.prototype.renderPayload=function(t){return h["default"].createElement("div",{style:u({},d.payload,{backgroundColor:this.props.theme.base00})},Object.keys(t).length>0?h["default"].createElement(p["default"],{theme:this.props.theme,keyName:"action",data:t}):"")},e.prototype.render=function(){var t=this.props.action,e=t.type,i=r(t,["type"]);return h["default"].createElement("div",{style:u({backgroundColor:this.props.theme.base02,color:this.props.theme.base06},this.props.style)},h["default"].createElement("div",{style:d.actionBar,onClick:this.props.onClick},e),this.props.collapsed?"":this.renderPayload(i))},e}(l.Component);e["default"]=f},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){var i=String(t).replace(/[^0-9a-f]/gi,"");i.length<6&&(i=i.replace(/(.)/g,"$1$1"));for(var n=e||0,r="#",o=void 0,a=0;3>a;++a)o=parseInt(i.substr(2*a,2),16),o=Math.round(Math.min(Math.max(0,o+o*n),255)).toString(16),r+=("00"+o).substr(o.length);return r}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e["default"]=void 0;var r=i(585),o=n(r);e["default"]=o["default"]},function(t,e,i){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments[2];return t.preserveScrollTop?i.type===o.UPDATE_SCROLL_TOP?i.scrollTop:e:0}function r(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2];return{initialScrollTop:n(t,e.initialScrollTop,i)}}e.__esModule=!0,e["default"]=r;var o=i(238)},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(144),d=a(p),f=i(98),m=a(f),y={base:{position:"relative",paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14},label:{margin:0,padding:0,display:"inline-block"},span:{cursor:"default"},spanType:{marginLeft:5,
marginRight:5}},v=function(t){function e(e){r(this,i),t.call(this,e),this.defaultProps={data:[],initialExpanded:!1},this.needsChildNodes=!0,this.renderedChildren=[],this.itemString=!1,this.state={expanded:this.props.initialExpanded,createdChildNodes:!1}}n(e,t),e.prototype.getChildNodes=function(){var t=this;return this.state.expanded&&this.needsChildNodes&&!function(){var e=[];t.props.data.forEach(function(i,n){var r=void 0;"undefined"!=typeof t.props.previousData&&null!==t.props.previousData&&(r=t.props.previousData[n]);var o=m["default"](n,i,r,t.props.theme,t.props.styles,t.props.getItemString);o!==!1&&e.push(o)}),t.needsChildNodes=!1,t.renderedChildren=e}(),this.renderedChildren},e.prototype.getItemString=function(t){return this.itemString||(this.itemString=this.props.data.length+" item"+(1!==this.props.data.length?"s":"")),this.props.getItemString("Array",this.props.data,t,this.itemString)},e.prototype.render=function(){var t=this.getChildNodes(),e={padding:0,margin:0,listStyle:"none",display:this.state.expanded?"block":"none"},i=void 0,n=o({},y.span,{color:this.props.theme.base0E});return i=o({},y.base),this.state.expanded&&(n=o({},n,{color:this.props.theme.base03})),u["default"].createElement("li",{style:i},u["default"].createElement(d["default"],{theme:this.props.theme,open:this.state.expanded,onClick:this.handleClick.bind(this),style:this.props.styles.getArrowStyle(this.state.expanded)}),u["default"].createElement("label",{style:o({},y.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Array",this.state.expanded)),onClick:this.handleClick.bind(this)},this.props.keyName,":"),u["default"].createElement("span",{style:o({},n,this.props.styles.getItemStringStyle("Array",this.state.expanded)),onClick:this.handleClick.bind(this)},this.getItemString(u["default"].createElement("span",{style:y.spanType},"[]"))),u["default"].createElement("ol",{style:o({},e,this.props.styles.getListStyle("Array",this.state.expanded))},t))};var i=e;return e=h["default"].decorate(c.ExpandedStateHandlerMixin)(e)||e}(u["default"].Component);e["default"]=v,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(51),d=a(p),f={base:{paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14,WebkitUserSelect:"text",MozUserSelect:"text"},label:{display:"inline-block",marginRight:5}},m=function(t){function e(){r(this,i),t.apply(this,arguments)}n(e,t),e.prototype.render=function(){var t=this.props.value?"true":"false",e="transparent";if(this.props.previousValue!==this.props.value){var i=d["default"](this.props.theme.base06);e="rgba("+i.r+", "+i.g+", "+i.b+", 0.1)"}return u["default"].createElement("li",{style:o({},f.base,{backgroundColor:e}),onClick:this.handleClick.bind(this)},u["default"].createElement("label",{style:o({},f.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Boolean",!0))},this.props.keyName,":"),u["default"].createElement("span",{style:o({color:this.props.theme.base09},this.props.styles.getValueStyle("Boolean",!0))},t))};var i=e;return e=h["default"].decorate(c.SquashClickEventMixin)(e)||e}(u["default"].Component);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(51),d=a(p),f={base:{paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14,WebkitUserSelect:"text",MozUserSelect:"text"},label:{display:"inline-block",marginRight:5}},m=function(t){function e(){r(this,i),t.apply(this,arguments)}n(e,t),e.prototype.render=function(){var t="transparent";if(this.props.previousValue!==this.props.value){var e=d["default"](this.props.theme.base06);t="rgba("+e.r+", "+e.g+", "+e.b+", 0.1)"}return u["default"].createElement("li",{style:o({},f.base,{backgroundColor:t}),onClick:this.handleClick.bind(this)},u["default"].createElement("label",{style:o({},f.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Date",!0))},this.props.keyName,":"),u["default"].createElement("span",{style:o({color:this.props.theme.base0B},this.props.styles.getValueStyle("Date",!0))},this.props.value.toISOString()))};var i=e;return e=h["default"].decorate(c.SquashClickEventMixin)(e)||e}(u["default"].Component);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(51),d=a(p),f={base:{paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14,WebkitUserSelect:"text",MozUserSelect:"text"},label:{display:"inline-block",marginRight:5}},m=function(t){function e(){r(this,i),t.apply(this,arguments)}n(e,t),e.prototype.render=function(){var t="transparent";if(this.props.previousValue!==this.props.value){var e=d["default"](this.props.theme.base06);t="rgba("+e.r+", "+e.g+", "+e.b+", 0.1)"}return u["default"].createElement("li",{style:o({},f.base,{backgroundColor:t}),onClick:this.handleClick.bind(this)},u["default"].createElement("label",{style:o({},f.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Undefined",!0))},this.props.keyName,":"),u["default"].createElement("span",{style:o({color:this.props.theme.base08},this.props.styles.getValueStyle("Undefined",!0))},this.props.value.toString()))};var i=e;return e=h["default"].decorate(c.SquashClickEventMixin)(e)||e}(u["default"].Component);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(606)["default"],s=i(607)["default"],u=i(20)["default"];e.__esModule=!0;var l=i(8),h=u(l),c=i(33),p=u(c),d=i(32),f=i(144),m=u(f),y=i(98),v=u(y),g={base:{position:"relative",paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14},label:{margin:0,padding:0,display:"inline-block"},span:{cursor:"default"},spanType:{marginLeft:5,marginRight:5}},b=function(t){function e(e){r(this,i),t.call(this,e),this.defaultProps={data:[],initialExpanded:!1},this.needsChildNodes=!0,this.renderedChildren=[],this.itemString=!1,this.state={expanded:this.props.initialExpanded,createdChildNodes:!1}}n(e,t),e.prototype.getChildNodes=function(){if(this.state.expanded&&this.needsChildNodes){for(var t=[],e=this.props.data,i=Array.isArray(e),n=0,e=i?e:a(e);;){var r;if(i){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var o=r,s=null,u=null;Array.isArray(o)?(s=o[0],u=o[1]):(s=t.length,u=o);var l=void 0;"undefined"!=typeof this.props.previousData&&null!==this.props.previousData&&(l=this.props.previousData[s]);var h=v["default"](s,u,l,this.props.theme,this.props.styles,this.props.getItemString);h!==!1&&t.push(h)}this.needsChildNodes=!1,this.renderedChildren=t}return this.renderedChildren},e.prototype.getItemString=function(t){if(!this.itemString){var e=this.props.data,i=0;if(s(e.size))i=e.size;else for(var n=e,r=Array.isArray(n),o=0,n=r?n:a(n);;){var u;if(r){if(o>=n.length)break;u=n[o++]}else{if(o=n.next(),o.done)break;u=o.value}i+=1}this.itemString=i+" entr"+(1!==i?"ies":"y")}return this.props.getItemString("Iterable",this.props.data,t,this.itemString)},e.prototype.render=function(){var t=this.getChildNodes(),e={padding:0,margin:0,listStyle:"none",display:this.state.expanded?"block":"none"},i=void 0,n=o({},g.span,{color:this.props.theme.base0E});return i=o({},g.base),this.state.expanded&&(n=o({},n,{color:this.props.theme.base03})),h["default"].createElement("li",{style:i},h["default"].createElement(m["default"],{theme:this.props.theme,open:this.state.expanded,onClick:this.handleClick.bind(this),style:this.props.styles.getArrowStyle(this.state.expanded)}),h["default"].createElement("label",{style:o({},g.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Iterable",this.state.expanded)),onClick:this.handleClick.bind(this)},this.props.keyName,":"),h["default"].createElement("span",{style:o({},n,this.props.styles.getItemStringStyle("Iterable",this.state.expanded)),onClick:this.handleClick.bind(this)},this.getItemString(h["default"].createElement("span",{style:g.spanType},"()"))),h["default"].createElement("ol",{style:o({},e,this.props.styles.getListStyle("Iterable",this.state.expanded))},t))};var i=e;return e=p["default"].decorate(d.ExpandedStateHandlerMixin)(e)||e}(h["default"].Component);e["default"]=b,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(51),d=a(p),f={base:{paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14,WebkitUserSelect:"text",MozUserSelect:"text"},label:{display:"inline-block",marginRight:5}},m=function(t){function e(){r(this,i),t.apply(this,arguments)}n(e,t),e.prototype.render=function(){var t="transparent";if(this.props.previousValue!==this.props.value){var e=d["default"](this.props.theme.base06);t="rgba("+e.r+", "+e.g+", "+e.b+", 0.1)"}return u["default"].createElement("li",{style:o({},f.base,{backgroundColor:t}),onClick:this.handleClick.bind(this)},u["default"].createElement("label",{style:o({},f.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Null",!0))},this.props.keyName,":"),u["default"].createElement("span",{style:o({color:this.props.theme.base08},this.props.styles.getValueStyle("Null",!0))},"null"))};var i=e;return e=h["default"].decorate(c.SquashClickEventMixin)(e)||e}(u["default"].Component);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(51),d=a(p),f={base:{paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14,WebkitUserSelect:"text",MozUserSelect:"text"},label:{display:"inline-block",marginRight:5}},m=function(t){function e(){r(this,i),t.apply(this,arguments)}n(e,t),e.prototype.render=function(){var t="transparent";if(this.props.previousValue!==this.props.value){var e=d["default"](this.props.theme.base06);t="rgba("+e.r+", "+e.g+", "+e.b+", 0.1)"}return u["default"].createElement("li",{style:o({},f.base,{backgroundColor:t}),onClick:this.handleClick.bind(this)},u["default"].createElement("label",{style:o({},f.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Number",!0))},this.props.keyName,":"),u["default"].createElement("span",{style:o({color:this.props.theme.base09},this.props.styles.getValueStyle("Number",!0))},this.props.value))};var i=e;return e=h["default"].decorate(c.SquashClickEventMixin)(e)||e}(u["default"].Component);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(611)["default"],s=i(20)["default"];e.__esModule=!0;var u=i(8),l=s(u),h=i(33),c=s(h),p=i(32),d=i(144),f=s(d),m=i(98),y=s(m),v={base:{position:"relative",paddingTop:3,paddingBottom:3,marginLeft:14},label:{margin:0,padding:0,display:"inline-block"},span:{cursor:"default"},spanType:{marginLeft:5,marginRight:5}},g=function(t){function e(e){r(this,i),t.call(this,e),this.defaultProps={data:[],initialExpanded:!1},this.itemString=!1,this.needsChildNodes=!0,this.renderedChildren=[],this.state={expanded:this.props.initialExpanded,createdChildNodes:!1}}n(e,t),e.prototype.getChildNodes=function(){if(this.state.expanded&&this.needsChildNodes){var t=this.props.data,e=[];for(var i in t)if(t.hasOwnProperty(i)){var n=void 0;"undefined"!=typeof this.props.previousData&&null!==this.props.previousData&&(n=this.props.previousData[i]);var r=y["default"](i,t[i],n,this.props.theme,this.props.styles,this.props.getItemString);r!==!1&&e.push(r)}this.needsChildNodes=!1,this.renderedChildren=e}return this.renderedChildren},e.prototype.getItemString=function(t){if(!this.itemString){var e=a(this.props.data).length;this.itemString=e+" key"+(1!==e?"s":"")}return this.props.getItemString("Object",this.props.data,t,this.itemString)},e.prototype.render=function(){var t={padding:0,margin:0,listStyle:"none",display:this.state.expanded?"block":"none"},e=void 0,i=o({},v.span,{color:this.props.theme.base0B});return e=o({},v.base),this.state.expanded&&(i=o({},i,{color:this.props.theme.base03})),l["default"].createElement("li",{style:e},l["default"].createElement(f["default"],{theme:this.props.theme,open:this.state.expanded,onClick:this.handleClick.bind(this),style:this.props.styles.getArrowStyle(this.state.expanded)}),l["default"].createElement("label",{style:o({},v.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Object",this.state.expanded)),onClick:this.handleClick.bind(this)},this.props.keyName,":"),l["default"].createElement("span",{style:o({},i,this.props.styles.getItemStringStyle("Object",this.state.expanded)),onClick:this.handleClick.bind(this)},this.getItemString(l["default"].createElement("span",{style:v.spanType},"{}"))),l["default"].createElement("ul",{style:o({},t,this.props.styles.getListStyle("Object",this.state.expanded))},this.getChildNodes()))};var i=e;return e=c["default"].decorate(p.ExpandedStateHandlerMixin)(e)||e}(l["default"].Component);e["default"]=g,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(51),d=a(p),f={base:{paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14,WebkitUserSelect:"text",MozUserSelect:"text"},label:{display:"inline-block",marginRight:5}},m=function(t){function e(){r(this,i),t.apply(this,arguments)}n(e,t),e.prototype.render=function(){var t="transparent";if(this.props.previousValue!==this.props.value){var e=d["default"](this.props.theme.base06);t="rgba("+e.r+", "+e.g+", "+e.b+", 0.1)"}return u["default"].createElement("li",{style:o({},f.base,{backgroundColor:t}),onClick:this.handleClick.bind(this)},u["default"].createElement("label",{style:o({},f.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("String",!0))},this.props.keyName,":"),u["default"].createElement("span",{style:o({color:this.props.theme.base0B},this.props.styles.getValueStyle("String",!0))},'"',this.props.value,'"'))};var i=e;return e=h["default"].decorate(c.SquashClickEventMixin)(e)||e}(u["default"].Component);e["default"]=m,t.exports=e["default"]},function(t,e,i){"use strict";var n=i(26)["default"],r=i(24)["default"],o=i(25)["default"],a=i(20)["default"];e.__esModule=!0;var s=i(8),u=a(s),l=i(33),h=a(l),c=i(32),p=i(51),d=a(p),f={base:{paddingTop:3,paddingBottom:3,paddingRight:0,marginLeft:14,WebkitUserSelect:"text",MozUserSelect:"text"},label:{display:"inline-block",marginRight:5}},m=function(t){function e(){r(this,i),t.apply(this,arguments)}n(e,t),e.prototype.render=function(){var t="transparent";if(this.props.previousValue!==this.props.value){var e=d["default"](this.props.theme.base06);t="rgba("+e.r+", "+e.g+", "+e.b+", 0.1)"}return u["default"].createElement("li",{style:o({},f.base,{backgroundColor:t}),onClick:this.handleClick.bind(this)},u["default"].createElement("label",{style:o({},f.label,{color:this.props.theme.base0D},this.props.styles.getLabelStyle("Undefined",!0))},this.props.keyName,":"),u["default"].createElement("span",{style:o({color:this.props.theme.base08},this.props.styles.getValueStyle("Undefined",!0))},"undefined"))};var i=e;return e=h["default"].decorate(c.SquashClickEventMixin)(e)||e}(u["default"].Component);e["default"]=m,t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={handleClick:function(t){t.stopPropagation(),this.setState({expanded:!this.state.expanded})},componentWillReceiveProps:function(){this.renderedChildren=[],this.itemString=!1,this.needsChildNodes=!0}},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={handleClick:function(t){t.stopPropagation()}},t.exports=e["default"]},function(t,e,i){"use strict";var n=i(613)["default"];e.__esModule=!0,e["default"]=function(t){return null===t||"object"!=typeof t||Array.isArray(t)||"function"!=typeof t[n]?Object.prototype.toString.call(t).slice(8,-1):"Iterable"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},t.exports=e["default"]},function(t,e,i){t.exports={"default":i(616),__esModule:!0}},function(t,e,i){t.exports={"default":i(617),__esModule:!0}},[783,618],[784,619],[785,620],[788,621],[789,622],function(t,e,i){t.exports={"default":i(623),__esModule:!0}},function(t,e,i){"use strict";var n=i(610)["default"];e["default"]=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),n(t,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t["default"]:t},e.__esModule=!0},function(t,e,i){i(250),i(249),t.exports=i(642)},function(t,e,i){i(644),t.exports=i(42).Number.isSafeInteger},[799,645,42],[800,43],[801,43],[804,646,42],[805,647,42],function(t,e,i){i(249),i(250),t.exports=i(59)("iterator")},317,function(t,e){t.exports=function(){}},[836,241,59],[809,146],function(t,e,i){var n=i(149),r=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&r(t)===t}},[837,43,246,247,148,59],function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},233,[817,43,248,244,146],[818,71,42,146],[819,148],[820,43,149,240,242],[822,147],[839,638,145],236,[823,244,145],173,[840,626,59,99,42],function(t,e,i){var n=i(240),r=i(641);t.exports=i(42).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,i){"use strict";var n=i(625),r=i(630),o=i(99),a=i(639);t.exports=i(245)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,i):"values"==e?r(0,t[i]):r(0,[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,i){var n=i(71),r=i(628),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},[826,71,632],[829,248,633],[830,71,635],function(t,e){"use strict";function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=Object.assign||function(t,e){for(var n,r,o=i(t),a=1;a<arguments.length;a++){n=arguments[a],r=Object.keys(Object(n));for(var s=0;s<r.length;s++)o[r[s]]=n[r[s]]}return o}},function(t,e){var i=function(t){return Object.prototype.toString.call(t)},n=function(t){throw t},r=t.exports=function(t,e){function n(t,e,i){e in t?t[e]=i:Object.defineProperty(t,e,{value:i,writable:!0,configurable:!0})}var o=e||{};return o.unknownFunction||(o.unknownFunction=r.ONCE),o.nonFunctionProperty||(o.nonFunctionProperty=function(t,e,n){if(void 0!==t&&void 0!==e){var r=function(t){return t&&t.constructor&&t.constructor.name?t.constructor.name:i(t).slice(8,-1)};throw new TypeError("Cannot mixin key "+n+" because it is provided by multiple sources, and the types are "+r(t)+" and "+r(e))}return void 0===t?e:t}),function(e,i){Object.keys(i).forEach(function(r){var a=e[r],s=i[r],u=t[r];if(void 0!==a||void 0!==s){var l=function(t){return"function"!=typeof t?t:function(){return t.call(this,arguments)}};if(u){var h=u(a,s,r);return void n(e,r,l(h))}var c="function"==typeof a,p="function"==typeof s;return c&&void 0===s||p&&void 0===a||c&&p?void n(e,r,l(o.unknownFunction(a,s,r))):void(e[r]=o.nonFunctionProperty(a,s,r))}})}};r._mergeObjects=function(t,e){var r=function(t,e){var r=i(t);if("[object Object]"!==r){var o=t.constructor?t.constructor.name:"Unknown",a=e.constructor?e.constructor.name:"Unknown";n("cannot merge returned value of type "+o+" with an "+a)}};if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);r(t,e),r(e,t);var o={};return Object.keys(t).forEach(function(i){Object.prototype.hasOwnProperty.call(e,i)&&n("cannot merge returns because both have the "+JSON.stringify(i)+" key"),o[i]=t[i]}),Object.keys(e).forEach(function(t){o[t]=e[t]}),o},r.ONCE=function(t,e,i){if(t&&e)throw new TypeError("Cannot mixin "+i+" because it has a unique constraint.");var n=t||e;return function(t){return n.apply(this,t)}},r.MANY=function(t,e,i){return function(i){return e&&e.apply(this,i),t?t.apply(this,i):void 0}},r.MANY_MERGED_LOOSE=function(t,e,i){return t&&e?r._mergeObjects(t,e):t||e},r.MANY_MERGED=function(t,e,i){return function(i){var n=e&&e.apply(this,i),o=t&&t.apply(this,i);return n&&o?r._mergeObjects(n,o):o||n}},r.REDUCE_LEFT=function(t,e,i){var n=t||function(t){return t},r=e||function(t){return t};return function(t){return r.call(this,n.apply(this,t))}},r.REDUCE_RIGHT=function(t,e,i){var n=t||function(t){return t},r=e||function(t){return t};return function(t){return n.call(this,r.apply(this,t))}}},function(t,e){"use strict";function i(t,e){if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(var r=Object.prototype.hasOwnProperty.bind(e),o=0;o<i.length;o++)if(!r(i[o])||t[i[o]]!==e[i[o]])return!1;return!0}e.__esModule=!0,e["default"]=i,t.exports=e["default"]},[842,675,652],function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"nicinabox",author:"nicinabox (http://github.com/nicinabox)",base00:"#2A2F3A",base01:"#3C444F",base02:"#4F5A65",base03:"#BEBEBE",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#FFFFFF",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#FC6D24",base0A:"#ddb26f",base0B:"#A1C659",base0C:"#12cfc0",base0D:"#6FB3D2",base0E:"#D381C3",base0F:"#deaf8f"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"brewer",author:"timothe poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},t.exports=e["default"]},[843,687,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,676,677,678,679,680,681,682,683,684,685,686,688,689,690],function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",
base0F:"#3300ff"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},t.exports=e["default"]},605,function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e,i,n=l.Children.only(t),s=n.props,p=n.type,f=(0,c.connect)(function(t){return t})(p),m=(0,d["default"])(function(t,e){return p.update(s,t,e)});return i=e=function(t){function e(i,n){r(this,e);var a=o(this,t.call(this,i,n));return i.store||n.store?(n.store?a.liftedStore=n.store.liftedStore:a.liftedStore=i.store.liftedStore,a.liftedStore||console.error("Redux DevTools could not render. Did you forget to include DevTools.instrument() in your store enhancer chain before using createStore()?"),a):(console.error('Redux DevTools could not render. You must pass the Redux store to <DevTools> either as a "store" prop or by wrapping it in a <Provider store={store}>.'),o(a))}return a(e,t),e.prototype.render=function(){return this.liftedStore?h["default"].createElement(f,u({},s,{store:this.liftedStore})):null},e}(l.Component),e.contextTypes={store:l.PropTypes.object},e.propTypes={store:l.PropTypes.object},e.instrument=function(){return m},i}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0,e["default"]=s;var l=i(8),h=n(l),c=i(179),p=i(251),d=n(p)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){function e(t){return o({},t,{actionsById:(0,s["default"])(t.actionsById,function(t){return o({},t,{action:n(t.action)})}),committedState:i(t.committedState),computedStates:t.computedStates.map(function(t){return o({},t,{state:i(t.state)})})})}var i=arguments.length<=1||void 0===arguments[1]?l["default"]:arguments[1],n=arguments.length<=2||void 0===arguments[2]?l["default"]:arguments[2];return t?function(i){return function(n,r){var a="redux-dev-session-"+t,s=void 0;try{var u=localStorage.getItem(a);u&&(s=e(JSON.parse(u))||r,i(n,r))}catch(l){console.warn("Could not read debug session from localStorage:",l);try{localStorage.removeItem(a)}finally{s=void 0}}var h=i(n,s);return o({},h,{dispatch:function(t){h.dispatch(t);try{localStorage.setItem(a,JSON.stringify(h.getState()))}catch(e){console.warn("Could not write debug session to localStorage:",e)}return t}})}}:function(t){return function(){return t.apply(void 0,arguments)}}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.__esModule=!0,e["default"]=r;var a=i(729),s=n(a),u=i(153),l=n(u)},function(t,e,i){var n=i(700),r=i(701),o=i(102),a=i(52),s=i(695),u=s(function(t,e){return a(t)&&o(t)?n(t,r(e,!1,!0)):[]});t.exports=u},function(t,e){function i(t){var e=t?t.length:0;return e?t[e-1]:void 0}t.exports=i},function(t,e){function i(t,e){if("function"!=typeof t)throw new TypeError(n);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,o=r(i.length-e,0),a=Array(o);++n<o;)a[n]=i[e+n];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,i[0],a);case 2:return t.call(this,i[0],i[1],a)}var s=Array(e+1);for(n=-1;++n<e;)s[n]=i[n];return s[e]=a,t.apply(this,s)}}var n="Expected a function",r=Math.max;t.exports=i},function(t,e,i){(function(e){function n(t){var e=t?t.length:0;for(this.data={hash:s(null),set:new a};e--;)this.push(t[e])}var r=i(714),o=i(101),a=o(e,"Set"),s=o(Object,"create");n.prototype.push=r,t.exports=n}).call(e,function(){return this}())},function(t,e){function i(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}t.exports=i},function(t,e){function i(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}t.exports=i},function(t,e,i){function n(t,e,i){var n=typeof t;return"function"==n?void 0===e?t:a(t,e,i):null==t?s:"object"==n?r(t):void 0===e?u(t):o(t,e)}var r=i(707),o=i(708),a=i(712),s=i(153),u=i(731);t.exports=n},function(t,e,i){function n(t,e){var i=t?t.length:0,n=[];if(!i)return n;var u=-1,l=r,h=!0,c=h&&e.length>=s?a(e):null,p=e.length;c&&(l=o,h=!1,e=c);t:for(;++u<i;){var d=t[u];if(h&&d===d){for(var f=p;f--;)if(e[f]===d)continue t;n.push(d)}else l(e,d,0)<0&&n.push(d)}return n}var r=i(704),o=i(713),a=i(716),s=200;t.exports=n},function(t,e,i){function n(t,e,i,l){l||(l=[]);for(var h=-1,c=t.length;++h<c;){var p=t[h];u(p)&&s(p)&&(i||a(p)||o(p))?e?n(p,e,i,l):r(l,p):i||(l[l.length]=p)}return l}var r=i(697),o=i(151),a=i(54),s=i(102),u=i(52);t.exports=n},function(t,e,i){var n=i(715),r=n();t.exports=r},function(t,e,i){function n(t,e){return r(t,e,o)}var r=i(702),o=i(152);t.exports=n},function(t,e,i){function n(t,e,i){if(e!==e)return r(t,i);for(var n=i-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}var r=i(723);t.exports=n},function(t,e,i){function n(t,e,i,n,p,m,y){var v=s(t),g=s(e),b=h,x=h;v||(b=f.call(t),b==l?b=c:b!=c&&(v=u(t))),g||(x=f.call(e),x==l?x=c:x!=c&&(g=u(e)));var _=b==c,w=x==c,M=b==x;if(M&&!v&&!_)return o(t,e,b);if(!p){var S=_&&d.call(t,"__wrapped__"),C=w&&d.call(e,"__wrapped__");if(S||C)return i(S?t.value():t,C?e.value():e,n,p,m,y)}if(!M)return!1;m||(m=[]),y||(y=[]);for(var E=m.length;E--;)if(m[E]==t)return y[E]==e;m.push(t),y.push(e);var T=(v?r:a)(t,e,i,n,p,m,y);return m.pop(),y.pop(),T}var r=i(718),o=i(719),a=i(720),s=i(54),u=i(727),l="[object Arguments]",h="[object Array]",c="[object Object]",p=Object.prototype,d=p.hasOwnProperty,f=p.toString;t.exports=n},function(t,e,i){function n(t,e,i){var n=e.length,a=n,s=!i;if(null==t)return!a;for(t=o(t);n--;){var u=e[n];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++n<a;){u=e[n];var l=u[0],h=t[l],c=u[1];if(s&&u[2]){if(void 0===h&&!(l in t))return!1}else{var p=i?i(h,c,l):void 0;if(!(void 0===p?r(c,h,i,!0):p))return!1}}return!0}var r=i(253),o=i(53);t.exports=n},function(t,e,i){function n(t){var e=o(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[i]===n&&(void 0!==n||i in a(t))}}return function(t){return r(t,e)}}var r=i(706),o=i(722),a=i(53);t.exports=n},function(t,e,i){function n(t,e){var i=s(t),n=u(t)&&l(e),d=t+"";return t=p(t),function(s){if(null==s)return!1;var u=d;if(s=c(s),(i||!n)&&!(u in s)){if(s=1==t.length?s:r(s,a(t,0,-1)),null==s)return!1;u=h(t),s=c(s)}return s[u]===e?void 0!==e||u in s:o(e,s[u],void 0,!0)}}var r=i(252),o=i(253),a=i(710),s=i(54),u=i(256),l=i(257),h=i(694),c=i(53),p=i(258);t.exports=n},function(t,e,i){function n(t){var e=t+"";return t=o(t),function(i){return r(i,t,e)}}var r=i(252),o=i(258);t.exports=n},function(t,e){function i(t,e,i){var n=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),i=void 0===i||i>r?r:+i||0,0>i&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=t[n+e];return o}t.exports=i},function(t,e){function i(t){return null==t?"":t+""}t.exports=i},function(t,e,i){function n(t,e,i){if("function"!=typeof t)return r;if(void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)};case 5:return function(i,n,r,o,a){return t.call(e,i,n,r,o,a)}}return function(){return t.apply(e,arguments)}}var r=i(153);t.exports=n},function(t,e,i){function n(t,e){var i=t.data,n="string"==typeof e||r(e)?i.set.has(e):i.hash[e];return n?0:-1}var r=i(44);t.exports=n},function(t,e,i){function n(t){var e=this.data;"string"==typeof t||r(t)?e.set.add(t):e.hash[t]=!0}var r=i(44);t.exports=n},function(t,e,i){function n(t){return function(e,i,n){for(var o=r(e),a=n(e),s=a.length,u=t?s:-1;t?u--:++u<s;){var l=a[u];if(i(o[l],l,o)===!1)break}return e}}var r=i(53);t.exports=n},function(t,e,i){(function(e){function n(t){return s&&a?new r(t):null}var r=i(696),o=i(101),a=o(e,"Set"),s=o(Object,"create");t.exports=n}).call(e,function(){return this}())},function(t,e,i){function n(t){return function(e,i,n){var a={};return i=r(i,n,3),o(e,function(e,n,r){var o=i(e,n,r);n=t?o:n,e=t?e:o,a[n]=e}),a}}var r=i(699),o=i(703);t.exports=n},function(t,e,i){function n(t,e,i,n,o,a,s){var u=-1,l=t.length,h=e.length;if(l!=h&&!(o&&h>l))return!1;for(;++u<l;){var c=t[u],p=e[u],d=n?n(o?p:c,o?c:p,u):void 0;if(void 0!==d){if(d)continue;return!1}if(o){if(!r(e,function(t){return c===t||i(c,t,n,o,a,s)}))return!1}else if(c!==p&&!i(c,p,n,o,a,s))return!1}return!0}var r=i(698);t.exports=n},function(t,e){function i(t,e,i){switch(i){case n:case r:return+t==+e;case o:return t.name==e.name&&t.message==e.message;case a:return t!=+t?e!=+e:t==+e;case s:case u:return t==e+""}return!1}var n="[object Boolean]",r="[object Date]",o="[object Error]",a="[object Number]",s="[object RegExp]",u="[object String]";t.exports=i},function(t,e,i){function n(t,e,i,n,o,s,u){var l=r(t),h=l.length,c=r(e),p=c.length;if(h!=p&&!o)return!1;for(var d=h;d--;){var f=l[d];if(!(o?f in e:a.call(e,f)))return!1}for(var m=o;++d<h;){f=l[d];var y=t[f],v=e[f],g=n?n(o?v:y,o?y:v,f):void 0;if(!(void 0===g?i(y,v,n,o,s,u):g))return!1;m||(m="constructor"==f)}if(!m){var b=t.constructor,x=e.constructor;if(b!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x))return!1}return!0}var r=i(152),o=Object.prototype,a=o.hasOwnProperty;t.exports=n},function(t,e,i){var n=i(254),r=n("length");t.exports=r},function(t,e,i){function n(t){for(var e=o(t),i=e.length;i--;)e[i][2]=r(e[i][1]);return e}var r=i(257),o=i(730);t.exports=n},function(t,e){function i(t,e,i){for(var n=t.length,r=e+(i?0:-1);i?r--:++r<n;){var o=t[r];if(o!==o)return r}return-1}t.exports=i},function(t,e,i){function n(t){for(var e=u(t),i=e.length,n=i&&t.length,l=!!n&&s(n)&&(o(t)||r(t)),c=-1,p=[];++c<i;){var d=e[c];(l&&a(d,n)||h.call(t,d))&&p.push(d)}return p}var r=i(151),o=i(54),a=i(255),s=i(72),u=i(728),l=Object.prototype,h=l.hasOwnProperty;t.exports=n},function(t,e,i){function n(t){return r(t)&&s.call(t)==o}var r=i(44),o="[object Function]",a=Object.prototype,s=a.toString;t.exports=n},function(t,e,i){function n(t){return null==t?!1:r(t)?h.test(u.call(t)):o(t)&&a.test(t)}var r=i(725),o=i(52),a=/^\[object .+?Constructor\]$/,s=Object.prototype,u=Function.prototype.toString,l=s.hasOwnProperty,h=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e,i){function n(t){return o(t)&&r(t.length)&&!!A[O.call(t)]}var r=i(72),o=i(52),a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",h="[object Error]",c="[object Function]",p="[object Map]",d="[object Number]",f="[object Object]",m="[object RegExp]",y="[object Set]",v="[object String]",g="[object WeakMap]",b="[object ArrayBuffer]",x="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",M="[object Int16Array]",S="[object Int32Array]",C="[object Uint8Array]",E="[object Uint8ClampedArray]",T="[object Uint16Array]",P="[object Uint32Array]",A={};A[x]=A[_]=A[w]=A[M]=A[S]=A[C]=A[E]=A[T]=A[P]=!0,A[a]=A[s]=A[b]=A[u]=A[l]=A[h]=A[c]=A[p]=A[d]=A[f]=A[m]=A[y]=A[v]=A[g]=!1;var k=Object.prototype,O=k.toString;t.exports=n},function(t,e,i){function n(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&s(e)&&(o(t)||r(t))&&e||0;for(var i=t.constructor,n=-1,l="function"==typeof i&&i.prototype===t,c=Array(e),p=e>0;++n<e;)c[n]=n+"";for(var d in t)p&&a(d,e)||"constructor"==d&&(l||!h.call(t,d))||c.push(d);return c}var r=i(151),o=i(54),a=i(255),s=i(72),u=i(44),l=Object.prototype,h=l.hasOwnProperty;t.exports=n},function(t,e,i){var n=i(717),r=n();t.exports=r},function(t,e,i){function n(t){t=o(t);for(var e=-1,i=r(t),n=i.length,a=Array(n);++e<n;){var s=i[e];a[e]=[s,t[s]]}return a}var r=i(152),o=i(53);t.exports=n},function(t,e,i){function n(t){return a(t)?r(t):o(t)}var r=i(254),o=i(709),a=i(256);t.exports=n},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t){function e(n,r){g=null;try{if(r&&!x)throw n;var o=r?t["throw"](n):t.next(n);o.done?(t._isRunning=!1,t._result=o.value,w(),b.resolve(o.value)):i(o.value).then(e,function(t){return e(t,!0)})}catch(a){t._isRunning=!1,t._error=a,w(),b.reject(a)}}function i(t){var e=void 0;return a.is.array(t)?Promise.all(t.map(i)):a.is.iterator(t)?o(t,y,v):(e=s.as.take(t))?l(e):(e=s.as.put(t))?h(e):(e=s.as.race(t))?m(e):(e=s.as.call(t))?c(e.fn,e.args):(e=s.as.cps(t))?p(e.fn,e.args):(e=s.as.fork(t))?d(e.task,e.args):(e=s.as.join(t))?f(e):Promise.resolve(t)}function l(t){return new Promise(function(e){g={resolve:e,match:(0,s.matcher)(t),pattern:t}})}function h(t){return Promise.resolve(1).then(function(){return v(t)})}function c(t,e){var i=t.apply(void 0,r(e));return a.is.iterator(i)?o(i,y,v):Promise.resolve(i)}function p(t,e){return new Promise(function(i,n){t.apply(void 0,r(e.concat(function(t,e){return a.is.undef(t)?i(e):n(t)})))})}function d(t,e){var i,s=void 0,u=void 0,l=void 0,h=a.is.func(t);h&&(s=t.apply(void 0,r(e))),a.is.iterator(s)?(u=t,l=s):l=a.is.iterator(t)?t:regeneratorRuntime.mark(function d(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h?s:t;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},d,this)})();var c=o(l,y,v),p=(i={},n(i,a.TASK,!0),n(i,"_generator",u),n(i,"_iterator",l),n(i,"_done",c),n(i,"name",h?t.name:"anonymous"),n(i,"isRunning",function(){return l._isRunning}),n(i,"result",function(){return l._result}),n(i,"error",function(){return l._error}),i);return Promise.resolve(p)}function f(t){return t._done}function m(t){return Promise.race(Object.keys(t).map(function(e){return i(t[e]).then(function(t){return n({},e,t)},function(t){return Promise.reject(n({},e,t))})}))}var y=arguments.length<=1||void 0===arguments[1]?function(){return function(){}}:arguments[1],v=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2];(0,a.check)(t,a.is.iterator,u);var g=void 0,b=void 0,x=a.is["throw"](t),_=new Promise(function(t,e){return b={resolve:t,reject:e}}),w=y(function(t){g&&g.match(t)&&g.resolve(t)});return e(),t._isRunning=!0,_}Object.defineProperty(e,"__esModule",{value:!0}),e.NOT_ITERATOR_ERROR=void 0,e["default"]=o;var a=i(154),s=i(260),u=e.NOT_ITERATOR_ERROR="proc first argument (Saga function result) must be an iterator"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(8),u=n(s),l=i(78),h=function(t){function e(i){var n=this;r(this,e),t.call(this,i),this.pauseEvent=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},this.stopPropagation=function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},this.orChildrenCount=function(t,e){var i=s.Children.count(n.props.children);switch(i){case 0:return t.length>0?t:e;case t.length:return t;case e.length:return e;default:return(t.length!==i||e.length!==i)&&console.warn(n.constructor.displayName+": Number of values does not match number of children."),n.linspace(n.props.min,n.props.max,i)}},this.componentDidMount=function(){var t=l.findDOMNode(n.refs.slider),e=l.findDOMNode(n.refs.handle),i=t.getBoundingClientRect(),r=n.sizeKey(),o=i[n.posMaxKey()],a=i[n.posMinKey()];n.setState({upperBound:t[r]-e[r],sliderLength:Math.abs(o-a),handleSize:e[r],sliderStart:n.props.handleResize?o:a})},this.getValue=function(){return n.undoEnsureArray(n.state.value)},this.calcOffset=function(t){var e=n.props.max-n.props.min===0?1:n.props.max-n.props.min,i=(t-n.props.min)/e;return i*n.state.upperBound},this.calcValue=function(t){var e=t/n.state.upperBound;return e*(n.props.max-n.props.min)+n.props.min},this.buildHandleStyle=function(t){var e;return e={position:"absolute",willChange:n.state.index>=0?n.posMinKey():"",zIndex:1,background:n.props.theme.base06,cursor:"hand",width:"25px",height:"25px",borderRadius:"50%",marginTop:"20px"},e[n.posMinKey()]=t,e},this.buildBarStyle=function(){return{position:"absolute",willChange:n.state.index>=0?n.posMinKey()+","+n.posMaxKey():"",background:n.props.theme.base06,top:"60%",height:"10%",width:"98%",left:7,cursor:"hand"}},this.getClosestIndex=function(t){for(var e=Number.MAX_VALUE,i=-1,r=n.state.value,o=r.length,a=0;o>a;a++){var s=n.calcOffset(r[a]),u=Math.abs(t-s);e>u&&(e=u,i=a)}return i},this.calcOffsetFromPosition=function(t){var e=t-n.state.sliderStart;return e-=n.state.handleSize/2},this.forceValueFromPosition=function(t,e){var i=n.calcOffsetFromPosition(t),r=n.getClosestIndex(i),o=n.trimAlignValue(n.calcValue(i)),a=n.state.value.slice();a[r]=o;for(var s=0;s<a.length-1;s+=1)if(a[s+1]-a[s]<n.props.minDistance)return;n.setState({value:a},e.bind(n,r))},this.getMousePosition=function(t){return[t["page"+n.axisKey()],t["page"+n.orthogonalAxisKey()]]},this.getTouchPosition=function(t){var e=t.touches[0];return[e["page"+n.axisKey()],e["page"+n.orthogonalAxisKey()]]},this.getMouseEventMap=function(){return{mousemove:n.onMouseMove,mouseup:n.onMouseUp}},this.getTouchEventMap=function(){return{touchmove:n.onTouchMove,touchend:n.onTouchEnd}},this.createOnMouseDown=function(t){return function(e){if(!this.props.disabled){var i=this.getMousePosition(e);this.start(t,i[0]),this.addHandlers(this.getMouseEventMap()),this.pauseEvent(e)}}.bind(n)},this.createOnTouchStart=function(t){return function(e){if(!(this.props.disabled||e.touches.length>1)){var i=this.getTouchPosition(e);this.startPosition=i,this.isScrolling=void 0,this.start(t,i[0]),this.addHandlers(this.getTouchEventMap()),this.stopPropagation(e)}}.bind(n)},this.addHandlers=function(t){for(var e in t)({}).hasOwnProperty.call(t,e)&&document.addEventListener(e,t[e],!1)},this.removeHandlers=function(t){for(var e in t)({}).hasOwnProperty.call(t,e)&&document.removeEventListener(e,t[e],!1)},this.start=function(t,e){document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),n.hasMoved=!1,n.fireChangeEvent("onBeforeChange");var i=n.state.zIndices;i.splice(i.indexOf(t),1),i.push(t),n.setState({startValue:n.state.value[t],startPosition:e,index:t,zIndices:i})},this.onMouseUp=function(){n.onEnd(n.getMouseEventMap())},this.onTouchEnd=function(){n.onEnd(n.getTouchEventMap())},this.onEnd=function(t){n.removeHandlers(t),n.setState({index:-1},n.fireChangeEvent.bind(n,"onAfterChange"))},this.onMouseMove=function(t){var e=n.getMousePosition(t);n.move(e[0])},this.onTouchMove=function(t){if(!(t.touches.length>1)){var e=n.getTouchPosition(t);if("undefined"==typeof n.isScrolling){var i=e[0]-n.startPosition[0],r=e[1]-n.startPosition[1];n.isScrolling=Math.abs(r)>Math.abs(i)}if(n.isScrolling)return void n.setState({index:-1});n.pauseEvent(t),n.move(e[0])}},this.move=function(t){n.hasMoved=!0;var e=n.props,i=e.max,r=e.min,o=n.state,a=o.index,s=o.value,u=o.startValue,l=o.sliderLength,h=o.handleSize,c=s[a],p=t-n.state.startPosition,d=p/(l-h)*(i-r),f=n.trimAlignValue(u+d);s[a]=f,f!==c&&n.setState({value:s},n.fireChangeEvent.bind(n,"onChange"))},this.pushSucceeding=function(t,e,i){var r=void 0,o=void 0;for(r=i,o=t[r]+e;null!==t[r+1]&&o>t[r+1];r++,o=t[r]+e)t[r+1]=n.alignValue(o)},this.trimSucceeding=function(t,e,i,n){for(var r=0;t>r;r++){var o=n-r*i;e[t-1-r]>o&&(e[t-1-r]=o)}},this.pushPreceding=function(t,e,i){var r=void 0,o=void 0;for(r=i,o=t[r]-e;null!==t[r-1]&&o<t[r-1];r--,o=t[r]-e)t[r-1]=n.alignValue(o)},this.trimPreceding=function(t,e,i,n){for(var r=0;t>r;r++){var o=n+r*i;e[r]<o&&(e[r]=o)}},this.axisKey=function(){var t=n.props.orientation;return"horizontal"===t?"X":"vertical"===t?"Y":void 0},this.orthogonalAxisKey=function(){return"horizontal"===n.props.orientation?"Y":"X"},this.posMinKey=function(){return"horizontal"===n.props.orientation?"left":"top"},this.posMaxKey=function(){return"horizontal"===n.props.orientation?"right":"bottom"},this.sizeKey=function(){return"horizontal"===n.props.orientation?"clientWidth":"clientHeight"},this.trimAlignValue=function(t,e){return n.alignValue(n.trimValue(t,e),e)},this.trimValue=function(t,e){var i=e||n.props,r=t;return t<=i.min&&(r=i.min),t>=i.max&&(r=i.max),r},this.alignValue=function(t,e){var i=e||n.props,r=(t-i.min)%i.step,o=t-r;return 2*Math.abs(r)>=i.step&&(o+=r>0?i.step:-i.step),parseFloat(o.toFixed(5))},this.renderHandle=function(t){var e=n.calcOffset(n.props.value);return u["default"].createElement("div",{ref:"handle",key:"handle",style:n.buildHandleStyle(e),onMouseDown:n.createOnMouseDown(0),onTouchStart:n.createOnTouchStart(0)},t)},this.renderBar=function(){return u["default"].createElement("div",{key:"bar",ref:"bar",style:n.buildBarStyle()})},this.onSliderMouseDown=function(t){n.props.disabled||(n.hasMoved=!1,n.props.snapDragDisabled||!function(){var e=n.getMousePosition(t);n.forceValueFromPosition(e[0],function(t){this.fireChangeEvent("onChange"),this.start(t,e[0]),this.addHandlers(this.getMouseEventMap())}.bind(n))}(),n.pauseEvent(t))},this.onSliderClick=function(t){if(!n.props.disabled&&n.props.onSliderClick&&!n.hasMoved){var e=n.getMousePosition(t),i=n.trimAlignValue(n.calcValue(n.calcOffsetFromPosition(e[0])));n.props.onSliderClick(i)}},this.fireChangeEvent=function(t){n.props[t]&&n.props[t](n.undoEnsureArray(n.state.value))},this.renderValue=function(){var t=n.props,e=t.value,i=t.min,r=t.max,o={position:"absolute",left:n.calcOffset(e)+6,color:n.props.theme.base06};return e!==i&&e!==r?u["default"].createElement("small",{style:o},e):u["default"].createElement("small",null)};var o=this.orChildrenCount(this.ensureArray(this.props.value),this.ensureArray(this.props.defaultValue));this.tempArray=o.slice();for(var a=[],h=0;h<o.length;h++)o[h]=this.trimAlignValue(o[h],this.props),a.push(h);this.state={index:-1,upperBound:0,sliderLength:0,value:o,zIndices:a}}return o(e,t),e.prototype.linspace=function(t,e,i){for(var n=(e-t)/(i-1),r=[],o=0;i>o;o++)r.push(t+n*o);return r},e.prototype.ensureArray=function(t){return null===t?[]:Array.isArray(t)?t:[t]},e.prototype.undoEnsureArray=function(t){return null!==t&&1===t.length?t[0]:t},e.prototype.render=function(){var t=this.renderBar(),e=this.renderHandle(null),i=this.renderValue();return u["default"].createElement("div",null,u["default"].createElement("div",{ref:"slider",style:{position:"relative",width:"100%",height:"50px",marginBottom:"12px"},onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},t,e),u["default"].createElement("div",{style:{position:"relative",bottom:10}},u["default"].createElement("small",{style:{left:7,position:"absolute",color:this.props.theme.base06}},this.props.min),i,u["default"].createElement("small",{style:{right:5,position:"absolute",color:this.props.theme.base06}},this.props.max)))},a(e,null,[{key:"propTypes",value:{min:s.PropTypes.number,max:s.PropTypes.number,step:s.PropTypes.number,minDistance:s.PropTypes.number,defaultValue:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.arrayOf(s.PropTypes.number)]),value:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.arrayOf(s.PropTypes.number)]),orientation:s.PropTypes.oneOf(["horizontal","vertical"]),disabled:s.PropTypes.bool,snapDragDisabled:s.PropTypes.bool,onBeforeChange:s.PropTypes.func,onChange:s.PropTypes.func,onAfterChange:s.PropTypes.func,onSliderClick:s.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{min:0,max:100,step:1,minDistance:0,defaultValue:0,orientation:"horizontal",disabled:!1,snapDragDisabled:!1},enumerable:!0}]),e}(s.Component);e["default"]=h,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(8),l=r(u),h=i(78),c=i(736),p=n(c),d=i(100),f=i(735),m=r(f),y=i(733),v=r(y),g=d.ActionCreators.reset,b=d.ActionCreators.jumpToState,x=function(t){function e(i){var n=this;o(this,e),t.call(this,i),this.handleReset=function(){n.props.dispatch(g())},this.handleKeyPress=function(t){if(t.ctrlKey&&74===t.keyCode){if(t.preventDefault(),n.state.timer)return n.pauseReplay();"Live"===n.state.replaySpeed?n.startRealtimeReplay():n.startReplay()}else t.ctrlKey&&219===t.keyCode?(t.preventDefault(),n.stepLeft()):t.ctrlKey&&221===t.keyCode&&(t.preventDefault(),n.stepRight())},this.handleSliderChange=function(t){n.state.timer&&n.pauseReplay(),n.props.dispatch(b(t))},this.startReplay=function(){var t=n.props,e=t.computedStates,i=t.currentStateIndex,r=t.dispatch;if(!(e.length<2)){var o="1x"===n.state.replaySpeed?500:200,a=void 0;if(i===e.length-1)r(b(0)),a=0;else{if(i===e.length-2)return void r(b(i+1));a=i+1,r(b(i+1))}var s=a,u=setInterval(function(){return s+1<=e.length-1&&r(b(s+1)),s++,s>=e.length-1?(clearInterval(n.state.timer),
n.setState({timer:void 0})):void 0},o);n.setState({timer:u})}},this.startRealtimeReplay=function(){n.props.computedStates.length<2||(n.props.currentStateIndex===n.props.computedStates.length-1?(n.props.dispatch(b(0)),n.loop(0)):n.loop(n.props.currentStateIndex))},this.loop=function(t){var e=Date.now(),i=n.getLatestTimestampDiff(t),r=function o(){var t=Date.now()-e;if(t>=i){if(n.props.dispatch(b(n.props.currentStateIndex+1)),n.props.currentStateIndex>=n.props.computedStates.length-1)return n.pauseReplay();i=n.getLatestTimestampDiff(n.props.currentStateIndex),e=Date.now(),n.setState({timer:requestAnimationFrame(o)})}else n.setState({timer:requestAnimationFrame(o)})};t!==n.props.computedStates.length-1&&n.setState({timer:requestAnimationFrame(r)})},this.getLatestTimestampDiff=function(t){return n.getTimestampOfStateIndex(t+1)-n.getTimestampOfStateIndex(t)},this.getTimestampOfStateIndex=function(t){var e=n.props.stagedActionIds[t];return n.props.actionsById[e].timestamp},this.pauseReplay=function(t){n.state.timer&&(cancelAnimationFrame(n.state.timer),clearInterval(n.state.timer),n.setState({timer:void 0},function(){"function"==typeof t&&t()}))},this.stepLeft=function(){n.pauseReplay(),0!==n.props.currentStateIndex&&n.props.dispatch(b(n.props.currentStateIndex-1))},this.stepRight=function(){n.pauseReplay(),n.props.currentStateIndex!==n.props.computedStates.length-1&&n.props.dispatch(b(n.props.currentStateIndex+1))},this.changeReplaySpeed=function(){var t=void 0;switch(n.state.replaySpeed){case"1x":t="2x";break;case"2x":t="Live";break;default:t="1x"}n.setState({replaySpeed:t}),n.state.timer&&n.pauseReplay(function(){"Live"===t?n.startRealtimeReplay():n.startReplay()})},this.containerStyle=function(t){return{fontFamily:"monospace",position:"relative",padding:"1.1rem",display:"flex",justifyContent:"space-around",alignItems:"center",background:t.base00,WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none"}},this.renderPauseButton=function(t){return l["default"].createElement("a",{onClick:n.pauseReplay,style:{paddingBottom:50}},l["default"].createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",fit:!0,style:n.iconStyle(t)},l["default"].createElement("g",null,l["default"].createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}))))},this.renderStepLeftButton=function(t){return l["default"].createElement("a",{onClick:n.stepLeft,style:{paddingBottom:50}},l["default"].createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",fit:!0,style:n.iconStyle(t)},l["default"].createElement("g",null,l["default"].createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59-1.41-1.41-6 6 6 6z"}))))},this.renderStepRightButton=function(t){return l["default"].createElement("a",{onClick:n.stepRight,style:{paddingBottom:50}},l["default"].createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",fit:!0,style:n.iconStyle(t)},l["default"].createElement("g",null,l["default"].createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59 1.41-1.41 6 6-6 6z"}))))},this.renderPlaybackSpeedButton=function(t){var e={cursor:"hand",color:t.base06,fontSize:"Live"===n.state.replaySpeed?"1.1em":"1.8em",paddingBottom:50};return l["default"].createElement("div",{style:e,onClick:n.changeReplaySpeed},n.state.replaySpeed)},this.setUpTheme=function(){var t=void 0;return t="string"==typeof n.props.theme?"undefined"!=typeof p[n.props.theme]?p[n.props.theme]:p.nicinabox:n.props.theme},"undefined"!=typeof window&&window.addEventListener("keydown",this.handleKeyPress),this.state={timer:void 0,replaySpeed:"1x"}}return a(e,t),s(e,null,[{key:"update",value:m["default"],enumerable:!0}]),e.prototype.componentWillReceiveProps=function(t){var e=h.findDOMNode(this);if(e)if(this.props.stagedActionIds.length<t.stagedActionIds.length){var i=e.scrollTop,n=e.offsetHeight,r=e.scrollHeight;this.scrollDown=Math.abs(r-(i+n))<20}else this.scrollDown=!1;else this.scrollDown=!0},e.prototype.componentDidUpdate=function(){var t=h.findDOMNode(this);if(t&&this.scrollDown){var e=t.offsetHeight,i=t.scrollHeight;t.scrollTop=i-e,this.scrollDown=!1}},e.prototype.iconStyle=function(t){return{cursor:"hand",fill:t.base06,width:"2.3rem",height:"2.3rem"}},e.prototype.renderPlayButton=function(t){var e="Live"===this.state.replaySpeed?this.startRealtimeReplay:this.startReplay;return l["default"].createElement("a",{onClick:e,style:{paddingBottom:50}},l["default"].createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",fit:!0,style:this.iconStyle(t)},l["default"].createElement("g",null,l["default"].createElement("path",{d:"M8 5v14l11-7z"}))))},e.prototype.render=function(){var t=this.props,e=t.currentStateIndex,i=t.computedStates,n=this.setUpTheme();return l["default"].createElement("div",{style:this.containerStyle(n)},this.state.timer?this.renderPauseButton(n):this.renderPlayButton(n),l["default"].createElement("div",{style:{width:"80%",height:"100%"}},l["default"].createElement(v["default"],{min:0,max:i.length-1,value:e,onChange:this.handleSliderChange,theme:n})),this.renderStepLeftButton(n),this.renderStepRightButton(n),this.renderPlaybackSpeedButton(n),l["default"].createElement("a",{onClick:this.handleReset,style:{textDecoration:"underline",cursor:"hand",color:n.base06,paddingBottom:50}},l["default"].createElement("small",null,"Reset")))},s(e,null,[{key:"propTypes",value:{dispatch:u.PropTypes.func,computedStates:u.PropTypes.array,actionsById:u.PropTypes.object,currentStateIndex:u.PropTypes.number,monitorState:u.PropTypes.shape({initialScrollTop:u.PropTypes.number}),preserveScrollTop:u.PropTypes.bool,stagedActions:u.PropTypes.array,select:u.PropTypes.func.isRequired,theme:u.PropTypes.oneOfType([u.PropTypes.object,u.PropTypes.string])},enumerable:!0},{key:"defaultProps",value:{select:function(t){return t},theme:"nicinabox",preserveScrollTop:!0},enumerable:!0}]),e}(u.Component);e["default"]=x,t.exports=e["default"]},function(t,e){"use strict";function i(){return{}}e.__esModule=!0,e["default"]=i,t.exports=e["default"]},[842,760,737],652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,[843,772,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,761,762,763,764,765,766,767,768,769,770,771,773,774,775],676,677,678,679,680,681,682,683,684,605,686,687,688,689,690,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];return function(t){return function(i,n){var r=t(i,n),a=r.dispatch,u=[],l={getState:r.getState,dispatch:function(t){return a(t)}};return u=e.map(function(t){return t(l)}),a=s["default"].apply(void 0,u)(r.dispatch),o({},r,{dispatch:a})}}}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e["default"]=r;var a=i(262),s=n(a);t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){return function(){return e(t.apply(void 0,arguments))}}function o(t,e){if("function"==typeof t)return r(t,e);if("object"!=typeof t||null===t||void 0===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');return s["default"](t,function(t){return r(t,e)})}e.__esModule=!0,e["default"]=o;var a=i(264),s=n(a);t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var i=e&&e.type,n=i&&'"'+i.toString()+'"'||"an action";return'Reducer "'+t+'" returned undefined handling '+n+". To ignore an action, you must explicitly return the previous state."}function o(t){Object.keys(t).forEach(function(e){var i=t[e],n=i(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof n)throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var r="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof i(void 0,{type:r}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(t){var e,i=p["default"](t,function(t){return"function"==typeof t});try{o(i)}catch(n){e=n}var a=h["default"](i,function(){});return function(t,n){if(void 0===t&&(t=a),e)throw e;var o=!1,s=h["default"](i,function(e,i){var a=t[i],s=e(a,n);if("undefined"==typeof s){var u=r(i,n);throw new Error(u)}return o=o||s!==a,s});return o?s:t}}e.__esModule=!0,e["default"]=a;var s=i(261),u=i(263),l=(n(u),i(264)),h=n(l),c=i(779),p=n(c);t.exports=e["default"]},function(t,e){"use strict";function i(t,e){return Object.keys(t).reduce(function(i,n){return e(t[n])&&(i[n]=t[n]),i},{})}e.__esModule=!0,e["default"]=i,t.exports=e["default"]},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,r,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],a(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(o(i))for(s=Array.prototype.slice.call(arguments,1),l=i.slice(),r=l.length,u=0;r>u;u++)l[u].apply(this,s);return!0},i.prototype.addListener=function(t,e){var r;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,r,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],a=i.length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(s=a;s-- >0;)if(i[s]===e||i[s].listener&&i[s].listener===e){r=s;break}if(0>r)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){t.exports=function(){return new Worker(i.p+"21c9bd4e1dd8c12b85e1.worker.js")}},function(t,e,i){t.exports=function(){return new Worker(i.p+"b341ced316b5179a2c3a.worker.js")}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports={"default":i(n),__esModule:!0}},function(t,e,i,n){t.exports=i(n)},function(t,e,i,n){t.exports=i(n)},function(t,e,i,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=i(n),a=r(o);e["default"]=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,a["default"])(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=i(n),a=r(o);e["default"]=a["default"]||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}},function(t,e,i,n,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=i(n),s=o(a),u=i(r),l=o(u);e["default"]=function h(t,e,i){null===t&&(t=Function.prototype);var n=(0,l["default"])(t,e);if(void 0===n){var r=(0,s["default"])(t);return null===r?void 0:h(r,e,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)}},function(t,e,i,n,r,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var s=i(n),u=a(s),l=i(r),h=a(l),c=i(o),p=a(c);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,p["default"])(e)));t.prototype=(0,h["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(u["default"]?(0,u["default"])(t,e):t.__proto__=e)}},function(t,e,i,n){t.exports=i(n)},function(t,e,i,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return t&&"undefined"!=typeof _Symbol&&t.constructor===_Symbol?"symbol":typeof t}e.__esModule=!0;var a=i(n),s=r(a);e["default"]=function(t){return t&&"undefined"!=typeof s["default"]&&t.constructor===s["default"]?"symbol":"undefined"==typeof t?"undefined":o(t)}},function(t,e,i,n,r){i(n),t.exports=i(r).Object.assign},function(t,e,i,n){var r=i(n);t.exports=function(t,e){return r.create(t,e)}},function(t,e,i,n){var r=i(n);t.exports=function(t,e,i){return r.setDesc(t,e,i)}},function(t,e,i,n,r){var o=i(n);i(r),t.exports=function(t,e){return o.getDesc(t,e)}},function(t,e,i,n,r){i(n),t.exports=i(r).Object.getPrototypeOf},function(t,e,i,n,r){i(n),t.exports=i(r).Object.keys},function(t,e,i,n,r){i(n),t.exports=i(r).Object.setPrototypeOf},function(t,e,i,n,r,o){i(n),i(r),t.exports=i(o).Symbol},function(t,e,i,n){var r=i(n);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i,n){var r=i(n);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i,n){t.exports=!i(n)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i,n){var r=i(n);t.exports=function(t){var e=r.getKeys(t),i=r.getSymbols;if(i)for(var n,o=i(t),a=r.isEnum,s=0;o.length>s;)a.call(t,n=o[s++])&&e.push(n);return e}},function(t,e,i,n,r,o){var a=i(n),s=i(r),u=i(o),l="prototype",h=function(t,e,i){var n,r,o,c=t&h.F,p=t&h.G,d=t&h.S,f=t&h.P,m=t&h.B,y=t&h.W,v=p?s:s[e]||(s[e]={}),g=p?a:d?a[e]:(a[e]||{})[l];p&&(i=e);for(n in i)r=!c&&g&&n in g,r&&n in v||(o=r?g[n]:i[n],v[n]=p&&"function"!=typeof g[n]?i[n]:m&&r?u(o,a):y&&g[n]==o?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[l]=t[l],e}(o):f&&"function"==typeof o?u(Function.call,o):o,f&&((v[l]||(v[l]={}))[n]=o))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,t.exports=h},function(t,e,i,n,r){var o=i(n),a=i(r).getNames,s={}.toString,u="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(t){try{return a(t)}catch(e){return u.slice()}};t.exports.get=function(t){return u&&"[object Window]"==s.call(t)?l(t):a(o(t))}},function(t,e,i,n,r,o){var a=i(n),s=i(r);t.exports=i(o)?function(t,e,i){return a.setDesc(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i,n){var r=i(n);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,i,n){var r=i(n);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,i,n,r){var o=i(n),a=i(r);t.exports=function(t,e){for(var i,n=a(t),r=o.getKeys(n),s=r.length,u=0;s>u;)if(n[i=r[u++]]===e)return i}},function(t,e,i,n,r,o,a){var s=i(n),u=i(r),l=i(o);t.exports=i(a)(function(){var t=Object.assign,e={},i={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(t){i[t]=t}),7!=t({},e)[n]||Object.keys(t({},i)).join("")!=r})?function(t,e){for(var i=u(t),n=arguments,r=n.length,o=1,a=s.getKeys,h=s.getSymbols,c=s.isEnum;r>o;)for(var p,d=l(n[o++]),f=h?a(d).concat(h(d)):a(d),m=f.length,y=0;m>y;)c.call(d,p=f[y++])&&(i[p]=d[p]);return i}:Object.assign},function(t,e,i,n,r,o){var a=i(n),s=i(r),u=i(o);t.exports=function(t,e){var i=(s.Object||{})[t]||Object[t],n={};n[t]=e(i),a(a.S+a.F*u(function(){i(1)}),"Object",n)}},function(t,e,i,n){t.exports=i(n)},function(t,e,i,n,r,o,a){var s=i(n).getDesc,u=i(r),l=i(o),h=function(t,e){if(l(t),!u(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i(a)(Function.call,s(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,i){return h(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:h}},function(t,e,i,n,r,o){var a=i(n).setDesc,s=i(r),u=i(o)("toStringTag");t.exports=function(t,e,i){t&&!s(t=i?t:t.prototype,u)&&a(t,u,{configurable:!0,value:e})}},function(t,e,i,n){var r=i(n),o="__core-js_shared__",a=r[o]||(r[o]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e,i,n,r){var o=i(n),a=i(r);t.exports=function(t){return o(a(t))}},function(t,e,i,n){var r=i(n);t.exports=function(t){return Object(r(t))}},function(t,e,i,n,r,o){var a=i(n)("wks"),s=i(r),u=i(o).Symbol;t.exports=function(t){return a[t]||(a[t]=u&&u[t]||(u||s)("Symbol."+t))}},function(t,e,i,n,r){var o=i(n);o(o.S+o.F,"Object",{assign:i(r)})},function(t,e,i,n,r){var o=i(n);i(r)("getOwnPropertyDescriptor",function(t){return function(e,i){return t(o(e),i)}})},function(t,e,i,n,r){var o=i(n);i(r)("getPrototypeOf",function(t){return function(e){return t(o(e))}})},function(t,e,i,n,r){var o=i(n);i(r)("keys",function(t){return function(e){return t(o(e))}})},function(t,e,i,n,r){var o=i(n);o(o.S,"Object",{setPrototypeOf:i(r).set})},function(t,e,i,n,r,o,a,s,u,l,h,c,p,d,f,m,y,v,g,b,x,_){"use strict";var w=i(n),M=i(r),S=i(o),C=i(a),E=i(s),T=i(u),P=i(l),A=i(h),k=i(c),O=i(p),N=i(d),D=i(f),L=i(m),R=i(y),I=i(v),z=i(g),j=i(b),V=i(x),B=w.getDesc,U=w.setDesc,F=w.create,G=L.get,H=M.Symbol,W=M.JSON,X=W&&W.stringify,q=!1,Y=N("_hidden"),K=w.isEnum,Z=A("symbol-registry"),J=A("symbols"),Q="function"==typeof H,$=Object.prototype,tt=C&&P(function(){return 7!=F(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=B($,e);n&&delete $[e],U(t,e,i),n&&t!==$&&U($,e,n)}:U,et=function(t){var e=J[t]=F(H.prototype);return e._k=t,C&&q&&tt($,t,{configurable:!0,set:function(e){S(this,Y)&&S(this[Y],t)&&(this[Y][t]=!1),tt(this,t,V(1,e))}}),e},it=function(t){return"symbol"==typeof t},nt=function(t,e,i){return i&&S(J,e)?(i.enumerable?(S(t,Y)&&t[Y][e]&&(t[Y][e]=!1),i=F(i,{enumerable:V(0,!1)})):(S(t,Y)||U(t,Y,V(1,{})),t[Y][e]=!0),tt(t,e,i)):U(t,e,i)},rt=function(t,e){z(t);for(var i,n=R(e=j(e)),r=0,o=n.length;o>r;)nt(t,i=n[r++],e[i]);return t},ot=function(t,e){return void 0===e?F(t):rt(F(t),e)},at=function(t){var e=K.call(this,t);return e||!S(this,t)||!S(J,t)||S(this,Y)&&this[Y][t]?e:!0},st=function(t,e){var i=B(t=j(t),e);return!i||!S(J,e)||S(t,Y)&&t[Y][e]||(i.enumerable=!0),i},ut=function(t){for(var e,i=G(j(t)),n=[],r=0;i.length>r;)S(J,e=i[r++])||e==Y||n.push(e);return n},lt=function(t){for(var e,i=G(j(t)),n=[],r=0;i.length>r;)S(J,e=i[r++])&&n.push(J[e]);return n},ht=function(t){if(void 0!==t&&!it(t)){for(var e,i,n=[t],r=1,o=arguments;o.length>r;)n.push(o[r++]);return e=n[1],"function"==typeof e&&(i=e),(i||!I(e))&&(e=function(t,e){return i&&(e=i.call(this,t,e)),it(e)?void 0:e}),n[1]=e,X.apply(W,n)}},ct=P(function(){var t=H();return"[null]"!=X([t])||"{}"!=X({a:t})||"{}"!=X(Object(t))});Q||(H=function(){if(it(this))throw TypeError("Symbol is not a constructor");return et(O(arguments.length>0?arguments[0]:void 0))},T(H.prototype,"toString",function(){return this._k}),it=function(t){return t instanceof H},w.create=ot,w.isEnum=at,w.getDesc=st,w.setDesc=nt,w.setDescs=rt,w.getNames=L.get=ut,w.getSymbols=lt,C&&!i(_)&&T($,"propertyIsEnumerable",at,!0));var pt={"for":function(t){return S(Z,t+="")?Z[t]:Z[t]=H(t)},keyFor:function(t){return D(Z,t)},useSetter:function(){q=!0},useSimple:function(){q=!1}};w.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=N(t);pt[t]=Q?e:et(e)}),q=!0,E(E.G+E.W,{Symbol:H}),E(E.S,"Symbol",pt),E(E.S+E.F*!Q,"Object",{create:ot,defineProperty:nt,defineProperties:rt,getOwnPropertyDescriptor:st,getOwnPropertyNames:ut,getOwnPropertySymbols:lt}),W&&E(E.S+E.F*(!Q||ct),"JSON",{stringify:ht}),k(H,"Symbol"),k(Math,"Math",!0),k(M.JSON,"JSON",!0)},function(t,e,i,n,r){function o(t){return!!t&&"object"==typeof t}function a(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function s(t,e,i,n){n||(n=[]);for(var r=-1,u=t.length;++r<u;){var h=t[r];o(h)&&l(h)&&(i||p(h)||c(h))?e?s(h,e,i,n):a(n,h):i||(n[n.length]=h)}return n}function u(t){return function(e){return null==e?void 0:e[t]}}function l(t){return null!=t&&h(f(t))}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&d>=t}var c=i(n),p=i(r),d=9007199254740991,f=u("length");t.exports=s},function(t,e,i,n,r){function o(t,e){return s(t,e,u)}function a(t,e){var i={};return o(t,function(t,n,r){e(t,n,r)&&(i[n]=t)}),i}var s=i(n),u=i(r);t.exports=a},function(t,e,i,n,r){function o(t,e){return t="number"==typeof t||c.test(t)?+t:-1,e=null==e?f:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(h(t)||l(t))&&e||0;for(var i=t.constructor,n=-1,r="function"==typeof i&&i.prototype===t,u=Array(e),c=e>0;++n<e;)u[n]=n+"";for(var p in t)c&&o(p,e)||"constructor"==p&&(r||!d.call(t,p))||u.push(p);return u}var l=i(n),h=i(r),c=/^\d+$/,p=Object.prototype,d=p.hasOwnProperty,f=9007199254740991;t.exports=u},function(t,e,i,n){"use strict";var r=i(n),o=r;t.exports=o},function(t,e,i,n,r){var o=i(n),a=i(r)("toStringTag"),s="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=(e=Object(t))[a])?i:s?o(e):"Object"==(n=o(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,i,n,r,o,a,s){"use strict";var u=i(n),l=i(r),h=i(o),c={};i(a)(c,i(s)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=u.create(c,{next:l(1,i)}),h(t,e+" Iterator")}},function(t,e,i,n,r,o,a,s,u,l,h,c,p){"use strict";var d=i(n),f=i(r),m=i(o),y=i(a),v=i(s),g=i(u),b=i(l),x=i(h),_=i(c).getProto,w=i(p)("iterator"),M=!([].keys&&"next"in[].keys()),S="@@iterator",C="keys",E="values",T=function(){return this};t.exports=function(t,e,i,n,r,o,a){b(i,e,n);var s,u,l=function(t){if(!M&&t in P)return P[t];switch(t){case C:return function(){return new i(this,t)};case E:return function(){return new i(this,t)}}return function(){return new i(this,t)}},h=e+" Iterator",c=r==E,p=!1,P=t.prototype,A=P[w]||P[S]||r&&P[r],k=A||l(r);if(A){var O=_(k.call(new t));x(O,h,!0),!d&&v(P,S)&&y(O,w,T),c&&A.name!==E&&(p=!0,k=function(){return A.call(this)})}if(d&&!a||!M&&!p&&P[w]||y(P,w,k),g[e]=k,g[h]=T,r)if(s={values:c?k:l(E),keys:o?k:l(C),entries:c?l("entries"):k},a)for(u in s)u in P||m(P,u,s[u]);else f(f.P+f.F*(M||p),e,s);return s}},function(t,e,i,n,r){var o=i(n),a=i(r);t.exports=function(t){return function(e,i){var n,r,s=String(a(e)),u=o(i),l=s.length;return 0>u||u>=l?t?"":void 0:(n=s.charCodeAt(u),55296>n||n>56319||u+1===l||(r=s.charCodeAt(u+1))<56320||r>57343?t?s.charAt(u):n:t?s.slice(u,u+2):(n-55296<<10)+(r-56320)+65536)}}},function(t,e,i,n,r,o,a){var s=i(n),u=i(r)("iterator"),l=i(o);t.exports=i(a).getIteratorMethod=function(t){return void 0!=t?t[u]||t["@@iterator"]||l[s(t)]:void 0}},function(t,e,i,n,r){"use strict";var o=i(n)(!0);i(r)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=o(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i,n,r){"use strict";function o(t){return t&&t.__esModule?t["default"]:t}function a(t,e){var i=e({},t);return delete i["default"],i}function s(t,e){for(var i=Object.getOwnPropertyNames(e),n=0;n<i.length;n++){var r=i[n],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}return t}e.__esModule=!0;var u=i(n);s(e,a(u,s));var l=i(r);e.nicinabox=o(l)},function(t,e,i,n,r,o,a,s,u,l,h,c,p,d,f,m,y,v,g,b,x,_,w,M,S,C,E,T,P,A,k,O,N,D,L,R,I,z,j,V){"use strict";function B(t){return t&&t.__esModule?t["default"]:t}e.__esModule=!0;var U=i(n);e.threezerotwofour=B(U);var F=i(r);e.apathy=B(F);var G=i(o);e.ashes=B(G);var H=i(a);e.atelierDune=B(H);var W=i(s);e.atelierForest=B(W);var X=i(u);e.atelierHeath=B(X);var q=i(l);e.atelierLakeside=B(q);var Y=i(h);e.atelierSeaside=B(Y);var K=i(c);e.bespin=B(K);var Z=i(p);e.brewer=B(Z);var J=i(d);e.bright=B(J);var Q=i(f);e.chalk=B(Q);var $=i(m);e.codeschool=B($);var tt=i(y);e.colors=B(tt);var et=i(v);e["default"]=B(et);var it=i(g);e.eighties=B(it);var nt=i(b);e.embers=B(nt);var rt=i(x);e.flat=B(rt);var ot=i(_);e.google=B(ot);var at=i(w);e.grayscale=B(at);var st=i(M);e.greenscreen=B(st);var ut=i(S);e.harmonic=B(ut);var lt=i(C);e.hopscotch=B(lt);var ht=i(E);e.isotope=B(ht);var ct=i(T);e.marrakesh=B(ct);var pt=i(P);e.mocha=B(pt);var dt=i(A);e.monokai=B(dt);var ft=i(k);e.ocean=B(ft);var mt=i(O);e.paraiso=B(mt);var yt=i(N);e.pop=B(yt);var vt=i(D);e.railscasts=B(vt);var gt=i(L);e.shapeshifter=B(gt);var bt=i(R);e.solarized=B(bt);var xt=i(I);e.summerfruit=B(xt);var _t=i(z);e.tomorrow=B(_t);var wt=i(j);e.tube=B(wt);var Mt=i(V);e.twilight=B(Mt)}]));